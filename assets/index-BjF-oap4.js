import{r as d,j as e,S as It,K as Ke,U as Ut,H as Tt,b as Nt,L as dt,d as ps,C as ye,e as gs,f as bs,B as _e,P as Je,h as Et,D as Rt,i as _s,k as zs,l as vt,m as ze,W as $t,n as et,o as Qe,T as be,p as Ie,q as ct,s as tt,t as fe,u as Ce,v as wt,w as Vs,x as Gs,M as qs,y as Us,X as oe,z as Ks,E as Ys,F as Hs,G as Pt,I as Ws,J as Xs,N as fs,O as Js,Q as Qs,V as st,Y as js,Z as xt,_ as Zs,$ as ea,a0 as ta,a1 as sa,a2 as aa,a3 as ra,a4 as la,a5 as de,a6 as we,a7 as na,a8 as kt,a9 as Ns,aa as Mt,ab as Se,ac as oa,ad as ia,ae as da,af as ht,ag as Ot,ah as ca,ai as yt,aj as pt,ak as xa,al as Kt,am as Ct,an as ma,ao as ua,ap as vs,aq as ha,ar as pa,as as at,at as Ve,au as ga,av as rt,aw as ws,ax as St,ay as ba,az as Yt,aA as Ht,aB as ks,aC as We,aD as fa,aE as Wt,aF as lt,aG as ja,aH as Ae,aI as Na,aJ as va,aK as ys,aL as wa,aM as ka,aN as ya,aO as At,aP as Ft,aQ as Ca,aR as Sa,aS as Aa,aT as Da,aU as Xt,aV as Ia,aW as Ta,aX as Ea,aY as gt,aZ as Ra,a_ as $a,a$ as nt,b0 as Pa,b1 as Ma,b2 as Oa,b3 as Fa,R as Ba}from"./vendor-react-DqWsr7_N.js";import{i as La,g as _a,a as za,q as Le,l as Va,o as bt,c as xe,b as ge,d as Z,e as Cs,u as Re,w as Ss,r as Bt,s as ue,f as De,h as Ga,j as qa,G as Dt,k as As,m as Ua,n as Ka}from"./vendor-firebase-D3b_gD_8.js";import{G as Ye}from"./vendor-genai-U-FmSb1B.js";import{R as Ne,P as Ds,a as Is,C as mt,T as ve,L as ot,b as Ya,c as Ge,X as qe,Y as Ue,d as Ha,B as Lt,e as it,f as Ts,A as Wa,g as Xa,h as Ja,i as Qa,j as Za,k as er,l as Jt}from"./vendor-recharts-DLWsifO_.js";import"./vendor-utils-DKEeUt6g.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&r(x)}).observe(document,{childList:!0,subtree:!0});function o(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(i){if(i.ep)return;i.ep=!0;const f=o(i);fetch(i.href,f)}})();var z=(t=>(t.DASHBOARD="DASHBOARD",t.TRANSACTIONS="TRANSACTIONS",t.INVESTMENTS="INVESTMENTS",t.BUDGETS="BUDGETS",t.SUBSCRIPTIONS="SUBSCRIPTIONS",t.CALENDAR="CALENDAR",t.AI_ASSISTANT="AI_ASSISTANT",t.DEBTS="DEBTS",t.SHOPPING_LIST="SHOPPING_LIST",t.WEALTH_PLANNER="WEALTH_PLANNER",t.KANBAN="KANBAN",t.NOTES="NOTES",t.SETTINGS="SETTINGS",t))(z||{});const tr={apiKey:"AIzaSyAp9vMuLIhE-W8sEVpuzSWr7vvRHOu1pSc",authDomain:"nexo-bbbe5.firebaseapp.com",projectId:"nexo-bbbe5",storageBucket:"nexo-bbbe5.firebasestorage.app",messagingSenderId:"133978874707",appId:"1:133978874707:web:ba5e00d4c5e35b3c5df7a6"},Es=La(tr),me=_a(Es),K=za(Es,{ignoreUndefinedProperties:!0}),sr="finansmart_data_v2",_t=[{id:"cat_salario",name:"Sal√°rio",type:"income",color:"emerald",isDefault:!0},{id:"cat_renda_extra",name:"Renda Extra",type:"income",color:"blue",isDefault:!0},{id:"cat_investimentos_in",name:"Investimentos",type:"income",color:"indigo",isDefault:!0},{id:"cat_casa",name:"Casa",type:"expense",color:"orange",isDefault:!0},{id:"cat_mobilidade",name:"Mobilidade",type:"expense",color:"blue",isDefault:!0},{id:"cat_alimentos",name:"Alimentos",type:"expense",color:"red",isDefault:!0},{id:"cat_lazer",name:"Lazer",type:"expense",color:"purple",isDefault:!0},{id:"cat_saude",name:"Sa√∫de",type:"expense",color:"teal",isDefault:!0},{id:"cat_educacao",name:"Educa√ß√£o",type:"expense",color:"yellow",isDefault:!0},{id:"cat_pets",name:"Pets",type:"expense",color:"amber",isDefault:!0},{id:"cat_outros",name:"Outros",type:"expense",color:"slate",isDefault:!0}],Qt={transactions:[],categories:_t,investments:[],budgets:[],debts:[],shoppingList:[],shoppingBudget:0,kanbanColumns:[],notes:[],unlockedBadges:[],walletBalance:0},Rs=t=>`${sr}_${t}`,Zt=t=>{try{const a=Rs(t),o=localStorage.getItem(a);if(!o)return Qt;const r=JSON.parse(o);return r.transactions||(r.transactions=[]),r.investments||(r.investments=[]),r.unlockedBadges||(r.unlockedBadges=[]),r.debts||(r.debts=[]),r.shoppingList||(r.shoppingList=[]),r.kanbanColumns||(r.kanbanColumns=[]),r.notes||(r.notes=[]),(!r.categories||r.categories.length===0)&&(r.categories=_t),r.shoppingBudget===void 0&&(r.shoppingBudget=0),r.budgets?r.budgets=r.budgets.map(i=>({...i,isRecurring:i.isRecurring!==void 0?i.isRecurring:!0,month:i.month||void 0})):r.budgets=[],r.walletBalance===void 0&&(r.walletBalance=r.transactions.reduce((i,f)=>f.status==="paid"?i+(f.type==="income"?f.amount:-f.amount):i,0)),r}catch(a){return console.error("Failed to load data",a),Qt}},ar=(t,a)=>{try{const o=Rs(a),r=t.transactions.reduce((f,x)=>x.status==="paid"?f+(x.type==="income"?x.amount:-x.amount):f,0),i={...t,walletBalance:r};localStorage.setItem(o,JSON.stringify(i))}catch(o){console.error("Failed to save data",o)}},Te=t=>t.status==="pending"?0:t.type==="income"?t.amount:-t.amount,rr=(t,a)=>{const o=Le(xe(K,"users",t,"transactions"),bt("date","desc"),Va(300)),r=ge(o,j=>{const N=j.docs.map(b=>b.data());a({transactions:N})}),i=ge(xe(K,"users",t,"investments"),j=>{const N=j.docs.map(b=>b.data());a({investments:N})}),f=ge(xe(K,"users",t,"budgets"),j=>{const N=j.docs.map(b=>b.data());a({budgets:N})}),x=ge(xe(K,"users",t,"debts"),j=>{const N=j.docs.map(b=>b.data());a({debts:N})}),D=ge(xe(K,"users",t,"shopping_list"),j=>{const N=j.docs.map(b=>b.data());a({shoppingList:N})}),v=ge(Le(xe(K,"users",t,"kanban_columns"),bt("order")),j=>{const N=j.docs.map(b=>b.data());a({kanbanColumns:N})}),C=ge(Le(xe(K,"users",t,"notes"),bt("date","desc")),j=>{const N=j.docs.map(b=>b.data());a({notes:N})}),R=ge(xe(K,"users",t,"categories"),j=>{const N=j.docs.map(b=>b.data());N.length>0&&a({categories:N})}),y=ge(Z(K,"users",t),j=>{if(j.exists()){const N=j.data(),b={};N.unlockedBadges&&(b.unlockedBadges=N.unlockedBadges),N.wealthProfile&&(b.wealthProfile=N.wealthProfile),N.shoppingBudget!==void 0&&(b.shoppingBudget=N.shoppingBudget),N.walletBalance!==void 0&&(b.walletBalance=N.walletBalance),Object.keys(b).length>0&&a(b)}});return()=>{r(),i(),f(),x(),D(),v(),C(),R(),y()}},es=async(t,a)=>{await Bt(K,async o=>{var v;const r=Z(K,"users",t),f=((v=(await o.get(r)).data())==null?void 0:v.walletBalance)||0,x=Te(a),D=Z(K,"users",t,"transactions",a.id);o.set(D,a),o.update(r,{walletBalance:f+x})})},Ze=async(t,a,o)=>{await Bt(K,async r=>{var N;const i=Z(K,"users",t,"transactions",a),f=Z(K,"users",t),x=await r.get(i);if(!x.exists())throw new Error("Transaction not found");const D=x.data(),C=((N=(await r.get(f)).data())==null?void 0:N.walletBalance)||0,R=Te(D),y={...D,...o},j=Te(y);r.update(i,o),r.update(f,{walletBalance:C-R+j})})},lr=async(t,a)=>{await Bt(K,async o=>{var R;const r=Z(K,"users",t,"transactions",a),i=Z(K,"users",t),f=await o.get(r);if(!f.exists())throw new Error("Transaction not found");const x=f.data(),v=((R=(await o.get(i)).data())==null?void 0:R.walletBalance)||0,C=Te(x);o.delete(r),o.update(i,{walletBalance:v-C})})},nr=async t=>{const a=Le(xe(K,"users",t,"transactions")),o=await Cs(a);let r=0;return o.forEach(i=>{const f=i.data();r+=Te(f)}),await Re(Z(K,"users",t),{walletBalance:r}),r},or=async(t,a)=>{await ue(Z(K,"users",t,"investments",a.id),a)},ir=async(t,a,o)=>{await Re(Z(K,"users",t,"investments",a),o)},dr=async(t,a)=>{await De(Z(K,"users",t,"investments",a))},cr=async(t,a)=>{await ue(Z(K,"users",t,"budgets",a.id),a)},xr=async(t,a,o)=>{await Re(Z(K,"users",t,"budgets",a),o)},mr=async(t,a)=>{await De(Z(K,"users",t,"budgets",a))},ur=async(t,a)=>{await ue(Z(K,"users",t,"debts",a.id),a)},ts=async(t,a,o)=>{await Re(Z(K,"users",t,"debts",a),o)},hr=async(t,a)=>{await De(Z(K,"users",t,"debts",a))},pr=async(t,a)=>{await ue(Z(K,"users",t,"shopping_list",a.id),a)},gr=async(t,a,o)=>{await Re(Z(K,"users",t,"shopping_list",a),o)},br=async(t,a)=>{await De(Z(K,"users",t,"shopping_list",a))},fr=async t=>{const a=Le(xe(K,"users",t,"shopping_list")),o=await Cs(a),r=Ss(K);o.docs.forEach(i=>{r.delete(i.ref)}),await r.commit()},jr=async(t,a)=>{await ue(Z(K,"users",t),{shoppingBudget:a},{merge:!0})},Nr=async(t,a)=>{await ue(Z(K,"users",t,"kanban_columns",a.id),a)},vr=async(t,a)=>{await De(Z(K,"users",t,"kanban_columns",a))},wr=async(t,a)=>{await ue(Z(K,"users",t,"notes",a.id),a)},kr=async(t,a,o)=>{await Re(Z(K,"users",t,"notes",a),o)},yr=async(t,a)=>{await De(Z(K,"users",t,"notes",a))},Cr=async(t,a)=>{await ue(Z(K,"users",t,"categories",a.id),a)},Sr=async(t,a)=>{await De(Z(K,"users",t,"categories",a))},Ar=async(t,a,o)=>{o.includes(a)||await ue(Z(K,"users",t),{unlockedBadges:[...o,a]},{merge:!0})},Dr=async(t,a)=>{await ue(Z(K,"users",t),{wealthProfile:a},{merge:!0})},ss=async(t,a)=>{const o=Ss(K);let r=0;a.transactions.forEach(D=>{const v=Z(K,"users",t,"transactions",D.id);o.set(v,D),r+=Te(D)}),a.investments.forEach(D=>{const v=Z(K,"users",t,"investments",D.id);o.set(v,D)}),a.budgets.forEach(D=>{const v=Z(K,"users",t,"budgets",D.id);o.set(v,D)}),a.debts.forEach(D=>{const v=Z(K,"users",t,"debts",D.id);o.set(v,D)}),a.shoppingList.forEach(D=>{const v=Z(K,"users",t,"shopping_list",D.id);o.set(v,D)}),a.kanbanColumns.forEach(D=>{const v=Z(K,"users",t,"kanban_columns",D.id);o.set(v,D)}),a.notes.forEach(D=>{const v=Z(K,"users",t,"notes",D.id);o.set(v,D)}),(a.categories&&a.categories.length>0?a.categories:_t).forEach(D=>{const v=Z(K,"users",t,"categories",D.id);o.set(v,D)});const f=Z(K,"users",t),x={unlockedBadges:a.unlockedBadges,walletBalance:r,shoppingBudget:a.shoppingBudget||0};a.wealthProfile&&(x.wealthProfile=a.wealthProfile),o.set(f,x,{merge:!0}),await o.commit()},as=["Casa","Mobilidade","Alimentos","Lazer","Pets","Outros"],ut="nexo_user_api_key",$e=()=>{const t=localStorage.getItem(ut);return t||null},rs=t=>{localStorage.setItem(ut,t)},Ir=()=>{localStorage.removeItem(ut)},ls=()=>!!localStorage.getItem(ut),Tr=async t=>{var i;const a=$e();if(!a)return[];const o=new Ye({apiKey:a}),r=`
    Voc√™ √© um assistente de compras inteligente.
    O usu√°rio vai pedir uma receita, evento ou lista gen√©rica.
    Gere uma lista de compras JSON com ingredientes/itens.
    
    CATEGORIAS PERMITIDAS: 'Hortifruti', 'Carnes', 'Latic√≠nios', 'Mercearia', 'Bebidas', 'Limpeza', 'Higiene', 'Padaria', 'Outros'.

    RESPONDA APENAS JSON V√ÅLIDO neste formato:
    [
      { "name": "Nome do item", "quantity": 1, "category": "Categoria" }
    ]
  `;try{const x=((i=(await o.models.generateContent({model:"gemini-3-flash-preview",contents:`Gere a lista para: ${t}`,config:{systemInstruction:r,responseMimeType:"application/json"}})).text)==null?void 0:i.trim())||"[]";return JSON.parse(x)}catch(f){return console.error("Erro ao gerar lista:",f),[]}},Er=async t=>{var i;const a=$e();if(!a)return"Outros";const o=new Ye({apiKey:a}),r=`Classifique "${t}" em: ${as.join(", ")}. Responda S√ì a categoria.`;try{const x=((i=(await o.models.generateContent({model:"gemini-3-flash-preview",contents:r})).text)==null?void 0:i.trim())||"Outros";return as.includes(x)?x:"Outros"}catch{return"Outros"}},Rr=async t=>{var x,D,v;const a=$e();if(!a)return{text:"Configure sua API Key nas prefer√™ncias para receber recomenda√ß√µes de investimentos.",sources:[]};const o=new Ye({apiKey:a}),r=t.map(C=>`${C.name} (${C.type}): R$ ${C.amount}`).join(", "),f=`
    Voc√™ √© um consultor de investimentos s√™nior especialista no mercado brasileiro.
    Carteira Atual: R$ ${t.reduce((C,R)=>C+R.amount,0)} (${r||"Vazia"}).

    TAREFA:
    Encontre oportunidades REAIS e ATUAIS para diversifica√ß√£o.
    
    FORMATO OBRIGAT√ìRIO (Siga estritamente):
    
    ### üõ°Ô∏è Baixo Risco
    1. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]
    2. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]
    3. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]

    ### ‚öñÔ∏è M√©dio Risco
    (3 op√ß√µes no mesmo formato)

    ### üöÄ Alto Risco
    (3 op√ß√µes no mesmo formato)

    ---SECTION-BREAK---

    ### üß† An√°lise T√©cnica
    (Sua an√°lise detalhada aqui sobre cen√°rio macro, infla√ß√£o e porqu√™s)
  `;try{const C=await o.models.generateContent({model:"gemini-3-flash-preview",contents:f,config:{tools:[{googleSearch:{}}]}}),R=[],y=(v=(D=(x=C.candidates)==null?void 0:x[0])==null?void 0:D.groundingMetadata)==null?void 0:v.groundingChunks;y&&y.forEach(N=>{N.web&&R.push({title:N.web.title||"Fonte Web",uri:N.web.uri||"#"})});const j=R.filter((N,b,O)=>O.findIndex(M=>M.uri===N.uri)===b);return{text:C.text||"N√£o foi poss√≠vel gerar recomenda√ß√µes no momento.",sources:j}}catch(C){console.warn("Google Search Grounding failed, retrying without search...",C);try{return{text:((await o.models.generateContent({model:"gemini-3-flash-preview",contents:f+`

(Nota: A pesquisa em tempo real falhou. Use seu conhecimento geral.)`})).text||"Sem resposta.")+`

‚ö†Ô∏è *Nota: O acesso √† pesquisa em tempo real falhou. As taxas mencionadas podem ser estimativas baseadas no conhecimento geral do modelo.*`,sources:[]}}catch(R){return console.error("Investment Advice Error (Fallback):",R),{text:`Erro ao consultar IA: ${R.message||"Erro desconhecido"}. Verifique sua chave API ou tente novamente mais tarde.`,sources:[]}}}},$r=async(t,a,o)=>{var v;const r=$e();if(!r)return null;const i=new Ye({apiKey:r}),f=new Map;t.forEach(C=>{f.set(C.type,(f.get(C.type)||0)+C.amount)});const x=Array.from(f.entries()).map(([C,R])=>`${C}: R$ ${R.toFixed(2)}`).join(", "),D=`
      Atue como um Gestor de Private Banking. O cliente tem ${o} anos e perfil de risco: ${a.toUpperCase()}.
      
      Carteira Atual Agregada: ${x||"R$ 0,00 (Vazia)"}

      Sua tarefa √© analisar a aloca√ß√£o de ativos e sugerir o rebalanceamento ideal baseado nas melhores pr√°ticas de Wealth Management (como Bridgewater/Arta) adaptado ao Brasil.
      
      RETORNE APENAS JSON V√ÅLIDO. N√ÉO USE MARKDOWN. Siga este esquema:
      {
        "analysisText": "Par√°grafo curto (max 300 chars) com sua vis√£o macro sobre a carteira do cliente.",
        "currentAllocation": [ {"name": "Categoria", "value": %_atual (0-100)} ],
        "suggestedAllocation": [ {"name": "Categoria", "value": %_ideal (0-100)} ],
        "actionItems": [
           {"title": "A√ß√£o T√°tica", "type": "buy" | "sell" | "hold", "description": "Explica√ß√£o curta"}
        ]
      }
      
      Regras:
      1. 'suggestedAllocation' deve somar 100.
      2. Categorias sugeridas podem ser: 'Renda Fixa P√≥s', 'Renda Fixa Pr√©/IPCA', 'A√ß√µes Brasil', 'A√ß√µes Global', 'FIIs', 'Cripto/Alternativos', 'Reserva'.
      3. Se a carteira estiver vazia, sugira a aloca√ß√£o ideal do zero.
    `;try{const R=((v=(await i.models.generateContent({model:"gemini-3-flash-preview",contents:D,config:{responseMimeType:"application/json"}})).text)==null?void 0:v.trim())||"{}";return JSON.parse(R)}catch(C){return console.error("Wealth Analysis Error:",C),null}};async function*Pr(t,a,o){const r=$e();if(!r){yield"Por favor, configure sua API Key nas prefer√™ncias do menu.";return}const i=new Ye({apiKey:r}),f=o.transactions.filter(E=>E.type==="income").reduce((E,h)=>E+h.amount,0),x=o.transactions.filter(E=>E.type==="expense").reduce((E,h)=>E+h.amount,0),D=o.investments.reduce((E,h)=>E+h.amount,0),v=o.debts.reduce((E,h)=>E+h.currentAmount,0),C=o.transactions.sort((E,h)=>new Date(h.date).getTime()-new Date(E.date).getTime()).slice(0,30).map(E=>`- ${E.date}: ${E.description} (${E.type}) R$ ${E.amount} [${E.category}] Status: ${E.status}`).join(`
`),R=o.investments.map(E=>`- ${E.name} (${E.type}): R$ ${E.amount} (Meta: R$ ${E.targetAmount})`).join(`
`),y=o.debts.map(E=>`- ${E.creditor}: R$ ${E.currentAmount} (Status: ${E.status}, Vence: ${E.dueDate})`).join(`
`);let j="Neutro";v>D*2?j="Endividado (Foco em quita√ß√£o)":D>x*6?j="Investidor (Foco em otimiza√ß√£o)":f<x&&(j="D√©ficit (Foco em corte de gastos)");const N=`
    RELAT√ìRIO FINANCEIRO DO USU√ÅRIO (Contexto Interno):
    
    1. PERFIL IDENTIFICADO: ${j}
    2. RESUMO:
       - Renda Total: R$ ${f.toFixed(2)}
       - Despesas Totais: R$ ${x.toFixed(2)}
       - Saldo: R$ ${(f-x).toFixed(2)}
       - Total Investido: R$ ${D.toFixed(2)}
       - D√≠vidas Ativas: R$ ${v.toFixed(2)}
    3. √öLTIMAS TRANSA√á√ïES:
    ${C}
    4. INVESTIMENTOS:
    ${R}
    5. D√çVIDAS:
    ${y}
  `,b=`
    Voc√™ √© o NEXO AI, um assistente financeiro pessoal de elite.
    OBJETIVO: Ajudar o usu√°rio a gerenciar suas finan√ßas com base no perfil identificado: ${j}.
    CONTEXTO: ${N}
    DIRETRIZES:
    - Responda de forma concisa e amig√°vel.
    - Se o usu√°rio perguntar sobre o saldo, gastos espec√≠ficos ou investimentos, consulte o relat√≥rio acima.
    - Seja proativo: se vir uma d√≠vida vencendo ou gasto alto, pode alertar sutilmente.
    - Use Markdown para formatar valores e listas.
  `,O=i.chats.create({model:"gemini-3-flash-preview",config:{systemInstruction:b}}),_=`
    [Hist√≥rico Recente]:
    ${a.slice(-6).map(E=>`${E.role==="user"?"Usu√°rio":"Modelo"}: ${E.content}`).join(`
`)}
    
    [Nova Mensagem]: ${t}
  `;try{const E=await O.sendMessageStream({message:_});for await(const h of E)h.text&&(yield h.text)}catch(E){console.error(E),yield"Erro de conex√£o com o c√©rebro digital. Verifique sua Chave de API."}}const Mr=({onGuestLogin:t})=>{const[a,o]=d.useState(!1),[r,i]=d.useState(""),[f,x]=d.useState(""),[D,v]=d.useState(""),[C,R]=d.useState(""),[y,j]=d.useState(!1),[N,b]=d.useState(!1),[O,M]=d.useState(!1),_="028.268.001-24",E="Alexandre Magno S. Linhares";d.useEffect(()=>{const A=me.app.options.apiKey;(!A||A==="SUA_API_KEY_AQUI"||A.includes("SUA_API_KEY"))&&b(!0)},[]);const h=A=>{console.error(A);let q="Erro ao autenticar. Verifique suas credenciais.";A.code==="auth/email-already-in-use"&&(q="Este e-mail j√° est√° em uso."),A.code==="auth/invalid-email"&&(q="E-mail inv√°lido."),A.code==="auth/weak-password"&&(q="A senha deve ter pelo menos 6 caracteres."),(A.code==="auth/user-not-found"||A.code==="auth/wrong-password")&&(q="E-mail ou senha incorretos."),A.code==="auth/invalid-credential"&&(q="Credenciais inv√°lidas."),A.code==="auth/invalid-api-key"&&(q="Chave de API inv√°lida.",b(!0)),A.code==="auth/unauthorized-domain"?(q="Dom√≠nio n√£o autorizado pelo Firebase.",R(window.location.hostname)):R(""),v(q)},B=async A=>{A.preventDefault(),v(""),R(""),j(!0);try{a?await Ga(me,r,f):await qa(me,r,f)}catch(q){h(q)}finally{j(!1)}},I=async()=>{v(""),R(""),j(!0);const A=new Dt;A.addScope("https://www.googleapis.com/auth/calendar");try{await As(me,A)}catch(q){h(q)}finally{j(!1)}},U=()=>{navigator.clipboard.writeText(C),alert("Dom√≠nio copiado!")},W=()=>{navigator.clipboard.writeText(_),M(!0),setTimeout(()=>M(!1),2e3)};return N?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden border border-slate-700 animate-scale-in flex flex-col md:flex-row",children:[e.jsxs("div",{className:"bg-indigo-600 p-8 text-white md:w-1/3 flex flex-col items-center justify-center text-center",children:[e.jsx(It,{className:"w-16 h-16 mb-4 opacity-80"}),e.jsx("h2",{className:"text-xl font-bold",children:"Configura√ß√£o Necess√°ria"}),e.jsx("p",{className:"text-indigo-100 text-sm mt-2",children:"Para usar o modo online, voc√™ precisa conectar seu Firebase."})]}),e.jsxs("div",{className:"p-8 md:w-2/3",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Siga estes passos:"}),e.jsxs("div",{className:"space-y-4 text-sm text-slate-600 dark:text-slate-300",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Crie o Banco de Dados"}),e.jsxs("p",{children:["No Console do Firebase, v√° em ",e.jsx("strong",{children:"Firestore Database"}),', clique em "Criar banco de dados", escolha a regi√£o (nam5) e clique em "Iniciar no modo de produ√ß√£o".']})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Ative o Login"}),e.jsxs("p",{children:["V√° em ",e.jsx("strong",{children:"Authentication"}),' > Sign-in method e ative "E-mail/senha".']})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Copie as Chaves"}),e.jsxs("p",{children:['V√° nas Configura√ß√µes do Projeto (‚öôÔ∏è), role at√© "Seus aplicativos" e copie o objeto ',e.jsx("code",{children:"firebaseConfig"}),"."]})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-3 rounded-lg text-xs",children:[e.jsxs("p",{className:"font-bold text-amber-700 dark:text-amber-400 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-3 h-3"})," A√ß√£o Necess√°ria no C√≥digo"]}),e.jsxs("p",{className:"mt-1",children:["Abra o arquivo ",e.jsx("code",{children:"services/firebase.ts"})," e substitua ",e.jsx("code",{children:'"SUA_API_KEY_AQUI"'})," pelos dados reais que voc√™ copiou."]})]})]}),e.jsxs("button",{onClick:t,className:"w-full mt-6 py-3 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ut,{className:"w-4 h-4"}),"Pular e Usar Modo Offline (Convidado)"]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900 flex font-sans",children:[e.jsxs("div",{className:"w-full md:w-[45%] lg:w-[40%] flex flex-col justify-center p-8 md:p-12 lg:p-16 relative overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-10",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg shadow-lg shadow-indigo-500/30",children:e.jsx(Tt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"NEXO"}),e.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-widest",children:"Financial Hub"})]})]}),e.jsxs("div",{className:"max-w-sm w-full mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:a?"Criar Conta":"Acesse sua Conta"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:a?"Comece a controlar suas finan√ßas hoje.":"Bem-vindo de volta! Por favor, insira seus dados."}),D&&e.jsxs("div",{className:"mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border-l-4 border-rose-500 rounded-r-lg flex flex-col gap-1 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 text-rose-700 dark:text-rose-400 font-semibold text-sm",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:D})]}),C&&e.jsxs("div",{className:"mt-2 pl-6",children:[e.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Dom√≠nio n√£o autorizado:"}),e.jsx("code",{className:"text-xs bg-white px-1 py-0.5 rounded border border-rose-200 block mb-2",children:C}),e.jsx("button",{onClick:U,className:"text-xs underline text-rose-600",children:"Copiar Dom√≠nio"})]})]}),e.jsxs("form",{onSubmit:B,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5",children:"E-mail"}),e.jsx("input",{type:"email",required:!0,value:r,onChange:A=>i(A.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-800 dark:text-white outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all placeholder:text-slate-400",placeholder:"nome@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5",children:"Senha"}),e.jsx("input",{type:"password",required:!0,minLength:6,value:f,onChange:A=>x(A.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-800 dark:text-white outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all placeholder:text-slate-400",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),!a&&e.jsx("div",{className:"flex justify-end mt-1",children:e.jsx("button",{type:"button",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"Esqueceu a senha?"})})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full py-3.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-2",children:y?e.jsx(dt,{className:"w-5 h-5 animate-spin"}):a?"Cadastrar":"Entrar"})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white dark:bg-slate-900 text-slate-400 font-medium",children:"ou continue com"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:I,disabled:y,className:"flex items-center justify-center gap-2 px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors font-medium text-slate-700 dark:text-slate-300 text-sm",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",color:"#4285F4"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",color:"#34A853"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",color:"#FBBC05"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",color:"#EA4335"})]}),"Google"]}),e.jsxs("button",{type:"button",onClick:t,className:"flex items-center justify-center gap-2 px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors font-medium text-slate-700 dark:text-slate-300 text-sm",children:[e.jsx(Ut,{className:"w-5 h-5 text-slate-500"}),"Convidado"]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:[a?"J√° √© cliente?":"Ainda n√£o tem conta?",e.jsx("button",{onClick:()=>o(!a),className:"ml-1 text-indigo-600 dark:text-indigo-400 font-bold hover:underline",children:a?"Fazer Login":"Cadastre-se gr√°tis"})]})}),e.jsx("div",{className:"mt-10 mb-4",children:e.jsxs("div",{onClick:W,className:"group relative overflow-hidden bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800 dark:to-indigo-900/20 border-2 border-dashed border-indigo-200 dark:border-indigo-700/50 hover:border-indigo-400 dark:hover:border-indigo-500 rounded-xl p-4 cursor-pointer hover:shadow-xl hover:shadow-indigo-500/10 transition-all transform hover:-translate-y-1",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-indigo-600 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl shadow-sm z-10",children:"Apoie o Dev ‚òï"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-0",children:[e.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-full group-hover:scale-110 transition-transform shadow-inner",children:e.jsx(ps,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400 fill-indigo-200 dark:fill-indigo-900"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-indigo-800 dark:text-indigo-300 uppercase tracking-wide mb-1",children:"Gostou? Mande um Pix!"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/50 dark:bg-black/20 p-1.5 rounded-lg border border-indigo-100 dark:border-indigo-800/50",children:[e.jsx("p",{className:"text-sm font-mono font-bold text-slate-700 dark:text-slate-200 truncate select-all",children:_}),e.jsx("span",{className:"text-[9px] bg-indigo-200 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-200 px-1.5 rounded font-sans font-bold",children:"Chave CPF"})]})]}),e.jsx("div",{className:"text-indigo-300 group-hover:text-indigo-600 transition-colors",children:O?e.jsx(ye,{className:"w-6 h-6 text-emerald-500"}):e.jsx(gs,{className:"w-6 h-6"})})]}),O&&e.jsx("div",{className:"absolute inset-0 bg-indigo-900/90 backdrop-blur-sm flex items-center justify-center text-white font-bold rounded-xl animate-fade-in z-20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5 text-emerald-400"}),"Chave Pix Copiada!"]})}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-2 text-center opacity-60 group-hover:opacity-100 transition-opacity",children:E})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("a",{href:"https://www.linkedin.com/in/alemagnobr/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-slate-400 hover:text-indigo-500 transition-colors inline-flex items-center gap-1",children:[e.jsx(bs,{className:"w-3 h-3"})," Alexandre Magno"]})})]})]}),e.jsxs("div",{className:"hidden md:flex flex-1 relative bg-[#4c35de] overflow-hidden items-center justify-center p-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-white opacity-5 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/3"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-purple-400 opacity-10 rounded-full blur-[80px] translate-y-1/3 -translate-x-1/4"}),e.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsxs("div",{className:"relative z-10 w-full max-w-lg",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 shadow-2xl mb-12 transform hover:scale-[1.02] transition-transform duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/10 pb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs font-semibold uppercase",children:"Performance Visualisation"}),e.jsx("p",{className:"text-white text-lg font-bold mt-1",children:"Crescimento Patrimonial"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-300 rounded text-xs font-bold",children:"+6.9%"}),e.jsx("div",{className:"p-1 bg-white/10 rounded text-white/70",children:e.jsx(_e,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"h-48 flex items-end justify-between gap-3 px-2",children:[35,55,45,70,60,85,75].map((A,q)=>e.jsxs("div",{className:"w-full bg-white/10 rounded-t-lg relative group overflow-hidden",style:{height:"100%"},children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-indigo-400 to-purple-300 rounded-t-lg transition-all duration-1000 group-hover:opacity-90",style:{height:`${A}%`}}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-white/30",style:{bottom:`${A}%`}})]},q))}),e.jsxs("div",{className:"flex justify-between mt-3 text-xs text-white/40 font-medium px-2",children:[e.jsx("span",{children:"Jan"}),e.jsx("span",{children:"Fev"}),e.jsx("span",{children:"Mar"}),e.jsx("span",{children:"Abr"}),e.jsx("span",{children:"Mai"}),e.jsx("span",{children:"Jun"}),e.jsx("span",{children:"Jul"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Bem-vindo de volta"}),e.jsxs("p",{className:"text-indigo-200 text-lg leading-relaxed",children:["Gerencie suas finan√ßas com intelig√™ncia, ",e.jsx("br",{}),"seguran√ßa e clareza total."]})]})]}),e.jsx("div",{className:"absolute top-8 right-8",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 backdrop-blur flex items-center justify-center border border-white/20 text-xl shadow-lg cursor-default",children:"üáßüá∑"})})]})]})},ns=[{id:"first_invest",name:"Investidor Iniciante",description:"Realizou o primeiro investimento.",icon:"üå±",condition:t=>t.investments.length>0,getProgress:t=>t.investments.length>0?100:0},{id:"controlled",name:"No Controle",description:"Tem mais receitas que despesas no m√™s.",icon:"‚öñÔ∏è",condition:t=>{const a=t.transactions.filter(r=>r.type==="income").reduce((r,i)=>r+i.amount,0),o=t.transactions.filter(r=>r.type==="expense").reduce((r,i)=>r+i.amount,0);return a>o&&a>0},getProgress:t=>{const a=t.transactions.filter(r=>r.type==="income").reduce((r,i)=>r+i.amount,0),o=t.transactions.filter(r=>r.type==="expense").reduce((r,i)=>r+i.amount,0);return a===0?0:a>o?100:Math.min(99,a/o*100)}},{id:"saver",name:"Poupador",description:"Acumulou mais de R$ 5.000 em investimentos.",icon:"üí∞",condition:t=>t.investments.reduce((a,o)=>a+o.amount,0)>=5e3,getProgress:t=>Math.min(100,t.investments.reduce((a,o)=>a+o.amount,0)/5e3*100)},{id:"diversified",name:"Mente Diversificada",description:"Investiu em 3 ou mais categorias diferentes.",icon:"üé®",condition:t=>new Set(t.investments.map(o=>o.type)).size>=3,getProgress:t=>{const a=new Set(t.investments.map(o=>o.type));return Math.min(100,a.size/3*100)}},{id:"debt_free",name:"Zero Pend√™ncias",description:"N√£o possui nenhuma conta pendente.",icon:"‚úÖ",condition:t=>{const a=t.transactions.some(r=>r.type==="expense"),o=t.transactions.filter(r=>r.type==="expense"&&r.status==="pending");return a&&o.length===0},getProgress:t=>{const a=t.transactions.filter(r=>r.type==="expense");if(a.length===0)return 0;const o=a.filter(r=>r.status==="paid").length;return Math.min(100,o/a.length*100)}},{id:"goal_hitter",name:"Na Mosca",description:"Atingiu 100% da meta de um investimento.",icon:"üéØ",condition:t=>t.investments.some(a=>a.targetAmount>0&&a.amount>=a.targetAmount),getProgress:t=>{const a=t.investments.map(o=>o.targetAmount>0?o.amount/o.targetAmount*100:0);return Math.min(100,Math.max(0,...a))}},{id:"club_10k",name:"Clube dos 10k",description:"Patrim√¥nio total superou R$ 10.000.",icon:"üíé",condition:t=>{const a=t.investments.reduce((r,i)=>r+i.amount,0),o=t.transactions.filter(r=>r.type==="income").reduce((r,i)=>r+i.amount,0)-t.transactions.filter(r=>r.type==="expense"&&r.status==="paid").reduce((r,i)=>r+i.amount,0);return a+o>=1e4},getProgress:t=>{const a=t.investments.reduce((r,i)=>r+i.amount,0),o=t.transactions.filter(r=>r.type==="income").reduce((r,i)=>r+i.amount,0)-t.transactions.filter(r=>r.type==="expense"&&r.status==="paid").reduce((r,i)=>r+i.amount,0);return Math.min(100,(a+o)/1e4*100)}}],Or=(t,a,o)=>{const r=o.toISOString().slice(0,7),i=t.find(f=>f.category===a&&f.month===r);return i||t.find(f=>f.category===a&&f.isRecurring)},os=({data:t,privacyMode:a,onUnlockBadge:o,onNavigate:r})=>{const[i,f]=d.useState(()=>{const s=new Date;s.setMonth(s.getMonth()-5);const l=String(s.getMonth()+1).padStart(2,"0");return`${s.getFullYear()}-${l}`}),[x,D]=d.useState("flow"),v=d.useMemo(()=>{const s=new Date().getHours();return s<12?"Bom dia":s<18?"Boa tarde":"Boa noite"},[]);d.useEffect(()=>{ns.forEach(s=>{!t.unlockedBadges.includes(s.id)&&s.condition(t)&&o(s.id)})},[t,o]);const C=d.useMemo(()=>{const s=[],l=new Date,p=l.getMonth(),w=l.getFullYear(),$=Array.from(new Set(t.budgets.map(k=>k.category)));return l.getDate()<=25&&$.forEach(k=>{const L=Or(t.budgets,k,l);if(!L)return;const c=t.transactions.filter(S=>S.type==="expense"&&S.category===k&&new Date(S.date).getMonth()===p&&new Date(S.date).getFullYear()===w).reduce((S,G)=>S+G.amount,0);c>=L.limit*.8&&c<L.limit?s.push({title:`Aten√ß√£o: ${k}`,message:`Voc√™ j√° usou ${(c/L.limit*100).toFixed(0)}% do or√ßamento e ainda √© dia ${l.getDate()}. Cuidado!`,type:"warning"}):c>=L.limit&&s.push({title:`Limite Excedido: ${k}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),s},[t.budgets,t.transactions]),R=d.useMemo(()=>t.notes.sort((s,l)=>s.isPinned!==l.isPinned?s.isPinned?-1:1:new Date(l.date).getTime()-new Date(s.date).getTime()).slice(0,3),[t.notes]),y=s=>a?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,j=t.transactions.filter(s=>s.type==="income").reduce((s,l)=>s+l.amount,0),N=t.transactions.filter(s=>s.type==="expense").reduce((s,l)=>s+l.amount,0),b=t.transactions.filter(s=>s.type==="expense"&&s.status==="pending").reduce((s,l)=>s+l.amount,0),O=t.transactions.filter(s=>s.status==="paid").reduce((s,l)=>s+(l.type==="income"?l.amount:-l.amount),0),M=t.transactions.length===0?0:t.transactions.length<300?O:t.walletBalance!==void 0?t.walletBalance:O,_=t.transactions.filter(s=>s.status==="pending"&&s.type==="income").reduce((s,l)=>s+l.amount,0),E=N-b,h=t.investments.reduce((s,l)=>s+l.amount,0),B=d.useMemo(()=>t.transactions.filter(l=>l.type==="expense"&&l.status==="pending").sort((l,p)=>new Date(l.date).getTime()-new Date(p.date).getTime()).slice(0,3),[t.transactions]),I=d.useMemo(()=>[...t.investments].sort((s,l)=>l.amount-s.amount).slice(0,3),[t.investments]),U=d.useMemo(()=>{const s=N>0?N:j*.5||1e3;return M/s},[M,N,j]),{healthScore:W,scoreLabel:A,scoreColor:q,factors:H}=d.useMemo(()=>{let s=0;const l=[],p=J=>{const Q=new Date(J);return(new Date().getTime()-Q.getTime())/(1e3*60*60*24*365.25)>=5},w=t.debts.filter(J=>(J.status==="open"||J.status==="negotiating")&&!p(J.dueDate)),$=w.length>0;$?(s+=200,l.push({text:`Negativado: ${w.length} d√≠vidas`,type:"bad"})):(s+=350,l.push({text:"Nome Limpo",type:"good"}));const k=N>0?N:1e3,L=h/k;L>=6?(s+=200,l.push({text:"Reserva Robusta",type:"good"})):L>=1?(s+=100,l.push({text:"Reserva Iniciada",type:"neutral"})):l.push({text:"Sem Reserva",type:"bad"});const c=j-N,S=j>0?c/j:0;S>=.2?(s+=150,l.push({text:"Poupador (20%+)",type:"good"})):S<0&&(s-=50,l.push({text:"D√©ficit Mensal",type:"bad"})),M>=b?s+=150:(s-=100,l.push({text:"Risco de Calote",type:"bad"})),$&&(s=Math.min(s,550)),s=Math.max(0,Math.min(1e3,Math.round(s)));let G="",T="";return s>=850?(G="Elite",T="text-emerald-500"):s>=700?(G="Excelente",T="text-emerald-600"):s>=500?(G="Regular",T="text-amber-500"):s>=300?(G="Ruim",T="text-orange-500"):(G="Cr√≠tico",T="text-rose-600"),{healthScore:s,scoreLabel:G,scoreColor:T,factors:l}},[t.debts,j,N,b,M,h]),Y=d.useMemo(()=>{const s=new Map,[l,p]=i.split("-").map(Number),w=new Date(l,p-1,1),$=new Date;for(;w<=$||w.getMonth()===$.getMonth()&&w.getFullYear()===$.getFullYear();){const k=w.getFullYear(),L=String(w.getMonth()+1).padStart(2,"0");s.set(`${k}-${L}`,0),w.setMonth(w.getMonth()+1)}return t.transactions.forEach(k=>{if(k.type==="expense"){const L=k.date.slice(0,7);s.has(L)&&s.set(L,(s.get(L)||0)+k.amount)}}),Array.from(s.entries()).map(([k,L])=>{const[c,S]=k.split("-").map(Number);return{name:new Date(c,S-1,1).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}),amount:L,fullDate:k}})},[t.transactions,i]),X=d.useMemo(()=>{const s=new Map;for(let l=5;l>=0;l--){const p=new Date;p.setMonth(p.getMonth()-l),s.set(p.toISOString().slice(0,7),{income:0,expense:0})}return t.transactions.forEach(l=>{const p=l.date.slice(0,7);if(s.has(p)){const w=s.get(p);l.type==="income"?w.income+=l.amount:w.expense+=l.amount}}),Array.from(s.entries()).map(([l,p])=>{const[w,$]=l.split("-");return{name:new Date(parseInt(w),parseInt($)-1,2).toLocaleDateString("pt-BR",{month:"short"}),Receitas:p.income,Despesas:p.expense}})},[t.transactions]),P=[{name:"Saldo Livre",value:Math.max(0,M),color:"#10b981"},{name:"Contas Pendentes",value:b,color:"#ef4444"},{name:"Investido",value:h,color:"#3b82f6"}].filter(s=>s.value>0),V=()=>{const s=`data:text/csv;charset=utf-8,Data,Descricao,Categoria,Tipo,Valor,Status
`+t.transactions.map(w=>`${w.date},${w.description},${w.category},${w.type},${w.amount},${w.status}`).join(`
`),l=encodeURI(s),p=document.createElement("a");p.setAttribute("href",l),p.setAttribute("download","finansmart_relatorio.csv"),document.body.appendChild(p),p.click(),document.body.removeChild(p)},u=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(_e,{className:"w-5 h-5 text-indigo-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Fluxo de Caixa (6 Meses)"})]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Lt,{data:X,margin:{top:10,right:10,bottom:20,left:0},children:[e.jsx(Ge,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(qe,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},dy:10}),e.jsx(Ue,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:s=>`R$${s>=1e3?(s/1e3).toFixed(0)+"k":s}`,width:60}),e.jsx(ve,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:s=>[a?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR")}`,""]}),e.jsx(ot,{iconType:"circle"}),e.jsx(it,{dataKey:"Receitas",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(it,{dataKey:"Despesas",fill:"#f43f5e",radius:[4,4,0,0]})]})})})]}),n=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-indigo-500"}),"Distribui√ß√£o de Patrim√¥nio"]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Ds,{children:[e.jsx(Is,{data:P,cx:"50%",cy:"50%",innerRadius:80,outerRadius:110,paddingAngle:5,dataKey:"value",children:P.map((s,l)=>e.jsx(mt,{fill:s.color},`cell-${l}`))}),e.jsx(ve,{formatter:s=>a?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR")}`}),e.jsx(ot,{verticalAlign:"bottom",height:36})]})})})]}),m=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-rose-500"}),"Tend√™ncia de Despesas"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx(fe,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"In√≠cio:"}),e.jsx("input",{type:"month",value:i,onChange:s=>f(s.target.value),className:"bg-transparent text-sm text-slate-700 dark:text-slate-200 focus:outline-none font-medium"})]})]}),e.jsx("div",{className:"h-[200px] w-full",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Ya,{data:Y,margin:{top:10,right:10,bottom:25,left:10},children:[e.jsx(Ge,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(qe,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},dy:10,padding:{left:10,right:10}}),e.jsx(Ue,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:s=>`R$${s>=1e3?(s/1e3).toFixed(0)+"k":s}`,width:60}),e.jsx(ve,{cursor:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"5 5"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:s=>[a?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Despesas"],labelStyle:{color:"#64748b",marginBottom:"0.25rem"}}),e.jsx(Ha,{type:"monotone",dataKey:"amount",stroke:"#f43f5e",strokeWidth:3,dot:{r:4,fill:"#f43f5e",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,stroke:"#f43f5e",strokeWidth:2,fill:"#fff"},isAnimationActive:!1})]})})})]});return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[C.length>0&&e.jsx("div",{className:"space-y-2",children:C.map((s,l)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Et,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:s.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:s.message})]})]},l))}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 w-full md:flex-1 min-w-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white whitespace-nowrap",children:[v,"!"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Vis√£o geral das suas finan√ßas."})]}),e.jsx("div",{className:"flex-1 flex items-center gap-2 px-4 py-2 sm:border-l sm:border-slate-300 dark:sm:border-slate-600 overflow-x-auto no-scrollbar mask-gradient w-full",children:ns.map(s=>{const l=t.unlockedBadges.includes(s.id),p=s.getProgress(t);return e.jsxs("div",{className:"group relative flex-shrink-0 cursor-help",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:`text-xl md:text-2xl transition-all duration-300 block ${l?"filter-none opacity-100 scale-100":"grayscale opacity-30 scale-90"}`,children:s.icon}),!l&&p>0&&e.jsx("div",{className:"absolute -bottom-1 left-0 w-full h-1 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${p}%`}})})]}),e.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-3 w-max max-w-[180px] hidden group-hover:block z-50 pointer-events-none animate-fade-in",children:[e.jsxs("div",{className:"bg-slate-800 text-white text-xs px-3 py-2 rounded-lg shadow-xl text-center border border-slate-700",children:[e.jsx("p",{className:"font-bold mb-0.5",children:s.name}),e.jsx("p",{className:"opacity-80 mb-2",children:s.description}),e.jsx("div",{className:"flex items-center justify-between text-[10px] uppercase font-semibold",children:e.jsx("span",{className:l?"text-emerald-400":"text-slate-400",children:l?"Desbloqueado":`${p.toFixed(0)}% Conclu√≠do`})}),!l&&e.jsx("div",{className:"w-full h-1.5 bg-slate-700 rounded-full mt-1 overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500",style:{width:`${p}%`}})})]}),e.jsx("div",{className:"w-2 h-2 bg-slate-800 rotate-45 absolute -top-1 left-1/2 -translate-x-1/2 border-t border-l border-slate-700"})]})]},s.id)})})]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2 text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors self-end md:self-auto flex-shrink-0",children:[e.jsx(Rt,{className:"w-4 h-4"})," Exportar CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 relative overflow-hidden group flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(_s,{className:"w-20 h-20 text-slate-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Score Financeiro"}),e.jsx(zs,{className:`w-4 h-4 ${q}`})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:`text-3xl font-black ${q} tracking-tighter`,children:W}),e.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"/ 1000"})]}),e.jsx("p",{className:`text-xs font-bold uppercase tracking-wide ${q}`,children:A})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100 dark:border-slate-700/50 space-y-1",children:H.slice(0,2).map((s,l)=>e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.type==="good"&&e.jsx(vt,{className:"w-3 h-3 text-emerald-500"}),s.type==="bad"&&e.jsx(ze,{className:"w-3 h-3 text-rose-500"}),s.type==="neutral"&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:s.text})]},l))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Saldo em Caixa"}),e.jsx($t,{className:"w-4 h-4 text-emerald-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white truncate",children:y(M)}),_>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded w-fit border border-emerald-100 dark:border-emerald-800/30",children:[e.jsx(et,{className:"w-3 h-3 text-emerald-500"}),e.jsxs("span",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400",children:["+",y(_)]}),e.jsx("span",{className:"text-[10px] text-emerald-600/70 dark:text-emerald-400/70 uppercase font-medium",children:"A Receber"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium uppercase",children:"Sobreviv√™ncia"}),e.jsx("span",{className:`text-xs font-bold ${U<1?"text-rose-500":U<3?"text-amber-500":"text-emerald-500"}`,children:U<.1?"Cr√≠tico":`${U.toFixed(1)} Meses`})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full mt-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${U<1?"bg-rose-500":U<3?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(100,U/6*100)}%`}})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Sa√≠das (M√™s)"}),e.jsx(Qe,{className:"w-4 h-4 text-rose-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400 truncate",children:["-",y(E)]}),b>0?e.jsxs("div",{className:"flex items-center gap-1 mt-1 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded w-fit border border-amber-100 dark:border-amber-800/30",children:[e.jsx(et,{className:"w-3 h-3 text-amber-500"}),e.jsxs("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:["-",y(b)]}),e.jsx("span",{className:"text-[10px] text-amber-600/70 dark:text-amber-400/70 uppercase font-medium",children:"A Pagar"})]}):e.jsxs("div",{className:"flex items-center gap-1 mt-1 px-2 py-1",children:[e.jsx(vt,{className:"w-3 h-3 text-emerald-500"}),e.jsx("span",{className:"text-[10px] text-emerald-500 font-bold uppercase",children:"Tudo Pago"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50 flex-1 flex flex-col justify-end space-y-2",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-semibold uppercase pb-1",children:"Pr√≥ximos Vencimentos"}),B.length===0?e.jsx("div",{className:"text-xs text-slate-400 italic",children:"Nada pendente."}):B.map(s=>{const l=new Date(s.date)<new Date(new Date().setHours(0,0,0,0));return e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${l?"bg-rose-500":"bg-amber-400"}`}),e.jsx("span",{className:"truncate text-slate-600 dark:text-slate-300 max-w-[80px]",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-slate-400 text-[10px]",children:new Date(s.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx("span",{className:`font-semibold ${l?"text-rose-500":"text-slate-700 dark:text-slate-200"}`,children:y(s.amount).replace("R$","")})]})]},s.id)})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Total Investido"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400 mt-1",children:y(h)})]}),e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-indigo-500"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-2",children:[e.jsxs("p",{className:"text-[10px] text-slate-400 font-semibold uppercase border-b border-slate-100 dark:border-slate-700/50 pb-1 flex justify-between",children:[e.jsx("span",{children:"Maiores Posi√ß√µes"}),e.jsx(Je,{className:"w-3 h-3"})]}),I.length===0?e.jsx("div",{className:"text-xs text-slate-400 italic",children:"Carteira vazia."}):I.map((s,l)=>e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[e.jsxs("span",{className:"text-slate-400 font-mono text-[10px]",children:[l+1,"."]}),e.jsx("span",{className:"truncate text-slate-600 dark:text-slate-300 max-w-[90px]",title:s.name,children:s.name})]}),e.jsx("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400 flex-shrink-0",children:y(s.amount).replace("R$","")})]},s.id))]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col hover:shadow-md transition-shadow h-full min-h-[180px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"})," Notas Fixadas"]}),e.jsx("button",{onClick:()=>r(z.NOTES),className:"text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 p-1 rounded transition-colors",title:"Ver todas",children:e.jsx(ct,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 space-y-2 overflow-y-auto max-h-[140px] no-scrollbar",children:R.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 gap-1 opacity-70",children:[e.jsx(Ie,{className:"w-6 h-6 opacity-30"}),e.jsx("p",{className:"text-xs italic text-center",children:"Nenhuma nota fixada."})]}):R.map(s=>{const l=s.color==="slate"?"border-slate-200 dark:border-slate-600":`border-${s.color}-200 dark:border-${s.color}-800`,p=s.color==="slate"?"bg-slate-50 dark:bg-slate-700/50":`bg-${s.color}-50 dark:bg-${s.color}-900/20`;return e.jsxs("div",{onClick:()=>r(z.NOTES),className:`text-xs p-2.5 rounded-lg border cursor-pointer hover:opacity-80 transition-opacity ${l} ${p}`,children:[e.jsx("span",{className:"font-bold mr-1 block truncate mb-0.5 text-slate-800 dark:text-slate-200",children:s.title||"Sem t√≠tulo"}),e.jsx("span",{className:"text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed",children:s.content})]},s.id)})})]})]}),e.jsxs("div",{className:"hidden lg:block space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 h-full",children:[u,n]}),m]}),e.jsxs("div",{className:"lg:hidden space-y-4",children:[e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>D("flow"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${x==="flow"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(_e,{className:"w-3.5 h-3.5"}),"Fluxo"]}),e.jsxs("button",{onClick:()=>D("allocation"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${x==="allocation"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(Je,{className:"w-3.5 h-3.5"}),"Carteira"]}),e.jsxs("button",{onClick:()=>D("history"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${x==="history"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(tt,{className:"w-3.5 h-3.5"}),"Hist√≥rico"]})]}),e.jsxs("div",{className:"min-h-[350px]",children:[x==="flow"&&u,x==="allocation"&&n,x==="history"&&m]})]})]})},Fr=({data:t,privacyMode:a})=>{const[o,r]=d.useState([]),[i,f]=d.useState(""),[x,D]=d.useState(!1),[v,C]=d.useState(!1),R=d.useRef(null),y=d.useRef(null);d.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const M=window.SpeechRecognition||window.webkitSpeechRecognition;y.current=new M,y.current.continuous=!1,y.current.lang="pt-BR",y.current.interimResults=!1,y.current.onresult=_=>{const E=_.results[0][0].transcript;f(E),C(!1)},y.current.onerror=_=>{console.error("Speech error",_),C(!1)},y.current.onend=()=>{C(!1)}}},[]);const j=()=>{var M;(M=R.current)==null||M.scrollIntoView({behavior:"smooth"})};d.useEffect(()=>{j()},[o,x]);const N=()=>{var M;if(v)(M=y.current)==null||M.stop(),C(!1);else if(y.current)try{y.current.start(),C(!0)}catch(_){console.error(_)}else alert("Seu navegador n√£o suporta reconhecimento de voz.")},b=async M=>{const _=i;if(!_.trim())return;const E={id:crypto.randomUUID(),role:"user",content:_,timestamp:new Date};r(I=>[...I,E]),f(""),D(!0);const h=crypto.randomUUID(),B={id:h,role:"assistant",content:"",timestamp:new Date};r(I=>[...I,B]);try{const I=Pr(_,o,t);let U="";for await(const W of I)U+=W,r(A=>A.map(q=>q.id===h?{...q,content:U}:q))}catch{r(U=>U.map(W=>W.id===h?{...W,content:"Desculpe, tive um erro ao processar sua resposta."}:W))}finally{D(!1)}},O=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),b())};return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-140px)] animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-600 p-3 rounded-xl shadow-lg shadow-indigo-500/20",children:e.jsx(Ce,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Assistente Inteligente"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Pergunte sobre seus gastos, investimentos ou pe√ßa conselhos."})]})]}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50 dark:bg-slate-900/50",children:[o.length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 space-y-4 opacity-60",children:[e.jsx(wt,{className:"w-16 h-16"}),e.jsxs("p",{className:"text-sm",children:["Estou analisando seus dados em tempo real.",e.jsx("br",{}),"Como posso ajudar hoje?"]})]}),o.map(M=>e.jsx("div",{className:`flex w-full ${M.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex max-w-[85%] md:max-w-[75%] gap-3 ${M.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${M.role==="user"?"bg-slate-200 dark:bg-slate-700":"bg-indigo-600"}`,children:M.role==="user"?e.jsx(Vs,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"}):e.jsx(wt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:`p-4 rounded-2xl shadow-sm text-sm whitespace-pre-line leading-relaxed
                      ${M.role==="user"?"bg-white dark:bg-slate-700 text-slate-800 dark:text-white rounded-tr-none":"bg-indigo-600 text-white rounded-tl-none prose prose-invert max-w-none"}`,children:[M.content,x&&M.content===""&&e.jsxs("span",{className:"inline-flex gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce"}),e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"100ms"}}),e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"200ms"}})]})]})]})},M.id)),e.jsx("div",{ref:R})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx("button",{onClick:N,className:`p-3 rounded-xl transition-all ${v?"bg-rose-500 text-white animate-pulse shadow-lg shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,title:"Falar comando",children:v?e.jsx(Gs,{className:"w-5 h-5"}):e.jsx(qs,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:i,onChange:M=>f(M.target.value),onKeyDown:O,placeholder:v?"Ouvindo...":"Digite uma mensagem...",className:"flex-1 bg-slate-100 dark:bg-slate-700 dark:text-white border-0 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none",disabled:x}),e.jsx("button",{onClick:()=>b(),disabled:!i.trim()||x,className:"p-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-indigo-500/20",children:e.jsx(Us,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-center text-[10px] text-slate-400 mt-2",children:"A IA pode cometer erros. Verifique informa√ß√µes importantes."})]})]})]})},Br=({user:t,isGuest:a,mobileMenuOpen:o,setMobileMenuOpen:r,currentView:i,onNavigate:f,onLogout:x,privacyMode:D,setPrivacyMode:v,darkMode:C,setDarkMode:R,isFullscreen:y,toggleFullscreen:j,hasKey:N,onOpenKeyModal:b,onOpenDonateModal:O,onExportBackup:M,onImportBackup:_,onFactoryReset:E,canInstall:h,onInstall:B})=>{var H,Y;const I=X=>{f(X),r(!1)},U=({active:X,onClick:P,icon:V,label:u,customClass:n=""})=>e.jsxs("button",{onClick:P,className:`flex w-full items-center gap-3 px-3 py-2.5 rounded-lg transition-all text-sm font-medium ${n} ${X?"bg-indigo-600 text-white shadow-md shadow-indigo-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(V,{className:`w-5 h-5 ${!X&&n?"text-purple-400 group-hover:text-white":""}`}),e.jsx("div",{className:"flex-1 flex justify-between items-center",children:e.jsx("span",{children:u})})]}),W=[z.TRANSACTIONS,z.CALENDAR,z.SUBSCRIPTIONS,z.DEBTS].includes(i),A=[z.INVESTMENTS,z.BUDGETS,z.WEALTH_PLANNER].includes(i),q=[z.KANBAN,z.NOTES,z.SHOPPING_LIST].includes(i);return e.jsxs("nav",{className:`
         fixed md:sticky top-0 left-0 h-screen z-50 w-72 md:w-64 bg-slate-900 border-r border-slate-800 
         transform transition-transform duration-300 ease-in-out shadow-2xl flex flex-col
         ${o?"translate-x-0":"-translate-x-full md:translate-x-0"}
       `,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-4 border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-xl shadow-lg shadow-indigo-900/50",children:e.jsx(Tt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white tracking-tight leading-none",children:"NEXO"}),e.jsx("span",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wider",children:"Financial Hub"})]})]}),e.jsx("button",{onClick:()=>r(!1),className:"md:hidden text-slate-400 hover:text-white",children:e.jsx(oe,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-4 shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-slate-800/50 rounded-lg border border-slate-700/50 backdrop-blur-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center border border-slate-600 overflow-hidden text-xs text-white",children:t!=null&&t.photoURL?e.jsx("img",{src:t.photoURL,alt:"User"}):((H=t==null?void 0:t.email)==null?void 0:H.substring(0,2).toUpperCase())||"CV"}),e.jsxs("div",{className:"overflow-hidden flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-white truncate",title:(t==null?void 0:t.email)||"Convidado",children:((Y=t==null?void 0:t.email)==null?void 0:Y.split("@")[0])||"Convidado"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("p",{className:"text-[10px] text-slate-400",children:t?"Online (Cloud)":"Offline (Local)"})]})]}),e.jsx("button",{onClick:x,className:"text-slate-400 hover:text-rose-500",title:"Sair",children:e.jsx(Ks,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-2 flex flex-col no-scrollbar space-y-1",children:[e.jsx("p",{className:"px-2 text-xs font-bold text-indigo-400 uppercase tracking-wider mb-2 mt-2",children:"Menu Principal"}),e.jsx(U,{active:i===z.DASHBOARD,onClick:()=>I(z.DASHBOARD),icon:Ys,label:"Vis√£o Geral"}),e.jsx(U,{active:W,onClick:()=>I(z.TRANSACTIONS),icon:Hs,label:"Movimenta√ß√µes"}),e.jsx(U,{active:A,onClick:()=>I(z.INVESTMENTS),icon:Pt,label:"Patrim√¥nio"}),e.jsx(U,{active:q,onClick:()=>I(z.KANBAN),icon:Ws,label:"Organiza√ß√£o"}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-800",children:e.jsx("button",{onClick:()=>N?I(z.AI_ASSISTANT):b(),className:`w-full relative group overflow-hidden rounded-xl p-[1px] transition-all duration-300 ${i===z.AI_ASSISTANT?"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 shadow-lg shadow-purple-500/20":"bg-slate-700/50 hover:bg-gradient-to-r hover:from-indigo-500 hover:via-purple-500 hover:to-pink-500"}`,children:e.jsxs("div",{className:"relative flex items-center gap-3 px-3 py-3 rounded-[11px] bg-slate-900 transition-colors h-full",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${i===z.AI_ASSISTANT?"bg-indigo-500/20":"bg-slate-800 group-hover:bg-slate-800"}`,children:e.jsx(Xs,{className:`w-5 h-5 ${i===z.AI_ASSISTANT?"text-indigo-400":"text-slate-400 group-hover:text-white"}`})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:`text-sm font-bold ${i===z.AI_ASSISTANT?"text-white":"text-slate-300 group-hover:text-white"}`,children:"NEXO AI"}),e.jsx("p",{className:"text-[10px] text-slate-500 group-hover:text-slate-400",children:"Assistente Virtual"})]}),!N&&e.jsx(Ke,{className:"w-3 h-3 text-rose-500 animate-pulse"})]})})})]}),e.jsxs("div",{className:"mt-auto p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[h&&e.jsxs("button",{onClick:B,className:"w-full mb-4 flex items-center justify-center gap-2 p-2 rounded-lg bg-emerald-600 text-white text-xs font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-500/20",children:[e.jsx(fs,{className:"w-3 h-3"})," Instalar App (PWA)"]}),e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsx("button",{onClick:()=>I(z.SETTINGS),className:`flex-1 flex items-center justify-center p-2 rounded-lg transition-all border border-slate-800 hover:border-slate-700 ${i===z.SETTINGS?"bg-indigo-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,title:"Configura√ß√µes e Dados",children:e.jsx(It,{className:"w-5 h-5"})}),e.jsx("button",{onClick:j,className:"flex-1 flex items-center justify-center p-2 rounded-lg text-slate-400 hover:bg-slate-800 hover:text-white transition-all border border-slate-800 hover:border-slate-700",title:y?"Sair da Tela Cheia":"Tela Cheia",children:y?e.jsx(Js,{className:"w-5 h-5"}):e.jsx(Qs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:O,className:"flex-1 flex items-center justify-center p-2 rounded-lg text-slate-400 hover:bg-slate-800 hover:text-pink-500 transition-all border border-slate-800 hover:border-slate-700",title:"Apoiar Projeto",children:e.jsx(ps,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"pt-4 mt-3 border-t border-slate-800 text-center",children:[e.jsx("p",{className:"text-[10px] text-slate-500 font-mono",children:"v2.6.0 Config"}),e.jsxs("a",{href:"https://www.linkedin.com/in/alemagnobr/",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-slate-400 hover:text-indigo-400 transition-colors flex items-center justify-center gap-1.5 mt-1",children:[e.jsx(bs,{className:"w-3 h-3"})," Alexandre Magno S. Linhares"]})]})]})]})},Lr=({showWelcome:t,isDonateModalOpen:a,isKeyModalOpen:o,userKeyInput:r,hasKey:i,PIX_KEY:f,PIX_NAME:x,setShowWelcome:D,setIsDonateModalOpen:v,setIsKeyModalOpen:C,setUserKeyInput:R,handleSaveKey:y,handleRemoveKey:j,handleFinishWelcome:N,copyPix:b})=>e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/90 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-4xl border border-slate-200 dark:border-slate-700 animate-scale-in my-8",children:[e.jsx("div",{className:"bg-slate-900 p-8 text-white relative overflow-hidden rounded-t-2xl",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Bem-vindo ao NEXO"}),e.jsx("p",{className:"text-slate-300 text-lg",children:"Seu novo comando central financeiro."})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-indigo-500"})," Privacidade Total"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:"Seus dados financeiros n√£o s√£o vendidos. No modo Offline, tudo fica no seu navegador."})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5 text-purple-500"})," Intelig√™ncia Artificial"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:"Conecte sua chave do Gemini para ter um consultor financeiro pessoal."})]})]}),e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-100 dark:border-indigo-800 p-4 rounded-xl mb-8",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"J√° possui uma chave de API do Gemini? (Opcional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:r,onChange:O=>R(O.target.value),placeholder:"Cole sua chave AIza...",className:"flex-1 p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 outline-none"}),e.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-medium flex items-center gap-1 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:["Obter Chave ",e.jsx(js,{className:"w-3 h-3"})]})]})]}),e.jsxs("button",{onClick:N,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-xl shadow-indigo-500/30 transition-all flex items-center justify-center gap-2",children:["Come√ßar Agora ",e.jsx(xt,{className:"w-5 h-5"})]})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 border border-slate-200 dark:border-slate-700 animate-scale-in text-center relative overflow-hidden",children:[e.jsx("button",{onClick:()=>v(!1),className:"absolute top-2 right-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(oe,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Zs,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Apoie o Projeto"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"O NEXO √© desenvolvido de forma independente. Considere apoiar! ‚òï"}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6 relative group cursor-pointer",onClick:b,children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Chave Pix (CPF)"}),e.jsx("p",{className:"text-sm font-mono font-bold text-slate-700 dark:text-slate-200 break-all select-all",children:f}),e.jsx("div",{className:"absolute inset-0 bg-black/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl",children:e.jsxs("span",{className:"bg-white dark:bg-slate-800 text-xs font-bold px-2 py-1 rounded shadow flex items-center gap-1",children:[e.jsx(gs,{className:"w-3 h-3"})," Copiar"]})})]}),e.jsxs("p",{className:"text-xs text-slate-400 mb-6",children:["Nome: ",x]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-slate-200 dark:border-slate-700 animate-scale-in flex flex-col max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ke,{className:"w-6 h-6 text-indigo-500"})," Configurar Chave API"]}),e.jsx("button",{onClick:()=>C(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx(oe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg text-sm text-indigo-800 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800",children:[e.jsxs("p",{className:"font-bold flex items-center gap-1 mb-1",children:[e.jsx(Ce,{className:"w-3 h-3"})," Por que preciso disso?"]}),e.jsx("p",{children:"O Google Gemini √© o c√©rebro por tr√°s da IA do NEXO. Para us√°-lo gratuitamente, voc√™ precisa gerar sua pr√≥pria chave de acesso."})]}),e.jsxs("ol",{className:"list-decimal list-inside text-sm text-slate-600 dark:text-slate-400 space-y-2 ml-1",children:[e.jsxs("li",{children:["Acesse o ",e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),e.jsx("li",{children:"Fa√ßa login com sua conta Google."}),e.jsxs("li",{children:["Clique em ",e.jsx("strong",{children:"Create API Key"}),"."]}),e.jsx("li",{children:'Copie o c√≥digo gerado (come√ßa com "AIza...") e cole abaixo.'})]}),e.jsx("input",{type:"password",value:r,onChange:O=>R(O.target.value),placeholder:"Cole sua chave aqui (AIza...)",className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:y,disabled:!r,className:"flex-1 px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg text-sm font-bold shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Salvar e Conectar"}),e.jsx("button",{onClick:j,disabled:!i,className:"px-4 py-2 bg-rose-100 text-rose-600 hover:bg-rose-200 dark:bg-rose-900/30 dark:text-rose-400 dark:hover:bg-rose-900/50 rounded-lg text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Remover"})]})]})]})})]}),is="NEXO Finan√ßas",zt=async()=>{const t=new Dt;t.addScope("https://www.googleapis.com/auth/calendar");try{if(!me.currentUser)return null;const a=await As(me,t),o=Dt.credentialFromResult(a);return(o==null?void 0:o.accessToken)||null}catch(a){return console.error("Error getting access token:",a),null}},Ee=async(t,a,o,r)=>{var f;const i=await fetch(t,{method:a,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0});if(!i.ok){if(i.status===404||i.status===410)return null;const x=await i.json();throw new Error(((f=x.error)==null?void 0:f.message)||"Google API Error")}return i.status===204?null:i.json()},Vt=async t=>{const o=(await Ee("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",t)).items.find(i=>i.summary===is);return o?o.id:(await Ee("https://www.googleapis.com/calendar/v3/calendars","POST",t,{summary:is,description:"Calend√°rio financeiro gerado pelo app NEXO."})).id},_r=async(t,a,o)=>{const r={summary:`üí∏ Pagar: ${t.description}`,description:`Valor: R$ ${t.amount.toFixed(2)}
Categoria: ${t.category}
Obs: ${t.observation||"-"}`,start:{date:t.date},end:{date:t.date},colorId:"11",reminders:{useDefault:!1,overrides:[{method:"popup",minutes:1440},{method:"popup",minutes:540}]}};return(await Ee(`https://www.googleapis.com/calendar/v3/calendars/${o}/events`,"POST",a,r)).id},zr=async(t,a)=>{const o=await zt();if(!o)return;const r=await Vt(o),i={summary:`üí∏ Pagar: ${t.description}`,description:`Valor: R$ ${t.amount.toFixed(2)}
Categoria: ${t.category}
Obs: ${t.observation||"-"}`,start:{date:t.date},end:{date:t.date}};await Ee(`https://www.googleapis.com/calendar/v3/calendars/${r}/events/${a}`,"PATCH",o,i)},Vr=async t=>{const a=await zt();if(!a)return;const o=await Vt(a);await Ee(`https://www.googleapis.com/calendar/v3/calendars/${o}/events/${t}`,"DELETE",a)},Gr=async(t,a)=>{const o=await zt();if(!o)throw new Error("Acesso ao Google Agenda negado.");const r=await Vt(o),i=t.filter(x=>x.type==="expense"&&x.status==="pending"&&new Date(x.date)>=new Date);let f=0;for(const x of i)try{if(x.googleEventId){const D={summary:`üí∏ Pagar: ${x.description}`,description:`Valor: R$ ${x.amount.toFixed(2)}
Categoria: ${x.category}
Obs: ${x.observation||"-"}`,start:{date:x.date},end:{date:x.date}};await Ee(`https://www.googleapis.com/calendar/v3/calendars/${r}/events/${x.googleEventId}`,"PATCH",o,D)}else{const D=await _r(x,o,r);a(x.id,{googleEventId:D}),f++}}catch(D){console.error(`Failed to sync transaction ${x.description}`,D)}return f},qr={transactions:[],investments:[],budgets:[],debts:[],shoppingList:[],shoppingBudget:0,kanbanColumns:[],notes:[],unlockedBadges:[],walletBalance:0,categories:[]},Ur=(t,a)=>{const[o,r]=d.useState(qr);return d.useEffect(()=>{if(t&&!a){const u=rr(t.uid,n=>{r(m=>({...m,...n}))});return()=>u()}},[t,a]),d.useEffect(()=>{t&&!a&&o.transactions.length>0&&o.walletBalance===void 0&&(console.log("Migrando para sistema de Saldo Otimizado..."),nr(t.uid))},[t,a,o.transactions.length,o.walletBalance]),d.useEffect(()=>{if(t||a){const n=setTimeout(async()=>{const m=new Date,s=m.getFullYear(),l=String(m.getMonth()+1).padStart(2,"0"),p=String(m.getDate()).padStart(2,"0"),w=`${s}-${l}-${p}`,$=o.transactions.filter(k=>k.status==="pending"&&k.autoPay&&k.date<=w);if($.length>0)if(t)for(const k of $)await Ze(t.uid,k.id,{status:"paid"});else r(k=>({...k,transactions:k.transactions.map(L=>L.status==="pending"&&L.autoPay&&L.date<=w?{...L,status:"paid"}:L)}))},2e3);return()=>clearTimeout(n)}},[t,a,o.transactions]),d.useEffect(()=>{(t||a)&&(async()=>{const n=new Date,m=n.getMonth(),s=n.getFullYear(),l=new Map;o.transactions.forEach(w=>{if(w.isRecurring){const $=l.get(w.description);(!$||new Date(w.date)>new Date($.date))&&l.set(w.description,w)}});const p=[];if(l.forEach((w,$)=>{const[k,L]=w.date.split("-").map(Number),c=new Date(s,m,1),S=new Date(k,L-1,1);if(c<S)return;if(!o.transactions.some(T=>{const J=new Date(T.date);return T.description===$&&T.amount===w.amount&&J.getMonth()===m&&J.getFullYear()===s})){const J=new Date(w.date+"T00:00:00").getDate(),Q=new Date(s,m+1,0).getDate(),re=Math.min(J,Q),le=String(m+1).padStart(2,"0"),ce=String(re).padStart(2,"0"),Pe=`${s}-${le}-${ce}`;p.push({...w,id:crypto.randomUUID(),date:Pe,status:"pending",isRecurring:!0})}}),p.length>0)if(t)for(const w of p)await es(t.uid,w);else r(w=>({...w,transactions:[...w.transactions,...p]}))})()},[t,a,o.transactions]),{data:o,setData:r,actions:{addTransaction:async u=>{const n={...u,id:crypto.randomUUID()};t?await es(t.uid,n):r(m=>({...m,transactions:[...m.transactions,n]}))},updateTransaction:async(u,n)=>{const m=o.transactions.find(s=>s.id===u);if(m&&m.googleEventId&&t&&(n.date||n.amount||n.description||n.category)){const s={...m,...n};zr(s,m.googleEventId).catch(l=>console.warn("Falha ao atualizar Google Agenda:",l))}t?await Ze(t.uid,u,n):r(s=>({...s,transactions:s.transactions.map(l=>l.id===u?{...l,...n}:l)}))},deleteTransaction:async u=>{const n=o.transactions.find(m=>m.id===u);n&&n.googleEventId&&t&&Vr(n.googleEventId).catch(m=>console.warn("Falha ao remover do Google Agenda:",m)),t?await lr(t.uid,u):r(m=>({...m,transactions:m.transactions.filter(s=>s.id!==u)}))},toggleTransactionStatus:async u=>{const n=o.transactions.find(s=>s.id===u);if(!n)return;const m=n.status==="paid"?"pending":"paid";if(t){if(await Ze(t.uid,u,{status:m}),n.debtId){const s=o.debts.find(l=>l.id===n.debtId);if(s){const w=o.transactions.filter($=>$.debtId===n.debtId).every($=>$.id===u?m==="paid":$.status==="paid")?"paid":"agreement";s.status!==w&&await ts(t.uid,s.id,{status:w})}}}else r(s=>{const l=s.transactions.map(w=>w.id===u?{...w,status:m}:w);let p=s.debts;if(n.debtId){const k=l.filter(L=>L.debtId===n.debtId).every(L=>L.status==="paid")?"paid":"agreement";p=s.debts.map(L=>L.id===n.debtId?{...L,status:k}:L)}return{...s,transactions:l,debts:p}})},addInvestment:async u=>{const n={...u,id:crypto.randomUUID()};t?await or(t.uid,n):r(m=>({...m,investments:[...m.investments,n]}))},updateInvestment:async(u,n)=>{t?await ir(t.uid,u,n):r(m=>({...m,investments:m.investments.map(s=>s.id===u?{...s,...n}:s)}))},deleteInvestment:async u=>{t?await dr(t.uid,u):r(n=>({...n,investments:n.investments.filter(m=>m.id!==u)}))},addBudget:async u=>{const n={...u,id:crypto.randomUUID()};t?await cr(t.uid,n):r(m=>({...m,budgets:[...m.budgets||[],n]}))},updateBudget:async(u,n)=>{t?await xr(t.uid,u,n):r(m=>({...m,budgets:m.budgets.map(s=>s.id===u?{...s,...n}:s)}))},deleteBudget:async u=>{t?await mr(t.uid,u):r(n=>({...n,budgets:n.budgets.filter(m=>m.id!==u)}))},addDebt:async u=>{const n={...u,id:crypto.randomUUID()};t?await ur(t.uid,n):r(m=>({...m,debts:[...m.debts||[],n]}))},updateDebt:async(u,n)=>{t?await ts(t.uid,u,n):r(m=>({...m,debts:m.debts.map(s=>s.id===u?{...s,...n}:s)}))},deleteDebt:async u=>{t?await hr(t.uid,u):r(n=>({...n,debts:n.debts.filter(m=>m.id!==u)}))},addShoppingItem:async u=>{const n={...u,id:crypto.randomUUID()};t?await pr(t.uid,n):r(m=>({...m,shoppingList:[...m.shoppingList||[],n]}))},updateShoppingItem:async(u,n)=>{t?await gr(t.uid,u,n):r(m=>({...m,shoppingList:m.shoppingList.map(s=>s.id===u?{...s,...n}:s)}))},deleteShoppingItem:async u=>{t?await br(t.uid,u):r(n=>({...n,shoppingList:n.shoppingList.filter(m=>m.id!==u)}))},clearShoppingList:async()=>{t?await fr(t.uid):r(u=>({...u,shoppingList:[]}))},setShoppingBudget:async u=>{t?await jr(t.uid,u):r(n=>({...n,shoppingBudget:u}))},saveKanbanColumn:async u=>{t?await Nr(t.uid,u):r(n=>n.kanbanColumns.some(s=>s.id===u.id)?{...n,kanbanColumns:n.kanbanColumns.map(s=>s.id===u.id?u:s)}:{...n,kanbanColumns:[...n.kanbanColumns,u]})},deleteKanbanColumn:async u=>{t?await vr(t.uid,u):r(n=>({...n,kanbanColumns:n.kanbanColumns.filter(m=>m.id!==u)}))},addNote:async u=>{const n={...u,id:crypto.randomUUID()};t?await wr(t.uid,n):r(m=>({...m,notes:[n,...m.notes]}))},updateNote:async(u,n)=>{t?await kr(t.uid,u,n):r(m=>({...m,notes:m.notes.map(s=>s.id===u?{...s,...n}:s)}))},deleteNote:async u=>{t?await yr(t.uid,u):r(n=>({...n,notes:n.notes.filter(m=>m.id!==u)}))},addCategory:async u=>{t?await Cr(t.uid,u):r(n=>({...n,categories:[...n.categories||[],u]}))},deleteCategory:async u=>{t?await Sr(t.uid,u):r(n=>({...n,categories:n.categories.filter(m=>m.id!==u)}))},unlockBadge:u=>{o.unlockedBadges.includes(u)||(t?Ar(t.uid,u,o.unlockedBadges):r(n=>({...n,unlockedBadges:[...n.unlockedBadges,u]})))},saveWealthProfile:async u=>{t?await Dr(t.uid,u):r(n=>({...n,wealthProfile:u}))}}}},Kr=[{name:"emerald",bg:"bg-emerald-500"},{name:"blue",bg:"bg-blue-500"},{name:"rose",bg:"bg-rose-500"},{name:"amber",bg:"bg-amber-500"},{name:"purple",bg:"bg-purple-500"},{name:"indigo",bg:"bg-indigo-500"},{name:"pink",bg:"bg-pink-500"},{name:"orange",bg:"bg-orange-500"},{name:"teal",bg:"bg-teal-500"},{name:"cyan",bg:"bg-cyan-500"},{name:"slate",bg:"bg-slate-500"}],Yr=({data:t,actions:a,privacyMode:o,setPrivacyMode:r,darkMode:i,setDarkMode:f,hasApiKey:x,onOpenKeyModal:D,onExportBackup:v,onImportBackup:C,onFactoryReset:R})=>{const[y,j]=d.useState("general"),[N,b]=d.useState(""),[O,M]=d.useState("expense"),[_,E]=d.useState("slate"),h=d.useRef(null),B=d.useRef(null),I=A=>{if(A.preventDefault(),!N.trim())return;const q={id:`cat_${Date.now()}`,name:N.trim(),type:O,color:_,isDefault:!1};a.addCategory(q),b("")},U=A=>{var Y;const q=(Y=A.target.files)==null?void 0:Y[0];if(!q)return;const H=new FileReader;H.onload=X=>{var n;const P=(n=X.target)==null?void 0:n.result;if(!P)return;const V=P.split(`
`);let u=0;for(let m=1;m<V.length;m++){const s=V[m].trim();if(!s)continue;const l=s.split(",");if(l.length>=3){const p=l[0].trim(),w=l[1].trim(),$=l[2].trim(),k=parseFloat($);if(!isNaN(k)){const L=Math.abs(k),c=k<0?"expense":"income";a.addTransaction({description:w||"Importado",amount:L,type:c,category:"Outros",date:p.includes("/")?p.split("/").reverse().join("-"):p,status:"paid",paymentMethod:"credit_card",isRecurring:!1}),u++}}}alert(`${u} transa√ß√µes importadas com sucesso! Verifique as datas e categorias.`)},H.readAsText(q)},W=t.categories||[];return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 p-2.5 rounded-xl",children:e.jsx(It,{className:"w-6 h-6 text-slate-700 dark:text-slate-200"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Configura√ß√µes"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Personalize sua experi√™ncia no NEXO."})]})]}),e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>j("general"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${y==="general"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(ea,{className:"w-4 h-4"})," Geral & API"]}),e.jsxs("button",{onClick:()=>j("categories"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${y==="categories"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(ta,{className:"w-4 h-4"})," Categorias"]}),e.jsxs("button",{onClick:()=>j("data"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${y==="data"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(sa,{className:"w-4 h-4"})," Dados & Backup"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 min-h-[400px]",children:[y==="general"&&e.jsx("div",{className:"space-y-8 animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Prefer√™ncias Visuais"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400",children:i?e.jsx(aa,{className:"w-5 h-5"}):e.jsx(ra,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Modo Escuro"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Alternar tema claro/escuro"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:A=>f(A.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 rounded-full peer dark:bg-slate-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg text-emerald-600 dark:text-emerald-400",children:o?e.jsx(la,{className:"w-5 h-5"}):e.jsx(st,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Modo Privacidade"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Ocultar valores monet√°rios"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:A=>r(A.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 dark:peer-focus:ring-emerald-800 rounded-full peer dark:bg-slate-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-emerald-600"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Integra√ß√µes"}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl text-white shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"})," Google Gemini API"]}),e.jsx("p",{className:"text-indigo-100 text-xs mt-1",children:"Intelig√™ncia Artificial para an√°lises e categoriza√ß√£o."})]}),e.jsx("div",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase border ${x?"bg-emerald-500 border-emerald-400 text-white":"bg-rose-500 border-rose-400 text-white"}`,children:x?"Conectado":"Desconectado"})]}),e.jsx("button",{onClick:D,className:"w-full py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg text-sm font-bold transition-colors",children:x?"Gerenciar Chave":"Configurar Chave"})]})]})]})}),y==="categories"&&e.jsxs("div",{className:"animate-fade-in h-full flex flex-col",children:[e.jsxs("form",{onSubmit:I,className:"flex flex-col md:flex-row gap-3 bg-slate-50 dark:bg-slate-700/30 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Nome da nova categoria...",value:N,onChange:A=>b(A.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:O,onChange:A=>M(A.target.value),className:"p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"expense",children:"Despesa"}),e.jsx("option",{value:"income",children:"Receita"})]}),e.jsx("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-slate-300 dark:border-slate-600",children:Kr.map(A=>e.jsx("button",{type:"button",onClick:()=>E(A.name),className:`w-6 h-6 rounded-full transition-transform hover:scale-110 ${A.bg} ${_===A.name?"ring-2 ring-offset-2 ring-indigo-500 scale-110":""}`},A.name))}),e.jsx("button",{type:"submit",disabled:!N.trim(),className:"px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50",children:e.jsx(de,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 uppercase mb-3 flex items-center gap-2 border-b border-emerald-200 dark:border-emerald-800 pb-2",children:"Entradas"}),e.jsx("div",{className:"space-y-2",children:W.filter(A=>A.type==="income").map(A=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700 group hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${A.color}-500`}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:A.name})]}),!A.isDefault&&e.jsx("button",{onClick:()=>{confirm(`Excluir categoria "${A.name}"?`)&&a.deleteCategory(A.id)},className:"text-slate-400 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(we,{className:"w-4 h-4"})})]},A.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-rose-600 dark:text-rose-400 uppercase mb-3 flex items-center gap-2 border-b border-rose-200 dark:border-rose-800 pb-2",children:"Sa√≠das"}),e.jsx("div",{className:"space-y-2",children:W.filter(A=>A.type==="expense").map(A=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700 group hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${A.color}-500`}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:A.name})]}),!A.isDefault&&e.jsx("button",{onClick:()=>{confirm(`Excluir categoria "${A.name}"?`)&&a.deleteCategory(A.id)},className:"text-slate-400 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(we,{className:"w-4 h-4"})})]},A.id))})]})]})]}),y==="data"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-200 dark:border-slate-700 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5 text-indigo-500"})," Exportar Backup"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Baixe todos os seus dados em um arquivo JSON seguro. Ideal para migrar entre dispositivos."})]}),e.jsx("button",{onClick:v,className:"mt-6 w-full py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg font-bold text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Baixar JSON"})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-200 dark:border-slate-700 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(na,{className:"w-5 h-5 text-emerald-500"})," Restaurar Backup"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Recupere seus dados a partir de um arquivo JSON exportado anteriormente."})]}),e.jsxs("label",{className:"mt-6 w-full py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg font-bold text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-center block",children:["Selecionar Arquivo",e.jsx("input",{type:"file",ref:h,className:"hidden",accept:".json",onChange:C})]})]})]}),e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Importar Transa√ß√µes (CSV Simples)"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-4",children:["Importe extratos simples. Formato esperado: ",e.jsx("code",{children:"Data,Descri√ß√£o,Valor"})," (sem cabe√ßalho).",e.jsx("br",{}),e.jsx("span",{className:"text-xs opacity-70",children:"Ex: 2024-03-20,Mercado,-150.00"})]}),e.jsx("input",{type:"file",ref:B,accept:".csv",onChange:U,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"})]}),e.jsx("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"p-4 border border-rose-200 dark:border-rose-900/50 bg-rose-50 dark:bg-rose-900/10 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-rose-700 dark:text-rose-400",children:"Zona de Perigo"}),e.jsx("p",{className:"text-xs text-rose-600/80 dark:text-rose-400/70",children:"Isso apagar√° todos os dados locais deste navegador."})]}),e.jsx("button",{onClick:R,className:"px-4 py-2 bg-rose-600 text-white rounded-lg font-bold text-sm hover:bg-rose-700",children:"Resetar App"})]})})]})]})]})},ft={credit_card:"Cr√©dito",debit_card:"D√©bito",cash:"Dinheiro",pix:"PIX",direct_debit:"D√©b. Auto",bank_transfer:"TED/DOC",deposit:"Dep√≥sito"},ds=(t,a,o)=>{let r=new Date(t,a,1),i=0,f=0;for(;i<o&&f<31;){const x=r.getDay();if(x!==0&&x!==6&&i++,i===o)break;r.setDate(r.getDate()+1),f++}return r.toISOString().split("T")[0]},Hr=({method:t,className:a})=>{switch(t){case"credit_card":return e.jsx(at,{className:a});case"debit_card":return e.jsx(at,{className:a});case"cash":return e.jsx(pa,{className:a});case"pix":return e.jsx(ha,{className:a});default:return e.jsx(vs,{className:a})}},cs=["credit_card","debit_card","direct_debit","pix","cash"],xs=["pix","bank_transfer","cash","deposit"],Wr=({transactions:t,budgets:a,categories:o=[],onAdd:r,onUpdate:i,onDelete:f,onToggleStatus:x,onNavigate:D,privacyMode:v,hasApiKey:C,quickActionSignal:R})=>{const[y,j]=d.useState(!1),[N,b]=d.useState(!1),[O,M]=d.useState(!1),[_,E]=d.useState(new Date),[h,B]=d.useState("all"),[I,U]=d.useState(""),[W,A]=d.useState("all"),[q,H]=d.useState("all"),[Y,X]=d.useState(!1),[P,V]=d.useState(null),[u,n]=d.useState("monthly"),[m,s]=d.useState([]),[l,p]=d.useState(!1),[w,$]=d.useState(""),[k,L]=d.useState(!1),[c,S]=d.useState("5"),G=d.useRef(null),[T,J]=d.useState({description:"",amount:"",type:"expense",category:"Outros",date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:"credit_card",isRecurring:!1,autoPay:!1,installments:"",observation:""}),Q=d.useMemo(()=>o.length===0?["Outros"]:o.filter(g=>g.type===T.type).map(g=>g.name),[o,T.type]),re=g=>{const F=o.find(te=>te.name===g),ee=(F==null?void 0:F.color)||"slate";return`bg-${ee}-100 text-${ee}-700 border-${ee}-200 dark:bg-${ee}-900/30 dark:text-${ee}-300 dark:border-${ee}-800`};d.useEffect(()=>{R&&Date.now()-R<2e3&&(j(!0),He())},[R]),d.useEffect(()=>{y&&G.current&&setTimeout(()=>{var g;(g=G.current)==null||g.scrollIntoView({behavior:"smooth",block:"center"})},100)},[y,P]),d.useEffect(()=>{if(k&&T.category==="Sal√°rio"){const[g,F]=T.date.split("-").map(Number),ee=parseInt(c)||5,te=ds(g,F-1,ee);te!==T.date&&J(ae=>({...ae,date:te}))}},[k,c,T.category]);const le=d.useMemo(()=>T.type==="income"?xs:cs,[T.type]),ce=()=>E(g=>new Date(g.getFullYear(),g.getMonth()-1,1)),Pe=()=>E(g=>new Date(g.getFullYear(),g.getMonth()+1,1)),Me=d.useMemo(()=>{const g=[],F=new Date,ee=F.getMonth(),te=F.getFullYear(),ae=F.toISOString().slice(0,7);return a.forEach(se=>{if(!(se.isRecurring&&!a.some(ne=>ne.category===se.category&&ne.month===ae&&!ne.isRecurring)||se.month===ae))return;t.filter(ne=>ne.type==="expense"&&ne.category===se.category&&new Date(ne.date).getMonth()===ee&&new Date(ne.date).getFullYear()===te).reduce((ne,pe)=>ne+pe.amount,0)>=se.limit&&g.push({title:`Limite Excedido: ${se.category}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),g},[a,t]),je=d.useMemo(()=>{const g=t.filter(te=>{const[ae,se]=te.date.split("-");return parseInt(ae)===_.getFullYear()&&parseInt(se)===_.getMonth()+1}),F=g.filter(te=>te.type==="income").reduce((te,ae)=>te+ae.amount,0),ee=g.filter(te=>te.type==="expense").reduce((te,ae)=>te+ae.amount,0);return{income:F,expense:ee,balance:F-ee}},[t,_]),Gt=d.useMemo(()=>t.filter(g=>{const[F,ee]=g.date.split("-");return!(!(parseInt(F)===_.getFullYear()&&parseInt(ee)===_.getMonth()+1)||h!=="all"&&g.type!==h||I&&!g.description.toLowerCase().includes(I.toLowerCase())||W!=="all"&&g.category!==W||q!=="all"&&g.paymentMethod!==q)}).sort((g,F)=>new Date(F.date).getTime()-new Date(g.date).getTime()),[t,_,h,I,W,q]),qt=d.useMemo(()=>{const g={};Gt.forEach(se=>{g[se.date]||(g[se.date]={transactions:[],total:0}),g[se.date].transactions.push(se);const ie=se.type==="income"?se.amount:-se.amount;g[se.date].total+=ie});const ee=[...Object.entries(g).map(([se,ie])=>({date:se,...ie})).sort((se,ie)=>new Date(ie.date).getTime()-new Date(se.date).getTime())].reverse();let te=0;return ee.map(se=>(te+=se.total,{...se,runningBalance:te})).reverse()},[Gt]),ke=g=>v?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${g.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,Ps=g=>{const F=new Date(g+"T12:00:00"),ee=new Date,te=new Date;if(te.setDate(te.getDate()-1),F.toDateString()===ee.toDateString())return"Hoje";if(F.toDateString()===te.toDateString())return"Ontem";const ae=F.toLocaleDateString("pt-BR",{weekday:"long"}),se=F.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"});return`${ae.split("-")[0]}, ${se}`},Ms=async()=>{if(!T.description)return;b(!0);const g=await Er(T.description),F=Q.includes(g);J(ee=>({...ee,category:F?g:"Outros"})),b(!1)},Os=g=>{const F=g.target.value,ee=o.filter(ae=>ae.type===F).map(ae=>ae.name),te=F==="income"?"pix":"credit_card";J(ae=>({...ae,type:F,category:ee[0]||"Outros",paymentMethod:te}))},He=()=>{J({description:"",amount:"",type:"expense",category:"Outros",date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:"credit_card",isRecurring:!1,autoPay:!1,installments:"",observation:""}),V(null),n("monthly"),s([]),p(!1),$(""),L(!1),S("5")},Oe=g=>{J({description:g.description||"",amount:(g.amount||0).toString(),type:g.type||"expense",category:g.category||"Outros",date:g.date||new Date().toISOString().split("T")[0],status:g.status||"paid",paymentMethod:g.paymentMethod||(g.type==="income"?"pix":"credit_card"),isRecurring:g.isRecurring||!1,autoPay:g.autoPay||!1,installments:"",observation:g.observation||""}),V(g.id),j(!0)},Fs=g=>{s(F=>F.includes(g)?F.filter(ee=>ee!==g):[...F,g])},Bs=g=>{g.preventDefault();let F=parseFloat(T.amount),ee=T.observation;if(T.type==="income"&&T.category==="Sal√°rio"&&l){const ae=parseFloat(w);if(!isNaN(ae)&&ae>0&&ae<100){const se=F*(ae/100),ie=F;F=F-se;const he=`(Sal√°rio Bruto: R$ ${ie.toFixed(2)} | Desc. Pens√£o: ${ae}%)`;ee=ee?`${ee} ${he}`:he}}const te={description:T.description,amount:F,type:T.type,category:T.category,date:T.date,status:T.status,paymentMethod:T.paymentMethod,isRecurring:T.isRecurring,autoPay:T.status==="pending"?T.autoPay:!1,observation:ee};if(T.isRecurring)if(u==="days"&&m.length>0){const[ae,se]=T.date.split("-").map(Number),ie=new Date(ae,se,0).getDate();m.forEach(he=>{if(he<=ie){const ne=String(he).padStart(2,"0"),pe=String(se).padStart(2,"0"),Fe=`${ae}-${pe}-${ne}`;r({...te,description:`${T.description} (Dia ${he})`,date:Fe,isRecurring:!1})}})}else{const ae=parseInt(T.installments);if(!isNaN(ae)&&ae>1){const[se,ie,he]=T.date.split("-").map(Number),ne=parseInt(c)||5;for(let pe=0;pe<ae;pe++){let Fe;k&&T.category==="Sal√°rio"&&T.type==="income"?Fe=ds(se,ie-1+pe,ne):Fe=new Date(se,ie-1+pe,he).toISOString().split("T")[0];const Ls=`${T.description} (${pe+1}/${ae})`;r({...te,description:Ls,date:Fe,isRecurring:!1})}}else P?i(P,te):r(te)}else P?i(P,te):r(te);He(),j(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden md:block",children:"Transa√ß√µes"}),e.jsxs("div",{className:"flex flex-1 w-full md:w-auto gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx(kt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar...",value:I,onChange:g=>U(g.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-sm transition-all shadow-sm"}),I&&e.jsx("button",{onClick:()=>U(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(oe,{className:"w-3 h-3"})})]}),e.jsx("button",{onClick:()=>X(!Y),className:`p-2.5 rounded-xl border transition-all ${Y?"bg-indigo-50 border-indigo-200 text-indigo-600 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500"}`,children:e.jsx(Ns,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-1 shrink-0",children:[e.jsx("button",{onClick:ce,className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-600 dark:text-slate-300",children:e.jsx(Mt,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-2 text-xs font-bold text-slate-700 dark:text-slate-200 capitalize min-w-[80px] text-center",children:_.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"})}),e.jsx("button",{onClick:Pe,className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-600 dark:text-slate-300",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsxs("button",{onClick:()=>D(z.SUBSCRIPTIONS),className:"flex items-center gap-2 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 px-4 py-2.5 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium text-sm shadow-sm",children:[e.jsx(Se,{className:"w-4 h-4 text-indigo-500"}),"Assinaturas"]}),e.jsxs("button",{onClick:()=>{He(),j(!y)},className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2.5 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/20 font-bold text-sm",children:[e.jsx(de,{className:"w-4 h-4"})," Nova"]})]})]}),Y&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700 animate-fade-in-down",children:[e.jsxs("select",{value:W,onChange:g=>A(g.target.value),className:"p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white text-xs outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Todas Categorias"}),o.map(g=>e.jsx("option",{value:g.name,children:g.name},g.id))]}),e.jsxs("select",{value:q,onChange:g=>H(g.target.value),className:"p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white text-xs outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Todos M√©todos"}),[...cs,...xs].map(g=>e.jsx("option",{value:g,children:ft[g]},g))]})]})]}),Me.length>0&&e.jsx("div",{className:"space-y-2",children:Me.map((g,F)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down shadow-sm",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Et,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:g.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:g.message})]})]},F))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Entradas"}),e.jsx("p",{className:"text-sm md:text-lg font-bold text-emerald-600 dark:text-emerald-400 truncate",children:ke(je.income)})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Sa√≠das"}),e.jsx("p",{className:"text-sm md:text-lg font-bold text-rose-600 dark:text-rose-400 truncate",children:ke(je.expense)})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Resultado (M√™s)"}),e.jsx("p",{className:`text-sm md:text-lg font-bold truncate ${je.balance>=0?"text-indigo-600 dark:text-indigo-400":"text-rose-600"}`,children:ke(je.balance)})]})]}),e.jsx("div",{ref:G,className:"scroll-mt-24",children:y&&e.jsxs("form",{onSubmit:Bs,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:P?"Editar Transa√ß√£o":"Adicionar Transa√ß√£o"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,type:"text",placeholder:"Descri√ß√£o",value:T.description,onChange:g=>J({...T,description:g.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none w-full pr-10"}),e.jsx("button",{type:"button",onClick:Ms,disabled:N||!T.description||!C,className:`absolute right-2 top-2 ${C?"text-indigo-500 hover:text-indigo-700":"text-slate-400 opacity-50 cursor-not-allowed"} disabled:opacity-30`,children:N?e.jsx(dt,{className:"w-5 h-5 animate-spin"}):e.jsx(oa,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("input",{required:!0,type:"number",placeholder:"Valor (R$)",value:T.amount,onChange:g=>J({...T,amount:g.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 outline-none"}),T.type==="income"&&T.category==="Sal√°rio"&&!P&&e.jsxs("div",{className:"flex items-center gap-2 mt-1 px-1 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group select-none",onClick:()=>p(!l),children:[e.jsx("div",{className:`w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors ${l?"bg-indigo-600 border-indigo-600":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800"}`,children:l&&e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),e.jsxs("span",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400 group-hover:text-indigo-500 transition-colors flex items-center gap-1",children:[e.jsx(ia,{className:"w-3 h-3"})," Descontar Pens√£o?"]})]}),l&&e.jsxs("div",{className:"flex items-center gap-1 animate-scale-in ml-auto",children:[e.jsx("input",{autoFocus:!0,type:"number",placeholder:"%",className:"w-12 py-0.5 px-1 text-xs border border-slate-300 rounded text-center outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white font-bold",value:w,onChange:g=>$(g.target.value)}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"%"})]})]})]}),e.jsxs("select",{value:T.type,onChange:Os,className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"expense",children:"Despesa"}),e.jsx("option",{value:"income",children:"Receita"})]}),e.jsx("select",{value:T.category,onChange:g=>J({...T,category:g.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:Q.map(g=>e.jsx("option",{value:g,children:g},g))}),e.jsxs("div",{children:[e.jsx("input",{required:!0,type:"date",value:T.date,onChange:g=>J({...T,date:g.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 w-full"}),T.category==="Sal√°rio"&&T.type==="income"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-100 dark:border-emerald-800/30 animate-fade-in mt-2",children:[e.jsx("input",{type:"checkbox",id:"useBusinessDay",checked:k,onChange:g=>L(g.target.checked),className:"w-3.5 h-3.5 text-emerald-600 rounded"}),e.jsxs("label",{htmlFor:"useBusinessDay",className:"text-xs font-bold text-emerald-700 dark:text-emerald-400 flex items-center gap-1 cursor-pointer flex-1",children:[e.jsx(da,{className:"w-3 h-3"})," Considerar dia √∫til?"]}),k&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",min:"1",max:"20",value:c,onChange:g=>S(g.target.value),className:"w-10 py-0.5 px-1 text-xs border border-emerald-300 rounded text-center outline-none focus:border-emerald-500 font-bold dark:bg-slate-700 dark:text-white"}),e.jsx("span",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 font-bold",children:"¬∫ dia"})]})]})]}),e.jsxs("select",{value:T.status,onChange:g=>J({...T,status:g.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"paid",children:"Pago/Recebido"}),e.jsx("option",{value:"pending",children:"Pendente"})]}),T.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-100 dark:border-indigo-800/30 animate-fade-in mt-1 md:col-span-2 md:mt-0",children:[e.jsx("input",{type:"checkbox",id:"autoPay",checked:T.autoPay||!1,onChange:g=>J({...T,autoPay:g.target.checked}),className:"w-4 h-4 text-indigo-600 rounded"}),e.jsxs("label",{htmlFor:"autoPay",className:"text-xs font-bold text-indigo-700 dark:text-indigo-400 flex items-center gap-1 cursor-pointer flex-1",children:[e.jsx(ht,{className:"w-3 h-3"})," Lan√ßamento Autom√°tico na Data?"]})]}),e.jsx("select",{value:T.paymentMethod,onChange:g=>J({...T,paymentMethod:g.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:le.map(g=>e.jsx("option",{value:g,children:ft[g]},g))}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("textarea",{placeholder:"Observa√ß√µes (opcional)",value:T.observation,onChange:g=>J({...T,observation:g.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 w-full outline-none resize-none h-20 text-sm"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-dashed border-slate-300 dark:border-slate-600 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"recurring",checked:T.isRecurring,onChange:g=>J({...T,isRecurring:g.target.checked}),className:"w-4 h-4 text-indigo-600 rounded"}),e.jsxs("label",{htmlFor:"recurring",className:"text-sm text-slate-700 dark:text-slate-200 font-medium flex items-center gap-1 cursor-pointer",children:[e.jsx(Se,{className:"w-4 h-4 text-indigo-500"})," Assinatura / Recorrente / Parcelado"]})]}),T.isRecurring&&e.jsxs("div",{className:"mt-2 pl-2 md:pl-6 animate-fade-in space-y-3",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>n("monthly"),className:`flex-1 py-1.5 px-3 rounded-lg text-xs font-bold border transition-colors ${u==="monthly"?"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800":"bg-slate-50 text-slate-500 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}`,children:"Mensal / Parcelado"}),e.jsx("button",{type:"button",onClick:()=>n("days"),className:`flex-1 py-1.5 px-3 rounded-lg text-xs font-bold border transition-colors ${u==="days"?"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800":"bg-slate-50 text-slate-500 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}`,children:"Dias Espec√≠ficos"})]}),u==="monthly"?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Repetir por quantas vezes? (Opcional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4 text-slate-400"}),e.jsx("input",{type:"number",placeholder:"Ex: 12 (Deixe vazio para assinatura infinita)",value:T.installments,onChange:g=>J({...T,installments:g.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 text-sm w-full outline-none focus:ring-2 focus:ring-indigo-500"})]})]})}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:[e.jsx(ca,{className:"w-3 h-3"})," Selecione os dias do m√™s"]}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:[...Array(31)].map((g,F)=>{const ee=F+1,te=m.includes(ee);return e.jsx("button",{type:"button",onClick:()=>Fs(ee),className:`h-8 rounded-md text-xs font-bold transition-all ${te?"bg-indigo-600 text-white shadow-md shadow-indigo-500/30 transform scale-105":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:ee},ee)})}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Uma transa√ß√£o ser√° criada para cada dia selecionado neste m√™s."})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:P?"Atualizar":"Salvar"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-1 flex",children:[e.jsxs("button",{onClick:()=>B("all"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="all"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(yt,{className:"w-4 h-4"})," Todas"]}),e.jsxs("button",{onClick:()=>B("income"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="income"?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(pt,{className:"w-4 h-4"})," Entradas"]}),e.jsxs("button",{onClick:()=>B("expense"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="expense"?"bg-rose-50 text-rose-600 dark:bg-rose-900/30 dark:text-rose-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(Qe,{className:"w-4 h-4"})," Sa√≠das"]})]}),e.jsx("div",{className:"space-y-4 pb-20 md:pb-0",children:qt.length===0?e.jsxs("div",{className:"text-center py-16 text-slate-400",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(kt,{className:"w-8 h-8 opacity-50"})}),e.jsx("p",{children:"Nenhuma transa√ß√£o encontrada."}),e.jsx("p",{className:"text-xs mt-1",children:"Tente mudar os filtros ou adicione uma nova."})]}):qt.map(g=>e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 mb-1 sticky top-0 z-10 bg-slate-50/95 dark:bg-slate-900/95 backdrop-blur-sm rounded-lg border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(fe,{className:"w-3 h-3"}),Ps(g.date)]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-bold ${g.total>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-500"}`,children:g.total!==0&&(g.total>0?"+":"")+ke(g.total)}),e.jsx("div",{className:"h-4 w-px bg-slate-300 dark:bg-slate-700"}),e.jsxs("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 flex items-center gap-1",title:"Saldo acumulado at√© este dia",children:[e.jsx(xa,{className:"w-3 h-3"}),ke(g.runningBalance)]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden divide-y divide-slate-100 dark:divide-slate-700",children:g.transactions.map(F=>e.jsxs("div",{className:"group hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{className:"md:hidden p-4 flex items-center gap-3 relative",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${F.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-rose-100 text-rose-600 dark:bg-rose-900/30"}`,children:F.type==="income"?e.jsx(pt,{className:"w-5 h-5"}):e.jsx(Qe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>Oe(F),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white truncate pr-2 text-sm",children:F.description}),e.jsxs("span",{className:`font-bold text-sm whitespace-nowrap ${F.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-800 dark:text-slate-200"}`,children:[F.type==="expense"&&"- ",ke(F.amount)]})]}),e.jsx("div",{className:"flex justify-between items-center mt-1",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium border ${re(F.category)}`,children:F.category}),F.isRecurring&&e.jsxs("span",{className:"flex items-center gap-0.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded",title:"Recorrente Infinito",children:[e.jsx(Kt,{className:"w-3 h-3"}),"Fixo"]}),F.status==="pending"&&F.autoPay&&e.jsxs("span",{className:"flex items-center gap-0.5 text-amber-600 bg-amber-50 dark:bg-amber-900/30 px-1.5 py-0.5 rounded",title:"Lan√ßamento Autom√°tico",children:[e.jsx(ht,{className:"w-3 h-3"})," Auto"]})]})}),F.observation&&e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1 italic truncate flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"})," ",F.observation]})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[e.jsx("button",{onClick:()=>x(F.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${F.status==="paid"?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent hover:border-emerald-400"}`,children:e.jsx(Ct,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>Oe(F),className:"p-1 text-slate-400",children:e.jsx(ma,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4 p-3 text-sm",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${F.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-rose-100 text-rose-600 dark:bg-rose-900/30"}`,children:F.type==="income"?e.jsx(pt,{className:"w-4 h-4"}):e.jsx(Qe,{className:"w-4 h-4"})}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 text-center font-bold text-slate-400 text-xs",children:parseInt(F.date.split("-")[2])}),e.jsx("div",{className:"w-24 shrink-0",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium border block text-center truncate ${re(F.category)}`,children:F.category})}),e.jsxs("div",{className:"flex-1 font-medium text-slate-700 dark:text-slate-200 truncate cursor-pointer hover:text-indigo-500 flex flex-col justify-center",onClick:()=>Oe(F),title:"Clique para editar",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[F.description,F.isRecurring&&e.jsxs("span",{className:"text-[10px] text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded flex items-center gap-0.5",title:"Recorr√™ncia Infinita",children:[e.jsx(Kt,{className:"w-3 h-3"})," Recorrente"]}),F.status==="pending"&&F.autoPay&&e.jsxs("span",{className:"text-[10px] text-amber-600 bg-amber-50 dark:bg-amber-900/30 px-1.5 py-0.5 rounded flex items-center gap-0.5",title:"Lan√ßamento Autom√°tico",children:[e.jsx(ht,{className:"w-3 h-3"})," Auto"]})]}),F.observation&&e.jsx("span",{className:"text-[10px] text-slate-400 font-normal truncate max-w-[300px]",children:F.observation})]}),e.jsxs("div",{className:"w-24 text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(Hr,{method:F.paymentMethod||"",className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:ft[F.paymentMethod||""]||"-"})]}),e.jsx("div",{className:`w-28 text-right font-bold cursor-pointer hover:text-indigo-500 ${F.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-200"}`,onClick:()=>Oe(F),children:ke(F.amount)}),e.jsx("div",{className:"w-8 flex justify-center",children:e.jsx("button",{onClick:()=>x(F.id),className:`transition-all hover:scale-110 ${F.status==="paid"?"text-emerald-500":"text-slate-300 hover:text-emerald-400"}`,title:F.status==="paid"?"Marcar como pendente":"Marcar como pago",children:e.jsx(Ct,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"w-16 flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>Oe(F),className:"p-1.5 text-slate-400 hover:text-indigo-500 rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(ua,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(F.id),className:"p-1.5 text-slate-400 hover:text-rose-500 rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(we,{className:"w-4 h-4"})})]})]})]})]},F.id))})]},g.date))}),e.jsx("button",{onClick:()=>{He(),j(!0)},className:"md:hidden fixed bottom-20 right-4 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center z-40 hover:scale-105 transition-transform",children:e.jsx(de,{className:"w-7 h-7"})})]})},Xr=["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"],Jr=["Casa","Mobilidade","Alimentos","Lazer","Sa√∫de","Educa√ß√£o","Pets","Sal√°rio","Renda Extra","Investimentos","Outros"],Qr=[{value:"credit_card",label:"Cr√©dito"},{value:"debit_card",label:"D√©bito"},{value:"pix",label:"PIX"},{value:"cash",label:"Dinheiro"},{value:"direct_debit",label:"D√©bito Auto."}],Zr=t=>{let a=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//NEXO Finance//PT-BR
`;t.forEach(i=>{const f=i.date.replace(/-/g,"");a+=`BEGIN:VEVENT
`,a+=`DTSTART;VALUE=DATE:${f}
`,a+=`DTEND;VALUE=DATE:${f}
`,a+=`SUMMARY:${i.description} (${i.type==="income"?"+":"-"} R$ ${i.amount})
`,a+=`DESCRIPTION:Categoria: ${i.category} | Status: ${i.status} ${i.observation?"| Obs: "+i.observation:""}
`,a+=`END:VEVENT
`}),a+="END:VCALENDAR";const o=new Blob([a],{type:"text/calendar;charset=utf-8"}),r=document.createElement("a");r.href=window.URL.createObjectURL(o),r.setAttribute("download","nexo_agenda.ics"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},el=({transactions:t,budgets:a,onAddTransaction:o,privacyMode:r})=>{const[i,f]=d.useState(new Date),[x,D]=d.useState(new Date().getDate()),[v,C]=d.useState("all"),[R,y]=d.useState(!1),[j,N]=d.useState(!1),[b,O]=d.useState({description:"",amount:"",type:"expense",category:"Outros",paymentMethod:"credit_card",status:"pending",observation:""}),M=i.getFullYear(),_=i.getMonth(),E=(s,l)=>new Date(s,l+1,0).getDate(),h=(s,l)=>new Date(s,l,1).getDay(),B=E(M,_),I=h(M,_),U=d.useMemo(()=>{const s=[],l=new Date,p=l.getMonth(),w=l.getFullYear(),$=l.toISOString().slice(0,7);return a.forEach(k=>{if(!(k.isRecurring&&!a.some(S=>S.category===k.category&&S.month===$&&!S.isRecurring)||k.month===$))return;t.filter(S=>S.type==="expense"&&S.category===k.category&&new Date(S.date).getMonth()===p&&new Date(S.date).getFullYear()===w).reduce((S,G)=>S+G.amount,0)>=k.limit&&s.push({title:`Limite Excedido: ${k.category}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),s},[a,t]),W=d.useMemo(()=>{const s=t.filter(k=>{const[L,c]=k.date.split("-").map(Number);return L===M&&c===_+1}),l=new Map;t.forEach(k=>{if(k.isRecurring){const L=l.get(k.description);(!L||new Date(k.date)>new Date(L.date))&&l.set(k.description,k)}});const p=[],w=new Date;return new Date(M,_,1)>=new Date(w.getFullYear(),w.getMonth(),1)&&l.forEach(k=>{if(!s.some(c=>c.description===k.description&&c.amount===k.amount)){const c=new Date(k.date),S=c.getDate(),G=Math.min(S,B);c<new Date(M,_+1,0)&&p.push({...k,id:`ghost-${k.id}-${M}-${_}`,date:`${M}-${String(_+1).padStart(2,"0")}-${String(G).padStart(2,"0")}`,status:"pending",isGhost:!0})}}),[...s,...p].filter(k=>v==="all"?!0:v==="pending"?k.status==="pending":k.type===v)},[t,M,_,B,v]),A=d.useMemo(()=>x===null?[]:W.filter(s=>parseInt(s.date.split("-")[2])===x),[W,x]),q=d.useMemo(()=>{let s=0;for(let l=1;l<=B;l++){const p=W.filter(w=>parseInt(w.date.split("-")[2])===l&&w.type==="expense").reduce((w,$)=>w+$.amount,0);p>s&&(s=p)}return s||1},[W,B]),H=()=>{f(new Date(M,_-1,1)),D(null)},Y=()=>{f(new Date(M,_+1,1)),D(null)},X=()=>{x&&(O({description:"",amount:"",type:"expense",category:"Outros",paymentMethod:"credit_card",status:"pending",observation:""}),N(!0))},P=s=>{if(s.preventDefault(),!x)return;const l=`${M}-${String(_+1).padStart(2,"0")}-${String(x).padStart(2,"0")}`;o({description:b.description,amount:parseFloat(b.amount),type:b.type,category:b.category,date:l,status:b.status,paymentMethod:b.paymentMethod,isRecurring:!1,observation:b.observation}),N(!1)},V=async()=>{if(!me.currentUser){alert("Voc√™ precisa estar logado para sincronizar.");return}y(!0);try{const s=await Gr(t,(l,p)=>{Ze(me.currentUser.uid,l,p)});s>0?alert(`${s} eventos criados na sua Google Agenda!`):alert("Tudo sincronizado! Nenhuma nova conta pendente encontrada.")}catch(s){console.error(s),alert("Erro ao sincronizar: "+s.message)}finally{y(!1)}},u=s=>r?"‚Ä¢‚Ä¢‚Ä¢":s>=1e3?(s/1e3).toFixed(1)+"k":s.toFixed(0),n=s=>r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,m=[];for(let s=0;s<I;s++)m.push(e.jsx("div",{className:"h-28 bg-slate-50/30 dark:bg-slate-800/30 border border-slate-100 dark:border-slate-700/50"},`empty-${s}`));for(let s=1;s<=B;s++){const l=W.filter(S=>parseInt(S.date.split("-")[2])===s),p=l.filter(S=>S.type==="income").reduce((S,G)=>S+G.amount,0),w=l.filter(S=>S.type==="expense").reduce((S,G)=>S+G.amount,0),$=Math.min(1,w/q);let k="bg-white dark:bg-slate-800";w>0&&($>.7?k="bg-rose-100 dark:bg-rose-900/40":$>.4?k="bg-rose-50 dark:bg-rose-900/20":k="bg-slate-50 dark:bg-slate-800");const L=new Date().getDate()===s&&new Date().getMonth()===_&&new Date().getFullYear()===M,c=x===s;m.push(e.jsxs("div",{onClick:()=>D(s),className:`h-28 p-1.5 border border-slate-100 dark:border-slate-700 relative cursor-pointer transition-all hover:brightness-95
          ${c?"ring-2 ring-inset ring-indigo-500 z-10":""}
          ${k}
        `,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:`text-xs font-bold inline-flex w-6 h-6 items-center justify-center rounded-full ${L?"bg-indigo-600 text-white shadow-lg":"text-slate-500 dark:text-slate-400"}`,children:s}),l.some(S=>S.status==="pending")&&e.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse",title:"Pagamentos Pendentes"})]}),e.jsxs("div",{className:"mt-2 flex flex-col gap-0.5",children:[p>0&&e.jsxs("div",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-100/50 dark:bg-emerald-900/30 px-1 rounded truncate",children:["+",u(p)]}),w>0&&e.jsxs("div",{className:"text-[10px] font-bold text-rose-600 dark:text-rose-400 px-1 rounded truncate",children:["-",u(w)]}),l.some(S=>S.isGhost)&&e.jsx("div",{className:"absolute bottom-1 right-1 opacity-50",children:e.jsx(Ot,{className:"w-3 h-3 text-slate-400"})})]})]},s))}return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20 md:pb-0 relative",children:[U.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:U.map((s,l)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down shadow-sm",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Et,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:s.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:s.message})]})]},l))}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Nova Transa√ß√£o"}),e.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-semibold flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"}),x," de ",i.toLocaleDateString("pt-BR",{month:"long"})]})]}),e.jsx("button",{onClick:()=>N(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"O que √©?"}),e.jsxs("div",{className:"relative",children:[e.jsx(ga,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("input",{autoFocus:!0,required:!0,type:"text",placeholder:"Ex: Mercado, Conta de Luz...",value:b.description,onChange:s=>O({...b,description:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Valor (R$)"}),e.jsxs("div",{className:"relative",children:[e.jsx(rt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0,00",value:b.amount,onChange:s=>O({...b,amount:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Tipo"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 rounded-xl p-1",children:[e.jsx("button",{type:"button",onClick:()=>O({...b,type:"expense"}),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition-colors ${b.type==="expense"?"bg-white dark:bg-slate-600 text-rose-600 shadow-sm":"text-slate-500"}`,children:"Sa√≠da"}),e.jsx("button",{type:"button",onClick:()=>O({...b,type:"income"}),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition-colors ${b.type==="income"?"bg-white dark:bg-slate-600 text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Entrada"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Categoria"}),e.jsxs("div",{className:"relative",children:[e.jsx(ws,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("select",{value:b.category,onChange:s=>O({...b,category:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 appearance-none",children:Jr.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Pagamento"}),e.jsxs("div",{className:"relative",children:[e.jsx(at,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("select",{value:b.paymentMethod,onChange:s=>O({...b,paymentMethod:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 appearance-none",children:Qr.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"Status"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:`flex-1 cursor-pointer border rounded-xl p-3 flex items-center justify-center gap-2 transition-all ${b.status==="paid"?"bg-emerald-50 border-emerald-500 text-emerald-700 dark:bg-emerald-900/20":"border-slate-200 dark:border-slate-700"}`,children:[e.jsx("input",{type:"radio",name:"status",className:"hidden",checked:b.status==="paid",onChange:()=>O({...b,status:"paid"})}),e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Pago / Recebido"})]}),e.jsxs("label",{className:`flex-1 cursor-pointer border rounded-xl p-3 flex items-center justify-center gap-2 transition-all ${b.status==="pending"?"bg-amber-50 border-amber-500 text-amber-700 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700"}`,children:[e.jsx("input",{type:"radio",name:"status",className:"hidden",checked:b.status==="pending",onChange:()=>O({...b,status:"pending"})}),e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Pendente"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Observa√ß√µes (Opcional)"}),e.jsx("input",{type:"text",placeholder:"Detalhes adicionais...",value:b.observation,onChange:s=>O({...b,observation:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 mt-4",children:[e.jsx(de,{className:"w-5 h-5"})," Adicionar Transa√ß√£o"]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(fe,{className:"w-7 h-7 text-indigo-600"}),"Agenda Financeira"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Previs√£o de gastos e controle de vencimentos."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("button",{onClick:V,disabled:R,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-bold transition-all shadow-sm border ${R?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-white hover:bg-slate-50 text-indigo-600 border-indigo-100 hover:border-indigo-300 dark:bg-slate-800 dark:text-indigo-400 dark:border-slate-700"}`,title:"Sincronizar contas pendentes com Google Agenda",children:[e.jsx(ba,{className:`w-4 h-4 ${R?"animate-spin":""}`}),R?"Sincronizando...":"Sincronizar Agenda"]}),e.jsx("button",{onClick:()=>Zr(W),className:"p-2 text-slate-500 hover:text-indigo-600 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800",title:"Exportar para Arquivo (.ics)",children:e.jsx(Rt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-1 flex-1 md:flex-none justify-center",children:[e.jsx("button",{onClick:H,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(Mt,{className:"w-5 h-5"})}),e.jsx("div",{className:"px-4 font-semibold text-slate-700 dark:text-slate-200 capitalize min-w-[140px] text-center",children:i.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:Y,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(xt,{className:"w-5 h-5"})})]})]})]}),e.jsx("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 overflow-x-auto",children:[{id:"all",label:"Tudo",icon:Ns},{id:"expense",label:"Sa√≠das",icon:Yt},{id:"income",label:"Entradas",icon:Ht},{id:"pending",label:"Pendentes",icon:et}].map(s=>e.jsxs("button",{onClick:()=>C(s.id),className:`flex-1 min-w-[80px] py-2 text-xs font-semibold rounded-lg transition-all flex items-center justify-center gap-2
                    ${v===s.id?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(s.icon,{className:"w-3 h-3"})," ",s.label]},s.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:Xr.map(s=>e.jsx("div",{className:"py-3 text-center text-xs font-bold uppercase text-slate-500 dark:text-slate-400",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7",children:m})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-0 overflow-hidden flex flex-col h-full min-h-[400px]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:x?`${x} de ${i.toLocaleDateString("pt-BR",{month:"long"})}`:"Resumo do M√™s"}),x&&e.jsxs("button",{onClick:X,className:"mt-3 w-full py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[e.jsx(de,{className:"w-4 h-4"})," Adicionar neste dia"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[x&&A.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx(Ve,{className:"w-12 h-12 text-slate-200 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma movimenta√ß√£o."})]}),!x&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-100 dark:bg-slate-700 mb-4",children:e.jsx(fe,{className:"w-8 h-8 text-indigo-500"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Selecione um dia"}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Clique no calend√°rio para ver detalhes ou adicionar contas."})]}),A.map((s,l)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${s.isGhost?"bg-slate-50 dark:bg-slate-800 border-dashed border-indigo-300 dark:border-indigo-700":"bg-white dark:bg-slate-700/50 border-slate-100 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400"}`,children:s.type==="income"?e.jsx(Ht,{className:"w-4 h-4"}):e.jsx(Yt,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-white text-sm line-clamp-1",children:s.description}),s.isGhost&&e.jsx("span",{className:"text-[9px] bg-indigo-100 text-indigo-600 px-1.5 rounded uppercase font-bold",children:"Previsto"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.category}),s.observation&&e.jsx("p",{className:"text-[10px] text-slate-400 italic mt-0.5",children:s.observation})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`font-bold text-sm ${s.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-300"}`,children:n(s.amount)}),s.type==="expense"&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${s.status==="pending"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:s.status==="pending"?"Pendente":"Pago"})]})]},s.id||l))]})]})]})]})},tl=({transactions:t,onUpdateTransaction:a,onDeleteTransaction:o,privacyMode:r})=>{const i=d.useMemo(()=>{const j=new Map;return t.filter(b=>b.type==="expense"&&b.isRecurring).forEach(b=>{const O=j.get(b.description);(!O||new Date(b.date)>new Date(O.date))&&j.set(b.description,b)}),Array.from(j.values()).sort((b,O)=>O.amount-b.amount)},[t]),f=i.reduce((j,N)=>j+N.amount,0),x=f*12,D=d.useMemo(()=>i.slice(0,10).map(j=>({name:j.description,amount:j.amount,annual:j.amount*12,color:j.amount>200?"#ef4444":j.amount>50?"#f59e0b":"#3b82f6"})),[i]),v=j=>r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${j.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,C=j=>{confirm("Deseja parar de considerar este item como recorrente? Ele continuar√° como uma transa√ß√£o comum.")&&a(j,{isRecurring:!1})},R=j=>{const b=new Date(j).getDate(),O=new Date;let M=new Date(O.getFullYear(),O.getMonth(),b);M.setHours(0,0,0,0)<O.setHours(0,0,0,0)&&M.setMonth(M.getMonth()+1);const _=M.getTime()-O.getTime(),E=Math.ceil(_/(1e3*60*60*24));return E===0?{label:"Hoje",color:"text-rose-500 font-bold bg-rose-100 dark:bg-rose-900/30"}:E===1?{label:"Amanh√£",color:"text-amber-500 font-bold bg-amber-100 dark:bg-amber-900/30"}:{label:`em ${E} dias`,color:"text-slate-500 bg-slate-100 dark:bg-slate-700"}},y=({active:j,payload:N,label:b})=>{if(j&&N&&N.length){const O=N[0].payload;return e.jsxs("div",{className:"bg-white/95 dark:bg-slate-800/95 p-3 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 backdrop-blur-sm",children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white mb-2 border-b border-slate-100 dark:border-slate-700 pb-1",children:O.name}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between gap-6 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:"Mensalidade:"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${O.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})}`})]}),e.jsxs("div",{className:"flex justify-between gap-6 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:"Custo Anual:"}),e.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${O.annual.toLocaleString("pt-BR",{minimumFractionDigits:2})}`})]})]})]})}return null};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Se,{className:"w-7 h-7 text-indigo-600"}),"Gest√£o de Assinaturas"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Gerencie seus gastos recorrentes e descubra o impacto anual das pequenas mensalidades."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-indigo-600 text-white p-6 rounded-xl shadow-lg relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium mb-1 uppercase tracking-wider",children:"Custo Mensal Real"}),e.jsx("h3",{className:"text-3xl font-bold",children:v(f)}),e.jsxs("p",{className:"text-indigo-200 text-xs mt-2 opacity-80",children:[i.length," assinaturas ativas"]})]}),e.jsx(Ve,{className:"absolute right-4 bottom-4 w-24 h-24 text-indigo-500 opacity-20"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-6 rounded-xl shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1 uppercase tracking-wider",children:"Impacto Anual"}),e.jsx("h3",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:v(x)}),e.jsxs("p",{className:"text-emerald-500 text-xs mt-2 font-medium flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3"}),"Proje√ß√£o de 12 meses"]})]}),e.jsx(rt,{className:"absolute right-4 bottom-4 w-24 h-24 text-slate-100 dark:text-slate-700"})]})]}),D.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2 mb-4",children:[e.jsx(_e,{className:"w-5 h-5 text-indigo-500"}),"Ranking de Custos (Top 10)"]}),e.jsx("div",{className:"h-[250px] w-full",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Lt,{data:D,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Ge,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(qe,{type:"number",hide:!0}),e.jsx(Ue,{dataKey:"name",type:"category",width:120,tick:{fill:"#64748b",fontSize:11,fontWeight:500},axisLine:!1,tickLine:!1}),e.jsx(ve,{content:e.jsx(y,{}),cursor:{fill:"transparent"}}),e.jsx(it,{dataKey:"amount",radius:[0,4,4,0],barSize:20,children:D.map((j,N)=>e.jsx(mt,{fill:j.color},`cell-${N}`))})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(Se,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Nenhuma assinatura encontrada."}),e.jsx("p",{className:"text-slate-400 text-sm",children:'Marque a op√ß√£o "Recorrente" ao adicionar uma despesa.'})]}):i.map(j=>{const N=R(j.date);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"overflow-hidden mr-2",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-lg truncate mb-1",children:j.description}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400",children:j.category})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>C(j.id),className:"p-1.5 text-slate-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",title:"Remover recorr√™ncia",children:e.jsx(ks,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(j.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors",title:"Excluir assinatura",children:e.jsx(oe,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex items-center justify-between mt-2 mb-4",children:e.jsxs("div",{className:`flex items-center gap-1.5 text-[10px] uppercase font-bold px-2 py-1 rounded-md ${N.color}`,children:[e.jsx(fe,{className:"w-3 h-3"}),"Renova ",N.label]})}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-400 block",children:"Mensal"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:v(j.amount)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-slate-400 block",children:"Anual"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:v(j.amount*12)})]})]})]},j.id)})})]})},sl=["Serasa Limpa Nome","Acordo Certo","Desenrola Brasil","SPC Brasil","Boa Vista (Consumidor Positivo)","Direto com Banco/Credor","QueroQuitar","Pessoal/Fam√≠lia","Outros"],al=({debts:t,onAdd:a,onUpdate:o,onDelete:r,onAddTransaction:i,privacyMode:f,quickActionSignal:x})=>{const[D,v]=d.useState(!1),[C,R]=d.useState("all"),[y,j]=d.useState({isOpen:!1,debtId:""}),[N,b]=d.useState({date:new Date().toISOString().split("T")[0],amount:"",installments:1}),[O,M]=d.useState({isOpen:!1,debtId:"",currentValue:0}),[_,E]=d.useState("1"),[h,B]=d.useState({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""});d.useEffect(()=>{x&&Date.now()-x<2e3&&(v(!0),B({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""}))},[x]);const I=n=>{const m=new Date(n);return(new Date().getTime()-m.getTime())/(1e3*60*60*24*365.25)>=5},U=d.useMemo(()=>{let n=[...t];return C==="active"?n=n.filter(m=>!I(m.dueDate)):C==="prescribed"&&(n=n.filter(m=>I(m.dueDate))),n.sort((m,s)=>{const l=$=>$.status==="paid"?500:$.status==="agreement"?1:$.status==="negotiating"?2:I($.dueDate)?4:3,p=l(m),w=l(s);return p!==w?p-w:s.currentAmount-m.currentAmount})},[t,C]),W=n=>{n.preventDefault();const m=h.targetAmount?parseFloat(h.targetAmount):0,s=h.platform==="Outros"?h.customPlatform:h.platform;a({creditor:h.creditor,originalAmount:parseFloat(h.originalAmount),currentAmount:parseFloat(h.currentAmount),targetAmount:m,dueDate:h.dueDate,status:h.status,platform:s,notes:h.notes}),B({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""}),v(!1)},A=(n,m)=>{if(m==="agreement"&&n.status!=="agreement"){j({isOpen:!0,debtId:n.id});const s=n.targetAmount>0?n.targetAmount:n.currentAmount;b({date:new Date().toISOString().split("T")[0],amount:s.toString(),installments:1})}else o(n.id,{status:m})},q=n=>{n.preventDefault();const m=t.find($=>$.id===y.debtId);if(!m)return;const s=parseFloat(N.amount),l=Math.max(1,Math.floor(N.installments)),p=s/l;o(m.id,{status:"agreement",agreedAmount:s});const w=new Date(N.date);for(let $=0;$<l;$++){const k=new Date(w);k.setMonth(w.getMonth()+$);const L=l>1?`Acordo: ${m.creditor} (${$+1}/${l})`:`Acordo: ${m.creditor}`;i({description:L,amount:parseFloat(p.toFixed(2)),type:"expense",category:"Outros",date:k.toISOString().split("T")[0],status:"pending",paymentMethod:"pix",debtId:m.id})}alert(`Acordo registrado! ${l>1?`${l} parcelas agendadas`:"Pagamento agendado"}. A d√≠vida ser√° quitada automaticamente quando todas as parcelas forem pagas.`),j({isOpen:!1,debtId:""})},H=n=>{M({isOpen:!0,debtId:n.id,currentValue:n.currentAmount}),E("1")},Y=()=>{const n=t.find(m=>m.id===O.debtId);if(n){const m=parseFloat(_),s=n.currentAmount*(1+m/100);o(n.id,{currentAmount:s})}M({isOpen:!1,debtId:"",currentValue:0})},X=n=>f?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${n.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,P=t.filter(n=>n.status!=="paid").reduce((n,m)=>n+m.currentAmount,0),V=t.filter(n=>n.status!=="paid").reduce((n,m)=>n+m.targetAmount,0),u=t.filter(n=>n.status!=="paid"&&n.targetAmount>0).reduce((n,m)=>n+(m.currentAmount-m.targetAmount),0);return e.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[O.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 animate-scale-in",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-rose-500"})," Atualizar Juros"]})}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"O efeito bola de neve √© real. Atualize o valor para manter o controle."}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg mb-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:"Valor Atual"}),e.jsx("span",{className:"font-mono font-bold text-slate-700 dark:text-white",children:X(O.currentValue)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("button",{onClick:()=>E("1"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${_==="1"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+1%"}),e.jsx("button",{onClick:()=>E("2"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${_==="2"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+2%"}),e.jsx("button",{onClick:()=>E("5"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${_==="5"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+5%"}),e.jsxs("div",{className:"relative w-20",children:[e.jsx("input",{type:"number",value:_,onChange:n=>E(n.target.value),className:"w-full py-2 pl-2 pr-4 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 text-xs font-bold text-center outline-none focus:border-rose-500"}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-slate-400",children:"%"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M({isOpen:!1,debtId:"",currentValue:0}),className:"flex-1 py-2.5 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-bold",children:"Cancelar"}),e.jsx("button",{onClick:Y,className:"flex-1 py-2.5 bg-rose-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-rose-500/20",children:"Aplicar"})]})]})}),y.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-emerald-500/30 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-emerald-600 dark:text-emerald-400",children:[e.jsx(We,{className:"w-8 h-8"}),e.jsx("h3",{className:"text-xl font-bold",children:"Oficializar Acordo"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm mb-6",children:"Qual foi o valor final negociado? Vamos atualizar o card e agendar o(s) pagamento(s)."}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Total Fechado (R$)"}),e.jsx("input",{type:"number",required:!0,step:"0.01",placeholder:"Valor total a pagar",value:N.amount,onChange:n=>b({...N,amount:n.target.value}),className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white font-bold text-lg outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"1¬™ Parcela"}),e.jsx("input",{type:"date",required:!0,value:N.date,onChange:n=>b({...N,date:n.target.value}),className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"N¬∫ Parcelas"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"60",value:N.installments,onChange:n=>b({...N,installments:parseInt(n.target.value)}),className:"w-full p-3 pl-9 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>j({isOpen:!1,debtId:""}),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 rounded-lg font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold shadow-lg shadow-emerald-500/30",children:"Gerar Parcelas"})]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ze,{className:"w-7 h-7 text-rose-600"}),"Gest√£o de D√≠vidas (Limpa Nome)"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Controle suas pend√™ncias e foque no que realmente importa."})]}),e.jsxs("button",{onClick:()=>v(!D),className:"flex items-center gap-2 bg-rose-600 text-white px-4 py-2 rounded-lg hover:bg-rose-700 transition-colors shadow-sm",children:[e.jsx(de,{className:"w-4 h-4"}),"Registrar D√≠vida"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-rose-100 dark:border-rose-900/30 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-semibold uppercase",children:"Total da D√≠vida (Banco)"}),e.jsx("h3",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400",children:X(P)}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Valor cheio com juros"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-emerald-100 dark:border-emerald-900/30 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-semibold uppercase",children:"Valor para Quita√ß√£o (Alvo)"}),e.jsx("h3",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:X(V)}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Soma das metas definidas"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:[e.jsx("p",{className:"text-indigo-100 text-xs font-semibold uppercase",children:"Economia Potencial"}),e.jsx("h3",{className:"text-2xl font-bold",children:X(u)}),e.jsx("p",{className:"text-indigo-100 text-xs mt-1",children:"Baseado nas suas metas"})]})]}),D&&e.jsxs("form",{onSubmit:W,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-rose-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Registrar Nova Pend√™ncia"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Institui√ß√£o / Credor"}),e.jsx("input",{required:!0,type:"text",placeholder:"Ex: Banco X, Loja Y",value:h.creditor,onChange:n=>B({...h,creditor:n.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-rose-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Valor Original (R$)"}),e.jsx("input",{required:!0,type:"number",value:h.originalAmount,onChange:n=>B({...h,originalAmount:n.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Valor Atual c/ Juros (R$)"}),e.jsx("input",{required:!0,type:"number",value:h.currentAmount,onChange:n=>B({...h,currentAmount:n.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Data Vencimento Original"}),e.jsx("input",{required:!0,type:"date",value:h.dueDate,onChange:n=>B({...h,dueDate:n.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Importante para calcular a prescri√ß√£o."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Meta de Acordo (Opcional)"}),e.jsx("input",{type:"number",placeholder:"Deixe em branco se n√£o houver meta",value:h.targetAmount,onChange:n=>B({...h,targetAmount:n.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Plataforma de Negocia√ß√£o"}),e.jsx("select",{value:h.platform,onChange:n=>B({...h,platform:n.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none mb-2",children:sl.map(n=>e.jsx("option",{value:n,children:n},n))}),h.platform==="Outros"&&e.jsx("div",{className:"animate-fade-in",children:e.jsx("input",{type:"text",placeholder:"Digite o nome da plataforma ou pessoa...",value:h.customPlatform,onChange:n=>B({...h,customPlatform:n.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-rose-500",autoFocus:!0})})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 font-medium",children:"Salvar D√≠vida"})]})]}),e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>R("all"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${C==="all"?"bg-white dark:bg-slate-700 text-rose-600 dark:text-rose-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(yt,{className:"w-4 h-4"}),"Todas"]}),e.jsxs("button",{onClick:()=>R("active"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${C==="active"?"bg-white dark:bg-slate-700 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(ks,{className:"w-4 h-4"}),"Ativas"]}),e.jsxs("button",{onClick:()=>R("prescribed"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${C==="prescribed"?"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(fa,{className:"w-4 h-4"}),"Prescritas"]})]}),e.jsx("div",{className:"flex flex-col gap-4",children:t.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(ye,{className:"w-12 h-12 text-emerald-500 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-800 dark:text-white font-medium",children:"Nome Limpo!"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma d√≠vida registrada."})]}):U.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(yt,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Nenhuma d√≠vida encontrada neste filtro."})]}):U.map(n=>{const m=I(n.dueDate),s=n.status==="paid",l=n.status==="agreement",p=n.targetAmount&&n.targetAmount>0,w=n.agreedAmount&&n.agreedAmount>0,$=w?n.agreedAmount:n.targetAmount,k=p||w?(n.currentAmount-$)/n.currentAmount*100:0;return e.jsxs("div",{className:`p-6 rounded-xl border transition-all relative overflow-hidden group ${s?"bg-slate-50 border-slate-200 opacity-75 grayscale-[0.8] dark:bg-slate-900 dark:border-slate-700":l?"bg-gradient-to-r from-emerald-50 to-white border-emerald-300 dark:from-emerald-900/10 dark:to-slate-800 dark:border-emerald-800 shadow-md ring-1 ring-emerald-500/20":m?"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700":"bg-white border-rose-100 dark:bg-slate-800 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-rose-300"}`,children:[s&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 pointer-events-none opacity-80 rotate-[-15deg]",children:e.jsxs("div",{className:"border-4 border-slate-400 text-slate-400 text-6xl font-black px-4 py-1 rounded-lg uppercase tracking-widest flex items-center gap-2",children:[e.jsx(vt,{className:"w-12 h-12"})," RESOLVIDO"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4 relative z-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[l?e.jsxs("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"})," ACORDO FECHADO"]}):n.status==="negotiating"?e.jsxs("span",{className:"bg-amber-100 text-amber-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"})," EM NEGOCIA√á√ÉO"]}):m?e.jsxs("span",{className:"bg-slate-200 text-slate-600 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3"})," PRESCRITA"]}):s?e.jsxs("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"})," QUITADA"]}):e.jsxs("span",{className:"bg-rose-100 text-rose-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"})," ATIVA"]}),n.platform&&e.jsxs("span",{className:"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1 border border-indigo-100 dark:border-indigo-800",children:[e.jsx(ja,{className:"w-3 h-3"})," ",n.platform]}),e.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1 ml-auto md:ml-0",children:[e.jsx(Ve,{className:"w-3 h-3"}),new Date(n.dueDate).toLocaleDateString("pt-BR")]})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:n.creditor}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Valor Original"}),e.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-300",children:X(n.originalAmount)})]}),e.jsx("div",{className:"flex items-center text-slate-400",children:e.jsx(ct,{className:"w-4 h-4"})}),e.jsxs("div",{className:"group/value cursor-pointer",onClick:()=>!s&&!l&&H(n),title:"Clique para atualizar juros",children:[e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:["Valor Atual",!s&&!l&&e.jsx(be,{className:"w-3 h-3 text-rose-500 opacity-50 group-hover/value:opacity-100"})]}),e.jsx("p",{className:`font-bold transition-colors ${s?"text-slate-500":m?"text-slate-600 dark:text-slate-400":"text-rose-600 group-hover/value:text-rose-700"}`,children:X(n.currentAmount)})]})]})]}),e.jsx("div",{className:`p-3 rounded-lg border min-w-[200px] flex flex-col justify-center ${l?"bg-white border-emerald-200 shadow-sm":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-700"}`,children:l&&w?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-emerald-500 font-bold mb-1 flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"})," Valor Acordado"]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:X(n.agreedAmount)}),e.jsxs("p",{className:"text-[10px] text-emerald-600/70 mt-1",children:["Economia de ",k.toFixed(0),"%"]})]}):p?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium mb-1 flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3 text-slate-400"})," Meta de Acordo"]}),e.jsx("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:X(n.targetAmount)}),e.jsxs("p",{className:"text-[10px] text-emerald-600/70 mt-1",children:["Desconto Alvo: ",k.toFixed(0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-400 font-medium mb-1 flex items-center gap-1",children:[e.jsx(Na,{className:"w-3 h-3"})," Meta"]}),e.jsx("p",{className:"text-sm font-semibold text-slate-400 dark:text-slate-500 italic",children:"Sem meta definida"})]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("select",{value:n.status,onChange:L=>A(n,L.target.value),className:`text-xs border rounded-lg p-1.5 outline-none font-medium cursor-pointer ${l?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200"}`,children:[e.jsx("option",{value:"open",children:"Em Aberto"}),e.jsx("option",{value:"negotiating",children:"Em Negocia√ß√£o"}),e.jsx("option",{value:"agreement",children:"Acordo Fechado"}),e.jsx("option",{value:"paid",children:"Quitado"})]}),e.jsx("button",{onClick:()=>r(n.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors self-end",title:"Excluir Registro",children:e.jsx(we,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50 text-xs flex items-start gap-2",children:s?e.jsxs("p",{className:"text-emerald-600 dark:text-emerald-400 flex items-center gap-1 font-medium",children:[e.jsx(ye,{className:"w-4 h-4"})," D√≠vida liquidada com sucesso. Parab√©ns pela organiza√ß√£o!"]}):l?e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-2 rounded w-full",children:[e.jsxs("p",{className:"text-emerald-700 dark:text-emerald-300 flex items-center gap-1 font-semibold",children:[e.jsx(fe,{className:"w-4 h-4"})," Acordo Firmado: ",X(n.agreedAmount||0)]}),e.jsxs("p",{className:"text-emerald-600/80 dark:text-emerald-400/80 mt-1 pl-5",children:["N√£o esque√ßa de pagar na data combinada. ",n.agreedAmount&&n.agreedAmount>0?"As parcelas j√° foram lan√ßadas no seu fluxo.":""]})]}):n.status==="negotiating"?e.jsxs("p",{className:"text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx(We,{className:"w-4 h-4"})," Voc√™ iniciou contatos. Mantenha a press√£o para conseguir o melhor desconto."]}):m?e.jsxs("p",{className:"text-slate-500 flex items-center gap-1",children:[e.jsx(Wt,{className:"w-4 h-4"})," D√≠vida antiga (+5 anos). N√£o afeta score, negocie apenas se tiver sobra de caixa."]}):e.jsxs("p",{className:"text-rose-600 dark:text-rose-400 flex items-center gap-1 font-medium",children:[e.jsx(ze,{className:"w-4 h-4"})," Prioridade Alta! Esta d√≠vida est√° ativa e impactando seu cr√©dito. Tente negociar."]})})]},n.id)})})]})},rl=({currentView:t,onNavigate:a,data:o,actions:r,privacyMode:i,hasApiKey:f,quickActionSignal:x})=>{const D=[{id:z.TRANSACTIONS,label:"Transa√ß√µes",icon:va},{id:z.CALENDAR,label:"Agenda",icon:fe},{id:z.SUBSCRIPTIONS,label:"Assinaturas",icon:Se},{id:z.DEBTS,label:"D√≠vidas",icon:ze}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Navega√ß√£o"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3",children:D.map(v=>{const C=t===v.id;return e.jsxs("button",{onClick:()=>a(v.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${C?"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-500/30 scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:border-indigo-300 dark:hover:border-indigo-500 hover:bg-slate-50 dark:hover:bg-slate-700"}
                `,children:[e.jsx(v.icon,{className:`w-5 h-5 ${C?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"text-sm",children:v.label}),C&&e.jsx("span",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-8 h-1 bg-indigo-400/50 rounded-full blur-sm md:hidden"})]},v.id)})})]}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===z.TRANSACTIONS&&e.jsx(Wr,{transactions:o.transactions,categories:o.categories,budgets:o.budgets,onAdd:r.addTransaction,onUpdate:r.updateTransaction,onDelete:r.deleteTransaction,onToggleStatus:r.toggleTransactionStatus,onNavigate:a,privacyMode:i,hasApiKey:f,quickActionSignal:x}),t===z.CALENDAR&&e.jsx(el,{transactions:o.transactions,budgets:o.budgets,onAddTransaction:r.addTransaction,privacyMode:i}),t===z.SUBSCRIPTIONS&&e.jsx(tl,{transactions:o.transactions,onUpdateTransaction:r.updateTransaction,onDeleteTransaction:r.deleteTransaction,privacyMode:i}),t===z.DEBTS&&e.jsx(al,{debts:o.debts||[],onAdd:r.addDebt,onUpdate:r.updateDebt,onDelete:r.deleteDebt,onAddTransaction:r.addTransaction,privacyMode:i,quickActionSignal:x})]})]})},ms=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6366f1"],ll=({investments:t,onAdd:a,onUpdate:o,onDelete:r,onNavigate:i,privacyMode:f,hasApiKey:x,quickActionSignal:D})=>{const[v,C]=d.useState(!1),[R,y]=d.useState(null),[j,N]=d.useState(!1),[b,O]=d.useState(!1),[M,_]=d.useState(!1),[E,h]=d.useState(null),[B,I]=d.useState(""),[U,W]=d.useState(null),[A,q]=d.useState(""),[H,Y]=d.useState({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]});d.useEffect(()=>{D&&Date.now()-D<2e3&&(C(!0),Y({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]}))},[D]);const X=d.useMemo(()=>{const c=new Map;return t.forEach(S=>{c.set(S.type,(c.get(S.type)||0)+S.amount)}),Array.from(c.entries()).map(([S,G])=>({name:S,value:G})).sort((S,G)=>G.value-S.value)},[t]),P=c=>{c.preventDefault();const S=parseFloat(H.amount),G=H.investedAmount?parseFloat(H.investedAmount):S;a({name:H.name,amount:S,investedAmount:G,targetAmount:parseFloat(H.targetAmount)||0,type:H.type,date:H.date}),Y({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]}),C(!1)},V=c=>{if(c.preventDefault(),!E)return;const S=t.find(G=>G.id===E);if(S){const G=parseFloat(B);if(!isNaN(G)&&G>0){const T=S.investedAmount||S.amount;o(E,{amount:S.amount+G,investedAmount:T+G})}}h(null),I("")},u=c=>{const S=parseFloat(A);!isNaN(S)&&S>=0&&o(c,{amount:S}),W(null)},n=async()=>{if(!x)return;O(!0),N(!0),y(null),_(!1);const c=await Rr(t);y(c),N(!1)},m=()=>{if(!R)return{recommendations:"",technical:""};const c=R.text.split("---SECTION-BREAK---");return{recommendations:c[0].trim(),technical:c.length>1?c[1].trim():""}},{recommendations:s,technical:l}=m(),p=t.reduce((c,S)=>c+S.amount,0),w=t.reduce((c,S)=>c+(S.investedAmount||S.amount),0),$=p-w,k=w>0?$/w*100:0,L=c=>f?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2})}`;return e.jsxs("div",{className:"space-y-6 relative",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Meus Investimentos"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Acompanhe rentabilidade e metas."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>i(z.BUDGETS),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-pink-50 text-pink-600 hover:bg-pink-100 dark:bg-pink-900/20 dark:text-pink-400 dark:hover:bg-pink-900/40 transition-all font-medium text-sm border border-pink-200 dark:border-pink-800",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Metas"]}),e.jsxs("button",{onClick:n,disabled:!x,title:x?"Consultor IA":"Configure a Chave API para usar",className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all shadow-sm text-sm font-medium
                   ${x?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-400 cursor-not-allowed opacity-60"}`,children:[e.jsx(Ce,{className:"w-4 h-4"}),"Consultor IA ",!x&&e.jsx("span",{className:"text-[10px] ml-1",children:"(Req. Chave)"})]}),e.jsxs("button",{onClick:()=>C(!v),className:"flex items-center gap-2 bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-900 dark:hover:bg-slate-600 transition-colors shadow-sm text-sm font-medium",children:[e.jsx(de,{className:"w-4 h-4"}),"Novo Ativo"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-indigo-600 text-white p-6 rounded-xl shadow-lg flex flex-col justify-between relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-indigo-200 text-xs font-bold uppercase tracking-wider mb-1",children:"Patrim√¥nio Total"}),e.jsx("h3",{className:"text-3xl font-bold mb-1",children:L(p)}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded bg-white/20 flex items-center gap-1 ${$>=0?"text-emerald-300":"text-rose-300"}`,children:[$>=0?e.jsx(be,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"}),k.toFixed(2),"%"]}),e.jsxs("span",{className:"text-[10px] text-indigo-200",children:["(",$>=0?"+":"",L($),")"]})]})]}),e.jsx(rt,{className:"absolute right-4 bottom-4 w-24 h-24 text-indigo-500 opacity-20 pointer-events-none"})]}),X.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 md:col-span-2 flex items-center",children:[e.jsx("div",{className:"flex-1 h-[140px]",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Ds,{children:[e.jsx(Is,{data:X,cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,paddingAngle:5,dataKey:"value",children:X.map((c,S)=>e.jsx(mt,{fill:ms[S%ms.length]},`cell-${S}`))}),e.jsx(ve,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"8px",border:"none",fontSize:"12px"},formatter:c=>f?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${c.toLocaleString("pt-BR")}`}),e.jsx(ot,{layout:"vertical",verticalAlign:"middle",align:"right",wrapperStyle:{fontSize:"11px"}})]})})}),e.jsx("div",{className:"w-px h-20 bg-slate-100 dark:bg-slate-700 mx-4"}),e.jsxs("div",{className:"pr-4 min-w-[120px]",children:[e.jsxs("p",{className:"text-xs text-slate-500 uppercase font-bold mb-2 flex items-center gap-1",children:[e.jsx(Je,{className:"w-3 h-3"})," Aloca√ß√£o"]}),X.slice(0,3).map((c,S)=>e.jsxs("div",{className:"flex justify-between items-center text-xs mb-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300 truncate max-w-[80px]",children:c.name}),e.jsxs("span",{className:"font-bold text-slate-800 dark:text-white",children:[(c.value/p*100).toFixed(0),"%"]})]},S))]})]})]}),b&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-purple-200 dark:border-purple-900 overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-slate-800 dark:to-slate-800 p-4 border-b border-purple-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"font-bold text-purple-900 dark:text-purple-300",children:"Smart Advisor"})]}),e.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:j?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(dt,{className:"w-8 h-8 text-purple-600 animate-spin mb-3"}),e.jsx("p",{className:"text-slate-500 text-sm animate-pulse",children:"Buscando oportunidades em tempo real..."})]}):R?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"prose prose-sm prose-purple dark:prose-invert max-w-none text-slate-700 dark:text-slate-300",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.replace(/\n/g,"<br/>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/- /g,"‚Ä¢ ")}})}),l&&e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[e.jsxs("button",{onClick:()=>_(!M),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-slate-50 dark:bg-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-700 dark:text-slate-200 text-sm font-semibold transition-colors border border-slate-200 dark:border-slate-600",children:[e.jsx(wa,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),M?"Ocultar Detalhes T√©cnicos":"Ver An√°lise T√©cnica Detalhada",M?e.jsx(ka,{className:"w-4 h-4"}):e.jsx(ya,{className:"w-4 h-4"})]}),M&&e.jsx("div",{className:"mt-4 p-5 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700 animate-fade-in",children:e.jsx("div",{className:"prose prose-sm prose-slate dark:prose-invert max-w-none text-slate-600 dark:text-slate-400",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:l.replace(/\n/g,"<br/>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/- /g,"‚Ä¢ ")}})})})]}),R.sources.length>0&&e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Fontes Consultadas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.sources.map((c,S)=>e.jsxs("a",{href:c.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-2 py-1 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[e.jsx(js,{className:"w-3 h-3"}),c.title.length>30?c.title.substring(0,30)+"...":c.title]},S))})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:n,className:"text-sm text-purple-600 hover:underline",children:"Atualizar Recomenda√ß√£o"})})]}):e.jsx("div",{className:"text-center text-slate-500",children:"Erro ao carregar recomenda√ß√£o."})})]}),v&&e.jsxs("form",{onSubmit:P,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Adicionar Novo Ativo"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Nome"}),e.jsx("input",{required:!0,type:"text",placeholder:"Ex: CDB Banco X, PETR4",value:H.name,onChange:c=>Y({...H,name:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Atual (Mercado)"}),e.jsx("input",{required:!0,type:"number",placeholder:"R$",value:H.amount,onChange:c=>Y({...H,amount:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Investido (Custo)"}),e.jsx("input",{type:"number",placeholder:"Igual ao atual se vazio",value:H.investedAmount,onChange:c=>Y({...H,investedAmount:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Objetivo Final (Meta)"}),e.jsx("input",{type:"number",placeholder:"R$",value:H.targetAmount,onChange:c=>Y({...H,targetAmount:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Tipo"}),e.jsxs("select",{value:H.type,onChange:c=>Y({...H,type:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"Renda Fixa",children:"Renda Fixa"}),e.jsx("option",{value:"A√ß√µes",children:"A√ß√µes"}),e.jsx("option",{value:"FIIs",children:"FIIs"}),e.jsx("option",{value:"Cripto",children:"Criptomoedas"}),e.jsx("option",{value:"Reserva",children:"Reserva de Emerg√™ncia"}),e.jsx("option",{value:"Outros",children:"Outros"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Data da Compra"}),e.jsx("input",{required:!0,type:"date",value:H.date,onChange:c=>Y({...H,date:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Salvar"})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-sm p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Novo Aporte"}),e.jsx("button",{onClick:()=>h(null),className:"text-slate-400 hover:text-slate-600",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Ao aportar, o valor ser√° somado ao Custo e ao Valor Atual."}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"VALOR DO APORTE"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-slate-400",children:"R$"}),e.jsx("input",{autoFocus:!0,required:!0,type:"number",step:"0.01",className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg py-2 pl-8 pr-3 focus:ring-2 focus:ring-indigo-500 outline-none text-lg font-medium",value:B,onChange:c=>I(c.target.value)})]})]}),e.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(At,{className:"w-5 h-5"}),"Confirmar Aporte"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:"Voc√™ ainda n√£o registrou investimentos."}):t.map(c=>{const S=c.investedAmount||c.amount,T=c.amount-S,J=S>0?T/S*100:0,Q=c.targetAmount&&c.targetAmount>0?Math.min(100,c.amount/c.targetAmount*100):0;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-shadow relative group",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-3 rounded-full text-indigo-600 dark:text-indigo-400",children:e.jsx(rt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white text-lg",children:c.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs mt-1",children:[e.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-2 py-0.5 rounded",children:c.type}),J!==0&&e.jsxs("span",{className:`px-2 py-0.5 rounded font-bold flex items-center gap-1 ${J>0?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"}`,children:[J>0?e.jsx(be,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"}),J.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:"flex items-start justify-between md:justify-end gap-3 md:gap-6 mt-2 md:mt-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-[10px] text-slate-400 uppercase font-bold tracking-wider",children:"Valor Atual"}),U===c.id?e.jsx("div",{className:"flex items-center justify-end gap-1 mt-1",children:e.jsx("input",{autoFocus:!0,type:"number",className:"w-24 p-1 text-sm border rounded bg-white dark:bg-slate-900 dark:text-white dark:border-slate-600 text-right",value:A,onChange:re=>q(re.target.value),onKeyDown:re=>re.key==="Enter"&&u(c.id),onBlur:()=>u(c.id)})}):e.jsxs("div",{className:"group/edit relative inline-block",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-xl cursor-pointer hover:text-indigo-500 border-b border-dashed border-transparent hover:border-indigo-400 transition-all",onClick:()=>{W(c.id),q(c.amount.toString())},title:"Clique para atualizar cota√ß√£o",children:L(c.amount)}),e.jsx(Ft,{className:"w-3 h-3 text-slate-300 absolute -right-4 top-1 opacity-0 group-hover/edit:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Investido: ",L(S)]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>h(c.id),className:"p-1.5 text-indigo-600 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-400 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg transition-colors",title:"Novo Aporte",children:e.jsx(At,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(c.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors",title:"Excluir",children:e.jsx(we,{className:"w-4 h-4"})})]})]})]}),c.targetAmount>0?e.jsx("div",{className:"mt-3 bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg border border-slate-100 dark:border-slate-700 flex items-center gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3"})," Meta: ",L(c.targetAmount)]}),e.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400",children:[Q.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-1000",style:{width:`${Q}%`}})})]})}):e.jsx("div",{className:"mt-2 flex justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{onClick:()=>C(!0),className:"text-[10px] text-slate-400 hover:text-indigo-500 flex items-center gap-1 uppercase font-bold tracking-wider",children:[e.jsx(Ca,{className:"w-3 h-3"})," Definir Meta"]})})]},c.id)})})]})},nl=({budgets:t,transactions:a,investments:o,onAdd:r,onUpdate:i,onDelete:f,onNavigate:x,privacyMode:D,quickActionSignal:v})=>{const[C,R]=d.useState(!1),[y,j]=d.useState(!1),N=d.useMemo(()=>{const l=new Set;return a.forEach(p=>l.add(p.category)),t.forEach(p=>l.add(p.category)),l.size===0?["Lazer","Casa","Alimentos"]:Array.from(l).sort()},[a,t]),[b,O]=d.useState(new Date),[M,_]=d.useState(null),[E,h]=d.useState(""),[B,I]=d.useState({category:N[0]||"Lazer",limit:"",isRecurring:!0,month:new Date().toISOString().slice(0,7)});d.useEffect(()=>{v&&Date.now()-v<2e3&&(R(!0),I({category:N[0]||"Lazer",limit:"",isRecurring:!0,month:new Date().toISOString().slice(0,7)}))},[v,N]);const U=()=>{O(l=>{const p=new Date(l);return p.setMonth(l.getMonth()-1),p})},W=()=>{O(l=>{const p=new Date(l);return p.setMonth(l.getMonth()+1),p})},A=l=>l.toLocaleDateString("pt-BR",{month:"long",year:"numeric"}),q=()=>{const l=b.getFullYear(),p=String(b.getMonth()+1).padStart(2,"0");return`${l}-${p}`},H=l=>{if(l.preventDefault(),B.isRecurring){if(t.some(w=>w.category===B.category&&w.isRecurring)){alert(`J√° existe um or√ßamento recorrente para ${B.category}. Exclua o anterior para criar um novo.`);return}}else if(t.some(w=>w.category===B.category&&w.month===B.month)){alert(`J√° existe um or√ßamento de ${B.category} para ${B.month}.`);return}const p={category:B.category,limit:parseFloat(B.limit),isRecurring:B.isRecurring};B.isRecurring||(p.month=B.month),r(p),I({category:N[0]||"Outros",limit:"",isRecurring:!0,month:q()}),R(!1)},Y=l=>{const p=parseFloat(E);!isNaN(p)&&p>0&&i(l,{limit:p}),_(null)},X=l=>{_(l.id),h(l.limit.toString())},P=l=>D?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${l.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,V=l=>{const p=b.getFullYear(),w=b.getMonth();return a.filter($=>{const k=new Date($.date);return $.type==="expense"&&$.category===l&&k.getMonth()===w&&k.getFullYear()===p}).reduce(($,k)=>$+k.amount,0)},u=d.useMemo(()=>{const l=q(),p=t.filter(k=>k.month===l),w=new Set(p.map(k=>k.category)),$=t.filter(k=>k.isRecurring&&!w.has(k.category));return[...p,...$].sort((k,L)=>k.category.localeCompare(L.category))},[t,b]),n=d.useMemo(()=>o.filter(l=>l.targetAmount>0).sort((l,p)=>{const w=l.amount/l.targetAmount;return p.amount/p.targetAmount-w}),[o]),m=l=>{const p=new Date;if(p.getMonth()!==b.getMonth()||p.getFullYear()!==b.getFullYear())return null;const w=p.getDate(),$=new Date(p.getFullYear(),p.getMonth()+1,0).getDate();return w===1?l:l/w*$},s=d.useMemo(()=>{const l=new Map,p=new Date;for(let $=0;$<6;$++){const k=new Date(p.getFullYear(),p.getMonth()-$,1),L=k.getFullYear(),c=k.getMonth(),S=`${L}-${String(c+1).padStart(2,"0")}`;new Set(a.filter(T=>{const J=new Date(T.date);return T.type==="expense"&&J.getFullYear()===L&&J.getMonth()===c}).map(T=>T.category)).forEach(T=>{let J=t.find(Q=>Q.category===T&&Q.month===S);if(J||(J=t.find(Q=>Q.category===T&&Q.isRecurring)),J){const Q=a.filter(le=>{const ce=new Date(le.date);return le.type==="expense"&&le.category===T&&ce.getFullYear()===L&&ce.getMonth()===c}).reduce((le,ce)=>le+ce.amount,0),re=l.get(T)||{totalSpent:0,totalLimit:0,count:0};l.set(T,{totalSpent:re.totalSpent+Q,totalLimit:re.totalLimit+J.limit,count:re.count+1})}})}return Array.from(l.entries()).map(([$,k])=>{const L=k.totalSpent/k.totalLimit*100;return{name:$,adherence:L,spent:k.totalSpent/k.count,limit:k.totalLimit/k.count}}).sort(($,k)=>k.adherence-$.adherence)},[t,a]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Planejamento"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm capitalize",children:"Defina limites e acompanhe suas metas."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("button",{onClick:()=>j(!y),className:`p-2.5 rounded-lg transition-colors border ${y?"bg-indigo-50 border-indigo-200 text-indigo-600 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300"}`,title:"Ver An√°lise de Performance",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-1",children:[e.jsx("button",{onClick:U,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(Mt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-4 font-semibold text-slate-700 dark:text-slate-200 capitalize min-w-[140px] text-center flex items-center justify-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4 text-pink-500"}),A(b)]}),e.jsx("button",{onClick:W,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("button",{onClick:()=>{I(l=>({...l,month:q()})),R(!C)},className:"flex items-center gap-2 bg-pink-600 text-white px-4 py-2.5 rounded-lg hover:bg-pink-700 transition-colors shadow-sm text-sm font-medium",children:[e.jsx(de,{className:"w-4 h-4"}),"Definir Teto"]})]})]}),y&&s.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in-down mb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-indigo-500"}),"Performance Hist√≥rica (√öltimos 6 Meses)"]})}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Lt,{data:s,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Ge,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(qe,{type:"number",hide:!0}),e.jsx(Ue,{dataKey:"name",type:"category",width:100,tick:{fill:"#64748b",fontSize:12,fontWeight:500},axisLine:!1,tickLine:!1}),e.jsx(ve,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:l=>[`${l.toFixed(0)}%`,"M√©dia de Uso"]}),e.jsx(Ts,{x:100,stroke:"#ef4444",strokeDasharray:"3 3"}),e.jsx(it,{dataKey:"adherence",radius:[0,4,4,0],barSize:20,children:s.map((l,p)=>e.jsx(mt,{fill:l.adherence>100?"#ef4444":l.adherence>85?"#f59e0b":"#10b981"},`cell-${p}`))})]})})})]}),C&&e.jsxs("form",{onSubmit:H,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Novo Limite de Gastos"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:"Categoria"}),e.jsx("select",{value:B.category,onChange:l=>I({...B,category:l.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-pink-500",children:N.map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:"Valor Teto (R$)"}),e.jsx("input",{required:!0,type:"number",placeholder:"Ex: 1000.00",value:B.limit,onChange:l=>I({...B,limit:l.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-pink-500"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",id:"isRecurringBudget",checked:B.isRecurring,onChange:l=>I({...B,isRecurring:l.target.checked}),className:"w-4 h-4 text-pink-600 rounded"}),e.jsxs("label",{htmlFor:"isRecurringBudget",className:"text-sm font-medium text-slate-700 dark:text-slate-200 flex items-center gap-1 cursor-pointer",children:[e.jsx(Se,{className:"w-4 h-4"})," Or√ßamento Recorrente?"]})]}),B.isRecurring?e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(Sa,{className:"w-3 h-3"})," Este limite ser√° aplicado automaticamente em todos os meses futuros."]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 block mb-1",children:"M√™s de Refer√™ncia"}),e.jsx("input",{type:"month",required:!B.isRecurring,value:B.month,onChange:l=>I({...B,month:l.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 outline-none w-full max-w-[200px]"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 font-medium",children:"Salvar Teto"})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5 text-rose-500"})," Tetos de Gastos"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(Ae,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Nenhum teto definido."})]}):u.map(l=>{const p=V(l.category),w=m(p),$=Math.min(100,p/l.limit*100),k=w?Math.min(100,w/l.limit*100):0,L=p>l.limit;let c="bg-emerald-500",S=e.jsx(Ct,{className:"w-5 h-5 text-emerald-600"});return $>100?(c="bg-rose-500",S=e.jsx(Nt,{className:"w-5 h-5 text-rose-600"})):$>85?(c="bg-rose-500",S=e.jsx(lt,{className:"w-5 h-5 text-rose-500"})):$>70&&(c="bg-amber-500",S=e.jsx(lt,{className:"w-5 h-5 text-amber-500"})),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all relative group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-slate-100 dark:bg-slate-700",children:S}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:l.category}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[l.isRecurring?e.jsx(Se,{className:"w-3 h-3"}):e.jsx(Ve,{className:"w-3 h-3"}),l.isRecurring?"Mensal":"Espec√≠fico"]})]})]}),M===l.id?e.jsxs("div",{className:"flex items-center gap-1 animate-fade-in",children:[e.jsx("input",{autoFocus:!0,type:"number",className:"w-20 p-1 text-sm border rounded bg-white dark:bg-slate-900 dark:text-white dark:border-slate-600",value:E,onChange:G=>h(G.target.value),onKeyDown:G=>G.key==="Enter"&&Y(l.id)}),e.jsx("button",{onClick:()=>Y(l.id),className:"p-1 bg-emerald-100 text-emerald-600 rounded hover:bg-emerald-200",children:e.jsx(Aa,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>_(null),className:"p-1 bg-slate-100 text-slate-600 rounded hover:bg-slate-200",children:e.jsx(oe,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"text-right group-hover:hidden",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Limite"}),e.jsx("p",{className:"font-bold text-slate-800 dark:text-white cursor-pointer hover:text-indigo-500",onClick:()=>X(l),children:P(l.limit)})]}),e.jsxs("div",{className:"hidden group-hover:flex gap-1 absolute top-4 right-4 bg-white dark:bg-slate-800 pl-2",children:[e.jsx("button",{onClick:()=>X(l),className:"p-1.5 text-slate-400 hover:text-indigo-500 hover:bg-indigo-50 rounded",children:e.jsx(Ft,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(l.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded",children:e.jsx(we,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2 relative",children:[e.jsxs("div",{className:"flex justify-between items-end text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:["Gasto: ",e.jsx("span",{className:L?"text-rose-500 font-bold":"",children:P(p)})]}),e.jsxs("span",{className:"text-slate-400 text-xs",children:[$.toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full h-3 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden relative",children:[w&&w>p&&!L&&e.jsx("div",{className:"absolute top-0 left-0 h-full bg-slate-200 dark:bg-slate-600 opacity-50 border-r-2 border-slate-400 dark:border-slate-400 transition-all duration-1000",style:{width:`${k}%`},title:`Previs√£o de fechar o m√™s em ${P(w)}`}),e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${c} relative z-10`,style:{width:`${$}%`}})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[w&&w>l.limit&&!L&&e.jsxs("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 flex items-center gap-1 font-semibold animate-pulse",children:[e.jsx(Da,{className:"w-3 h-3"})," Previs√£o de estouro: ",P(w)]}),e.jsx("div",{className:"flex-1"}),e.jsx("p",{className:"text-xs text-right font-medium",children:L?e.jsxs("span",{className:"text-rose-500",children:["Excedido: ",P(p-l.limit)]}):e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:["Restam: ",P(l.limit-p)]})})]})]})]},l.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[e.jsx(Xt,{className:"w-5 h-5 text-yellow-500"})," Objetivos de Conquista"]}),e.jsxs("button",{onClick:()=>x(z.INVESTMENTS),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 flex items-center gap-1 transition-colors",children:["Gerenciar Carteira ",e.jsx(ct,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length===0?e.jsxs("div",{className:"col-span-full py-8 text-center bg-yellow-50/50 dark:bg-yellow-900/10 rounded-xl border border-dashed border-yellow-200 dark:border-yellow-800",children:[e.jsx(Ae,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:'Defina uma "Meta Final" nos seus investimentos para v√™-los aqui.'}),e.jsx("button",{onClick:()=>x(z.INVESTMENTS),className:"mt-3 text-xs bg-yellow-100 hover:bg-yellow-200 text-yellow-700 px-3 py-1.5 rounded-lg font-bold transition-colors",children:"Ir para Investimentos"})]}):n.map(l=>{const p=Math.min(100,l.amount/l.targetAmount*100);return e.jsxs("div",{onClick:()=>x(z.INVESTMENTS),className:"bg-gradient-to-br from-white to-yellow-50 dark:from-slate-800 dark:to-slate-800/50 p-6 rounded-xl shadow-sm border border-yellow-200 dark:border-yellow-900/30 relative overflow-hidden cursor-pointer hover:shadow-md hover:scale-[1.02] transition-all group",children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Pt,{className:"w-4 h-4 text-slate-400"})}),e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",children:e.jsx(be,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:l.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Meta: ",P(l.targetAmount)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:[p.toFixed(0),"%"]})})]}),e.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden relative z-10",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-amber-500 rounded-full transition-all duration-1000 shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${p}%`},children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full animate-[shimmer_2s_infinite]"})})}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 text-right relative z-10",children:["Faltam ",P(l.targetAmount-l.amount)]}),e.jsx(Xt,{className:"absolute -bottom-4 -right-4 w-32 h-32 text-yellow-500/5 rotate-12 pointer-events-none"})]},l.id)})})]})]})},ol={age:30,retirementAge:60,riskProfile:"moderate"},us={conservative:.03,moderate:.05,aggressive:.07},il=({data:t,onSaveProfile:a,privacyMode:o,hasApiKey:r})=>{const[i,f]=d.useState(t.wealthProfile||ol),[x,D]=d.useState(!t.wealthProfile),[v,C]=d.useState(null),[R,y]=d.useState(!1),j=d.useMemo(()=>t.investments.reduce((I,U)=>I+U.amount,0),[t.investments]),N=d.useMemo(()=>t.debts.filter(I=>I.status!=="paid").reduce((I,U)=>I+U.currentAmount,0),[t.debts]),b=j-N,O=d.useMemo(()=>{const I=t.transactions.filter(A=>A.type==="income").reduce((A,q)=>A+q.amount,0),U=t.transactions.filter(A=>A.type==="expense").reduce((A,q)=>A+q.amount,0);if(I===0&&U===0)return{income:5e3,expense:4e3,savings:1e3};const W=I-U;return{income:I,expense:U>0?U:I*.8,savings:W}},[t.transactions]),M=i.monthlyContributionOverride!==void 0?i.monthlyContributionOverride:Math.max(0,O.savings),_=d.useMemo(()=>{const I=[],U=new Date().getFullYear(),W=i.retirementAge-i.age+10,A=us[i.riskProfile],q=M*12,H=O.expense*12;let Y=b,X=null;for(let P=0;P<=W;P++){const V=U+P,u=i.age+P,n=Y*.04;!X&&n>=H&&(X=V),I.push({year:V,age:u,patrimonio:Math.round(Y),rendaPassiva:Math.round(n/12),custoVida:Math.round(O.expense)}),u<i.retirementAge?Y=Y*(1+A)+q:Y=Y*(1+A)}return{chartData:I,freedomYear:X}},[i,b,M,O.expense]),E=()=>{a(i),D(!1)},h=async()=>{y(!0);const I=await $r(t.investments,i.riskProfile,i.age);C(I),y(!1)},B=I=>o?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${I.toLocaleString("pt-BR",{maximumFractionDigits:0})}`;return e.jsxs("div",{className:"space-y-8 animate-fade-in pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border-b border-slate-200 dark:border-slate-700 pb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg shadow-lg shadow-yellow-500/20 text-white",children:e.jsx(Ia,{className:"w-6 h-6"})}),"NEXO Private"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Planejamento patrimonial e aloca√ß√£o estrat√©gica de ativos."})]}),!x&&e.jsx("button",{onClick:()=>D(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-semibold hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Ajustar Perfil"})]}),x&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border-l-4 border-yellow-500 animate-scale-in",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-yellow-500"})," Par√¢metros da Simula√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Idade Atual"}),e.jsx("input",{type:"number",value:i.age,onChange:I=>f({...i,age:Number(I.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Idade Aposentadoria"}),e.jsx("input",{type:"number",value:i.retirementAge,onChange:I=>f({...i,retirementAge:Number(I.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Perfil de Risco"}),e.jsxs("select",{value:i.riskProfile,onChange:I=>f({...i,riskProfile:I.target.value}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600",children:[e.jsx("option",{value:"conservative",children:"Conservador"}),e.jsx("option",{value:"moderate",children:"Moderado"}),e.jsx("option",{value:"aggressive",children:"Arrojado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Aporte Mensal (Simulado)"}),e.jsx("input",{type:"number",placeholder:`Atual: R$ ${O.savings.toFixed(0)}`,value:i.monthlyContributionOverride||"",onChange:I=>f({...i,monthlyContributionOverride:Number(I.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:E,className:"bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-6 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity",children:"Atualizar Proje√ß√£o"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 text-white p-6 rounded-xl shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-emerald-400"}),"Liberdade Financeira"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Cruzamento entre Renda Passiva e Custo de Vida."})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase font-bold",children:"Ano da Liberdade"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:_.freedomYear||"Em constru√ß√£o..."})]})]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Wa,{data:_.chartData,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorPassive",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(Ge,{strokeDasharray:"3 3",vertical:!1,stroke:"#334155"}),e.jsx(qe,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),e.jsx(Ue,{hide:!0,domain:["auto","auto"]}),e.jsx(ve,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:I=>[B(I),""]}),e.jsx(Ts,{y:O.expense,stroke:"#f43f5e",strokeDasharray:"3 3",label:{value:"Custo Vida",fill:"#f43f5e",fontSize:10}}),e.jsx(Xa,{type:"monotone",dataKey:"rendaPassiva",stroke:"#10b981",fillOpacity:1,fill:"url(#colorPassive)",name:"Renda Passiva"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 flex flex-col justify-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Patrim√¥nio L√≠quido Atual"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:B(b)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ativos Investidos"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:B(j)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"D√≠vidas Totais"}),e.jsx("span",{className:"font-semibold text-rose-600",children:B(N)})]}),e.jsx("div",{className:"w-full h-px bg-slate-200 dark:bg-slate-700 my-2"}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Aporte Mensal"}),e.jsx("span",{className:"font-semibold text-indigo-600",children:B(M)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Rentabilidade Real (Proj.)"}),e.jsxs("span",{className:"font-semibold text-slate-800 dark:text-white",children:[(us[i.riskProfile]*100).toFixed(1),"% a.a."]})]})]}),N>j&&e.jsxs("div",{className:"mt-6 bg-rose-50 dark:bg-rose-900/20 p-3 rounded-lg flex items-start gap-2",children:[e.jsx(Ta,{className:"w-5 h-5 text-rose-600 shrink-0"}),e.jsx("p",{className:"text-xs text-rose-800 dark:text-rose-300",children:"Aten√ß√£o: Seu patrim√¥nio est√° negativo. A prioridade do planejamento deve ser a quita√ß√£o de d√≠vidas antes da acumula√ß√£o."})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ys,{className:"w-6 h-6 text-purple-600"}),"Aloca√ß√£o Inteligente (IA)"]}),e.jsxs("button",{onClick:h,disabled:!r||R,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold text-sm shadow-md",children:[R?e.jsx("span",{className:"animate-spin",children:"‚è≥"}):e.jsx(Ce,{className:"w-4 h-4"}),v?"Atualizar An√°lise":"Gerar Estrat√©gia Private"]})]}),!r&&e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-8 rounded-xl text-center border border-dashed border-slate-300 dark:border-slate-600",children:[e.jsx(st,{className:"w-10 h-10 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Configure sua Chave API para desbloquear a intelig√™ncia de aloca√ß√£o de ativos."})]}),r&&v&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Diagn√≥stico do Portf√≥lio"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed mb-6",children:v.analysisText}),e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Plano de A√ß√£o T√°tico"}),e.jsx("div",{className:"space-y-3",children:v.actionItems.map((I,U)=>e.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:`
                                      w-10 h-10 rounded-full flex items-center justify-center shrink-0 font-bold text-xs
                                      ${I.type==="buy"?"bg-emerald-100 text-emerald-700":I.type==="sell"?"bg-rose-100 text-rose-700":"bg-blue-100 text-blue-700"}
                                  `,children:I.type==="buy"?"COMPRA":I.type==="sell"?"VENDA":"MANTER"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:I.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:I.description})]})]},U))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-2 self-start",children:"Atual vs. Ideal (Modelo)"}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ne,{width:"100%",height:"100%",children:e.jsxs(Ja,{cx:"50%",cy:"50%",outerRadius:"80%",data:v.suggestedAllocation.map(I=>{const U=v.currentAllocation.find(W=>W.name===I.name);return{subject:I.name,A:U?U.value:0,B:I.value,fullMark:100}}),children:[e.jsx(Qa,{stroke:"#94a3b8"}),e.jsx(Za,{dataKey:"subject",tick:{fill:"#64748b",fontSize:10}}),e.jsx(er,{angle:30,domain:[0,100],tick:!1}),e.jsx(Jt,{name:"Sua Carteira",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3}),e.jsx(Jt,{name:"Ideal (IA)",dataKey:"B",stroke:"#10b981",fill:"#10b981",fillOpacity:.3}),e.jsx(ot,{}),e.jsx(ve,{})]})})}),e.jsx("p",{className:"text-xs text-center text-slate-400 mt-2",children:"Comparativo de % de aloca√ß√£o por classe de ativo."})]})]})]})]})},dl=({currentView:t,onNavigate:a,data:o,actions:r,privacyMode:i,hasApiKey:f,quickActionSignal:x})=>{const D=[{id:z.INVESTMENTS,label:"Investimentos",icon:Pt},{id:z.BUDGETS,label:"Metas & Tetos",icon:Ae},{id:z.WEALTH_PLANNER,label:"Planejamento",icon:vs}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Gest√£o de Patrim√¥nio"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:D.map(v=>{const C=t===v.id;return e.jsxs("button",{onClick:()=>a(v.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-2 md:px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${C?"bg-emerald-600 border-emerald-600 text-white shadow-lg shadow-emerald-500/30 scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:border-emerald-300 dark:hover:border-emerald-500 hover:bg-slate-50 dark:hover:bg-slate-700"}
                `,children:[e.jsx(v.icon,{className:`w-5 h-5 ${C?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"text-xs md:text-sm text-center md:text-left",children:v.label})]},v.id)})})]}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===z.INVESTMENTS&&e.jsx(ll,{investments:o.investments,onAdd:r.addInvestment,onUpdate:r.updateInvestment,onDelete:r.deleteInvestment,onNavigate:a,privacyMode:i,hasApiKey:f,quickActionSignal:x}),t===z.BUDGETS&&e.jsx(nl,{budgets:o.budgets||[],transactions:o.transactions,investments:o.investments||[],onAdd:r.addBudget,onUpdate:r.updateBudget,onDelete:r.deleteBudget,onNavigate:a,privacyMode:i,quickActionSignal:x}),t===z.WEALTH_PLANNER&&e.jsx(il,{data:o,onSaveProfile:r.saveWealthProfile,privacyMode:i,hasApiKey:f})]})]})},jt=[{label:"Azul",value:"blue",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{label:"Verde",value:"green",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800",text:"text-emerald-700 dark:text-emerald-300"},{label:"Roxo",value:"purple",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{label:"Rosa",value:"rose",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800",text:"text-rose-700 dark:text-rose-300"},{label:"Amarelo",value:"yellow",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800",text:"text-amber-700 dark:text-amber-300"}],cl=({columns:t,onSaveColumn:a,onDeleteColumn:o,onAddTransaction:r,privacyMode:i})=>{const[f,x]=d.useState(""),[D,v]=d.useState(null),[C,R]=d.useState(""),[y,j]=d.useState(""),[N,b]=d.useState("blue"),[O,M]=d.useState(null),[_,E]=d.useState(null);d.useEffect(()=>{t.length===0&&[{id:"col-1",title:"Ideias / Sonhos",order:0,cards:[]},{id:"col-2",title:"Pesquisando Pre√ßo",order:1,cards:[]},{id:"col-3",title:"Prioridade / Pr√≥xima",order:2,cards:[]},{id:"col-4",title:"Conclu√≠do / Pago",order:3,isConclusion:!0,cards:[]}].forEach(V=>a(V))},[t.length]);const h=P=>{if(P.preventDefault(),!f.trim())return;const V={id:crypto.randomUUID(),title:f,order:t.length,cards:[]};a(V),x("")},B=P=>{M({id:P.id,title:P.title})},I=()=>{if(!O)return;const P=t.find(V=>V.id===O.id);P&&O.title.trim()&&a({...P,title:O.title}),M(null)},U=P=>{const V=t.find(n=>n.id===P);if(!V)return;const u={id:crypto.randomUUID(),title:C||"Novo Item",amount:parseFloat(y)||0,color:N};a({...V,cards:[...V.cards,u]}),v(null),R(""),j(""),b("blue")},W=(P,V)=>{const u=t.find(n=>n.id===P);u&&a({...u,cards:u.cards.filter(n=>n.id!==V)})},A=(P,V,u)=>{E({cardId:V,sourceColId:u}),P.dataTransfer.effectAllowed="move"},q=P=>{P.preventDefault(),P.dataTransfer.dropEffect="move"},H=(P,V)=>{if(P.preventDefault(),!_)return;const{cardId:u,sourceColId:n}=_;if(n===V){E(null);return}const m=t.find(l=>l.id===n),s=t.find(l=>l.id===V);if(m&&s){const l=m.cards.find(p=>p.id===u);l&&(a({...m,cards:m.cards.filter(p=>p.id!==u)}),a({...s,cards:[...s.cards,l]}))}E(null)},Y=P=>i?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${P.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,X=[...t].sort((P,V)=>P.order-V.order);return e.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx($t,{className:"w-7 h-7 text-indigo-600"}),"NEXO Flow"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Organize seus planos: Sonhe, Pesquise, Priorize e Compre."})]}),e.jsxs("form",{onSubmit:h,className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Nova Coluna...",value:f,onChange:P=>x(P.target.value),className:"px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}),e.jsx("button",{type:"submit",className:"bg-slate-800 dark:bg-slate-700 text-white px-3 py-2 rounded-lg hover:bg-slate-900 transition-colors",children:e.jsx(de,{className:"w-5 h-5"})})]})]}),e.jsx("style",{children:`
        .kanban-scroll::-webkit-scrollbar {
            height: 12px;
        }
        .kanban-scroll::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
            margin: 0 10px;
        }
        .kanban-scroll::-webkit-scrollbar-thumb {
            background-color: #94a3b8;
            border-radius: 10px;
            border: 3px solid transparent;
            background-clip: content-box;
        }
        .kanban-scroll::-webkit-scrollbar-thumb:hover {
            background-color: #64748b;
        }
        .dark .kanban-scroll::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
        }
        .dark .kanban-scroll::-webkit-scrollbar-thumb {
            background-color: #475569;
        }
        .dark .kanban-scroll::-webkit-scrollbar-thumb:hover {
            background-color: #94a3b8;
        }
      `}),e.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden pb-4 kanban-scroll",children:e.jsx("div",{className:"flex h-full gap-4 min-w-max px-2",children:X.map(P=>e.jsxs("div",{className:`w-72 flex flex-col rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50 backdrop-blur-sm transition-colors ${_&&_.sourceColId!==P.id?"bg-indigo-50/30 border-indigo-200 border-dashed":""}`,onDragOver:q,onDrop:V=>H(V,P.id),children:[e.jsxs("div",{className:`p-3 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center group/header ${P.isConclusion?"bg-emerald-50 dark:bg-emerald-900/10 rounded-t-xl":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[P.isConclusion&&e.jsx(ye,{className:"w-4 h-4 text-emerald-600 flex-shrink-0"}),(O==null?void 0:O.id)===P.id?e.jsx("input",{autoFocus:!0,className:"w-full bg-white dark:bg-slate-900 border border-indigo-500 rounded px-1 py-0.5 text-sm font-bold text-slate-800 dark:text-white outline-none",value:O.title,onChange:V=>M({...O,title:V.target.value}),onBlur:I,onKeyDown:V=>V.key==="Enter"&&I()}):e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden w-full",children:[e.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 text-sm uppercase tracking-wide truncate cursor-pointer hover:text-indigo-600 transition-colors",onDoubleClick:()=>B(P),title:"Duplo clique para renomear",children:P.title}),e.jsx("button",{onClick:()=>B(P),className:"opacity-0 group-hover/header:opacity-100 transition-opacity p-1 text-slate-400 hover:text-indigo-500",children:e.jsx(Ft,{className:"w-3 h-3"})})]}),(O==null?void 0:O.id)!==P.id&&e.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-1.5 py-0.5 rounded text-[10px] font-bold flex-shrink-0",children:P.cards.length})]}),!P.isConclusion&&e.jsx("button",{onClick:()=>{confirm("Excluir coluna?")&&o(P.id)},className:"text-slate-400 hover:text-rose-500 ml-2",title:"Excluir Coluna",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:P.cards.map(V=>{const u=jt.find(n=>n.value===V.color)||jt[0];return e.jsxs("div",{draggable:!0,onDragStart:n=>A(n,V.id,P.id),className:`bg-white dark:bg-slate-700 p-3 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 cursor-grab active:cursor-grabbing hover:shadow-md transition-all group relative border-l-4 ${u.border.replace("border","border-l")}`,style:{borderLeftColor:`var(--${V.color}-500)`},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-white text-sm",children:V.title}),e.jsx("button",{onClick:()=>W(P.id,V.id),className:"text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(oe,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase ${u.bg} ${u.text}`,children:V.amount>0?Y(V.amount):"R$ -"}),e.jsx(Ea,{className:"w-3 h-3 text-slate-300"})]})]},V.id)})}),e.jsx("div",{className:"p-2 border-t border-slate-200 dark:border-slate-700 bg-white/50 dark:bg-slate-800/50 rounded-b-xl",children:D===P.id?e.jsxs("div",{className:"space-y-2 p-1 animate-scale-in",children:[e.jsx("input",{autoFocus:!0,className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"T√≠tulo...",value:C,onChange:V=>R(V.target.value)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",className:"w-20 p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"R$",value:y,onChange:V=>j(V.target.value)}),e.jsx("div",{className:"flex-1 flex justify-end gap-1",children:jt.map(V=>e.jsx("button",{onClick:()=>b(V.value),className:`w-6 h-6 rounded-full border-2 ${N===V.value?"border-slate-500 scale-110":"border-transparent"} ${V.bg.split(" ")[0]}`},V.value))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(null),className:"flex-1 py-1 text-xs text-slate-500 bg-slate-200 rounded",children:"Cancelar"}),e.jsx("button",{onClick:()=>U(P.id),className:"flex-1 py-1 text-xs text-white bg-indigo-600 rounded font-bold",children:"Adicionar"})]})]}):e.jsxs("button",{onClick:()=>v(P.id),className:"w-full py-2 flex items-center justify-center gap-1 text-slate-500 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-sm font-medium",children:[e.jsx(de,{className:"w-4 h-4"})," Adicionar Card"]})})]},P.id))})})]})},Be=[{value:"yellow",bg:"bg-amber-100 dark:bg-amber-900/40",border:"border-amber-200 dark:border-amber-800"},{value:"slate",bg:"bg-white dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"},{value:"green",bg:"bg-emerald-100 dark:bg-emerald-900/40",border:"border-emerald-200 dark:border-emerald-800"},{value:"blue",bg:"bg-blue-100 dark:bg-blue-900/40",border:"border-blue-200 dark:border-blue-800"},{value:"rose",bg:"bg-rose-100 dark:bg-rose-900/40",border:"border-rose-200 dark:border-rose-800"},{value:"purple",bg:"bg-purple-100 dark:bg-purple-900/40",border:"border-purple-200 dark:border-purple-800"}],xl=({notes:t,onAdd:a,onUpdate:o,onDelete:r,privacyMode:i})=>{var _,E;const[f,x]=d.useState(""),[D,v]=d.useState(!1),[C,R]=d.useState(null),[y,j]=d.useState({title:"",content:"",color:"slate",isPinned:!1}),N=t.filter(h=>h.title.toLowerCase().includes(f.toLowerCase())||h.content.toLowerCase().includes(f.toLowerCase())).sort((h,B)=>h.isPinned!==B.isPinned?h.isPinned?-1:1:new Date(B.date).getTime()-new Date(h.date).getTime()),b=h=>{h?(R(h.id),j({title:h.title,content:h.content,color:h.color,isPinned:h.isPinned})):(R(null),j({title:"",content:"",color:"slate",isPinned:!1})),v(!0)},O=h=>{h.preventDefault(),!(!y.title.trim()&&!y.content.trim())&&(C?o(C,{title:y.title,content:y.content,color:y.color,isPinned:y.isPinned}):a({title:y.title,content:y.content,color:y.color,isPinned:y.isPinned,date:new Date().toISOString()}),v(!1))},M=(h,B)=>{h.stopPropagation(),o(B.id,{isPinned:!B.isPinned})};return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ie,{className:"w-7 h-7 text-indigo-600"}),"NEXO Notes"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Registre ideias, lembretes e tarefas rapidamente."})]}),e.jsxs("div",{className:"flex w-full md:w-auto gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative group md:w-64",children:[e.jsx(kt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar notas...",value:f,onChange:h=>x(h.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-sm transition-all shadow-sm"})]}),e.jsxs("button",{onClick:()=>b(),className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2.5 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/20 font-bold text-sm",children:[e.jsx(de,{className:"w-4 h-4"})," Nova Nota"]})]})]}),e.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4 space-y-4",children:N.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400 flex flex-col items-center",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-4 rounded-full mb-3",children:e.jsx(Ie,{className:"w-8 h-8 opacity-50"})}),e.jsx("p",{children:"Nenhuma nota encontrada."})]}):N.map(h=>{const B=Be.find(I=>I.value===h.color)||Be[1];return e.jsxs("div",{onClick:()=>b(h),className:`break-inside-avoid rounded-xl p-5 shadow-sm border transition-all hover:shadow-md cursor-pointer group relative ${B.bg} ${B.border}`,children:[e.jsx("button",{onClick:I=>M(I,h),className:`absolute top-3 right-3 p-1.5 rounded-full transition-colors z-10 ${h.isPinned?"bg-slate-900/10 dark:bg-white/10 text-indigo-600 dark:text-indigo-400":"opacity-0 group-hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/10 text-slate-400"}`,children:h.isPinned?e.jsx(gt,{className:"w-3 h-3 fill-current"}):e.jsx(gt,{className:"w-3 h-3"})}),h.title&&e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2 pr-6",children:h.title}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:h.content}),e.jsxs("div",{className:"mt-4 flex justify-between items-center pt-2 border-t border-black/5 dark:border-white/5 opacity-60 group-hover:opacity-100 transition-opacity",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"}),new Date(h.date).toLocaleDateString("pt-BR")]}),e.jsx("button",{onClick:I=>{I.stopPropagation(),r(h.id)},className:"p-1 hover:text-rose-500 transition-colors",children:e.jsx(we,{className:"w-3.5 h-3.5"})})]})]},h.id)})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsx("div",{className:`rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-scale-in border transition-colors ${((_=Be.find(h=>h.value===y.color))==null?void 0:_.bg)||"bg-white dark:bg-slate-800"} ${((E=Be.find(h=>h.value===y.color))==null?void 0:E.border)||"border-slate-200"}`,children:e.jsxs("form",{onSubmit:O,className:"flex flex-col h-full max-h-[90vh]",children:[e.jsxs("div",{className:"p-2 flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-1",children:Be.map(h=>e.jsx("button",{type:"button",onClick:()=>j({...y,color:h.value}),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 ${h.value===y.color?"border-indigo-500 scale-110":"border-transparent"} ${h.bg.split(" ")[0]==="bg-white"?"bg-slate-200":h.bg.split(" ")[0]}`},h.value))}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>j({...y,isPinned:!y.isPinned}),className:`p-2 rounded-full transition-colors ${y.isPinned?"text-indigo-600 bg-indigo-500/10":"text-slate-400 hover:bg-black/5"}`,title:"Fixar nota",children:y.isPinned?e.jsx(gt,{className:"w-5 h-5 fill-current"}):e.jsx(Ra,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>v(!1),className:"p-2 text-slate-500 hover:bg-black/5 rounded-full",children:e.jsx(oe,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"px-6 pb-2",children:e.jsx("input",{type:"text",placeholder:"T√≠tulo",value:y.title,onChange:h=>j({...y,title:h.target.value}),className:"w-full text-xl font-bold bg-transparent border-none outline-none placeholder:text-slate-400 dark:placeholder:text-slate-500 text-slate-800 dark:text-white"})}),e.jsx("div",{className:"px-6 pb-6 flex-1 overflow-y-auto",children:e.jsx("textarea",{placeholder:"Digite sua nota aqui...",value:y.content,onChange:h=>j({...y,content:h.target.value}),className:"w-full h-64 bg-transparent border-none outline-none resize-none text-slate-700 dark:text-slate-200 placeholder:text-slate-400 dark:placeholder:text-slate-500"})}),e.jsx("div",{className:"p-4 flex justify-end border-t border-black/5 dark:border-white/5",children:e.jsx("button",{type:"submit",className:"px-6 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-lg font-bold shadow-md hover:opacity-90 transition-opacity",children:"Salvar"})})]})})})]})},Xe=["Hortifruti","Carnes","Latic√≠nios","Mercearia","Padaria","Bebidas","Limpeza","Higiene","Outros"],ml=({items:t,onAdd:a,onUpdate:o,onDelete:r,onClearList:i,onFinishShopping:f,shoppingBudget:x=0,onUpdateBudget:D,hasApiKey:v=!1,privacyMode:C,quickActionSignal:R})=>{const[y,j]=d.useState(""),[N,b]=d.useState("Outros"),[O,M]=d.useState(!1),[_,E]=d.useState(!1),[h,B]=d.useState(""),[I,U]=d.useState(!1),[W,A]=d.useState(!1),[q,H]=d.useState(x.toString()),[Y,X]=d.useState("Alimentos"),[P,V]=d.useState("debit_card"),u=d.useMemo(()=>t.reduce((c,S)=>c+S.actualPrice*S.quantity,0),[t]),n=d.useMemo(()=>{const c={};return Xe.forEach(S=>c[S]=[]),t.forEach(S=>{const G=S.category||"Outros";c[G]||(c[G]=[]),c[G].push(S)}),c},[t]);d.useEffect(()=>{if(R){const c=document.getElementById("new-item-input");c&&c.focus()}},[R]);const m=c=>{c.preventDefault(),y.trim()&&(a({name:y.trim(),quantity:1,actualPrice:0,isChecked:!1,category:N}),j(""),b("Outros"))},s=async c=>{if(c.preventDefault(),!h.trim())return;U(!0),(await Tr(h)).forEach(G=>{a({...G,actualPrice:0,isChecked:!1})}),U(!1),E(!1),B("")},l=(c,S,G)=>{const T=Math.max(1,S+G);o(c,{quantity:T})},p=()=>{if(u===0){alert("O valor total est√° zerado. Adicione pre√ßos aos itens para lan√ßar a despesa.");return}f(u,P,Y),M(!1)},w=()=>{const c=parseFloat(q);isNaN(c)||D(c),A(!1)},$=c=>C?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,k=x>0?u/x*100:0;let L="bg-emerald-500";return k>100?L="bg-rose-500":k>85&&(L="bg-amber-500"),e.jsxs("div",{className:"space-y-6 animate-fade-in relative pb-32 md:pb-0",children:[O&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 border border-emerald-500/30 animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(at,{className:"w-6 h-6 text-emerald-500"})," Finalizar Compra"]}),e.jsx("button",{onClick:()=>M(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-xl mb-6 text-center border border-emerald-100 dark:border-emerald-800",children:[e.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 uppercase font-bold mb-1",children:"Valor Final a Lan√ßar"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-700 dark:text-emerald-300",children:$(u)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Categoria da Despesa"}),e.jsxs("select",{value:Y,onChange:c=>X(c.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"Alimentos",children:"Alimentos"}),e.jsx("option",{value:"Casa",children:"Casa"}),e.jsx("option",{value:"Lazer",children:"Lazer"}),e.jsx("option",{value:"Pets",children:"Pets"}),e.jsx("option",{value:"Outros",children:"Outros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Forma de Pagamento"}),e.jsxs("select",{value:P,onChange:c=>V(c.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"credit_card",children:"Cart√£o de Cr√©dito"}),e.jsx("option",{value:"debit_card",children:"Cart√£o de D√©bito"}),e.jsx("option",{value:"cash",children:"Dinheiro"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"ticket",children:"Vale Alimenta√ß√£o/Refei√ß√£o"})]})]}),e.jsxs("button",{onClick:p,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2 mt-4",children:[e.jsx(St,{className:"w-5 h-5"})," Confirmar e Lan√ßar"]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-purple-200 dark:border-purple-800 animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-purple-600"})," Assistente de Compras"]}),e.jsx("button",{onClick:()=>E(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-4",children:'O que vamos comprar? Digite uma receita (ex: "Strogonoff para 4") ou um evento (ex: "Churrasco fim de semana") e eu gero a lista.'}),e.jsxs("form",{onSubmit:s,children:[e.jsx("input",{autoFocus:!0,type:"text",value:h,onChange:c=>B(c.target.value),placeholder:"Ex: Ingredientes para bolo de cenoura...",className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-purple-500 mb-4"}),e.jsxs("button",{type:"submit",disabled:I||!h,className:"w-full py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold shadow-md disabled:opacity-50 flex items-center justify-center gap-2",children:[I?e.jsx("span",{className:"animate-spin",children:"‚è≥"}):e.jsx($a,{className:"w-5 h-5"}),"Gerar Lista"]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(nt,{className:"w-7 h-7 text-indigo-600"}),"Lista de Compras"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Organize sua ida ao mercado."})]}),e.jsxs("button",{onClick:()=>E(!0),disabled:!v,className:`hidden md:flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-xs uppercase tracking-wide transition-all shadow-sm ${v?"bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900/30 dark:text-purple-300":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[e.jsx(Ce,{className:"w-4 h-4"})," Gerar com IA"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-slate-400 tracking-wider mb-1",children:"Total Calculado"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:$(u)})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[10px] font-bold uppercase text-slate-400 tracking-wider mb-1 flex items-center justify-end gap-1 cursor-pointer hover:text-indigo-500",onClick:()=>{A(!0),H(x.toString())},children:["Teto de Gastos (Viagem) ",e.jsx(ws,{className:"w-3 h-3"})]}),W?e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500",children:"R$"}),e.jsx("input",{autoFocus:!0,type:"number",className:"w-24 p-1 text-right font-bold border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:q,onChange:c=>H(c.target.value),onKeyDown:c=>c.key==="Enter"&&w(),onBlur:w})]}):e.jsx("p",{className:"text-xl font-bold text-slate-600 dark:text-slate-400 cursor-pointer hover:text-indigo-500",onClick:()=>{A(!0),H(x.toString())},children:x>0?$(x):"Definir Teto"})]})]}),x>0&&e.jsxs("div",{className:"relative w-full h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:[e.jsx("div",{className:`h-full transition-all duration-500 ${L}`,style:{width:`${Math.min(100,k)}%`}}),k>100&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-[9px] font-bold text-white drop-shadow-md animate-pulse flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"})," ACIMA DO OR√áAMENTO"]})})]})]})]}),e.jsxs("form",{onSubmit:m,className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 flex gap-2",children:[e.jsx("input",{id:"new-item-input",type:"text",value:y,onChange:c=>j(c.target.value),placeholder:"Adicionar item...",className:"flex-1 p-3 pl-4 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm",autoComplete:"off"}),e.jsx("select",{value:N,onChange:c=>b(c.target.value),className:"hidden md:block w-32 p-3 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm",children:Xe.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsx("button",{type:"submit",disabled:!y.trim(),className:"px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"md:hidden overflow-x-auto pb-2 -mt-4",children:e.jsx("div",{className:"flex gap-2 px-1",children:Xe.map(c=>e.jsx("button",{type:"button",onClick:()=>b(c),className:`px-3 py-1.5 rounded-full text-xs font-bold border whitespace-nowrap ${N===c?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-800 text-slate-500 border-slate-200 dark:border-slate-700"}`,children:c},c))})}),e.jsx("div",{className:"space-y-6",children:t.length===0?e.jsxs("div",{className:"p-12 text-center text-slate-400 flex flex-col items-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx(nt,{className:"w-16 h-16 mb-4 opacity-20"}),e.jsx("p",{children:"Sua lista est√° vazia."}),v&&e.jsx("p",{className:"text-sm mt-2 text-purple-500 cursor-pointer hover:underline",onClick:()=>E(!0),children:"Experimente usar a IA para criar uma lista!"})]}):Xe.map(c=>{const S=n[c];return!S||S.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 px-4 py-2 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Pa,{className:"w-3 h-3"})," ",c]}),e.jsx("span",{className:"text-[10px] font-bold bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-1.5 py-0.5 rounded-full",children:S.length})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:S.map(G=>e.jsxs("div",{className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-colors ${G.isChecked?"bg-slate-50/50 dark:bg-slate-700/30":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:()=>o(G.id,{isChecked:!G.isChecked}),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all flex-shrink-0 ${G.isChecked?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent hover:border-emerald-400"}`,children:e.jsx(St,{className:"w-4 h-4"})}),e.jsx("span",{className:`font-medium text-lg truncate ${G.isChecked?"text-slate-400 line-through":"text-slate-700 dark:text-slate-200"}`,children:G.name})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>l(G.id,G.quantity,-1),className:"p-1.5 text-slate-500 hover:text-indigo-600",children:e.jsx(Ma,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-bold text-slate-700 dark:text-white text-sm",children:G.quantity}),e.jsx("button",{onClick:()=>l(G.id,G.quantity,1),className:"p-1.5 text-slate-500 hover:text-indigo-600",children:e.jsx(de,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0,00",value:G.actualPrice===0?"":G.actualPrice,onChange:T=>o(G.id,{actualPrice:parseFloat(T.target.value)||0}),className:`w-24 pl-8 pr-2 py-2 rounded-lg border outline-none font-bold text-right transition-colors ${G.actualPrice>0?"border-emerald-300 dark:border-emerald-700 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400":"border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:border-indigo-500"}`})]}),e.jsx("button",{onClick:()=>r(G.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:e.jsx(we,{className:"w-5 h-5"})})]})]},G.id))})]},c)})}),e.jsxs("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 md:hidden z-30 flex gap-2 w-[90%] max-w-sm",children:[e.jsx("button",{onClick:()=>E(!0),disabled:!v,className:"bg-white dark:bg-slate-800 text-purple-600 p-4 rounded-full shadow-lg border border-purple-100 dark:border-purple-900 disabled:opacity-50",children:e.jsx(Ce,{className:"w-6 h-6"})}),e.jsxs("button",{onClick:()=>M(!0),disabled:t.length===0,className:"flex-1 bg-slate-900 text-white rounded-full shadow-xl font-bold flex items-center justify-between px-6 hover:scale-105 transition-transform disabled:opacity-70 disabled:scale-100",children:[e.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[e.jsx("span",{className:"text-[10px] text-emerald-400 uppercase font-bold",children:"Total"}),e.jsx("span",{className:"text-lg",children:$(u)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm bg-white/10 px-3 py-1.5 rounded-lg",children:["Finalizar ",e.jsx(ct,{className:"w-4 h-4"})]})]})]})]})},ul=({currentView:t,onNavigate:a,data:o,actions:r,privacyMode:i,hasApiKey:f,quickActionSignal:x})=>{const D=async(C,R,y)=>{const j={description:`Compra de Mercado (${new Date().toLocaleDateString()})`,amount:C,type:"expense",category:y,date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:R,isRecurring:!1};await r.addTransaction(j),await r.clearShoppingList(),alert("Compra finalizada! Despesa registrada com sucesso."),a(z.TRANSACTIONS)},v=[{id:z.KANBAN,label:"NEXO Flow",icon:$t},{id:z.NOTES,label:"NEXO Notes",icon:Ie},{id:z.SHOPPING_LIST,label:"Lista de Compras",icon:nt}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Ferramentas de Organiza√ß√£o"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:v.map(C=>{const R=t===C.id;return e.jsxs("button",{onClick:()=>a(C.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-2 md:px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${R?"bg-purple-600 border-purple-600 text-white shadow-lg shadow-purple-500/30 scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:border-purple-300 dark:hover:border-purple-500 hover:bg-slate-50 dark:hover:bg-slate-700"}
                `,children:[e.jsx(C.icon,{className:`w-5 h-5 ${R?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"text-xs md:text-sm text-center md:text-left",children:C.label})]},C.id)})})]}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===z.KANBAN&&e.jsx(cl,{columns:o.kanbanColumns||[],onSaveColumn:r.saveKanbanColumn,onDeleteColumn:r.deleteKanbanColumn,onAddTransaction:C=>{r.addTransaction(C),alert("Transa√ß√£o criada a partir do card!"),a(z.TRANSACTIONS)},privacyMode:i}),t===z.NOTES&&e.jsx(xl,{notes:o.notes||[],onAdd:r.addNote,onUpdate:r.updateNote,onDelete:r.deleteNote,privacyMode:i}),t===z.SHOPPING_LIST&&e.jsx(ml,{items:o.shoppingList||[],onAdd:r.addShoppingItem,onUpdate:r.updateShoppingItem,onDelete:r.deleteShoppingItem,onClearList:r.clearShoppingList,onFinishShopping:D,shoppingBudget:o.shoppingBudget,onUpdateBudget:r.setShoppingBudget,hasApiKey:f,privacyMode:i,quickActionSignal:x})]})]})},hs="028.268.001-24",hl="Alexandre Magno dos Santos Linhares",pl=()=>{const[t,a]=d.useState(null),[o,r]=d.useState(!1),[i,f]=d.useState(!0),{data:x,setData:D,actions:v}=Ur(t,o),[C,R]=d.useState(z.DASHBOARD),[y,j]=d.useState(!1),[N,b]=d.useState(!1),[O,M]=d.useState(!1),[_,E]=d.useState(!1),[h,B]=d.useState(null),[I,U]=d.useState(0),[W,A]=d.useState(!1),[q,H]=d.useState(""),[Y,X]=d.useState(!1),[P,V]=d.useState(!1),[u,n]=d.useState(!1);d.useRef(null),d.useEffect(()=>{const Q=re=>{re.preventDefault(),B(re)};return window.addEventListener("beforeinstallprompt",Q),()=>window.removeEventListener("beforeinstallprompt",Q)},[]);const m=async()=>{if(!h)return;h.prompt();const{outcome:Q}=await h.userChoice;B(null)};d.useEffect(()=>{const Q=Ua(me,async re=>{if(a(re),f(!1),re){r(!1);const le=Zt("guest_user");le.transactions.length>0&&confirm("Encontramos dados no modo convidado. Deseja migrar para sua conta na nuvem?")&&(await ss(re.uid,le),localStorage.removeItem("finansmart_data_v2_guest_user"))}});return()=>Q()},[]),d.useEffect(()=>{!i&&o&&ar(x,"guest_user")},[x,o,i]);const s=()=>{r(!0);const Q=Zt("guest_user");D(Q)},l=async()=>{o?(r(!1),D({transactions:[],investments:[],budgets:[],debts:[],shoppingList:[],unlockedBadges:[],kanbanColumns:[],notes:[],categories:[]})):await Ka(me)};d.useEffect(()=>{X(ls()),ls()&&H($e()||""),!localStorage.getItem("nexo_welcome_seen")&&(t||o)&&n(!0)},[t,o]);const p=()=>{q.trim()&&(rs(q.trim()),X(!0),A(!1),alert("Chave API salva no seu navegador com sucesso!"))},w=()=>{Ir(),H(""),X(!1),A(!1)},$=()=>{q.trim()&&(rs(q.trim()),X(!0)),localStorage.setItem("nexo_welcome_seen","true"),n(!1)},k=()=>{navigator.clipboard.writeText(hs),alert("Chave Pix copiada!")};d.useEffect(()=>{N?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[N]);const L=()=>{document.fullscreenElement?(document.exitFullscreen&&document.exitFullscreen(),M(!1)):(document.documentElement.requestFullscreen().catch(Q=>console.error(Q)),M(!0))},c=()=>{confirm(`‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os dados, configura√ß√µes e chave API deste navegador.

Deseja realmente resetar o app para o estado de f√°brica?`)&&(localStorage.clear(),window.location.reload())},S=()=>{const Q=JSON.stringify(x),re="data:application/json;charset=utf-8,"+encodeURIComponent(Q),le=document.createElement("a");le.setAttribute("href",re),le.setAttribute("download","nexo_backup.json"),le.click()},G=Q=>{var ce;const re=(ce=Q.target.files)==null?void 0:ce[0];if(!re)return;const le=new FileReader;le.onload=async Pe=>{var Me;try{const je=JSON.parse((Me=Pe.target)==null?void 0:Me.result);confirm("Isso substituir√° seus dados atuais. Tem certeza?")&&(t?await ss(t.uid,je):D(je),alert("Backup restaurado com sucesso!"))}catch{alert("Erro ao ler arquivo de backup.")}},le.readAsText(re)},T=Q=>{R(Q),E(!1),setTimeout(()=>U(Date.now()),50)},J=()=>C===z.DASHBOARD?e.jsx(os,{data:x,privacyMode:y,onUnlockBadge:v.unlockBadge,onNavigate:Q=>R(Q)}):C===z.AI_ASSISTANT?e.jsx(Fr,{data:x,privacyMode:y}):C===z.SETTINGS?e.jsx(Yr,{data:x,actions:v,privacyMode:y,setPrivacyMode:j,darkMode:N,setDarkMode:b,hasApiKey:Y,onOpenKeyModal:()=>A(!0),onExportBackup:S,onImportBackup:G,onFactoryReset:c}):[z.TRANSACTIONS,z.CALENDAR,z.SUBSCRIPTIONS,z.DEBTS].includes(C)?e.jsx(rl,{currentView:C,onNavigate:R,data:x,actions:v,privacyMode:y,hasApiKey:Y,quickActionSignal:I}):[z.INVESTMENTS,z.BUDGETS,z.WEALTH_PLANNER].includes(C)?e.jsx(dl,{currentView:C,onNavigate:R,data:x,actions:v,privacyMode:y,hasApiKey:Y,quickActionSignal:I}):[z.KANBAN,z.NOTES,z.SHOPPING_LIST].includes(C)?e.jsx(ul,{currentView:C,onNavigate:R,data:x,actions:v,privacyMode:y,hasApiKey:Y,quickActionSignal:I}):e.jsx(os,{data:x,privacyMode:y,onUnlockBadge:v.unlockBadge,onNavigate:Q=>R(Q)});return i?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsx(dt,{className:"w-12 h-12 text-indigo-500 animate-spin"})}):!t&&!o?e.jsx(Mr,{onGuestLogin:s}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row font-sans text-slate-900 dark:text-slate-100 transition-colors duration-300",children:[_&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden backdrop-blur-sm animate-fade-in",onClick:()=>E(!1)}),e.jsx(Br,{user:t,isGuest:o,mobileMenuOpen:_,setMobileMenuOpen:E,currentView:C,onNavigate:Q=>R(Q),onLogout:l,privacyMode:y,setPrivacyMode:j,darkMode:N,setDarkMode:b,isFullscreen:O,toggleFullscreen:L,hasKey:Y,onOpenKeyModal:()=>A(!0),onOpenDonateModal:()=>V(!0),onExportBackup:S,onImportBackup:G,onFactoryReset:c,canInstall:!!h,onInstall:m}),e.jsxs("main",{className:"flex-1 p-4 md:p-8 pt-20 md:pt-8 pb-8 overflow-y-auto h-screen scroll-smooth",children:[e.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-slate-900 p-4 border-b border-slate-800 z-30 flex items-center justify-between shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>E(!0),className:"text-slate-300 hover:text-white p-1",children:e.jsx(Oa,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-indigo-600 p-1.5 rounded-lg",children:e.jsx(Tt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-bold text-white tracking-tight",children:"NEXO"})]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[h&&e.jsx("button",{onClick:m,className:"text-emerald-400 hover:text-white animate-pulse",title:"Instalar Aplicativo",children:e.jsx(fs,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>A(!0),className:`${Y?"text-emerald-400":"text-rose-500"} hover:text-white relative`,children:[e.jsx(Ke,{className:"w-5 h-5"}),!Y&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2.5 w-2.5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-rose-500"})]})]})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto animate-fade-in",children:[C===z.DASHBOARD&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>T(z.TRANSACTIONS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-blue-100 dark:border-blue-900/30 hover:border-blue-300 transition-all group",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/40 p-2.5 rounded-lg group-hover:bg-blue-600 group-hover:text-white transition-colors text-blue-600 dark:text-blue-400",children:e.jsx(At,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Nova"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Transa√ß√£o"})]})]}),e.jsxs("button",{onClick:()=>T(z.SHOPPING_LIST),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-emerald-100 dark:border-emerald-900/30 hover:border-emerald-300 transition-all group",children:[e.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/40 p-2.5 rounded-lg group-hover:bg-emerald-600 group-hover:text-white transition-colors text-emerald-600 dark:text-emerald-400",children:e.jsx(nt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Calculadora"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Mercado"})]})]}),e.jsxs("button",{onClick:()=>T(z.DEBTS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-rose-100 dark:border-rose-900/30 hover:border-rose-300 transition-all group",children:[e.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/40 p-2.5 rounded-lg group-hover:bg-rose-600 group-hover:text-white transition-colors text-rose-600 dark:text-rose-400",children:e.jsx(ze,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Registrar"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"D√≠vida"})]})]}),e.jsxs("button",{onClick:()=>T(z.BUDGETS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-pink-100 dark:border-pink-900/30 hover:border-pink-300 transition-all group",children:[e.jsx("div",{className:"bg-pink-100 dark:bg-pink-900/40 p-2.5 rounded-lg group-hover:bg-pink-600 group-hover:text-white transition-colors text-pink-600 dark:text-pink-400",children:e.jsx(Ae,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Definir"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Meta/Limite"})]})]})]}),J()]})]}),e.jsx(Lr,{showWelcome:u,isDonateModalOpen:P,isKeyModalOpen:W,userKeyInput:q,hasKey:Y,PIX_KEY:hs,PIX_NAME:hl,setShowWelcome:n,setIsDonateModalOpen:V,setIsKeyModalOpen:A,setUserKeyInput:H,handleSaveKey:p,handleRemoveKey:w,handleFinishWelcome:$,copyPix:k})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});const $s=document.getElementById("root");if(!$s)throw new Error("Could not find root element to mount to");const gl=Fa.createRoot($s);gl.render(e.jsx(Ba.StrictMode,{children:e.jsx(pl,{})}));
