import{r as c,j as e,S as Tt,K as Ke,U as Kt,H as Et,b as Nt,L as ct,d as bs,C as Ne,e as fs,f as js,B as _e,P as Qe,h as Rt,D as $t,i as Vs,k as Gs,l as wt,m as ze,W as Pt,n as tt,o as Ze,T as fe,p as Te,q as xt,s as st,t as je,u as Ae,v as kt,w as Us,x as qs,M as Ks,y as Ys,X as ne,z as Hs,E as Ws,F as Xs,G as Mt,I as vs,J as Js,N as Ns,O as Qs,Q as Zs,V as at,Y as ws,Z as mt,_ as ea,$ as ta,a0 as sa,a1 as aa,a2 as ra,a3 as la,a4 as na,a5 as ie,a6 as ve,a7 as oa,a8 as yt,a9 as ks,aa as Ot,ab as De,ac as ia,ad as da,ae as ca,af as gt,ag as Bt,ah as xa,ai as Ct,aj as pt,ak as ma,al as Yt,am as St,an as ua,ao as ha,ap as ys,aq as ga,ar as pa,as as rt,at as Ve,au as ba,av as lt,aw as Cs,ax as At,ay as fa,az as Ht,aA as Wt,aB as Ss,aC as Xe,aD as ja,aE as Xt,aF as nt,aG as va,aH as Ie,aI as Na,aJ as wa,aK as As,aL as ka,aM as ya,aN as Ca,aO as Dt,aP as Ft,aQ as Sa,aR as Aa,aS as Da,aT as Ia,aU as Jt,aV as Ta,aW as Ea,aX as Ra,aY as bt,aZ as $a,a_ as Pa,a$ as ot,b0 as Ma,b1 as Oa,b2 as Ba,b3 as Fa,R as La}from"./vendor-react-DqWsr7_N.js";import{i as _a,g as za,a as Va,q as Le,l as Ga,o as ft,c as xe,b as he,d as J,e as Ds,u as $e,w as Lt,r as _t,s as me,f as ye,h as Ua,j as qa,G as It,k as Is,m as Ka,n as Ya}from"./vendor-firebase-D3b_gD_8.js";import{G as Ye}from"./vendor-genai-U-FmSb1B.js";import{R as we,P as Ts,a as Es,C as ut,T as ke,L as it,b as Ha,c as Ge,X as Ue,Y as qe,d as Wa,B as zt,e as dt,f as Rs,A as Xa,g as Ja,h as Qa,i as Za,j as er,k as tr,l as Qt}from"./vendor-recharts-DLWsifO_.js";import"./vendor-utils-DKEeUt6g.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const j of i)if(j.type==="childList")for(const m of j.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function n(i){const j={};return i.integrity&&(j.integrity=i.integrity),i.referrerPolicy&&(j.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?j.credentials="include":i.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function l(i){if(i.ep)return;i.ep=!0;const j=n(i);fetch(i.href,j)}})();var z=(t=>(t.DASHBOARD="DASHBOARD",t.TRANSACTIONS="TRANSACTIONS",t.INVESTMENTS="INVESTMENTS",t.BUDGETS="BUDGETS",t.SUBSCRIPTIONS="SUBSCRIPTIONS",t.CALENDAR="CALENDAR",t.AI_ASSISTANT="AI_ASSISTANT",t.DEBTS="DEBTS",t.SHOPPING_LIST="SHOPPING_LIST",t.WEALTH_PLANNER="WEALTH_PLANNER",t.KANBAN="KANBAN",t.NOTES="NOTES",t.SETTINGS="SETTINGS",t))(z||{});const sr={apiKey:"AIzaSyAp9vMuLIhE-W8sEVpuzSWr7vvRHOu1pSc",authDomain:"nexo-bbbe5.firebaseapp.com",projectId:"nexo-bbbe5",storageBucket:"nexo-bbbe5.firebasestorage.app",messagingSenderId:"133978874707",appId:"1:133978874707:web:ba5e00d4c5e35b3c5df7a6"},$s=_a(sr),ge=za($s),G=Va($s,{ignoreUndefinedProperties:!0}),ar="finansmart_data_v2",He=[{id:"cat_salario",name:"Sal√°rio",type:"income",color:"emerald",isDefault:!0},{id:"cat_renda_extra",name:"Renda Extra",type:"income",color:"blue",isDefault:!0},{id:"cat_investimentos_in",name:"Investimentos",type:"income",color:"indigo",isDefault:!0},{id:"cat_casa",name:"Casa",type:"expense",color:"orange",isDefault:!0},{id:"cat_mobilidade",name:"Mobilidade",type:"expense",color:"blue",isDefault:!0},{id:"cat_alimentos",name:"Alimentos",type:"expense",color:"red",isDefault:!0},{id:"cat_lazer",name:"Lazer",type:"expense",color:"purple",isDefault:!0},{id:"cat_saude",name:"Sa√∫de",type:"expense",color:"teal",isDefault:!0},{id:"cat_educacao",name:"Educa√ß√£o",type:"expense",color:"yellow",isDefault:!0},{id:"cat_pets",name:"Pets",type:"expense",color:"amber",isDefault:!0},{id:"cat_outros",name:"Outros",type:"expense",color:"slate",isDefault:!0}],Zt={transactions:[],categories:He,investments:[],budgets:[],debts:[],shoppingList:[],shoppingBudget:0,kanbanColumns:[],kanbanBoards:[],notes:[],unlockedBadges:[],walletBalance:0},Ps=t=>`${ar}_${t}`,es=t=>{try{const r=Ps(t),n=localStorage.getItem(r);if(!n)return Zt;const l=JSON.parse(n);return l.transactions||(l.transactions=[]),l.investments||(l.investments=[]),l.unlockedBadges||(l.unlockedBadges=[]),l.debts||(l.debts=[]),l.shoppingList||(l.shoppingList=[]),l.kanbanColumns||(l.kanbanColumns=[]),l.kanbanBoards||(l.kanbanBoards=[]),l.notes||(l.notes=[]),(!l.categories||l.categories.length===0)&&(l.categories=He),l.shoppingBudget===void 0&&(l.shoppingBudget=0),l.budgets?l.budgets=l.budgets.map(i=>({...i,isRecurring:i.isRecurring!==void 0?i.isRecurring:!0,month:i.month||void 0})):l.budgets=[],l.walletBalance===void 0&&(l.walletBalance=l.transactions.reduce((i,j)=>j.status==="paid"?i+(j.type==="income"?j.amount:-j.amount):i,0)),l}catch(r){return console.error("Failed to load data",r),Zt}},rr=(t,r)=>{try{const n=Ps(r),l=t.transactions.reduce((j,m)=>m.status==="paid"?j+(m.type==="income"?m.amount:-m.amount):j,0),i={...t,walletBalance:l};localStorage.setItem(n,JSON.stringify(i))}catch(n){console.error("Failed to save data",n)}},Ee=t=>t.status==="pending"?0:t.type==="income"?t.amount:-t.amount,lr=(t,r)=>{const n=Le(xe(G,"users",t,"transactions"),ft("date","desc"),Ga(300)),l=he(n,k=>{const p=k.docs.map(E=>E.data());r({transactions:p})}),i=he(xe(G,"users",t,"investments"),k=>{const p=k.docs.map(E=>E.data());r({investments:p})}),j=he(xe(G,"users",t,"budgets"),k=>{const p=k.docs.map(E=>E.data());r({budgets:p})}),m=he(xe(G,"users",t,"debts"),k=>{const p=k.docs.map(E=>E.data());r({debts:p})}),T=he(xe(G,"users",t,"shopping_list"),k=>{const p=k.docs.map(E=>E.data());r({shoppingList:p})}),w=he(Le(xe(G,"users",t,"kanban_columns"),ft("order")),k=>{const p=k.docs.map(E=>E.data());r({kanbanColumns:p})}),A=he(xe(G,"users",t,"kanban_boards"),k=>{const p=k.docs.map(E=>E.data());r({kanbanBoards:p})}),R=he(Le(xe(G,"users",t,"notes"),ft("date","desc")),k=>{const p=k.docs.map(E=>E.data());r({notes:p})}),y=he(xe(G,"users",t,"categories"),k=>{const p=k.docs.map(E=>E.data());p.length>0?r({categories:p}):Tr(t)}),I=he(J(G,"users",t),k=>{if(k.exists()){const p=k.data(),E={};p.unlockedBadges&&(E.unlockedBadges=p.unlockedBadges),p.wealthProfile&&(E.wealthProfile=p.wealthProfile),p.shoppingBudget!==void 0&&(E.shoppingBudget=p.shoppingBudget),p.walletBalance!==void 0&&(E.walletBalance=p.walletBalance),Object.keys(E).length>0&&r(E)}});return()=>{l(),i(),j(),m(),T(),w(),A(),R(),y(),I()}},ts=async(t,r)=>{await _t(G,async n=>{var w;const l=J(G,"users",t),j=((w=(await n.get(l)).data())==null?void 0:w.walletBalance)||0,m=Ee(r),T=J(G,"users",t,"transactions",r.id);n.set(T,r),n.update(l,{walletBalance:j+m})})},et=async(t,r,n)=>{await _t(G,async l=>{var k;const i=J(G,"users",t,"transactions",r),j=J(G,"users",t),m=await l.get(i);if(!m.exists())throw new Error("Transaction not found");const T=m.data(),A=((k=(await l.get(j)).data())==null?void 0:k.walletBalance)||0,R=Ee(T),y={...T,...n},I=Ee(y);l.update(i,n),l.update(j,{walletBalance:A-R+I})})},nr=async(t,r)=>{await _t(G,async n=>{var R;const l=J(G,"users",t,"transactions",r),i=J(G,"users",t),j=await n.get(l);if(!j.exists())throw new Error("Transaction not found");const m=j.data(),w=((R=(await n.get(i)).data())==null?void 0:R.walletBalance)||0,A=Ee(m);n.delete(l),n.update(i,{walletBalance:w-A})})},or=async t=>{const r=Le(xe(G,"users",t,"transactions")),n=await Ds(r);let l=0;return n.forEach(i=>{const j=i.data();l+=Ee(j)}),await $e(J(G,"users",t),{walletBalance:l}),l},ir=async(t,r)=>{await me(J(G,"users",t,"investments",r.id),r)},dr=async(t,r,n)=>{await $e(J(G,"users",t,"investments",r),n)},cr=async(t,r)=>{await ye(J(G,"users",t,"investments",r))},xr=async(t,r)=>{await me(J(G,"users",t,"budgets",r.id),r)},mr=async(t,r,n)=>{await $e(J(G,"users",t,"budgets",r),n)},ur=async(t,r)=>{await ye(J(G,"users",t,"budgets",r))},hr=async(t,r)=>{await me(J(G,"users",t,"debts",r.id),r)},ss=async(t,r,n)=>{await $e(J(G,"users",t,"debts",r),n)},gr=async(t,r)=>{await ye(J(G,"users",t,"debts",r))},pr=async(t,r)=>{await me(J(G,"users",t,"shopping_list",r.id),r)},br=async(t,r,n)=>{await $e(J(G,"users",t,"shopping_list",r),n)},fr=async(t,r)=>{await ye(J(G,"users",t,"shopping_list",r))},jr=async t=>{const r=Le(xe(G,"users",t,"shopping_list")),n=await Ds(r),l=Lt(G);n.docs.forEach(i=>{l.delete(i.ref)}),await l.commit()},vr=async(t,r)=>{await me(J(G,"users",t),{shoppingBudget:r},{merge:!0})},Nr=async(t,r)=>{await me(J(G,"users",t,"kanban_columns",r.id),r)},wr=async(t,r)=>{await ye(J(G,"users",t,"kanban_columns",r))},kr=async(t,r)=>{await me(J(G,"users",t,"kanban_boards",r.id),r)},yr=async(t,r)=>{await ye(J(G,"users",t,"kanban_boards",r))},Cr=async(t,r)=>{await me(J(G,"users",t,"notes",r.id),r)},Sr=async(t,r,n)=>{await $e(J(G,"users",t,"notes",r),n)},Ar=async(t,r)=>{await ye(J(G,"users",t,"notes",r))},Dr=async(t,r)=>{await me(J(G,"users",t,"categories",r.id),r)},Ir=async(t,r)=>{await ye(J(G,"users",t,"categories",r))},Tr=async t=>{const r=Lt(G);He.forEach(n=>{const l=J(G,"users",t,"categories",n.id);r.set(l,n)}),await r.commit()},Er=async(t,r,n)=>{n.includes(r)||await me(J(G,"users",t),{unlockedBadges:[...n,r]},{merge:!0})},Rr=async(t,r)=>{await me(J(G,"users",t),{wealthProfile:r},{merge:!0})},as=async(t,r)=>{const n=Lt(G);let l=0;r.transactions.forEach(T=>{const w=J(G,"users",t,"transactions",T.id);n.set(w,T),l+=Ee(T)}),r.investments.forEach(T=>{const w=J(G,"users",t,"investments",T.id);n.set(w,T)}),r.budgets.forEach(T=>{const w=J(G,"users",t,"budgets",T.id);n.set(w,T)}),r.debts.forEach(T=>{const w=J(G,"users",t,"debts",T.id);n.set(w,T)}),r.shoppingList.forEach(T=>{const w=J(G,"users",t,"shopping_list",T.id);n.set(w,T)}),r.kanbanColumns.forEach(T=>{const w=J(G,"users",t,"kanban_columns",T.id);n.set(w,T)}),r.notes.forEach(T=>{const w=J(G,"users",t,"notes",T.id);n.set(w,T)}),(r.categories&&r.categories.length>0?r.categories:He).forEach(T=>{const w=J(G,"users",t,"categories",T.id);n.set(w,T)});const j=J(G,"users",t),m={unlockedBadges:r.unlockedBadges,walletBalance:l,shoppingBudget:r.shoppingBudget||0};r.wealthProfile&&(m.wealthProfile=r.wealthProfile),n.set(j,m,{merge:!0}),await n.commit()},rs=["Casa","Mobilidade","Alimentos","Lazer","Pets","Outros"],ht="nexo_user_api_key",Pe=()=>{const t=localStorage.getItem(ht);return t||null},ls=t=>{localStorage.setItem(ht,t)},$r=()=>{localStorage.removeItem(ht)},ns=()=>!!localStorage.getItem(ht),Pr=async t=>{var i;const r=Pe();if(!r)return[];const n=new Ye({apiKey:r}),l=`
    Voc√™ √© um assistente de compras inteligente.
    O usu√°rio vai pedir uma receita, evento ou lista gen√©rica.
    Gere uma lista de compras JSON com ingredientes/itens.
    
    CATEGORIAS PERMITIDAS: 'Hortifruti', 'Carnes', 'Latic√≠nios', 'Mercearia', 'Bebidas', 'Limpeza', 'Higiene', 'Padaria', 'Outros'.

    RESPONDA APENAS JSON V√ÅLIDO neste formato:
    [
      { "name": "Nome do item", "quantity": 1, "category": "Categoria" }
    ]
  `;try{const m=((i=(await n.models.generateContent({model:"gemini-3-flash-preview",contents:`Gere a lista para: ${t}`,config:{systemInstruction:l,responseMimeType:"application/json"}})).text)==null?void 0:i.trim())||"[]";return JSON.parse(m)}catch(j){return console.error("Erro ao gerar lista:",j),[]}},Mr=async t=>{var i;const r=Pe();if(!r)return"Outros";const n=new Ye({apiKey:r}),l=`Classifique "${t}" em: ${rs.join(", ")}. Responda S√ì a categoria.`;try{const m=((i=(await n.models.generateContent({model:"gemini-3-flash-preview",contents:l})).text)==null?void 0:i.trim())||"Outros";return rs.includes(m)?m:"Outros"}catch{return"Outros"}},Or=async t=>{var m,T,w;const r=Pe();if(!r)return{text:"Configure sua API Key nas prefer√™ncias para receber recomenda√ß√µes de investimentos.",sources:[]};const n=new Ye({apiKey:r}),l=t.map(A=>`${A.name} (${A.type}): R$ ${A.amount}`).join(", "),j=`
    Voc√™ √© um consultor de investimentos s√™nior especialista no mercado brasileiro.
    Carteira Atual: R$ ${t.reduce((A,R)=>A+R.amount,0)} (${l||"Vazia"}).

    TAREFA:
    Encontre oportunidades REAIS e ATUAIS para diversifica√ß√£o.
    
    FORMATO OBRIGAT√ìRIO (Siga estritamente):
    
    ### üõ°Ô∏è Baixo Risco
    1. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]
    2. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]
    3. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]

    ### ‚öñÔ∏è M√©dio Risco
    (3 op√ß√µes no mesmo formato)

    ### üöÄ Alto Risco
    (3 op√ß√µes no mesmo formato)

    ---SECTION-BREAK---

    ### üß† An√°lise T√©cnica
    (Sua an√°lise detalhada aqui sobre cen√°rio macro, infla√ß√£o e porqu√™s)
  `;try{const A=await n.models.generateContent({model:"gemini-3-flash-preview",contents:j,config:{tools:[{googleSearch:{}}]}}),R=[],y=(w=(T=(m=A.candidates)==null?void 0:m[0])==null?void 0:T.groundingMetadata)==null?void 0:w.groundingChunks;y&&y.forEach(k=>{k.web&&R.push({title:k.web.title||"Fonte Web",uri:k.web.uri||"#"})});const I=R.filter((k,p,E)=>E.findIndex(O=>O.uri===k.uri)===p);return{text:A.text||"N√£o foi poss√≠vel gerar recomenda√ß√µes no momento.",sources:I}}catch(A){console.warn("Google Search Grounding failed, retrying without search...",A);try{return{text:((await n.models.generateContent({model:"gemini-3-flash-preview",contents:j+`

(Nota: A pesquisa em tempo real falhou. Use seu conhecimento geral.)`})).text||"Sem resposta.")+`

‚ö†Ô∏è *Nota: O acesso √† pesquisa em tempo real falhou. As taxas mencionadas podem ser estimativas baseadas no conhecimento geral do modelo.*`,sources:[]}}catch(R){return console.error("Investment Advice Error (Fallback):",R),{text:`Erro ao consultar IA: ${R.message||"Erro desconhecido"}. Verifique sua chave API ou tente novamente mais tarde.`,sources:[]}}}},Br=async(t,r,n)=>{var w;const l=Pe();if(!l)return null;const i=new Ye({apiKey:l}),j=new Map;t.forEach(A=>{j.set(A.type,(j.get(A.type)||0)+A.amount)});const m=Array.from(j.entries()).map(([A,R])=>`${A}: R$ ${R.toFixed(2)}`).join(", "),T=`
      Atue como um Gestor de Private Banking. O cliente tem ${n} anos e perfil de risco: ${r.toUpperCase()}.
      
      Carteira Atual Agregada: ${m||"R$ 0,00 (Vazia)"}

      Sua tarefa √© analisar a aloca√ß√£o de ativos e sugerir o rebalanceamento ideal baseado nas melhores pr√°ticas de Wealth Management (como Bridgewater/Arta) adaptado ao Brasil.
      
      RETORNE APENAS JSON V√ÅLIDO. N√ÉO USE MARKDOWN. Siga este esquema:
      {
        "analysisText": "Par√°grafo curto (max 300 chars) com sua vis√£o macro sobre a carteira do cliente.",
        "currentAllocation": [ {"name": "Categoria", "value": %_atual (0-100)} ],
        "suggestedAllocation": [ {"name": "Categoria", "value": %_ideal (0-100)} ],
        "actionItems": [
           {"title": "A√ß√£o T√°tica", "type": "buy" | "sell" | "hold", "description": "Explica√ß√£o curta"}
        ]
      }
      
      Regras:
      1. 'suggestedAllocation' deve somar 100.
      2. Categorias sugeridas podem ser: 'Renda Fixa P√≥s', 'Renda Fixa Pr√©/IPCA', 'A√ß√µes Brasil', 'A√ß√µes Global', 'FIIs', 'Cripto/Alternativos', 'Reserva'.
      3. Se a carteira estiver vazia, sugira a aloca√ß√£o ideal do zero.
    `;try{const R=((w=(await i.models.generateContent({model:"gemini-3-flash-preview",contents:T,config:{responseMimeType:"application/json"}})).text)==null?void 0:w.trim())||"{}";return JSON.parse(R)}catch(A){return console.error("Wealth Analysis Error:",A),null}};async function*Fr(t,r,n){const l=Pe();if(!l){yield"Por favor, configure sua API Key nas prefer√™ncias do menu.";return}const i=new Ye({apiKey:l}),j=n.transactions.filter($=>$.type==="income").reduce(($,h)=>$+h.amount,0),m=n.transactions.filter($=>$.type==="expense").reduce(($,h)=>$+h.amount,0),T=n.investments.reduce(($,h)=>$+h.amount,0),w=n.debts.reduce(($,h)=>$+h.currentAmount,0),A=n.transactions.sort(($,h)=>new Date(h.date).getTime()-new Date($.date).getTime()).slice(0,30).map($=>`- ${$.date}: ${$.description} (${$.type}) R$ ${$.amount} [${$.category}] Status: ${$.status}`).join(`
`),R=n.investments.map($=>`- ${$.name} (${$.type}): R$ ${$.amount} (Meta: R$ ${$.targetAmount})`).join(`
`),y=n.debts.map($=>`- ${$.creditor}: R$ ${$.currentAmount} (Status: ${$.status}, Vence: ${$.dueDate})`).join(`
`);let I="Neutro";w>T*2?I="Endividado (Foco em quita√ß√£o)":T>m*6?I="Investidor (Foco em otimiza√ß√£o)":j<m&&(I="D√©ficit (Foco em corte de gastos)");const k=`
    RELAT√ìRIO FINANCEIRO DO USU√ÅRIO (Contexto Interno):
    
    1. PERFIL IDENTIFICADO: ${I}
    2. RESUMO:
       - Renda Total: R$ ${j.toFixed(2)}
       - Despesas Totais: R$ ${m.toFixed(2)}
       - Saldo: R$ ${(j-m).toFixed(2)}
       - Total Investido: R$ ${T.toFixed(2)}
       - D√≠vidas Ativas: R$ ${w.toFixed(2)}
    3. √öLTIMAS TRANSA√á√ïES:
    ${A}
    4. INVESTIMENTOS:
    ${R}
    5. D√çVIDAS:
    ${y}
  `,p=`
    Voc√™ √© o NEXO AI, um assistente financeiro pessoal de elite.
    OBJETIVO: Ajudar o usu√°rio a gerenciar suas finan√ßas com base no perfil identificado: ${I}.
    CONTEXTO: ${k}
    DIRETRIZES:
    - Responda de forma concisa e amig√°vel.
    - Se o usu√°rio perguntar sobre o saldo, gastos espec√≠ficos ou investimentos, consulte o relat√≥rio acima.
    - Seja proativo: se vir uma d√≠vida vencendo ou gasto alto, pode alertar sutilmente.
    - Use Markdown para formatar valores e listas.
  `,E=i.chats.create({model:"gemini-3-flash-preview",config:{systemInstruction:p}}),_=`
    [Hist√≥rico Recente]:
    ${r.slice(-6).map($=>`${$.role==="user"?"Usu√°rio":"Modelo"}: ${$.content}`).join(`
`)}
    
    [Nova Mensagem]: ${t}
  `;try{const $=await E.sendMessageStream({message:_});for await(const h of $)h.text&&(yield h.text)}catch($){console.error($),yield"Erro de conex√£o com o c√©rebro digital. Verifique sua Chave de API."}}const Lr=({onGuestLogin:t})=>{const[r,n]=c.useState(!1),[l,i]=c.useState(""),[j,m]=c.useState(""),[T,w]=c.useState(""),[A,R]=c.useState(""),[y,I]=c.useState(!1),[k,p]=c.useState(!1),[E,O]=c.useState(!1),_="028.268.001-24",$="Alexandre Magno S. Linhares";c.useEffect(()=>{const D=ge.app.options.apiKey;(!D||D==="SUA_API_KEY_AQUI"||D.includes("SUA_API_KEY"))&&p(!0)},[]);const h=D=>{console.error(D);let F="Erro ao autenticar. Verifique suas credenciais.";D.code==="auth/email-already-in-use"&&(F="Este e-mail j√° est√° em uso."),D.code==="auth/invalid-email"&&(F="E-mail inv√°lido."),D.code==="auth/weak-password"&&(F="A senha deve ter pelo menos 6 caracteres."),(D.code==="auth/user-not-found"||D.code==="auth/wrong-password")&&(F="E-mail ou senha incorretos."),D.code==="auth/invalid-credential"&&(F="Credenciais inv√°lidas."),D.code==="auth/invalid-api-key"&&(F="Chave de API inv√°lida.",p(!0)),D.code==="auth/unauthorized-domain"?(F="Dom√≠nio n√£o autorizado pelo Firebase.",R(window.location.hostname)):R(""),w(F)},L=async D=>{D.preventDefault(),w(""),R(""),I(!0);try{r?await Ua(ge,l,j):await qa(ge,l,j)}catch(F){h(F)}finally{I(!1)}},C=async()=>{w(""),R(""),I(!0);const D=new It;D.addScope("https://www.googleapis.com/auth/calendar");try{await Is(ge,D)}catch(F){h(F)}finally{I(!1)}},V=()=>{navigator.clipboard.writeText(A),alert("Dom√≠nio copiado!")},q=()=>{navigator.clipboard.writeText(_),O(!0),setTimeout(()=>O(!1),2e3)};return k?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden border border-slate-700 animate-scale-in flex flex-col md:flex-row",children:[e.jsxs("div",{className:"bg-indigo-600 p-8 text-white md:w-1/3 flex flex-col items-center justify-center text-center",children:[e.jsx(Tt,{className:"w-16 h-16 mb-4 opacity-80"}),e.jsx("h2",{className:"text-xl font-bold",children:"Configura√ß√£o Necess√°ria"}),e.jsx("p",{className:"text-indigo-100 text-sm mt-2",children:"Para usar o modo online, voc√™ precisa conectar seu Firebase."})]}),e.jsxs("div",{className:"p-8 md:w-2/3",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Siga estes passos:"}),e.jsxs("div",{className:"space-y-4 text-sm text-slate-600 dark:text-slate-300",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Crie o Banco de Dados"}),e.jsxs("p",{children:["No Console do Firebase, v√° em ",e.jsx("strong",{children:"Firestore Database"}),', clique em "Criar banco de dados", escolha a regi√£o (nam5) e clique em "Iniciar no modo de produ√ß√£o".']})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Ative o Login"}),e.jsxs("p",{children:["V√° em ",e.jsx("strong",{children:"Authentication"}),' > Sign-in method e ative "E-mail/senha".']})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Copie as Chaves"}),e.jsxs("p",{children:['V√° nas Configura√ß√µes do Projeto (‚öôÔ∏è), role at√© "Seus aplicativos" e copie o objeto ',e.jsx("code",{children:"firebaseConfig"}),"."]})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-3 rounded-lg text-xs",children:[e.jsxs("p",{className:"font-bold text-amber-700 dark:text-amber-400 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-3 h-3"})," A√ß√£o Necess√°ria no C√≥digo"]}),e.jsxs("p",{className:"mt-1",children:["Abra o arquivo ",e.jsx("code",{children:"services/firebase.ts"})," e substitua ",e.jsx("code",{children:'"SUA_API_KEY_AQUI"'})," pelos dados reais que voc√™ copiou."]})]})]}),e.jsxs("button",{onClick:t,className:"w-full mt-6 py-3 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4"}),"Pular e Usar Modo Offline (Convidado)"]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900 flex font-sans",children:[e.jsxs("div",{className:"w-full md:w-[45%] lg:w-[40%] flex flex-col justify-center p-8 md:p-12 lg:p-16 relative overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-10",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg shadow-lg shadow-indigo-500/30",children:e.jsx(Et,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"NEXO"}),e.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-widest",children:"Financial Hub"})]})]}),e.jsxs("div",{className:"max-w-sm w-full mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:r?"Criar Conta":"Acesse sua Conta"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:r?"Comece a controlar suas finan√ßas hoje.":"Bem-vindo de volta! Por favor, insira seus dados."}),T&&e.jsxs("div",{className:"mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border-l-4 border-rose-500 rounded-r-lg flex flex-col gap-1 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 text-rose-700 dark:text-rose-400 font-semibold text-sm",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:T})]}),A&&e.jsxs("div",{className:"mt-2 pl-6",children:[e.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Dom√≠nio n√£o autorizado:"}),e.jsx("code",{className:"text-xs bg-white px-1 py-0.5 rounded border border-rose-200 block mb-2",children:A}),e.jsx("button",{onClick:V,className:"text-xs underline text-rose-600",children:"Copiar Dom√≠nio"})]})]}),e.jsxs("form",{onSubmit:L,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5",children:"E-mail"}),e.jsx("input",{type:"email",required:!0,value:l,onChange:D=>i(D.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-800 dark:text-white outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all placeholder:text-slate-400",placeholder:"nome@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5",children:"Senha"}),e.jsx("input",{type:"password",required:!0,minLength:6,value:j,onChange:D=>m(D.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-800 dark:text-white outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all placeholder:text-slate-400",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),!r&&e.jsx("div",{className:"flex justify-end mt-1",children:e.jsx("button",{type:"button",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"Esqueceu a senha?"})})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full py-3.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-2",children:y?e.jsx(ct,{className:"w-5 h-5 animate-spin"}):r?"Cadastrar":"Entrar"})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white dark:bg-slate-900 text-slate-400 font-medium",children:"ou continue com"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:C,disabled:y,className:"flex items-center justify-center gap-2 px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors font-medium text-slate-700 dark:text-slate-300 text-sm",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",color:"#4285F4"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",color:"#34A853"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",color:"#FBBC05"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",color:"#EA4335"})]}),"Google"]}),e.jsxs("button",{type:"button",onClick:t,className:"flex items-center justify-center gap-2 px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors font-medium text-slate-700 dark:text-slate-300 text-sm",children:[e.jsx(Kt,{className:"w-5 h-5 text-slate-500"}),"Convidado"]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:[r?"J√° √© cliente?":"Ainda n√£o tem conta?",e.jsx("button",{onClick:()=>n(!r),className:"ml-1 text-indigo-600 dark:text-indigo-400 font-bold hover:underline",children:r?"Fazer Login":"Cadastre-se gr√°tis"})]})}),e.jsx("div",{className:"mt-10 mb-4",children:e.jsxs("div",{onClick:q,className:"group relative overflow-hidden bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800 dark:to-indigo-900/20 border-2 border-dashed border-indigo-200 dark:border-indigo-700/50 hover:border-indigo-400 dark:hover:border-indigo-500 rounded-xl p-4 cursor-pointer hover:shadow-xl hover:shadow-indigo-500/10 transition-all transform hover:-translate-y-1",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-indigo-600 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl shadow-sm z-10",children:"Apoie o Dev ‚òï"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-0",children:[e.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-full group-hover:scale-110 transition-transform shadow-inner",children:e.jsx(bs,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400 fill-indigo-200 dark:fill-indigo-900"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-indigo-800 dark:text-indigo-300 uppercase tracking-wide mb-1",children:"Gostou? Mande um Pix!"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/50 dark:bg-black/20 p-1.5 rounded-lg border border-indigo-100 dark:border-indigo-800/50",children:[e.jsx("p",{className:"text-sm font-mono font-bold text-slate-700 dark:text-slate-200 truncate select-all",children:_}),e.jsx("span",{className:"text-[9px] bg-indigo-200 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-200 px-1.5 rounded font-sans font-bold",children:"Chave CPF"})]})]}),e.jsx("div",{className:"text-indigo-300 group-hover:text-indigo-600 transition-colors",children:E?e.jsx(Ne,{className:"w-6 h-6 text-emerald-500"}):e.jsx(fs,{className:"w-6 h-6"})})]}),E&&e.jsx("div",{className:"absolute inset-0 bg-indigo-900/90 backdrop-blur-sm flex items-center justify-center text-white font-bold rounded-xl animate-fade-in z-20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-emerald-400"}),"Chave Pix Copiada!"]})}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-2 text-center opacity-60 group-hover:opacity-100 transition-opacity",children:$})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("a",{href:"https://www.linkedin.com/in/alemagnobr/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-slate-400 hover:text-indigo-500 transition-colors inline-flex items-center gap-1",children:[e.jsx(js,{className:"w-3 h-3"})," Alexandre Magno"]})})]})]}),e.jsxs("div",{className:"hidden md:flex flex-1 relative bg-[#4c35de] overflow-hidden items-center justify-center p-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-white opacity-5 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/3"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-purple-400 opacity-10 rounded-full blur-[80px] translate-y-1/3 -translate-x-1/4"}),e.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsxs("div",{className:"relative z-10 w-full max-w-lg",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 shadow-2xl mb-12 transform hover:scale-[1.02] transition-transform duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/10 pb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs font-semibold uppercase",children:"Performance Visualisation"}),e.jsx("p",{className:"text-white text-lg font-bold mt-1",children:"Crescimento Patrimonial"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-300 rounded text-xs font-bold",children:"+6.9%"}),e.jsx("div",{className:"p-1 bg-white/10 rounded text-white/70",children:e.jsx(_e,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"h-48 flex items-end justify-between gap-3 px-2",children:[35,55,45,70,60,85,75].map((D,F)=>e.jsxs("div",{className:"w-full bg-white/10 rounded-t-lg relative group overflow-hidden",style:{height:"100%"},children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-indigo-400 to-purple-300 rounded-t-lg transition-all duration-1000 group-hover:opacity-90",style:{height:`${D}%`}}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-white/30",style:{bottom:`${D}%`}})]},F))}),e.jsxs("div",{className:"flex justify-between mt-3 text-xs text-white/40 font-medium px-2",children:[e.jsx("span",{children:"Jan"}),e.jsx("span",{children:"Fev"}),e.jsx("span",{children:"Mar"}),e.jsx("span",{children:"Abr"}),e.jsx("span",{children:"Mai"}),e.jsx("span",{children:"Jun"}),e.jsx("span",{children:"Jul"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Bem-vindo de volta"}),e.jsxs("p",{className:"text-indigo-200 text-lg leading-relaxed",children:["Gerencie suas finan√ßas com intelig√™ncia, ",e.jsx("br",{}),"seguran√ßa e clareza total."]})]})]}),e.jsx("div",{className:"absolute top-8 right-8",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 backdrop-blur flex items-center justify-center border border-white/20 text-xl shadow-lg cursor-default",children:"üáßüá∑"})})]})]})},os=[{id:"first_invest",name:"Investidor Iniciante",description:"Realizou o primeiro investimento.",icon:"üå±",condition:t=>t.investments.length>0,getProgress:t=>t.investments.length>0?100:0},{id:"controlled",name:"No Controle",description:"Tem mais receitas que despesas no m√™s.",icon:"‚öñÔ∏è",condition:t=>{const r=t.transactions.filter(l=>l.type==="income").reduce((l,i)=>l+i.amount,0),n=t.transactions.filter(l=>l.type==="expense").reduce((l,i)=>l+i.amount,0);return r>n&&r>0},getProgress:t=>{const r=t.transactions.filter(l=>l.type==="income").reduce((l,i)=>l+i.amount,0),n=t.transactions.filter(l=>l.type==="expense").reduce((l,i)=>l+i.amount,0);return r===0?0:r>n?100:Math.min(99,r/n*100)}},{id:"saver",name:"Poupador",description:"Acumulou mais de R$ 5.000 em investimentos.",icon:"üí∞",condition:t=>t.investments.reduce((r,n)=>r+n.amount,0)>=5e3,getProgress:t=>Math.min(100,t.investments.reduce((r,n)=>r+n.amount,0)/5e3*100)},{id:"diversified",name:"Mente Diversificada",description:"Investiu em 3 ou mais categorias diferentes.",icon:"üé®",condition:t=>new Set(t.investments.map(n=>n.type)).size>=3,getProgress:t=>{const r=new Set(t.investments.map(n=>n.type));return Math.min(100,r.size/3*100)}},{id:"debt_free",name:"Zero Pend√™ncias",description:"N√£o possui nenhuma conta pendente.",icon:"‚úÖ",condition:t=>{const r=t.transactions.some(l=>l.type==="expense"),n=t.transactions.filter(l=>l.type==="expense"&&l.status==="pending");return r&&n.length===0},getProgress:t=>{const r=t.transactions.filter(l=>l.type==="expense");if(r.length===0)return 0;const n=r.filter(l=>l.status==="paid").length;return Math.min(100,n/r.length*100)}},{id:"goal_hitter",name:"Na Mosca",description:"Atingiu 100% da meta de um investimento.",icon:"üéØ",condition:t=>t.investments.some(r=>r.targetAmount>0&&r.amount>=r.targetAmount),getProgress:t=>{const r=t.investments.map(n=>n.targetAmount>0?n.amount/n.targetAmount*100:0);return Math.min(100,Math.max(0,...r))}},{id:"club_10k",name:"Clube dos 10k",description:"Patrim√¥nio total superou R$ 10.000.",icon:"üíé",condition:t=>{const r=t.investments.reduce((l,i)=>l+i.amount,0),n=t.transactions.filter(l=>l.type==="income").reduce((l,i)=>l+i.amount,0)-t.transactions.filter(l=>l.type==="expense"&&l.status==="paid").reduce((l,i)=>l+i.amount,0);return r+n>=1e4},getProgress:t=>{const r=t.investments.reduce((l,i)=>l+i.amount,0),n=t.transactions.filter(l=>l.type==="income").reduce((l,i)=>l+i.amount,0)-t.transactions.filter(l=>l.type==="expense"&&l.status==="paid").reduce((l,i)=>l+i.amount,0);return Math.min(100,(r+n)/1e4*100)}}],_r=(t,r,n)=>{const l=n.toISOString().slice(0,7),i=t.find(j=>j.category===r&&j.month===l);return i||t.find(j=>j.category===r&&j.isRecurring)},is=({data:t,privacyMode:r,onUnlockBadge:n,onNavigate:l})=>{const[i,j]=c.useState(()=>{const s=new Date;s.setMonth(s.getMonth()-5);const a=String(s.getMonth()+1).padStart(2,"0");return`${s.getFullYear()}-${a}`}),[m,T]=c.useState("flow"),w=c.useMemo(()=>{const s=new Date().getHours();return s<12?"Bom dia":s<18?"Boa tarde":"Boa noite"},[]);c.useEffect(()=>{os.forEach(s=>{!t.unlockedBadges.includes(s.id)&&s.condition(t)&&n(s.id)})},[t,n]);const A=c.useMemo(()=>{const s=[],a=new Date,d=a.getMonth(),S=a.getFullYear(),M=Array.from(new Set(t.budgets.map(f=>f.category)));return a.getDate()<=25&&M.forEach(f=>{const u=_r(t.budgets,f,a);if(!u)return;const o=t.transactions.filter(g=>g.type==="expense"&&g.category===f&&new Date(g.date).getMonth()===d&&new Date(g.date).getFullYear()===S).reduce((g,P)=>g+P.amount,0);o>=u.limit*.8&&o<u.limit?s.push({title:`Aten√ß√£o: ${f}`,message:`Voc√™ j√° usou ${(o/u.limit*100).toFixed(0)}% do or√ßamento e ainda √© dia ${a.getDate()}. Cuidado!`,type:"warning"}):o>=u.limit&&s.push({title:`Limite Excedido: ${f}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),s},[t.budgets,t.transactions]),R=c.useMemo(()=>t.notes.sort((s,a)=>s.isPinned!==a.isPinned?s.isPinned?-1:1:new Date(a.date).getTime()-new Date(s.date).getTime()).slice(0,3),[t.notes]),y=s=>r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,I=t.transactions.filter(s=>s.type==="income").reduce((s,a)=>s+a.amount,0),k=t.transactions.filter(s=>s.type==="expense").reduce((s,a)=>s+a.amount,0),p=t.transactions.filter(s=>s.type==="expense"&&s.status==="pending").reduce((s,a)=>s+a.amount,0),E=t.transactions.filter(s=>s.status==="paid").reduce((s,a)=>s+(a.type==="income"?a.amount:-a.amount),0),O=t.transactions.length===0?0:t.transactions.length<300?E:t.walletBalance!==void 0?t.walletBalance:E,_=t.transactions.filter(s=>s.status==="pending"&&s.type==="income").reduce((s,a)=>s+a.amount,0),$=k-p,h=t.investments.reduce((s,a)=>s+a.amount,0),L=c.useMemo(()=>t.transactions.filter(a=>a.type==="expense"&&a.status==="pending").sort((a,d)=>new Date(a.date).getTime()-new Date(d.date).getTime()).slice(0,3),[t.transactions]),C=c.useMemo(()=>[...t.investments].sort((s,a)=>a.amount-s.amount).slice(0,3),[t.investments]),V=c.useMemo(()=>{const s=k>0?k:I*.5||1e3;return O/s},[O,k,I]),{healthScore:q,scoreLabel:D,scoreColor:F,factors:H}=c.useMemo(()=>{let s=0;const a=[],d=X=>{const U=new Date(X);return(new Date().getTime()-U.getTime())/(1e3*60*60*24*365.25)>=5},S=t.debts.filter(X=>(X.status==="open"||X.status==="negotiating")&&!d(X.dueDate)),M=S.length>0;M?(s+=200,a.push({text:`Negativado: ${S.length} d√≠vidas`,type:"bad"})):(s+=350,a.push({text:"Nome Limpo",type:"good"}));const f=k>0?k:1e3,u=h/f;u>=6?(s+=200,a.push({text:"Reserva Robusta",type:"good"})):u>=1?(s+=100,a.push({text:"Reserva Iniciada",type:"neutral"})):a.push({text:"Sem Reserva",type:"bad"});const o=I-k,g=I>0?o/I:0;g>=.2?(s+=150,a.push({text:"Poupador (20%+)",type:"good"})):g<0&&(s-=50,a.push({text:"D√©ficit Mensal",type:"bad"})),O>=p?s+=150:(s-=100,a.push({text:"Risco de Calote",type:"bad"})),M&&(s=Math.min(s,550)),s=Math.max(0,Math.min(1e3,Math.round(s)));let P="",v="";return s>=850?(P="Elite",v="text-emerald-500"):s>=700?(P="Excelente",v="text-emerald-600"):s>=500?(P="Regular",v="text-amber-500"):s>=300?(P="Ruim",v="text-orange-500"):(P="Cr√≠tico",v="text-rose-600"),{healthScore:s,scoreLabel:P,scoreColor:v,factors:a}},[t.debts,I,k,p,O,h]),K=c.useMemo(()=>{const s=new Map,[a,d]=i.split("-").map(Number),S=new Date(a,d-1,1),M=new Date;for(;S<=M||S.getMonth()===M.getMonth()&&S.getFullYear()===M.getFullYear();){const f=S.getFullYear(),u=String(S.getMonth()+1).padStart(2,"0");s.set(`${f}-${u}`,0),S.setMonth(S.getMonth()+1)}return t.transactions.forEach(f=>{if(f.type==="expense"){const u=f.date.slice(0,7);s.has(u)&&s.set(u,(s.get(u)||0)+f.amount)}}),Array.from(s.entries()).map(([f,u])=>{const[o,g]=f.split("-").map(Number);return{name:new Date(o,g-1,1).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}),amount:u,fullDate:f}})},[t.transactions,i]),Y=c.useMemo(()=>{const s=new Map;for(let a=5;a>=0;a--){const d=new Date;d.setMonth(d.getMonth()-a),s.set(d.toISOString().slice(0,7),{income:0,expense:0})}return t.transactions.forEach(a=>{const d=a.date.slice(0,7);if(s.has(d)){const S=s.get(d);a.type==="income"?S.income+=a.amount:S.expense+=a.amount}}),Array.from(s.entries()).map(([a,d])=>{const[S,M]=a.split("-");return{name:new Date(parseInt(S),parseInt(M)-1,2).toLocaleDateString("pt-BR",{month:"short"}),Receitas:d.income,Despesas:d.expense}})},[t.transactions]),W=[{name:"Saldo Livre",value:Math.max(0,O),color:"#10b981"},{name:"Contas Pendentes",value:p,color:"#ef4444"},{name:"Investido",value:h,color:"#3b82f6"}].filter(s=>s.value>0),re=()=>{const s=`data:text/csv;charset=utf-8,Data,Descricao,Categoria,Tipo,Valor,Status
`+t.transactions.map(S=>`${S.date},${S.description},${S.category},${S.type},${S.amount},${S.status}`).join(`
`),a=encodeURI(s),d=document.createElement("a");d.setAttribute("href",a),d.setAttribute("download","finansmart_relatorio.csv"),document.body.appendChild(d),d.click(),document.body.removeChild(d)},Q=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(_e,{className:"w-5 h-5 text-indigo-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Fluxo de Caixa (6 Meses)"})]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs(zt,{data:Y,margin:{top:10,right:10,bottom:20,left:0},children:[e.jsx(Ge,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(Ue,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},dy:10}),e.jsx(qe,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:s=>`R$${s>=1e3?(s/1e3).toFixed(0)+"k":s}`,width:60}),e.jsx(ke,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:s=>[r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR")}`,""]}),e.jsx(it,{iconType:"circle"}),e.jsx(dt,{dataKey:"Receitas",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(dt,{dataKey:"Despesas",fill:"#f43f5e",radius:[4,4,0,0]})]})})})]}),b=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-indigo-500"}),"Distribui√ß√£o de Patrim√¥nio"]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs(Ts,{children:[e.jsx(Es,{data:W,cx:"50%",cy:"50%",innerRadius:80,outerRadius:110,paddingAngle:5,dataKey:"value",children:W.map((s,a)=>e.jsx(ut,{fill:s.color},`cell-${a}`))}),e.jsx(ke,{formatter:s=>r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR")}`}),e.jsx(it,{verticalAlign:"bottom",height:36})]})})})]}),x=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-rose-500"}),"Tend√™ncia de Despesas"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx(je,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"In√≠cio:"}),e.jsx("input",{type:"month",value:i,onChange:s=>j(s.target.value),className:"bg-transparent text-sm text-slate-700 dark:text-slate-200 focus:outline-none font-medium"})]})]}),e.jsx("div",{className:"h-[200px] w-full",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs(Ha,{data:K,margin:{top:10,right:10,bottom:25,left:10},children:[e.jsx(Ge,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(Ue,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},dy:10,padding:{left:10,right:10}}),e.jsx(qe,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:s=>`R$${s>=1e3?(s/1e3).toFixed(0)+"k":s}`,width:60}),e.jsx(ke,{cursor:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"5 5"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:s=>[r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Despesas"],labelStyle:{color:"#64748b",marginBottom:"0.25rem"}}),e.jsx(Wa,{type:"monotone",dataKey:"amount",stroke:"#f43f5e",strokeWidth:3,dot:{r:4,fill:"#f43f5e",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,stroke:"#f43f5e",strokeWidth:2,fill:"#fff"},isAnimationActive:!1})]})})})]});return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[A.length>0&&e.jsx("div",{className:"space-y-2",children:A.map((s,a)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Rt,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:s.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:s.message})]})]},a))}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 w-full md:flex-1 min-w-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white whitespace-nowrap",children:[w,"!"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Vis√£o geral das suas finan√ßas."})]}),e.jsx("div",{className:"flex-1 flex items-center gap-2 px-4 py-2 sm:border-l sm:border-slate-300 dark:sm:border-slate-600 overflow-x-auto no-scrollbar mask-gradient w-full",children:os.map(s=>{const a=t.unlockedBadges.includes(s.id),d=s.getProgress(t);return e.jsxs("div",{className:"group relative flex-shrink-0 cursor-help",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:`text-xl md:text-2xl transition-all duration-300 block ${a?"filter-none opacity-100 scale-100":"grayscale opacity-30 scale-90"}`,children:s.icon}),!a&&d>0&&e.jsx("div",{className:"absolute -bottom-1 left-0 w-full h-1 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${d}%`}})})]}),e.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-3 w-max max-w-[180px] hidden group-hover:block z-50 pointer-events-none animate-fade-in",children:[e.jsxs("div",{className:"bg-slate-800 text-white text-xs px-3 py-2 rounded-lg shadow-xl text-center border border-slate-700",children:[e.jsx("p",{className:"font-bold mb-0.5",children:s.name}),e.jsx("p",{className:"opacity-80 mb-2",children:s.description}),e.jsx("div",{className:"flex items-center justify-between text-[10px] uppercase font-semibold",children:e.jsx("span",{className:a?"text-emerald-400":"text-slate-400",children:a?"Desbloqueado":`${d.toFixed(0)}% Conclu√≠do`})}),!a&&e.jsx("div",{className:"w-full h-1.5 bg-slate-700 rounded-full mt-1 overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500",style:{width:`${d}%`}})})]}),e.jsx("div",{className:"w-2 h-2 bg-slate-800 rotate-45 absolute -top-1 left-1/2 -translate-x-1/2 border-t border-l border-slate-700"})]})]},s.id)})})]}),e.jsxs("button",{onClick:re,className:"flex items-center gap-2 text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors self-end md:self-auto flex-shrink-0",children:[e.jsx($t,{className:"w-4 h-4"})," Exportar CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 relative overflow-hidden group flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(Vs,{className:"w-20 h-20 text-slate-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Score Financeiro"}),e.jsx(Gs,{className:`w-4 h-4 ${F}`})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:`text-3xl font-black ${F} tracking-tighter`,children:q}),e.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"/ 1000"})]}),e.jsx("p",{className:`text-xs font-bold uppercase tracking-wide ${F}`,children:D})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100 dark:border-slate-700/50 space-y-1",children:H.slice(0,2).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.type==="good"&&e.jsx(wt,{className:"w-3 h-3 text-emerald-500"}),s.type==="bad"&&e.jsx(ze,{className:"w-3 h-3 text-rose-500"}),s.type==="neutral"&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:s.text})]},a))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Saldo em Caixa"}),e.jsx(Pt,{className:"w-4 h-4 text-emerald-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white truncate",children:y(O)}),_>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded w-fit border border-emerald-100 dark:border-emerald-800/30",children:[e.jsx(tt,{className:"w-3 h-3 text-emerald-500"}),e.jsxs("span",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400",children:["+",y(_)]}),e.jsx("span",{className:"text-[10px] text-emerald-600/70 dark:text-emerald-400/70 uppercase font-medium",children:"A Receber"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium uppercase",children:"Sobreviv√™ncia"}),e.jsx("span",{className:`text-xs font-bold ${V<1?"text-rose-500":V<3?"text-amber-500":"text-emerald-500"}`,children:V<.1?"Cr√≠tico":`${V.toFixed(1)} Meses`})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full mt-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${V<1?"bg-rose-500":V<3?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(100,V/6*100)}%`}})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Sa√≠das (M√™s)"}),e.jsx(Ze,{className:"w-4 h-4 text-rose-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400 truncate",children:["-",y($)]}),p>0?e.jsxs("div",{className:"flex items-center gap-1 mt-1 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded w-fit border border-amber-100 dark:border-amber-800/30",children:[e.jsx(tt,{className:"w-3 h-3 text-amber-500"}),e.jsxs("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:["-",y(p)]}),e.jsx("span",{className:"text-[10px] text-amber-600/70 dark:text-amber-400/70 uppercase font-medium",children:"A Pagar"})]}):e.jsxs("div",{className:"flex items-center gap-1 mt-1 px-2 py-1",children:[e.jsx(wt,{className:"w-3 h-3 text-emerald-500"}),e.jsx("span",{className:"text-[10px] text-emerald-500 font-bold uppercase",children:"Tudo Pago"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50 flex-1 flex flex-col justify-end space-y-2",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-semibold uppercase pb-1",children:"Pr√≥ximos Vencimentos"}),L.length===0?e.jsx("div",{className:"text-xs text-slate-400 italic",children:"Nada pendente."}):L.map(s=>{const a=new Date(s.date)<new Date(new Date().setHours(0,0,0,0));return e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${a?"bg-rose-500":"bg-amber-400"}`}),e.jsx("span",{className:"truncate text-slate-600 dark:text-slate-300 max-w-[80px]",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-slate-400 text-[10px]",children:new Date(s.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx("span",{className:`font-semibold ${a?"text-rose-500":"text-slate-700 dark:text-slate-200"}`,children:y(s.amount).replace("R$","")})]})]},s.id)})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Total Investido"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400 mt-1",children:y(h)})]}),e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded-lg",children:e.jsx(fe,{className:"w-5 h-5 text-indigo-500"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-2",children:[e.jsxs("p",{className:"text-[10px] text-slate-400 font-semibold uppercase border-b border-slate-100 dark:border-slate-700/50 pb-1 flex justify-between",children:[e.jsx("span",{children:"Maiores Posi√ß√µes"}),e.jsx(Qe,{className:"w-3 h-3"})]}),C.length===0?e.jsx("div",{className:"text-xs text-slate-400 italic",children:"Carteira vazia."}):C.map((s,a)=>e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[e.jsxs("span",{className:"text-slate-400 font-mono text-[10px]",children:[a+1,"."]}),e.jsx("span",{className:"truncate text-slate-600 dark:text-slate-300 max-w-[90px]",title:s.name,children:s.name})]}),e.jsx("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400 flex-shrink-0",children:y(s.amount).replace("R$","")})]},s.id))]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col hover:shadow-md transition-shadow h-full min-h-[180px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"})," Notas Fixadas"]}),e.jsx("button",{onClick:()=>l(z.NOTES),className:"text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 p-1 rounded transition-colors",title:"Ver todas",children:e.jsx(xt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 space-y-2 overflow-y-auto max-h-[140px] no-scrollbar",children:R.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 gap-1 opacity-70",children:[e.jsx(Te,{className:"w-6 h-6 opacity-30"}),e.jsx("p",{className:"text-xs italic text-center",children:"Nenhuma nota fixada."})]}):R.map(s=>{const a=s.color==="slate"?"border-slate-200 dark:border-slate-600":`border-${s.color}-200 dark:border-${s.color}-800`,d=s.color==="slate"?"bg-slate-50 dark:bg-slate-700/50":`bg-${s.color}-50 dark:bg-${s.color}-900/20`;return e.jsxs("div",{onClick:()=>l(z.NOTES),className:`text-xs p-2.5 rounded-lg border cursor-pointer hover:opacity-80 transition-opacity ${a} ${d}`,children:[e.jsx("span",{className:"font-bold mr-1 block truncate mb-0.5 text-slate-800 dark:text-slate-200",children:s.title||"Sem t√≠tulo"}),e.jsx("span",{className:"text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed",children:s.content})]},s.id)})})]})]}),e.jsxs("div",{className:"hidden lg:block space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 h-full",children:[Q,b]}),x]}),e.jsxs("div",{className:"lg:hidden space-y-4",children:[e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>T("flow"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${m==="flow"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(_e,{className:"w-3.5 h-3.5"}),"Fluxo"]}),e.jsxs("button",{onClick:()=>T("allocation"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${m==="allocation"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(Qe,{className:"w-3.5 h-3.5"}),"Carteira"]}),e.jsxs("button",{onClick:()=>T("history"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${m==="history"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(st,{className:"w-3.5 h-3.5"}),"Hist√≥rico"]})]}),e.jsxs("div",{className:"min-h-[350px]",children:[m==="flow"&&Q,m==="allocation"&&b,m==="history"&&x]})]})]})},zr=({data:t,privacyMode:r})=>{const[n,l]=c.useState([]),[i,j]=c.useState(""),[m,T]=c.useState(!1),[w,A]=c.useState(!1),R=c.useRef(null),y=c.useRef(null);c.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const O=window.SpeechRecognition||window.webkitSpeechRecognition;y.current=new O,y.current.continuous=!1,y.current.lang="pt-BR",y.current.interimResults=!1,y.current.onresult=_=>{const $=_.results[0][0].transcript;j($),A(!1)},y.current.onerror=_=>{console.error("Speech error",_),A(!1)},y.current.onend=()=>{A(!1)}}},[]);const I=()=>{var O;(O=R.current)==null||O.scrollIntoView({behavior:"smooth"})};c.useEffect(()=>{I()},[n,m]);const k=()=>{var O;if(w)(O=y.current)==null||O.stop(),A(!1);else if(y.current)try{y.current.start(),A(!0)}catch(_){console.error(_)}else alert("Seu navegador n√£o suporta reconhecimento de voz.")},p=async O=>{const _=i;if(!_.trim())return;const $={id:crypto.randomUUID(),role:"user",content:_,timestamp:new Date};l(C=>[...C,$]),j(""),T(!0);const h=crypto.randomUUID(),L={id:h,role:"assistant",content:"",timestamp:new Date};l(C=>[...C,L]);try{const C=Fr(_,n,t);let V="";for await(const q of C)V+=q,l(D=>D.map(F=>F.id===h?{...F,content:V}:F))}catch{l(V=>V.map(q=>q.id===h?{...q,content:"Desculpe, tive um erro ao processar sua resposta."}:q))}finally{T(!1)}},E=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),p())};return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-140px)] animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-600 p-3 rounded-xl shadow-lg shadow-indigo-500/20",children:e.jsx(Ae,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Assistente Inteligente"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Pergunte sobre seus gastos, investimentos ou pe√ßa conselhos."})]})]}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50 dark:bg-slate-900/50",children:[n.length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 space-y-4 opacity-60",children:[e.jsx(kt,{className:"w-16 h-16"}),e.jsxs("p",{className:"text-sm",children:["Estou analisando seus dados em tempo real.",e.jsx("br",{}),"Como posso ajudar hoje?"]})]}),n.map(O=>e.jsx("div",{className:`flex w-full ${O.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex max-w-[85%] md:max-w-[75%] gap-3 ${O.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${O.role==="user"?"bg-slate-200 dark:bg-slate-700":"bg-indigo-600"}`,children:O.role==="user"?e.jsx(Us,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"}):e.jsx(kt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:`p-4 rounded-2xl shadow-sm text-sm whitespace-pre-line leading-relaxed
                      ${O.role==="user"?"bg-white dark:bg-slate-700 text-slate-800 dark:text-white rounded-tr-none":"bg-indigo-600 text-white rounded-tl-none prose prose-invert max-w-none"}`,children:[O.content,m&&O.content===""&&e.jsxs("span",{className:"inline-flex gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce"}),e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"100ms"}}),e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"200ms"}})]})]})]})},O.id)),e.jsx("div",{ref:R})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx("button",{onClick:k,className:`p-3 rounded-xl transition-all ${w?"bg-rose-500 text-white animate-pulse shadow-lg shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,title:"Falar comando",children:w?e.jsx(qs,{className:"w-5 h-5"}):e.jsx(Ks,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:i,onChange:O=>j(O.target.value),onKeyDown:E,placeholder:w?"Ouvindo...":"Digite uma mensagem...",className:"flex-1 bg-slate-100 dark:bg-slate-700 dark:text-white border-0 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none",disabled:m}),e.jsx("button",{onClick:()=>p(),disabled:!i.trim()||m,className:"p-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-indigo-500/20",children:e.jsx(Ys,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-center text-[10px] text-slate-400 mt-2",children:"A IA pode cometer erros. Verifique informa√ß√µes importantes."})]})]})]})},Vr=({user:t,isGuest:r,mobileMenuOpen:n,setMobileMenuOpen:l,currentView:i,onNavigate:j,onLogout:m,privacyMode:T,setPrivacyMode:w,darkMode:A,setDarkMode:R,isFullscreen:y,toggleFullscreen:I,hasKey:k,onOpenKeyModal:p,onOpenDonateModal:E,onExportBackup:O,onImportBackup:_,onFactoryReset:$,canInstall:h,onInstall:L})=>{var H,K;const C=Y=>{j(Y),l(!1)},V=({active:Y,onClick:W,icon:re,label:Q,customClass:b=""})=>e.jsxs("button",{onClick:W,className:`flex w-full items-center gap-3 px-3 py-2.5 rounded-lg transition-all text-sm font-medium ${b} ${Y?"bg-indigo-600 text-white shadow-md shadow-indigo-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(re,{className:`w-5 h-5 ${!Y&&b?"text-purple-400 group-hover:text-white":""}`}),e.jsx("div",{className:"flex-1 flex justify-between items-center",children:e.jsx("span",{children:Q})})]}),q=[z.TRANSACTIONS,z.CALENDAR,z.SUBSCRIPTIONS,z.DEBTS].includes(i),D=[z.INVESTMENTS,z.BUDGETS,z.WEALTH_PLANNER].includes(i),F=[z.KANBAN,z.NOTES,z.SHOPPING_LIST].includes(i);return e.jsxs("nav",{className:`
         fixed md:sticky top-0 left-0 h-screen z-50 w-72 md:w-64 bg-slate-900 border-r border-slate-800 
         transform transition-transform duration-300 ease-in-out shadow-2xl flex flex-col
         ${n?"translate-x-0":"-translate-x-full md:translate-x-0"}
       `,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-4 border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-xl shadow-lg shadow-indigo-900/50",children:e.jsx(Et,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white tracking-tight leading-none",children:"NEXO"}),e.jsx("span",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wider",children:"Financial Hub"})]})]}),e.jsx("button",{onClick:()=>l(!1),className:"md:hidden text-slate-400 hover:text-white",children:e.jsx(ne,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-4 shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-slate-800/50 rounded-lg border border-slate-700/50 backdrop-blur-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center border border-slate-600 overflow-hidden text-xs text-white",children:t!=null&&t.photoURL?e.jsx("img",{src:t.photoURL,alt:"User"}):((H=t==null?void 0:t.email)==null?void 0:H.substring(0,2).toUpperCase())||"CV"}),e.jsxs("div",{className:"overflow-hidden flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-white truncate",title:(t==null?void 0:t.email)||"Convidado",children:((K=t==null?void 0:t.email)==null?void 0:K.split("@")[0])||"Convidado"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("p",{className:"text-[10px] text-slate-400",children:t?"Online (Cloud)":"Offline (Local)"})]})]}),e.jsx("button",{onClick:m,className:"text-slate-400 hover:text-rose-500",title:"Sair",children:e.jsx(Hs,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-2 flex flex-col no-scrollbar space-y-1",children:[e.jsx("p",{className:"px-2 text-xs font-bold text-indigo-400 uppercase tracking-wider mb-2 mt-2",children:"Menu Principal"}),e.jsx(V,{active:i===z.DASHBOARD,onClick:()=>C(z.DASHBOARD),icon:Ws,label:"Vis√£o Geral"}),e.jsx(V,{active:q,onClick:()=>C(z.TRANSACTIONS),icon:Xs,label:"Movimenta√ß√µes"}),e.jsx(V,{active:D,onClick:()=>C(z.INVESTMENTS),icon:Mt,label:"Patrim√¥nio"}),e.jsx(V,{active:F,onClick:()=>C(z.KANBAN),icon:vs,label:"Organiza√ß√£o"}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-800",children:e.jsx("button",{onClick:()=>k?C(z.AI_ASSISTANT):p(),className:`w-full relative group overflow-hidden rounded-xl p-[1px] transition-all duration-300 ${i===z.AI_ASSISTANT?"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 shadow-lg shadow-purple-500/20":"bg-slate-700/50 hover:bg-gradient-to-r hover:from-indigo-500 hover:via-purple-500 hover:to-pink-500"}`,children:e.jsxs("div",{className:"relative flex items-center gap-3 px-3 py-3 rounded-[11px] bg-slate-900 transition-colors h-full",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${i===z.AI_ASSISTANT?"bg-indigo-500/20":"bg-slate-800 group-hover:bg-slate-800"}`,children:e.jsx(Js,{className:`w-5 h-5 ${i===z.AI_ASSISTANT?"text-indigo-400":"text-slate-400 group-hover:text-white"}`})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:`text-sm font-bold ${i===z.AI_ASSISTANT?"text-white":"text-slate-300 group-hover:text-white"}`,children:"NEXO AI"}),e.jsx("p",{className:"text-[10px] text-slate-500 group-hover:text-slate-400",children:"Assistente Virtual"})]}),!k&&e.jsx(Ke,{className:"w-3 h-3 text-rose-500 animate-pulse"})]})})})]}),e.jsxs("div",{className:"mt-auto p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[h&&e.jsxs("button",{onClick:L,className:"w-full mb-4 flex items-center justify-center gap-2 p-2 rounded-lg bg-emerald-600 text-white text-xs font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-500/20",children:[e.jsx(Ns,{className:"w-3 h-3"})," Instalar App (PWA)"]}),e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsx("button",{onClick:()=>C(z.SETTINGS),className:`flex-1 flex items-center justify-center p-2 rounded-lg transition-all border border-slate-800 hover:border-slate-700 ${i===z.SETTINGS?"bg-indigo-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,title:"Configura√ß√µes e Dados",children:e.jsx(Tt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:I,className:"flex-1 flex items-center justify-center p-2 rounded-lg text-slate-400 hover:bg-slate-800 hover:text-white transition-all border border-slate-800 hover:border-slate-700",title:y?"Sair da Tela Cheia":"Tela Cheia",children:y?e.jsx(Qs,{className:"w-5 h-5"}):e.jsx(Zs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:E,className:"flex-1 flex items-center justify-center p-2 rounded-lg text-slate-400 hover:bg-slate-800 hover:text-pink-500 transition-all border border-slate-800 hover:border-slate-700",title:"Apoiar Projeto",children:e.jsx(bs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"pt-4 mt-3 border-t border-slate-800 text-center",children:[e.jsx("p",{className:"text-[10px] text-slate-500 font-mono",children:"v2.6.0 Config"}),e.jsxs("a",{href:"https://www.linkedin.com/in/alemagnobr/",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-slate-400 hover:text-indigo-400 transition-colors flex items-center justify-center gap-1.5 mt-1",children:[e.jsx(js,{className:"w-3 h-3"})," Alexandre Magno S. Linhares"]})]})]})]})},Gr=({showWelcome:t,isDonateModalOpen:r,isKeyModalOpen:n,userKeyInput:l,hasKey:i,PIX_KEY:j,PIX_NAME:m,setShowWelcome:T,setIsDonateModalOpen:w,setIsKeyModalOpen:A,setUserKeyInput:R,handleSaveKey:y,handleRemoveKey:I,handleFinishWelcome:k,copyPix:p})=>e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/90 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-4xl border border-slate-200 dark:border-slate-700 animate-scale-in my-8",children:[e.jsx("div",{className:"bg-slate-900 p-8 text-white relative overflow-hidden rounded-t-2xl",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Bem-vindo ao NEXO"}),e.jsx("p",{className:"text-slate-300 text-lg",children:"Seu novo comando central financeiro."})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(at,{className:"w-5 h-5 text-indigo-500"})," Privacidade Total"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:"Seus dados financeiros n√£o s√£o vendidos. No modo Offline, tudo fica no seu navegador."})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(kt,{className:"w-5 h-5 text-purple-500"})," Intelig√™ncia Artificial"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:"Conecte sua chave do Gemini para ter um consultor financeiro pessoal."})]})]}),e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-100 dark:border-indigo-800 p-4 rounded-xl mb-8",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"J√° possui uma chave de API do Gemini? (Opcional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:l,onChange:E=>R(E.target.value),placeholder:"Cole sua chave AIza...",className:"flex-1 p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 outline-none"}),e.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-medium flex items-center gap-1 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:["Obter Chave ",e.jsx(ws,{className:"w-3 h-3"})]})]})]}),e.jsxs("button",{onClick:k,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-xl shadow-indigo-500/30 transition-all flex items-center justify-center gap-2",children:["Come√ßar Agora ",e.jsx(mt,{className:"w-5 h-5"})]})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 border border-slate-200 dark:border-slate-700 animate-scale-in text-center relative overflow-hidden",children:[e.jsx("button",{onClick:()=>w(!1),className:"absolute top-2 right-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ea,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Apoie o Projeto"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"O NEXO √© desenvolvido de forma independente. Considere apoiar! ‚òï"}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6 relative group cursor-pointer",onClick:p,children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Chave Pix (CPF)"}),e.jsx("p",{className:"text-sm font-mono font-bold text-slate-700 dark:text-slate-200 break-all select-all",children:j}),e.jsx("div",{className:"absolute inset-0 bg-black/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl",children:e.jsxs("span",{className:"bg-white dark:bg-slate-800 text-xs font-bold px-2 py-1 rounded shadow flex items-center gap-1",children:[e.jsx(fs,{className:"w-3 h-3"})," Copiar"]})})]}),e.jsxs("p",{className:"text-xs text-slate-400 mb-6",children:["Nome: ",m]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-slate-200 dark:border-slate-700 animate-scale-in flex flex-col max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ke,{className:"w-6 h-6 text-indigo-500"})," Configurar Chave API"]}),e.jsx("button",{onClick:()=>A(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx(ne,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg text-sm text-indigo-800 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800",children:[e.jsxs("p",{className:"font-bold flex items-center gap-1 mb-1",children:[e.jsx(Ae,{className:"w-3 h-3"})," Por que preciso disso?"]}),e.jsx("p",{children:"O Google Gemini √© o c√©rebro por tr√°s da IA do NEXO. Para us√°-lo gratuitamente, voc√™ precisa gerar sua pr√≥pria chave de acesso."})]}),e.jsxs("ol",{className:"list-decimal list-inside text-sm text-slate-600 dark:text-slate-400 space-y-2 ml-1",children:[e.jsxs("li",{children:["Acesse o ",e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),e.jsx("li",{children:"Fa√ßa login com sua conta Google."}),e.jsxs("li",{children:["Clique em ",e.jsx("strong",{children:"Create API Key"}),"."]}),e.jsx("li",{children:'Copie o c√≥digo gerado (come√ßa com "AIza...") e cole abaixo.'})]}),e.jsx("input",{type:"password",value:l,onChange:E=>R(E.target.value),placeholder:"Cole sua chave aqui (AIza...)",className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:y,disabled:!l,className:"flex-1 px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg text-sm font-bold shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Salvar e Conectar"}),e.jsx("button",{onClick:I,disabled:!i,className:"px-4 py-2 bg-rose-100 text-rose-600 hover:bg-rose-200 dark:bg-rose-900/30 dark:text-rose-400 dark:hover:bg-rose-900/50 rounded-lg text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Remover"})]})]})]})})]}),ds="NEXO Finan√ßas",Vt=async()=>{const t=new It;t.addScope("https://www.googleapis.com/auth/calendar");try{if(!ge.currentUser)return null;const r=await Is(ge,t),n=It.credentialFromResult(r);return(n==null?void 0:n.accessToken)||null}catch(r){return console.error("Error getting access token:",r),null}},Re=async(t,r,n,l)=>{var j;const i=await fetch(t,{method:r,headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:l?JSON.stringify(l):void 0});if(!i.ok){if(i.status===404||i.status===410)return null;const m=await i.json();throw new Error(((j=m.error)==null?void 0:j.message)||"Google API Error")}return i.status===204?null:i.json()},Gt=async t=>{const n=(await Re("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",t)).items.find(i=>i.summary===ds);return n?n.id:(await Re("https://www.googleapis.com/calendar/v3/calendars","POST",t,{summary:ds,description:"Calend√°rio financeiro gerado pelo app NEXO."})).id},Ur=async(t,r,n)=>{const l={summary:`üí∏ Pagar: ${t.description}`,description:`Valor: R$ ${t.amount.toFixed(2)}
Categoria: ${t.category}
Obs: ${t.observation||"-"}`,start:{date:t.date},end:{date:t.date},colorId:"11",reminders:{useDefault:!1,overrides:[{method:"popup",minutes:1440},{method:"popup",minutes:540}]}};return(await Re(`https://www.googleapis.com/calendar/v3/calendars/${n}/events`,"POST",r,l)).id},qr=async(t,r)=>{const n=await Vt();if(!n)return;const l=await Gt(n),i={summary:`üí∏ Pagar: ${t.description}`,description:`Valor: R$ ${t.amount.toFixed(2)}
Categoria: ${t.category}
Obs: ${t.observation||"-"}`,start:{date:t.date},end:{date:t.date}};await Re(`https://www.googleapis.com/calendar/v3/calendars/${l}/events/${r}`,"PATCH",n,i)},Kr=async t=>{const r=await Vt();if(!r)return;const n=await Gt(r);await Re(`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${t}`,"DELETE",r)},Yr=async(t,r)=>{const n=await Vt();if(!n)throw new Error("Acesso ao Google Agenda negado.");const l=await Gt(n),i=t.filter(m=>m.type==="expense"&&m.status==="pending"&&new Date(m.date)>=new Date);let j=0;for(const m of i)try{if(m.googleEventId){const T={summary:`üí∏ Pagar: ${m.description}`,description:`Valor: R$ ${m.amount.toFixed(2)}
Categoria: ${m.category}
Obs: ${m.observation||"-"}`,start:{date:m.date},end:{date:m.date}};await Re(`https://www.googleapis.com/calendar/v3/calendars/${l}/events/${m.googleEventId}`,"PATCH",n,T)}else{const T=await Ur(m,n,l);r(m.id,{googleEventId:T}),j++}}catch(T){console.error(`Failed to sync transaction ${m.description}`,T)}return j},Hr={transactions:[],investments:[],budgets:[],debts:[],shoppingList:[],shoppingBudget:0,kanbanColumns:[],kanbanBoards:[],notes:[],unlockedBadges:[],walletBalance:0,categories:He},Wr=(t,r)=>{const[n,l]=c.useState(Hr);return c.useEffect(()=>{if(t&&!r){const x=lr(t.uid,s=>{l(a=>({...a,...s}))});return()=>x()}},[t,r]),c.useEffect(()=>{t&&!r&&n.transactions.length>0&&n.walletBalance===void 0&&(console.log("Migrando para sistema de Saldo Otimizado..."),or(t.uid))},[t,r,n.transactions.length,n.walletBalance]),c.useEffect(()=>{if(t||r){const s=setTimeout(async()=>{const a=new Date,d=a.getFullYear(),S=String(a.getMonth()+1).padStart(2,"0"),M=String(a.getDate()).padStart(2,"0"),f=`${d}-${S}-${M}`,u=n.transactions.filter(o=>o.status==="pending"&&o.autoPay&&o.date<=f);if(u.length>0)if(t)for(const o of u)await et(t.uid,o.id,{status:"paid"});else l(o=>({...o,transactions:o.transactions.map(g=>g.status==="pending"&&g.autoPay&&g.date<=f?{...g,status:"paid"}:g)}))},2e3);return()=>clearTimeout(s)}},[t,r,n.transactions]),c.useEffect(()=>{(t||r)&&(async()=>{const s=new Date,a=s.getMonth(),d=s.getFullYear(),S=new Map;n.transactions.forEach(f=>{if(f.isRecurring){const u=S.get(f.description);(!u||new Date(f.date)>new Date(u.date))&&S.set(f.description,f)}});const M=[];if(S.forEach((f,u)=>{const[o,g]=f.date.split("-").map(Number),P=new Date(d,a,1),v=new Date(o,g-1,1);if(P<v)return;if(!n.transactions.some(U=>{const ae=new Date(U.date);return U.description===u&&U.amount===f.amount&&ae.getMonth()===a&&ae.getFullYear()===d})){const ae=new Date(f.date+"T00:00:00").getDate(),le=new Date(d,a+1,0).getDate(),de=Math.min(ae,le),Me=String(a+1).padStart(2,"0"),Ce=String(de).padStart(2,"0"),ue=`${d}-${Me}-${Ce}`;M.push({...f,id:crypto.randomUUID(),date:ue,status:"pending",isRecurring:!0})}}),M.length>0)if(t)for(const f of M)await ts(t.uid,f);else l(f=>({...f,transactions:[...f.transactions,...M]}))})()},[t,r,n.transactions]),{data:n,setData:l,actions:{addTransaction:async x=>{const s={...x,id:crypto.randomUUID()};t?await ts(t.uid,s):l(a=>({...a,transactions:[...a.transactions,s]}))},updateTransaction:async(x,s)=>{const a=n.transactions.find(d=>d.id===x);if(a&&a.googleEventId&&t&&(s.date||s.amount||s.description||s.category)){const d={...a,...s};qr(d,a.googleEventId).catch(S=>console.warn("Falha ao atualizar Google Agenda:",S))}t?await et(t.uid,x,s):l(d=>({...d,transactions:d.transactions.map(S=>S.id===x?{...S,...s}:S)}))},deleteTransaction:async x=>{const s=n.transactions.find(a=>a.id===x);s&&s.googleEventId&&t&&Kr(s.googleEventId).catch(a=>console.warn("Falha ao remover do Google Agenda:",a)),t?await nr(t.uid,x):l(a=>({...a,transactions:a.transactions.filter(d=>d.id!==x)}))},toggleTransactionStatus:async x=>{const s=n.transactions.find(d=>d.id===x);if(!s)return;const a=s.status==="paid"?"pending":"paid";if(t){if(await et(t.uid,x,{status:a}),s.debtId){const d=n.debts.find(S=>S.id===s.debtId);if(d){const f=n.transactions.filter(u=>u.debtId===s.debtId).every(u=>u.id===x?a==="paid":u.status==="paid")?"paid":"agreement";d.status!==f&&await ss(t.uid,d.id,{status:f})}}}else l(d=>{const S=d.transactions.map(f=>f.id===x?{...f,status:a}:f);let M=d.debts;if(s.debtId){const o=S.filter(g=>g.debtId===s.debtId).every(g=>g.status==="paid")?"paid":"agreement";M=d.debts.map(g=>g.id===s.debtId?{...g,status:o}:g)}return{...d,transactions:S,debts:M}})},addInvestment:async x=>{const s={...x,id:crypto.randomUUID()};t?await ir(t.uid,s):l(a=>({...a,investments:[...a.investments,s]}))},updateInvestment:async(x,s)=>{t?await dr(t.uid,x,s):l(a=>({...a,investments:a.investments.map(d=>d.id===x?{...d,...s}:d)}))},deleteInvestment:async x=>{t?await cr(t.uid,x):l(s=>({...s,investments:s.investments.filter(a=>a.id!==x)}))},addBudget:async x=>{const s={...x,id:crypto.randomUUID()};t?await xr(t.uid,s):l(a=>({...a,budgets:[...a.budgets||[],s]}))},updateBudget:async(x,s)=>{t?await mr(t.uid,x,s):l(a=>({...a,budgets:a.budgets.map(d=>d.id===x?{...d,...s}:d)}))},deleteBudget:async x=>{t?await ur(t.uid,x):l(s=>({...s,budgets:s.budgets.filter(a=>a.id!==x)}))},addDebt:async x=>{const s={...x,id:crypto.randomUUID()};t?await hr(t.uid,s):l(a=>({...a,debts:[...a.debts||[],s]}))},updateDebt:async(x,s)=>{t?await ss(t.uid,x,s):l(a=>({...a,debts:a.debts.map(d=>d.id===x?{...d,...s}:d)}))},deleteDebt:async x=>{t?await gr(t.uid,x):l(s=>({...s,debts:s.debts.filter(a=>a.id!==x)}))},addShoppingItem:async x=>{const s={...x,id:crypto.randomUUID()};t?await pr(t.uid,s):l(a=>({...a,shoppingList:[...a.shoppingList||[],s]}))},updateShoppingItem:async(x,s)=>{t?await br(t.uid,x,s):l(a=>({...a,shoppingList:a.shoppingList.map(d=>d.id===x?{...d,...s}:d)}))},deleteShoppingItem:async x=>{t?await fr(t.uid,x):l(s=>({...s,shoppingList:s.shoppingList.filter(a=>a.id!==x)}))},clearShoppingList:async()=>{t?await jr(t.uid):l(x=>({...x,shoppingList:[]}))},setShoppingBudget:async x=>{t?await vr(t.uid,x):l(s=>({...s,shoppingBudget:x}))},saveKanbanColumn:async x=>{t?await Nr(t.uid,x):l(s=>s.kanbanColumns.some(d=>d.id===x.id)?{...s,kanbanColumns:s.kanbanColumns.map(d=>d.id===x.id?x:d)}:{...s,kanbanColumns:[...s.kanbanColumns,x]})},deleteKanbanColumn:async x=>{t?await wr(t.uid,x):l(s=>({...s,kanbanColumns:s.kanbanColumns.filter(a=>a.id!==x)}))},saveKanbanBoard:async x=>{t?await kr(t.uid,x):l(s=>s.kanbanBoards.some(d=>d.id===x.id)?{...s,kanbanBoards:s.kanbanBoards.map(d=>d.id===x.id?x:d)}:{...s,kanbanBoards:[...s.kanbanBoards,x]})},deleteKanbanBoard:async x=>{t?await yr(t.uid,x):l(s=>({...s,kanbanBoards:s.kanbanBoards.filter(a=>a.id!==x)}))},addNote:async x=>{const s={...x,id:crypto.randomUUID()};t?await Cr(t.uid,s):l(a=>({...a,notes:[s,...a.notes]}))},updateNote:async(x,s)=>{t?await Sr(t.uid,x,s):l(a=>({...a,notes:a.notes.map(d=>d.id===x?{...d,...s}:d)}))},deleteNote:async x=>{t?await Ar(t.uid,x):l(s=>({...s,notes:s.notes.filter(a=>a.id!==x)}))},addCategory:async x=>{t?await Dr(t.uid,x):l(s=>({...s,categories:[...s.categories||[],x]}))},deleteCategory:async x=>{t?await Ir(t.uid,x):l(s=>({...s,categories:s.categories.filter(a=>a.id!==x)}))},unlockBadge:x=>{n.unlockedBadges.includes(x)||(t?Er(t.uid,x,n.unlockedBadges):l(s=>({...s,unlockedBadges:[...s.unlockedBadges,x]})))},saveWealthProfile:async x=>{t?await Rr(t.uid,x):l(s=>({...s,wealthProfile:x}))}}}},Xr=[{name:"emerald",bg:"bg-emerald-500"},{name:"blue",bg:"bg-blue-500"},{name:"rose",bg:"bg-rose-500"},{name:"amber",bg:"bg-amber-500"},{name:"purple",bg:"bg-purple-500"},{name:"indigo",bg:"bg-indigo-500"},{name:"pink",bg:"bg-pink-500"},{name:"orange",bg:"bg-orange-500"},{name:"teal",bg:"bg-teal-500"},{name:"cyan",bg:"bg-cyan-500"},{name:"slate",bg:"bg-slate-500"}],Jr=({data:t,actions:r,privacyMode:n,setPrivacyMode:l,darkMode:i,setDarkMode:j,hasApiKey:m,onOpenKeyModal:T,onExportBackup:w,onImportBackup:A,onFactoryReset:R})=>{const[y,I]=c.useState("general"),[k,p]=c.useState(""),[E,O]=c.useState("expense"),[_,$]=c.useState("slate"),h=c.useRef(null),L=c.useRef(null),C=D=>{if(D.preventDefault(),!k.trim())return;const F={id:`cat_${Date.now()}`,name:k.trim(),type:E,color:_,isDefault:!1};r.addCategory(F),p("")},V=D=>{var K;const F=(K=D.target.files)==null?void 0:K[0];if(!F)return;const H=new FileReader;H.onload=Y=>{var b;const W=(b=Y.target)==null?void 0:b.result;if(!W)return;const re=W.split(`
`);let Q=0;for(let x=1;x<re.length;x++){const s=re[x].trim();if(!s)continue;const a=s.split(",");if(a.length>=3){const d=a[0].trim(),S=a[1].trim(),M=a[2].trim(),f=parseFloat(M);if(!isNaN(f)){const u=Math.abs(f),o=f<0?"expense":"income";r.addTransaction({description:S||"Importado",amount:u,type:o,category:"Outros",date:d.includes("/")?d.split("/").reverse().join("-"):d,status:"paid",paymentMethod:"credit_card",isRecurring:!1}),Q++}}}alert(`${Q} transa√ß√µes importadas com sucesso! Verifique as datas e categorias.`)},H.readAsText(F)},q=t.categories||[];return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 p-2.5 rounded-xl",children:e.jsx(Tt,{className:"w-6 h-6 text-slate-700 dark:text-slate-200"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Configura√ß√µes"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Personalize sua experi√™ncia no NEXO."})]})]}),e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>I("general"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${y==="general"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(ta,{className:"w-4 h-4"})," Geral & API"]}),e.jsxs("button",{onClick:()=>I("categories"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${y==="categories"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(sa,{className:"w-4 h-4"})," Categorias"]}),e.jsxs("button",{onClick:()=>I("data"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${y==="data"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(aa,{className:"w-4 h-4"})," Dados & Backup"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 min-h-[400px]",children:[y==="general"&&e.jsx("div",{className:"space-y-8 animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Prefer√™ncias Visuais"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400",children:i?e.jsx(ra,{className:"w-5 h-5"}):e.jsx(la,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Modo Escuro"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Alternar tema claro/escuro"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:D=>j(D.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 rounded-full peer dark:bg-slate-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg text-emerald-600 dark:text-emerald-400",children:n?e.jsx(na,{className:"w-5 h-5"}):e.jsx(at,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Modo Privacidade"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Ocultar valores monet√°rios"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:D=>l(D.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 dark:peer-focus:ring-emerald-800 rounded-full peer dark:bg-slate-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-emerald-600"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Integra√ß√µes"}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl text-white shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"})," Google Gemini API"]}),e.jsx("p",{className:"text-indigo-100 text-xs mt-1",children:"Intelig√™ncia Artificial para an√°lises e categoriza√ß√£o."})]}),e.jsx("div",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase border ${m?"bg-emerald-500 border-emerald-400 text-white":"bg-rose-500 border-rose-400 text-white"}`,children:m?"Conectado":"Desconectado"})]}),e.jsx("button",{onClick:T,className:"w-full py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg text-sm font-bold transition-colors",children:m?"Gerenciar Chave":"Configurar Chave"})]})]})]})}),y==="categories"&&e.jsxs("div",{className:"animate-fade-in h-full flex flex-col",children:[e.jsxs("form",{onSubmit:C,className:"flex flex-col md:flex-row gap-3 bg-slate-50 dark:bg-slate-700/30 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Nome da nova categoria...",value:k,onChange:D=>p(D.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:E,onChange:D=>O(D.target.value),className:"p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"expense",children:"Despesa"}),e.jsx("option",{value:"income",children:"Receita"})]}),e.jsx("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-slate-300 dark:border-slate-600",children:Xr.map(D=>e.jsx("button",{type:"button",onClick:()=>$(D.name),className:`w-6 h-6 rounded-full transition-transform hover:scale-110 ${D.bg} ${_===D.name?"ring-2 ring-offset-2 ring-indigo-500 scale-110":""}`},D.name))}),e.jsx("button",{type:"submit",disabled:!k.trim(),className:"px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50",children:e.jsx(ie,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 uppercase mb-3 flex items-center gap-2 border-b border-emerald-200 dark:border-emerald-800 pb-2",children:"Entradas"}),e.jsx("div",{className:"space-y-2",children:q.filter(D=>D.type==="income").map(D=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700 group hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${D.color}-500`}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:D.name})]}),!D.isDefault&&e.jsx("button",{onClick:()=>{confirm(`Excluir categoria "${D.name}"?`)&&r.deleteCategory(D.id)},className:"text-slate-400 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ve,{className:"w-4 h-4"})})]},D.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-rose-600 dark:text-rose-400 uppercase mb-3 flex items-center gap-2 border-b border-rose-200 dark:border-rose-800 pb-2",children:"Sa√≠das"}),e.jsx("div",{className:"space-y-2",children:q.filter(D=>D.type==="expense").map(D=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700 group hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${D.color}-500`}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:D.name})]}),!D.isDefault&&e.jsx("button",{onClick:()=>{confirm(`Excluir categoria "${D.name}"?`)&&r.deleteCategory(D.id)},className:"text-slate-400 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ve,{className:"w-4 h-4"})})]},D.id))})]})]})]}),y==="data"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-200 dark:border-slate-700 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5 text-indigo-500"})," Exportar Backup"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Baixe todos os seus dados em um arquivo JSON seguro. Ideal para migrar entre dispositivos."})]}),e.jsx("button",{onClick:w,className:"mt-6 w-full py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg font-bold text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Baixar JSON"})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-200 dark:border-slate-700 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(oa,{className:"w-5 h-5 text-emerald-500"})," Restaurar Backup"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Recupere seus dados a partir de um arquivo JSON exportado anteriormente."})]}),e.jsxs("label",{className:"mt-6 w-full py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg font-bold text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-center block",children:["Selecionar Arquivo",e.jsx("input",{type:"file",ref:h,className:"hidden",accept:".json",onChange:A})]})]})]}),e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Importar Transa√ß√µes (CSV Simples)"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-4",children:["Importe extratos simples. Formato esperado: ",e.jsx("code",{children:"Data,Descri√ß√£o,Valor"})," (sem cabe√ßalho).",e.jsx("br",{}),e.jsx("span",{className:"text-xs opacity-70",children:"Ex: 2024-03-20,Mercado,-150.00"})]}),e.jsx("input",{type:"file",ref:L,accept:".csv",onChange:V,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"})]}),e.jsx("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"p-4 border border-rose-200 dark:border-rose-900/50 bg-rose-50 dark:bg-rose-900/10 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-rose-700 dark:text-rose-400",children:"Zona de Perigo"}),e.jsx("p",{className:"text-xs text-rose-600/80 dark:text-rose-400/70",children:"Isso apagar√° todos os dados locais deste navegador."})]}),e.jsx("button",{onClick:R,className:"px-4 py-2 bg-rose-600 text-white rounded-lg font-bold text-sm hover:bg-rose-700",children:"Resetar App"})]})})]})]})]})},jt={credit_card:"Cr√©dito",debit_card:"D√©bito",cash:"Dinheiro",pix:"PIX",direct_debit:"D√©b. Auto",bank_transfer:"TED/DOC",deposit:"Dep√≥sito"},cs=(t,r,n)=>{let l=new Date(t,r,1),i=0,j=0;for(;i<n&&j<31;){const m=l.getDay();if(m!==0&&m!==6&&i++,i===n)break;l.setDate(l.getDate()+1),j++}return l.toISOString().split("T")[0]},Qr=({method:t,className:r})=>{switch(t){case"credit_card":return e.jsx(rt,{className:r});case"debit_card":return e.jsx(rt,{className:r});case"cash":return e.jsx(pa,{className:r});case"pix":return e.jsx(ga,{className:r});default:return e.jsx(ys,{className:r})}},xs=["credit_card","debit_card","direct_debit","pix","cash"],ms=["pix","bank_transfer","cash","deposit"],Zr=({transactions:t,budgets:r,categories:n=[],onAdd:l,onUpdate:i,onDelete:j,onToggleStatus:m,onNavigate:T,privacyMode:w,hasApiKey:A,quickActionSignal:R})=>{const[y,I]=c.useState(!1),[k,p]=c.useState(!1),[E,O]=c.useState(!1),[_,$]=c.useState(new Date),[h,L]=c.useState("all"),[C,V]=c.useState(""),[q,D]=c.useState("all"),[F,H]=c.useState("all"),[K,Y]=c.useState(!1),[W,re]=c.useState(null),[Q,b]=c.useState("monthly"),[x,s]=c.useState([]),[a,d]=c.useState(!1),[S,M]=c.useState(""),[f,u]=c.useState(!1),[o,g]=c.useState("5"),P=c.useRef(null),[v,X]=c.useState({description:"",amount:"",type:"expense",category:"Outros",date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:"credit_card",isRecurring:!1,autoPay:!1,installments:"",observation:""}),U=c.useMemo(()=>n.length===0?["Outros"]:n.filter(N=>N.type===v.type).map(N=>N.name),[n,v.type]),ae=N=>{const B=n.find(ee=>ee.name===N),Z=(B==null?void 0:B.color)||"slate";return`bg-${Z}-100 text-${Z}-700 border-${Z}-200 dark:bg-${Z}-900/30 dark:text-${Z}-300 dark:border-${Z}-800`};c.useEffect(()=>{R&&Date.now()-R<2e3&&(I(!0),We())},[R]),c.useEffect(()=>{y&&P.current&&setTimeout(()=>{var N;(N=P.current)==null||N.scrollIntoView({behavior:"smooth",block:"center"})},100)},[y,W]),c.useEffect(()=>{if(f&&v.category==="Sal√°rio"){const[N,B]=v.date.split("-").map(Number),Z=parseInt(o)||5,ee=cs(N,B-1,Z);ee!==v.date&&X(se=>({...se,date:ee}))}},[f,o,v.category]);const le=c.useMemo(()=>v.type==="income"?ms:xs,[v.type]),de=()=>$(N=>new Date(N.getFullYear(),N.getMonth()-1,1)),Me=()=>$(N=>new Date(N.getFullYear(),N.getMonth()+1,1)),Ce=c.useMemo(()=>{const N=[],B=new Date,Z=B.getMonth(),ee=B.getFullYear(),se=B.toISOString().slice(0,7);return r.forEach(te=>{if(!(te.isRecurring&&!r.some(oe=>oe.category===te.category&&oe.month===se&&!oe.isRecurring)||te.month===se))return;t.filter(oe=>oe.type==="expense"&&oe.category===te.category&&new Date(oe.date).getMonth()===Z&&new Date(oe.date).getFullYear()===ee).reduce((oe,be)=>oe+be.amount,0)>=te.limit&&N.push({title:`Limite Excedido: ${te.category}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),N},[r,t]),ue=c.useMemo(()=>{const N=t.filter(ee=>{const[se,te]=ee.date.split("-");return parseInt(se)===_.getFullYear()&&parseInt(te)===_.getMonth()+1}),B=N.filter(ee=>ee.type==="income").reduce((ee,se)=>ee+se.amount,0),Z=N.filter(ee=>ee.type==="expense").reduce((ee,se)=>ee+se.amount,0);return{income:B,expense:Z,balance:B-Z}},[t,_]),Ut=c.useMemo(()=>t.filter(N=>{const[B,Z]=N.date.split("-");return!(!(parseInt(B)===_.getFullYear()&&parseInt(Z)===_.getMonth()+1)||h!=="all"&&N.type!==h||C&&!N.description.toLowerCase().includes(C.toLowerCase())||q!=="all"&&N.category!==q||F!=="all"&&N.paymentMethod!==F)}).sort((N,B)=>new Date(B.date).getTime()-new Date(N.date).getTime()),[t,_,h,C,q,F]),qt=c.useMemo(()=>{const N={};Ut.forEach(te=>{N[te.date]||(N[te.date]={transactions:[],total:0}),N[te.date].transactions.push(te);const ce=te.type==="income"?te.amount:-te.amount;N[te.date].total+=ce});const Z=[...Object.entries(N).map(([te,ce])=>({date:te,...ce})).sort((te,ce)=>new Date(ce.date).getTime()-new Date(te.date).getTime())].reverse();let ee=0;return Z.map(te=>(ee+=te.total,{...te,runningBalance:ee})).reverse()},[Ut]),Se=N=>w?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${N.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,Os=N=>{const B=new Date(N+"T12:00:00"),Z=new Date,ee=new Date;if(ee.setDate(ee.getDate()-1),B.toDateString()===Z.toDateString())return"Hoje";if(B.toDateString()===ee.toDateString())return"Ontem";const se=B.toLocaleDateString("pt-BR",{weekday:"long"}),te=B.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"});return`${se.split("-")[0]}, ${te}`},Bs=async()=>{if(!v.description)return;p(!0);const N=await Mr(v.description),B=U.includes(N);X(Z=>({...Z,category:B?N:"Outros"})),p(!1)},Fs=N=>{const B=N.target.value,Z=n.filter(se=>se.type===B).map(se=>se.name),ee=B==="income"?"pix":"credit_card";X(se=>({...se,type:B,category:Z[0]||"Outros",paymentMethod:ee}))},We=()=>{X({description:"",amount:"",type:"expense",category:"Outros",date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:"credit_card",isRecurring:!1,autoPay:!1,installments:"",observation:""}),re(null),b("monthly"),s([]),d(!1),M(""),u(!1),g("5")},Oe=N=>{X({description:N.description||"",amount:(N.amount||0).toString(),type:N.type||"expense",category:N.category||"Outros",date:N.date||new Date().toISOString().split("T")[0],status:N.status||"paid",paymentMethod:N.paymentMethod||(N.type==="income"?"pix":"credit_card"),isRecurring:N.isRecurring||!1,autoPay:N.autoPay||!1,installments:"",observation:N.observation||""}),re(N.id),I(!0)},Ls=N=>{s(B=>B.includes(N)?B.filter(Z=>Z!==N):[...B,N])},_s=N=>{N.preventDefault();let B=parseFloat(v.amount),Z=v.observation;if(v.type==="income"&&v.category==="Sal√°rio"&&a){const se=parseFloat(S);if(!isNaN(se)&&se>0&&se<100){const te=B*(se/100),ce=B;B=B-te;const pe=`(Sal√°rio Bruto: R$ ${ce.toFixed(2)} | Desc. Pens√£o: ${se}%)`;Z=Z?`${Z} ${pe}`:pe}}const ee={description:v.description,amount:B,type:v.type,category:v.category,date:v.date,status:v.status,paymentMethod:v.paymentMethod,isRecurring:v.isRecurring,autoPay:v.status==="pending"?v.autoPay:!1,observation:Z};if(v.isRecurring)if(Q==="days"&&x.length>0){const[se,te]=v.date.split("-").map(Number),ce=new Date(se,te,0).getDate();x.forEach(pe=>{if(pe<=ce){const oe=String(pe).padStart(2,"0"),be=String(te).padStart(2,"0"),Be=`${se}-${be}-${oe}`;l({...ee,description:`${v.description} (Dia ${pe})`,date:Be,isRecurring:!1})}})}else{const se=parseInt(v.installments);if(!isNaN(se)&&se>1){const[te,ce,pe]=v.date.split("-").map(Number),oe=parseInt(o)||5;for(let be=0;be<se;be++){let Be;f&&v.category==="Sal√°rio"&&v.type==="income"?Be=cs(te,ce-1+be,oe):Be=new Date(te,ce-1+be,pe).toISOString().split("T")[0];const zs=`${v.description} (${be+1}/${se})`;l({...ee,description:zs,date:Be,isRecurring:!1})}}else W?i(W,ee):l(ee)}else W?i(W,ee):l(ee);We(),I(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden md:block",children:"Transa√ß√µes"}),e.jsxs("div",{className:"flex flex-1 w-full md:w-auto gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx(yt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar...",value:C,onChange:N=>V(N.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-sm transition-all shadow-sm"}),C&&e.jsx("button",{onClick:()=>V(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(ne,{className:"w-3 h-3"})})]}),e.jsx("button",{onClick:()=>Y(!K),className:`p-2.5 rounded-xl border transition-all ${K?"bg-indigo-50 border-indigo-200 text-indigo-600 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500"}`,children:e.jsx(ks,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-1 shrink-0",children:[e.jsx("button",{onClick:de,className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-600 dark:text-slate-300",children:e.jsx(Ot,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-2 text-xs font-bold text-slate-700 dark:text-slate-200 capitalize min-w-[80px] text-center",children:_.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"})}),e.jsx("button",{onClick:Me,className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-600 dark:text-slate-300",children:e.jsx(mt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsxs("button",{onClick:()=>T(z.SUBSCRIPTIONS),className:"flex items-center gap-2 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 px-4 py-2.5 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium text-sm shadow-sm",children:[e.jsx(De,{className:"w-4 h-4 text-indigo-500"}),"Assinaturas"]}),e.jsxs("button",{onClick:()=>{We(),I(!y)},className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2.5 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/20 font-bold text-sm",children:[e.jsx(ie,{className:"w-4 h-4"})," Nova"]})]})]}),K&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700 animate-fade-in-down",children:[e.jsxs("select",{value:q,onChange:N=>D(N.target.value),className:"p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white text-xs outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Todas Categorias"}),n.map(N=>e.jsx("option",{value:N.name,children:N.name},N.id))]}),e.jsxs("select",{value:F,onChange:N=>H(N.target.value),className:"p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white text-xs outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Todos M√©todos"}),[...xs,...ms].map(N=>e.jsx("option",{value:N,children:jt[N]},N))]})]})]}),Ce.length>0&&e.jsx("div",{className:"space-y-2",children:Ce.map((N,B)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down shadow-sm",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Rt,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:N.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:N.message})]})]},B))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Entradas"}),e.jsx("p",{className:"text-sm md:text-lg font-bold text-emerald-600 dark:text-emerald-400 truncate",children:Se(ue.income)})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Sa√≠das"}),e.jsx("p",{className:"text-sm md:text-lg font-bold text-rose-600 dark:text-rose-400 truncate",children:Se(ue.expense)})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Resultado (M√™s)"}),e.jsx("p",{className:`text-sm md:text-lg font-bold truncate ${ue.balance>=0?"text-indigo-600 dark:text-indigo-400":"text-rose-600"}`,children:Se(ue.balance)})]})]}),e.jsx("div",{ref:P,className:"scroll-mt-24",children:y&&e.jsxs("form",{onSubmit:_s,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:W?"Editar Transa√ß√£o":"Adicionar Transa√ß√£o"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,type:"text",placeholder:"Descri√ß√£o",value:v.description,onChange:N=>X({...v,description:N.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none w-full pr-10"}),e.jsx("button",{type:"button",onClick:Bs,disabled:k||!v.description||!A,className:`absolute right-2 top-2 ${A?"text-indigo-500 hover:text-indigo-700":"text-slate-400 opacity-50 cursor-not-allowed"} disabled:opacity-30`,children:k?e.jsx(ct,{className:"w-5 h-5 animate-spin"}):e.jsx(ia,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("input",{required:!0,type:"number",placeholder:"Valor (R$)",value:v.amount,onChange:N=>X({...v,amount:N.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 outline-none"}),v.type==="income"&&v.category==="Sal√°rio"&&!W&&e.jsxs("div",{className:"flex items-center gap-2 mt-1 px-1 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group select-none",onClick:()=>d(!a),children:[e.jsx("div",{className:`w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors ${a?"bg-indigo-600 border-indigo-600":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800"}`,children:a&&e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),e.jsxs("span",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400 group-hover:text-indigo-500 transition-colors flex items-center gap-1",children:[e.jsx(da,{className:"w-3 h-3"})," Descontar Pens√£o?"]})]}),a&&e.jsxs("div",{className:"flex items-center gap-1 animate-scale-in ml-auto",children:[e.jsx("input",{autoFocus:!0,type:"number",placeholder:"%",className:"w-12 py-0.5 px-1 text-xs border border-slate-300 rounded text-center outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white font-bold",value:S,onChange:N=>M(N.target.value)}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"%"})]})]})]}),e.jsxs("select",{value:v.type,onChange:Fs,className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"expense",children:"Despesa"}),e.jsx("option",{value:"income",children:"Receita"})]}),e.jsx("select",{value:v.category,onChange:N=>X({...v,category:N.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:U.map(N=>e.jsx("option",{value:N,children:N},N))}),e.jsxs("div",{children:[e.jsx("input",{required:!0,type:"date",value:v.date,onChange:N=>X({...v,date:N.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 w-full"}),v.category==="Sal√°rio"&&v.type==="income"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-100 dark:border-emerald-800/30 animate-fade-in mt-2",children:[e.jsx("input",{type:"checkbox",id:"useBusinessDay",checked:f,onChange:N=>u(N.target.checked),className:"w-3.5 h-3.5 text-emerald-600 rounded"}),e.jsxs("label",{htmlFor:"useBusinessDay",className:"text-xs font-bold text-emerald-700 dark:text-emerald-400 flex items-center gap-1 cursor-pointer flex-1",children:[e.jsx(ca,{className:"w-3 h-3"})," Considerar dia √∫til?"]}),f&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",min:"1",max:"20",value:o,onChange:N=>g(N.target.value),className:"w-10 py-0.5 px-1 text-xs border border-emerald-300 rounded text-center outline-none focus:border-emerald-500 font-bold dark:bg-slate-700 dark:text-white"}),e.jsx("span",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 font-bold",children:"¬∫ dia"})]})]})]}),e.jsxs("select",{value:v.status,onChange:N=>X({...v,status:N.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"paid",children:"Pago/Recebido"}),e.jsx("option",{value:"pending",children:"Pendente"})]}),v.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-100 dark:border-indigo-800/30 animate-fade-in mt-1 md:col-span-2 md:mt-0",children:[e.jsx("input",{type:"checkbox",id:"autoPay",checked:v.autoPay||!1,onChange:N=>X({...v,autoPay:N.target.checked}),className:"w-4 h-4 text-indigo-600 rounded"}),e.jsxs("label",{htmlFor:"autoPay",className:"text-xs font-bold text-indigo-700 dark:text-indigo-400 flex items-center gap-1 cursor-pointer flex-1",children:[e.jsx(gt,{className:"w-3 h-3"})," Lan√ßamento Autom√°tico na Data?"]})]}),e.jsx("select",{value:v.paymentMethod,onChange:N=>X({...v,paymentMethod:N.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:le.map(N=>e.jsx("option",{value:N,children:jt[N]},N))}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("textarea",{placeholder:"Observa√ß√µes (opcional)",value:v.observation,onChange:N=>X({...v,observation:N.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 w-full outline-none resize-none h-20 text-sm"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-dashed border-slate-300 dark:border-slate-600 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"recurring",checked:v.isRecurring,onChange:N=>X({...v,isRecurring:N.target.checked}),className:"w-4 h-4 text-indigo-600 rounded"}),e.jsxs("label",{htmlFor:"recurring",className:"text-sm text-slate-700 dark:text-slate-200 font-medium flex items-center gap-1 cursor-pointer",children:[e.jsx(De,{className:"w-4 h-4 text-indigo-500"})," Assinatura / Recorrente / Parcelado"]})]}),v.isRecurring&&e.jsxs("div",{className:"mt-2 pl-2 md:pl-6 animate-fade-in space-y-3",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>b("monthly"),className:`flex-1 py-1.5 px-3 rounded-lg text-xs font-bold border transition-colors ${Q==="monthly"?"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800":"bg-slate-50 text-slate-500 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}`,children:"Mensal / Parcelado"}),e.jsx("button",{type:"button",onClick:()=>b("days"),className:`flex-1 py-1.5 px-3 rounded-lg text-xs font-bold border transition-colors ${Q==="days"?"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800":"bg-slate-50 text-slate-500 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}`,children:"Dias Espec√≠ficos"})]}),Q==="monthly"?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Repetir por quantas vezes? (Opcional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4 text-slate-400"}),e.jsx("input",{type:"number",placeholder:"Ex: 12 (Deixe vazio para assinatura infinita)",value:v.installments,onChange:N=>X({...v,installments:N.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 text-sm w-full outline-none focus:ring-2 focus:ring-indigo-500"})]})]})}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:[e.jsx(xa,{className:"w-3 h-3"})," Selecione os dias do m√™s"]}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:[...Array(31)].map((N,B)=>{const Z=B+1,ee=x.includes(Z);return e.jsx("button",{type:"button",onClick:()=>Ls(Z),className:`h-8 rounded-md text-xs font-bold transition-all ${ee?"bg-indigo-600 text-white shadow-md shadow-indigo-500/30 transform scale-105":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Z},Z)})}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Uma transa√ß√£o ser√° criada para cada dia selecionado neste m√™s."})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:W?"Atualizar":"Salvar"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-1 flex",children:[e.jsxs("button",{onClick:()=>L("all"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="all"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(Ct,{className:"w-4 h-4"})," Todas"]}),e.jsxs("button",{onClick:()=>L("income"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="income"?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(pt,{className:"w-4 h-4"})," Entradas"]}),e.jsxs("button",{onClick:()=>L("expense"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="expense"?"bg-rose-50 text-rose-600 dark:bg-rose-900/30 dark:text-rose-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(Ze,{className:"w-4 h-4"})," Sa√≠das"]})]}),e.jsx("div",{className:"space-y-4 pb-20 md:pb-0",children:qt.length===0?e.jsxs("div",{className:"text-center py-16 text-slate-400",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(yt,{className:"w-8 h-8 opacity-50"})}),e.jsx("p",{children:"Nenhuma transa√ß√£o encontrada."}),e.jsx("p",{className:"text-xs mt-1",children:"Tente mudar os filtros ou adicione uma nova."})]}):qt.map(N=>e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 mb-1 sticky top-0 z-10 bg-slate-50/95 dark:bg-slate-900/95 backdrop-blur-sm rounded-lg border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(je,{className:"w-3 h-3"}),Os(N.date)]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-bold ${N.total>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-500"}`,children:N.total!==0&&(N.total>0?"+":"")+Se(N.total)}),e.jsx("div",{className:"h-4 w-px bg-slate-300 dark:bg-slate-700"}),e.jsxs("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 flex items-center gap-1",title:"Saldo acumulado at√© este dia",children:[e.jsx(ma,{className:"w-3 h-3"}),Se(N.runningBalance)]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden divide-y divide-slate-100 dark:divide-slate-700",children:N.transactions.map(B=>e.jsxs("div",{className:"group hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{className:"md:hidden p-4 flex items-center gap-3 relative",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${B.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-rose-100 text-rose-600 dark:bg-rose-900/30"}`,children:B.type==="income"?e.jsx(pt,{className:"w-5 h-5"}):e.jsx(Ze,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>Oe(B),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white truncate pr-2 text-sm",children:B.description}),e.jsxs("span",{className:`font-bold text-sm whitespace-nowrap ${B.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-800 dark:text-slate-200"}`,children:[B.type==="expense"&&"- ",Se(B.amount)]})]}),e.jsx("div",{className:"flex justify-between items-center mt-1",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium border ${ae(B.category)}`,children:B.category}),B.isRecurring&&e.jsxs("span",{className:"flex items-center gap-0.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded",title:"Recorrente Infinito",children:[e.jsx(Yt,{className:"w-3 h-3"}),"Fixo"]}),B.status==="pending"&&B.autoPay&&e.jsxs("span",{className:"flex items-center gap-0.5 text-amber-600 bg-amber-50 dark:bg-amber-900/30 px-1.5 py-0.5 rounded",title:"Lan√ßamento Autom√°tico",children:[e.jsx(gt,{className:"w-3 h-3"})," Auto"]})]})}),B.observation&&e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1 italic truncate flex items-center gap-1",children:[e.jsx(Te,{className:"w-3 h-3"})," ",B.observation]})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[e.jsx("button",{onClick:()=>m(B.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${B.status==="paid"?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent hover:border-emerald-400"}`,children:e.jsx(St,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>Oe(B),className:"p-1 text-slate-400",children:e.jsx(ua,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4 p-3 text-sm",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${B.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-rose-100 text-rose-600 dark:bg-rose-900/30"}`,children:B.type==="income"?e.jsx(pt,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"})}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 text-center font-bold text-slate-400 text-xs",children:parseInt(B.date.split("-")[2])}),e.jsx("div",{className:"w-24 shrink-0",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium border block text-center truncate ${ae(B.category)}`,children:B.category})}),e.jsxs("div",{className:"flex-1 font-medium text-slate-700 dark:text-slate-200 truncate cursor-pointer hover:text-indigo-500 flex flex-col justify-center",onClick:()=>Oe(B),title:"Clique para editar",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[B.description,B.isRecurring&&e.jsxs("span",{className:"text-[10px] text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded flex items-center gap-0.5",title:"Recorr√™ncia Infinita",children:[e.jsx(Yt,{className:"w-3 h-3"})," Recorrente"]}),B.status==="pending"&&B.autoPay&&e.jsxs("span",{className:"text-[10px] text-amber-600 bg-amber-50 dark:bg-amber-900/30 px-1.5 py-0.5 rounded flex items-center gap-0.5",title:"Lan√ßamento Autom√°tico",children:[e.jsx(gt,{className:"w-3 h-3"})," Auto"]})]}),B.observation&&e.jsx("span",{className:"text-[10px] text-slate-400 font-normal truncate max-w-[300px]",children:B.observation})]}),e.jsxs("div",{className:"w-24 text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(Qr,{method:B.paymentMethod||"",className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:jt[B.paymentMethod||""]||"-"})]}),e.jsx("div",{className:`w-28 text-right font-bold cursor-pointer hover:text-indigo-500 ${B.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-200"}`,onClick:()=>Oe(B),children:Se(B.amount)}),e.jsx("div",{className:"w-8 flex justify-center",children:e.jsx("button",{onClick:()=>m(B.id),className:`transition-all hover:scale-110 ${B.status==="paid"?"text-emerald-500":"text-slate-300 hover:text-emerald-400"}`,title:B.status==="paid"?"Marcar como pendente":"Marcar como pago",children:e.jsx(St,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"w-16 flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>Oe(B),className:"p-1.5 text-slate-400 hover:text-indigo-500 rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(ha,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(B.id),className:"p-1.5 text-slate-400 hover:text-rose-500 rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(ve,{className:"w-4 h-4"})})]})]})]})]},B.id))})]},N.date))}),e.jsx("button",{onClick:()=>{We(),I(!0)},className:"md:hidden fixed bottom-20 right-4 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center z-40 hover:scale-105 transition-transform",children:e.jsx(ie,{className:"w-7 h-7"})})]})},el=["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"],tl=["Casa","Mobilidade","Alimentos","Lazer","Sa√∫de","Educa√ß√£o","Pets","Sal√°rio","Renda Extra","Investimentos","Outros"],sl=[{value:"credit_card",label:"Cr√©dito"},{value:"debit_card",label:"D√©bito"},{value:"pix",label:"PIX"},{value:"cash",label:"Dinheiro"},{value:"direct_debit",label:"D√©bito Auto."}],al=t=>{let r=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//NEXO Finance//PT-BR
`;t.forEach(i=>{const j=i.date.replace(/-/g,"");r+=`BEGIN:VEVENT
`,r+=`DTSTART;VALUE=DATE:${j}
`,r+=`DTEND;VALUE=DATE:${j}
`,r+=`SUMMARY:${i.description} (${i.type==="income"?"+":"-"} R$ ${i.amount})
`,r+=`DESCRIPTION:Categoria: ${i.category} | Status: ${i.status} ${i.observation?"| Obs: "+i.observation:""}
`,r+=`END:VEVENT
`}),r+="END:VCALENDAR";const n=new Blob([r],{type:"text/calendar;charset=utf-8"}),l=document.createElement("a");l.href=window.URL.createObjectURL(n),l.setAttribute("download","nexo_agenda.ics"),document.body.appendChild(l),l.click(),document.body.removeChild(l)},rl=({transactions:t,budgets:r,onAddTransaction:n,privacyMode:l})=>{const[i,j]=c.useState(new Date),[m,T]=c.useState(new Date().getDate()),[w,A]=c.useState("all"),[R,y]=c.useState(!1),[I,k]=c.useState(!1),[p,E]=c.useState({description:"",amount:"",type:"expense",category:"Outros",paymentMethod:"credit_card",status:"pending",observation:""}),O=i.getFullYear(),_=i.getMonth(),$=(s,a)=>new Date(s,a+1,0).getDate(),h=(s,a)=>new Date(s,a,1).getDay(),L=$(O,_),C=h(O,_),V=c.useMemo(()=>{const s=[],a=new Date,d=a.getMonth(),S=a.getFullYear(),M=a.toISOString().slice(0,7);return r.forEach(f=>{if(!(f.isRecurring&&!r.some(g=>g.category===f.category&&g.month===M&&!g.isRecurring)||f.month===M))return;t.filter(g=>g.type==="expense"&&g.category===f.category&&new Date(g.date).getMonth()===d&&new Date(g.date).getFullYear()===S).reduce((g,P)=>g+P.amount,0)>=f.limit&&s.push({title:`Limite Excedido: ${f.category}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),s},[r,t]),q=c.useMemo(()=>{const s=t.filter(f=>{const[u,o]=f.date.split("-").map(Number);return u===O&&o===_+1}),a=new Map;t.forEach(f=>{if(f.isRecurring){const u=a.get(f.description);(!u||new Date(f.date)>new Date(u.date))&&a.set(f.description,f)}});const d=[],S=new Date;return new Date(O,_,1)>=new Date(S.getFullYear(),S.getMonth(),1)&&a.forEach(f=>{if(!s.some(o=>o.description===f.description&&o.amount===f.amount)){const o=new Date(f.date),g=o.getDate(),P=Math.min(g,L);o<new Date(O,_+1,0)&&d.push({...f,id:`ghost-${f.id}-${O}-${_}`,date:`${O}-${String(_+1).padStart(2,"0")}-${String(P).padStart(2,"0")}`,status:"pending",isGhost:!0})}}),[...s,...d].filter(f=>w==="all"?!0:w==="pending"?f.status==="pending":f.type===w)},[t,O,_,L,w]),D=c.useMemo(()=>m===null?[]:q.filter(s=>parseInt(s.date.split("-")[2])===m),[q,m]),F=c.useMemo(()=>{let s=0;for(let a=1;a<=L;a++){const d=q.filter(S=>parseInt(S.date.split("-")[2])===a&&S.type==="expense").reduce((S,M)=>S+M.amount,0);d>s&&(s=d)}return s||1},[q,L]),H=()=>{j(new Date(O,_-1,1)),T(null)},K=()=>{j(new Date(O,_+1,1)),T(null)},Y=()=>{m&&(E({description:"",amount:"",type:"expense",category:"Outros",paymentMethod:"credit_card",status:"pending",observation:""}),k(!0))},W=s=>{if(s.preventDefault(),!m)return;const a=`${O}-${String(_+1).padStart(2,"0")}-${String(m).padStart(2,"0")}`;n({description:p.description,amount:parseFloat(p.amount),type:p.type,category:p.category,date:a,status:p.status,paymentMethod:p.paymentMethod,isRecurring:!1,observation:p.observation}),k(!1)},re=async()=>{if(!ge.currentUser){alert("Voc√™ precisa estar logado para sincronizar.");return}y(!0);try{const s=await Yr(t,(a,d)=>{et(ge.currentUser.uid,a,d)});s>0?alert(`${s} eventos criados na sua Google Agenda!`):alert("Tudo sincronizado! Nenhuma nova conta pendente encontrada.")}catch(s){console.error(s),alert("Erro ao sincronizar: "+s.message)}finally{y(!1)}},Q=s=>l?"‚Ä¢‚Ä¢‚Ä¢":s>=1e3?(s/1e3).toFixed(1)+"k":s.toFixed(0),b=s=>l?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,x=[];for(let s=0;s<C;s++)x.push(e.jsx("div",{className:"h-28 bg-slate-50/30 dark:bg-slate-800/30 border border-slate-100 dark:border-slate-700/50"},`empty-${s}`));for(let s=1;s<=L;s++){const a=q.filter(g=>parseInt(g.date.split("-")[2])===s),d=a.filter(g=>g.type==="income").reduce((g,P)=>g+P.amount,0),S=a.filter(g=>g.type==="expense").reduce((g,P)=>g+P.amount,0),M=Math.min(1,S/F);let f="bg-white dark:bg-slate-800";S>0&&(M>.7?f="bg-rose-100 dark:bg-rose-900/40":M>.4?f="bg-rose-50 dark:bg-rose-900/20":f="bg-slate-50 dark:bg-slate-800");const u=new Date().getDate()===s&&new Date().getMonth()===_&&new Date().getFullYear()===O,o=m===s;x.push(e.jsxs("div",{onClick:()=>T(s),className:`h-28 p-1.5 border border-slate-100 dark:border-slate-700 relative cursor-pointer transition-all hover:brightness-95
          ${o?"ring-2 ring-inset ring-indigo-500 z-10":""}
          ${f}
        `,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:`text-xs font-bold inline-flex w-6 h-6 items-center justify-center rounded-full ${u?"bg-indigo-600 text-white shadow-lg":"text-slate-500 dark:text-slate-400"}`,children:s}),a.some(g=>g.status==="pending")&&e.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse",title:"Pagamentos Pendentes"})]}),e.jsxs("div",{className:"mt-2 flex flex-col gap-0.5",children:[d>0&&e.jsxs("div",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-100/50 dark:bg-emerald-900/30 px-1 rounded truncate",children:["+",Q(d)]}),S>0&&e.jsxs("div",{className:"text-[10px] font-bold text-rose-600 dark:text-rose-400 px-1 rounded truncate",children:["-",Q(S)]}),a.some(g=>g.isGhost)&&e.jsx("div",{className:"absolute bottom-1 right-1 opacity-50",children:e.jsx(Bt,{className:"w-3 h-3 text-slate-400"})})]})]},s))}return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20 md:pb-0 relative",children:[V.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:V.map((s,a)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down shadow-sm",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Rt,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:s.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:s.message})]})]},a))}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Nova Transa√ß√£o"}),e.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-semibold flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"}),m," de ",i.toLocaleDateString("pt-BR",{month:"long"})]})]}),e.jsx("button",{onClick:()=>k(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:W,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"O que √©?"}),e.jsxs("div",{className:"relative",children:[e.jsx(ba,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("input",{autoFocus:!0,required:!0,type:"text",placeholder:"Ex: Mercado, Conta de Luz...",value:p.description,onChange:s=>E({...p,description:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Valor (R$)"}),e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0,00",value:p.amount,onChange:s=>E({...p,amount:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Tipo"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 rounded-xl p-1",children:[e.jsx("button",{type:"button",onClick:()=>E({...p,type:"expense"}),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition-colors ${p.type==="expense"?"bg-white dark:bg-slate-600 text-rose-600 shadow-sm":"text-slate-500"}`,children:"Sa√≠da"}),e.jsx("button",{type:"button",onClick:()=>E({...p,type:"income"}),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition-colors ${p.type==="income"?"bg-white dark:bg-slate-600 text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Entrada"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Categoria"}),e.jsxs("div",{className:"relative",children:[e.jsx(Cs,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("select",{value:p.category,onChange:s=>E({...p,category:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 appearance-none",children:tl.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Pagamento"}),e.jsxs("div",{className:"relative",children:[e.jsx(rt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("select",{value:p.paymentMethod,onChange:s=>E({...p,paymentMethod:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 appearance-none",children:sl.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"Status"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:`flex-1 cursor-pointer border rounded-xl p-3 flex items-center justify-center gap-2 transition-all ${p.status==="paid"?"bg-emerald-50 border-emerald-500 text-emerald-700 dark:bg-emerald-900/20":"border-slate-200 dark:border-slate-700"}`,children:[e.jsx("input",{type:"radio",name:"status",className:"hidden",checked:p.status==="paid",onChange:()=>E({...p,status:"paid"})}),e.jsx(At,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Pago / Recebido"})]}),e.jsxs("label",{className:`flex-1 cursor-pointer border rounded-xl p-3 flex items-center justify-center gap-2 transition-all ${p.status==="pending"?"bg-amber-50 border-amber-500 text-amber-700 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700"}`,children:[e.jsx("input",{type:"radio",name:"status",className:"hidden",checked:p.status==="pending",onChange:()=>E({...p,status:"pending"})}),e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Pendente"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Observa√ß√µes (Opcional)"}),e.jsx("input",{type:"text",placeholder:"Detalhes adicionais...",value:p.observation,onChange:s=>E({...p,observation:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 mt-4",children:[e.jsx(ie,{className:"w-5 h-5"})," Adicionar Transa√ß√£o"]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(je,{className:"w-7 h-7 text-indigo-600"}),"Agenda Financeira"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Previs√£o de gastos e controle de vencimentos."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("button",{onClick:re,disabled:R,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-bold transition-all shadow-sm border ${R?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-white hover:bg-slate-50 text-indigo-600 border-indigo-100 hover:border-indigo-300 dark:bg-slate-800 dark:text-indigo-400 dark:border-slate-700"}`,title:"Sincronizar contas pendentes com Google Agenda",children:[e.jsx(fa,{className:`w-4 h-4 ${R?"animate-spin":""}`}),R?"Sincronizando...":"Sincronizar Agenda"]}),e.jsx("button",{onClick:()=>al(q),className:"p-2 text-slate-500 hover:text-indigo-600 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800",title:"Exportar para Arquivo (.ics)",children:e.jsx($t,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-1 flex-1 md:flex-none justify-center",children:[e.jsx("button",{onClick:H,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(Ot,{className:"w-5 h-5"})}),e.jsx("div",{className:"px-4 font-semibold text-slate-700 dark:text-slate-200 capitalize min-w-[140px] text-center",children:i.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:K,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(mt,{className:"w-5 h-5"})})]})]})]}),e.jsx("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 overflow-x-auto",children:[{id:"all",label:"Tudo",icon:ks},{id:"expense",label:"Sa√≠das",icon:Ht},{id:"income",label:"Entradas",icon:Wt},{id:"pending",label:"Pendentes",icon:tt}].map(s=>e.jsxs("button",{onClick:()=>A(s.id),className:`flex-1 min-w-[80px] py-2 text-xs font-semibold rounded-lg transition-all flex items-center justify-center gap-2
                    ${w===s.id?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(s.icon,{className:"w-3 h-3"})," ",s.label]},s.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:el.map(s=>e.jsx("div",{className:"py-3 text-center text-xs font-bold uppercase text-slate-500 dark:text-slate-400",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7",children:x})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-0 overflow-hidden flex flex-col h-full min-h-[400px]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:m?`${m} de ${i.toLocaleDateString("pt-BR",{month:"long"})}`:"Resumo do M√™s"}),m&&e.jsxs("button",{onClick:Y,className:"mt-3 w-full py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"})," Adicionar neste dia"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[m&&D.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx(Ve,{className:"w-12 h-12 text-slate-200 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma movimenta√ß√£o."})]}),!m&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-100 dark:bg-slate-700 mb-4",children:e.jsx(je,{className:"w-8 h-8 text-indigo-500"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Selecione um dia"}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Clique no calend√°rio para ver detalhes ou adicionar contas."})]}),D.map((s,a)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${s.isGhost?"bg-slate-50 dark:bg-slate-800 border-dashed border-indigo-300 dark:border-indigo-700":"bg-white dark:bg-slate-700/50 border-slate-100 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400"}`,children:s.type==="income"?e.jsx(Wt,{className:"w-4 h-4"}):e.jsx(Ht,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-white text-sm line-clamp-1",children:s.description}),s.isGhost&&e.jsx("span",{className:"text-[9px] bg-indigo-100 text-indigo-600 px-1.5 rounded uppercase font-bold",children:"Previsto"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.category}),s.observation&&e.jsx("p",{className:"text-[10px] text-slate-400 italic mt-0.5",children:s.observation})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`font-bold text-sm ${s.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-300"}`,children:b(s.amount)}),s.type==="expense"&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${s.status==="pending"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:s.status==="pending"?"Pendente":"Pago"})]})]},s.id||a))]})]})]})]})},ll=({transactions:t,onUpdateTransaction:r,onDeleteTransaction:n,privacyMode:l})=>{const i=c.useMemo(()=>{const I=new Map;return t.filter(p=>p.type==="expense"&&p.isRecurring).forEach(p=>{const E=I.get(p.description);(!E||new Date(p.date)>new Date(E.date))&&I.set(p.description,p)}),Array.from(I.values()).sort((p,E)=>E.amount-p.amount)},[t]),j=i.reduce((I,k)=>I+k.amount,0),m=j*12,T=c.useMemo(()=>i.slice(0,10).map(I=>({name:I.description,amount:I.amount,annual:I.amount*12,color:I.amount>200?"#ef4444":I.amount>50?"#f59e0b":"#3b82f6"})),[i]),w=I=>l?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${I.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,A=I=>{confirm("Deseja parar de considerar este item como recorrente? Ele continuar√° como uma transa√ß√£o comum.")&&r(I,{isRecurring:!1})},R=I=>{const p=new Date(I).getDate(),E=new Date;let O=new Date(E.getFullYear(),E.getMonth(),p);O.setHours(0,0,0,0)<E.setHours(0,0,0,0)&&O.setMonth(O.getMonth()+1);const _=O.getTime()-E.getTime(),$=Math.ceil(_/(1e3*60*60*24));return $===0?{label:"Hoje",color:"text-rose-500 font-bold bg-rose-100 dark:bg-rose-900/30"}:$===1?{label:"Amanh√£",color:"text-amber-500 font-bold bg-amber-100 dark:bg-amber-900/30"}:{label:`em ${$} dias`,color:"text-slate-500 bg-slate-100 dark:bg-slate-700"}},y=({active:I,payload:k,label:p})=>{if(I&&k&&k.length){const E=k[0].payload;return e.jsxs("div",{className:"bg-white/95 dark:bg-slate-800/95 p-3 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 backdrop-blur-sm",children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white mb-2 border-b border-slate-100 dark:border-slate-700 pb-1",children:E.name}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between gap-6 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:"Mensalidade:"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:l?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${E.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})}`})]}),e.jsxs("div",{className:"flex justify-between gap-6 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:"Custo Anual:"}),e.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:l?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${E.annual.toLocaleString("pt-BR",{minimumFractionDigits:2})}`})]})]})]})}return null};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(De,{className:"w-7 h-7 text-indigo-600"}),"Gest√£o de Assinaturas"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Gerencie seus gastos recorrentes e descubra o impacto anual das pequenas mensalidades."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-indigo-600 text-white p-6 rounded-xl shadow-lg relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium mb-1 uppercase tracking-wider",children:"Custo Mensal Real"}),e.jsx("h3",{className:"text-3xl font-bold",children:w(j)}),e.jsxs("p",{className:"text-indigo-200 text-xs mt-2 opacity-80",children:[i.length," assinaturas ativas"]})]}),e.jsx(Ve,{className:"absolute right-4 bottom-4 w-24 h-24 text-indigo-500 opacity-20"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-6 rounded-xl shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1 uppercase tracking-wider",children:"Impacto Anual"}),e.jsx("h3",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:w(m)}),e.jsxs("p",{className:"text-emerald-500 text-xs mt-2 font-medium flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"}),"Proje√ß√£o de 12 meses"]})]}),e.jsx(lt,{className:"absolute right-4 bottom-4 w-24 h-24 text-slate-100 dark:text-slate-700"})]})]}),T.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2 mb-4",children:[e.jsx(_e,{className:"w-5 h-5 text-indigo-500"}),"Ranking de Custos (Top 10)"]}),e.jsx("div",{className:"h-[250px] w-full",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs(zt,{data:T,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Ge,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(Ue,{type:"number",hide:!0}),e.jsx(qe,{dataKey:"name",type:"category",width:120,tick:{fill:"#64748b",fontSize:11,fontWeight:500},axisLine:!1,tickLine:!1}),e.jsx(ke,{content:e.jsx(y,{}),cursor:{fill:"transparent"}}),e.jsx(dt,{dataKey:"amount",radius:[0,4,4,0],barSize:20,children:T.map((I,k)=>e.jsx(ut,{fill:I.color},`cell-${k}`))})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(De,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Nenhuma assinatura encontrada."}),e.jsx("p",{className:"text-slate-400 text-sm",children:'Marque a op√ß√£o "Recorrente" ao adicionar uma despesa.'})]}):i.map(I=>{const k=R(I.date);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"overflow-hidden mr-2",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-lg truncate mb-1",children:I.description}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400",children:I.category})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>A(I.id),className:"p-1.5 text-slate-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",title:"Remover recorr√™ncia",children:e.jsx(Ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n(I.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors",title:"Excluir assinatura",children:e.jsx(ne,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex items-center justify-between mt-2 mb-4",children:e.jsxs("div",{className:`flex items-center gap-1.5 text-[10px] uppercase font-bold px-2 py-1 rounded-md ${k.color}`,children:[e.jsx(je,{className:"w-3 h-3"}),"Renova ",k.label]})}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-400 block",children:"Mensal"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:w(I.amount)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-slate-400 block",children:"Anual"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:w(I.amount*12)})]})]})]},I.id)})})]})},nl=["Serasa Limpa Nome","Acordo Certo","Desenrola Brasil","SPC Brasil","Boa Vista (Consumidor Positivo)","Direto com Banco/Credor","QueroQuitar","Pessoal/Fam√≠lia","Outros"],ol=({debts:t,onAdd:r,onUpdate:n,onDelete:l,onAddTransaction:i,privacyMode:j,quickActionSignal:m})=>{const[T,w]=c.useState(!1),[A,R]=c.useState("all"),[y,I]=c.useState({isOpen:!1,debtId:""}),[k,p]=c.useState({date:new Date().toISOString().split("T")[0],amount:"",installments:1}),[E,O]=c.useState({isOpen:!1,debtId:"",currentValue:0}),[_,$]=c.useState("1"),[h,L]=c.useState({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""});c.useEffect(()=>{m&&Date.now()-m<2e3&&(w(!0),L({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""}))},[m]);const C=b=>{const x=new Date(b);return(new Date().getTime()-x.getTime())/(1e3*60*60*24*365.25)>=5},V=c.useMemo(()=>{let b=[...t];return A==="active"?b=b.filter(x=>!C(x.dueDate)):A==="prescribed"&&(b=b.filter(x=>C(x.dueDate))),b.sort((x,s)=>{const a=M=>M.status==="paid"?500:M.status==="agreement"?1:M.status==="negotiating"?2:C(M.dueDate)?4:3,d=a(x),S=a(s);return d!==S?d-S:s.currentAmount-x.currentAmount})},[t,A]),q=b=>{b.preventDefault();const x=h.targetAmount?parseFloat(h.targetAmount):0,s=h.platform==="Outros"?h.customPlatform:h.platform;r({creditor:h.creditor,originalAmount:parseFloat(h.originalAmount),currentAmount:parseFloat(h.currentAmount),targetAmount:x,dueDate:h.dueDate,status:h.status,platform:s,notes:h.notes}),L({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""}),w(!1)},D=(b,x)=>{if(x==="agreement"&&b.status!=="agreement"){I({isOpen:!0,debtId:b.id});const s=b.targetAmount>0?b.targetAmount:b.currentAmount;p({date:new Date().toISOString().split("T")[0],amount:s.toString(),installments:1})}else n(b.id,{status:x})},F=b=>{b.preventDefault();const x=t.find(M=>M.id===y.debtId);if(!x)return;const s=parseFloat(k.amount),a=Math.max(1,Math.floor(k.installments)),d=s/a;n(x.id,{status:"agreement",agreedAmount:s});const S=new Date(k.date);for(let M=0;M<a;M++){const f=new Date(S);f.setMonth(S.getMonth()+M);const u=a>1?`Acordo: ${x.creditor} (${M+1}/${a})`:`Acordo: ${x.creditor}`;i({description:u,amount:parseFloat(d.toFixed(2)),type:"expense",category:"Outros",date:f.toISOString().split("T")[0],status:"pending",paymentMethod:"pix",debtId:x.id})}alert(`Acordo registrado! ${a>1?`${a} parcelas agendadas`:"Pagamento agendado"}. A d√≠vida ser√° quitada automaticamente quando todas as parcelas forem pagas.`),I({isOpen:!1,debtId:""})},H=b=>{O({isOpen:!0,debtId:b.id,currentValue:b.currentAmount}),$("1")},K=()=>{const b=t.find(x=>x.id===E.debtId);if(b){const x=parseFloat(_),s=b.currentAmount*(1+x/100);n(b.id,{currentAmount:s})}O({isOpen:!1,debtId:"",currentValue:0})},Y=b=>j?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${b.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,W=t.filter(b=>b.status!=="paid").reduce((b,x)=>b+x.currentAmount,0),re=t.filter(b=>b.status!=="paid").reduce((b,x)=>b+x.targetAmount,0),Q=t.filter(b=>b.status!=="paid"&&b.targetAmount>0).reduce((b,x)=>b+(x.currentAmount-x.targetAmount),0);return e.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[E.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 animate-scale-in",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-rose-500"})," Atualizar Juros"]})}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"O efeito bola de neve √© real. Atualize o valor para manter o controle."}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg mb-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:"Valor Atual"}),e.jsx("span",{className:"font-mono font-bold text-slate-700 dark:text-white",children:Y(E.currentValue)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("button",{onClick:()=>$("1"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${_==="1"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+1%"}),e.jsx("button",{onClick:()=>$("2"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${_==="2"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+2%"}),e.jsx("button",{onClick:()=>$("5"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${_==="5"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+5%"}),e.jsxs("div",{className:"relative w-20",children:[e.jsx("input",{type:"number",value:_,onChange:b=>$(b.target.value),className:"w-full py-2 pl-2 pr-4 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 text-xs font-bold text-center outline-none focus:border-rose-500"}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-slate-400",children:"%"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>O({isOpen:!1,debtId:"",currentValue:0}),className:"flex-1 py-2.5 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-bold",children:"Cancelar"}),e.jsx("button",{onClick:K,className:"flex-1 py-2.5 bg-rose-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-rose-500/20",children:"Aplicar"})]})]})}),y.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-emerald-500/30 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-emerald-600 dark:text-emerald-400",children:[e.jsx(Xe,{className:"w-8 h-8"}),e.jsx("h3",{className:"text-xl font-bold",children:"Oficializar Acordo"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm mb-6",children:"Qual foi o valor final negociado? Vamos atualizar o card e agendar o(s) pagamento(s)."}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Total Fechado (R$)"}),e.jsx("input",{type:"number",required:!0,step:"0.01",placeholder:"Valor total a pagar",value:k.amount,onChange:b=>p({...k,amount:b.target.value}),className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white font-bold text-lg outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"1¬™ Parcela"}),e.jsx("input",{type:"date",required:!0,value:k.date,onChange:b=>p({...k,date:b.target.value}),className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"N¬∫ Parcelas"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"60",value:k.installments,onChange:b=>p({...k,installments:parseInt(b.target.value)}),className:"w-full p-3 pl-9 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>I({isOpen:!1,debtId:""}),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 rounded-lg font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold shadow-lg shadow-emerald-500/30",children:"Gerar Parcelas"})]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ze,{className:"w-7 h-7 text-rose-600"}),"Gest√£o de D√≠vidas (Limpa Nome)"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Controle suas pend√™ncias e foque no que realmente importa."})]}),e.jsxs("button",{onClick:()=>w(!T),className:"flex items-center gap-2 bg-rose-600 text-white px-4 py-2 rounded-lg hover:bg-rose-700 transition-colors shadow-sm",children:[e.jsx(ie,{className:"w-4 h-4"}),"Registrar D√≠vida"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-rose-100 dark:border-rose-900/30 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-semibold uppercase",children:"Total da D√≠vida (Banco)"}),e.jsx("h3",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400",children:Y(W)}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Valor cheio com juros"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-emerald-100 dark:border-emerald-900/30 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-semibold uppercase",children:"Valor para Quita√ß√£o (Alvo)"}),e.jsx("h3",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:Y(re)}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Soma das metas definidas"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:[e.jsx("p",{className:"text-indigo-100 text-xs font-semibold uppercase",children:"Economia Potencial"}),e.jsx("h3",{className:"text-2xl font-bold",children:Y(Q)}),e.jsx("p",{className:"text-indigo-100 text-xs mt-1",children:"Baseado nas suas metas"})]})]}),T&&e.jsxs("form",{onSubmit:q,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-rose-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Registrar Nova Pend√™ncia"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Institui√ß√£o / Credor"}),e.jsx("input",{required:!0,type:"text",placeholder:"Ex: Banco X, Loja Y",value:h.creditor,onChange:b=>L({...h,creditor:b.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-rose-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Valor Original (R$)"}),e.jsx("input",{required:!0,type:"number",value:h.originalAmount,onChange:b=>L({...h,originalAmount:b.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Valor Atual c/ Juros (R$)"}),e.jsx("input",{required:!0,type:"number",value:h.currentAmount,onChange:b=>L({...h,currentAmount:b.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Data Vencimento Original"}),e.jsx("input",{required:!0,type:"date",value:h.dueDate,onChange:b=>L({...h,dueDate:b.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Importante para calcular a prescri√ß√£o."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Meta de Acordo (Opcional)"}),e.jsx("input",{type:"number",placeholder:"Deixe em branco se n√£o houver meta",value:h.targetAmount,onChange:b=>L({...h,targetAmount:b.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Plataforma de Negocia√ß√£o"}),e.jsx("select",{value:h.platform,onChange:b=>L({...h,platform:b.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none mb-2",children:nl.map(b=>e.jsx("option",{value:b,children:b},b))}),h.platform==="Outros"&&e.jsx("div",{className:"animate-fade-in",children:e.jsx("input",{type:"text",placeholder:"Digite o nome da plataforma ou pessoa...",value:h.customPlatform,onChange:b=>L({...h,customPlatform:b.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-rose-500",autoFocus:!0})})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 font-medium",children:"Salvar D√≠vida"})]})]}),e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>R("all"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${A==="all"?"bg-white dark:bg-slate-700 text-rose-600 dark:text-rose-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(Ct,{className:"w-4 h-4"}),"Todas"]}),e.jsxs("button",{onClick:()=>R("active"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${A==="active"?"bg-white dark:bg-slate-700 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(Ss,{className:"w-4 h-4"}),"Ativas"]}),e.jsxs("button",{onClick:()=>R("prescribed"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${A==="prescribed"?"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(ja,{className:"w-4 h-4"}),"Prescritas"]})]}),e.jsx("div",{className:"flex flex-col gap-4",children:t.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(Ne,{className:"w-12 h-12 text-emerald-500 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-800 dark:text-white font-medium",children:"Nome Limpo!"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma d√≠vida registrada."})]}):V.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(Ct,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Nenhuma d√≠vida encontrada neste filtro."})]}):V.map(b=>{const x=C(b.dueDate),s=b.status==="paid",a=b.status==="agreement",d=b.targetAmount&&b.targetAmount>0,S=b.agreedAmount&&b.agreedAmount>0,M=S?b.agreedAmount:b.targetAmount,f=d||S?(b.currentAmount-M)/b.currentAmount*100:0;return e.jsxs("div",{className:`p-6 rounded-xl border transition-all relative overflow-hidden group ${s?"bg-slate-50 border-slate-200 opacity-75 grayscale-[0.8] dark:bg-slate-900 dark:border-slate-700":a?"bg-gradient-to-r from-emerald-50 to-white border-emerald-300 dark:from-emerald-900/10 dark:to-slate-800 dark:border-emerald-800 shadow-md ring-1 ring-emerald-500/20":x?"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700":"bg-white border-rose-100 dark:bg-slate-800 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-rose-300"}`,children:[s&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 pointer-events-none opacity-80 rotate-[-15deg]",children:e.jsxs("div",{className:"border-4 border-slate-400 text-slate-400 text-6xl font-black px-4 py-1 rounded-lg uppercase tracking-widest flex items-center gap-2",children:[e.jsx(wt,{className:"w-12 h-12"})," RESOLVIDO"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4 relative z-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[a?e.jsxs("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(Xe,{className:"w-3 h-3"})," ACORDO FECHADO"]}):b.status==="negotiating"?e.jsxs("span",{className:"bg-amber-100 text-amber-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(Xe,{className:"w-3 h-3"})," EM NEGOCIA√á√ÉO"]}):x?e.jsxs("span",{className:"bg-slate-200 text-slate-600 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(Xt,{className:"w-3 h-3"})," PRESCRITA"]}):s?e.jsxs("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"})," QUITADA"]}):e.jsxs("span",{className:"bg-rose-100 text-rose-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(nt,{className:"w-3 h-3"})," ATIVA"]}),b.platform&&e.jsxs("span",{className:"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1 border border-indigo-100 dark:border-indigo-800",children:[e.jsx(va,{className:"w-3 h-3"})," ",b.platform]}),e.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1 ml-auto md:ml-0",children:[e.jsx(Ve,{className:"w-3 h-3"}),new Date(b.dueDate).toLocaleDateString("pt-BR")]})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:b.creditor}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Valor Original"}),e.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-300",children:Y(b.originalAmount)})]}),e.jsx("div",{className:"flex items-center text-slate-400",children:e.jsx(xt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"group/value cursor-pointer",onClick:()=>!s&&!a&&H(b),title:"Clique para atualizar juros",children:[e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:["Valor Atual",!s&&!a&&e.jsx(fe,{className:"w-3 h-3 text-rose-500 opacity-50 group-hover/value:opacity-100"})]}),e.jsx("p",{className:`font-bold transition-colors ${s?"text-slate-500":x?"text-slate-600 dark:text-slate-400":"text-rose-600 group-hover/value:text-rose-700"}`,children:Y(b.currentAmount)})]})]})]}),e.jsx("div",{className:`p-3 rounded-lg border min-w-[200px] flex flex-col justify-center ${a?"bg-white border-emerald-200 shadow-sm":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-700"}`,children:a&&S?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-emerald-500 font-bold mb-1 flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"})," Valor Acordado"]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:Y(b.agreedAmount)}),e.jsxs("p",{className:"text-[10px] text-emerald-600/70 mt-1",children:["Economia de ",f.toFixed(0),"%"]})]}):d?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium mb-1 flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3 text-slate-400"})," Meta de Acordo"]}),e.jsx("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:Y(b.targetAmount)}),e.jsxs("p",{className:"text-[10px] text-emerald-600/70 mt-1",children:["Desconto Alvo: ",f.toFixed(0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-400 font-medium mb-1 flex items-center gap-1",children:[e.jsx(Na,{className:"w-3 h-3"})," Meta"]}),e.jsx("p",{className:"text-sm font-semibold text-slate-400 dark:text-slate-500 italic",children:"Sem meta definida"})]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("select",{value:b.status,onChange:u=>D(b,u.target.value),className:`text-xs border rounded-lg p-1.5 outline-none font-medium cursor-pointer ${a?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200"}`,children:[e.jsx("option",{value:"open",children:"Em Aberto"}),e.jsx("option",{value:"negotiating",children:"Em Negocia√ß√£o"}),e.jsx("option",{value:"agreement",children:"Acordo Fechado"}),e.jsx("option",{value:"paid",children:"Quitado"})]}),e.jsx("button",{onClick:()=>l(b.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors self-end",title:"Excluir Registro",children:e.jsx(ve,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50 text-xs flex items-start gap-2",children:s?e.jsxs("p",{className:"text-emerald-600 dark:text-emerald-400 flex items-center gap-1 font-medium",children:[e.jsx(Ne,{className:"w-4 h-4"})," D√≠vida liquidada com sucesso. Parab√©ns pela organiza√ß√£o!"]}):a?e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-2 rounded w-full",children:[e.jsxs("p",{className:"text-emerald-700 dark:text-emerald-300 flex items-center gap-1 font-semibold",children:[e.jsx(je,{className:"w-4 h-4"})," Acordo Firmado: ",Y(b.agreedAmount||0)]}),e.jsxs("p",{className:"text-emerald-600/80 dark:text-emerald-400/80 mt-1 pl-5",children:["N√£o esque√ßa de pagar na data combinada. ",b.agreedAmount&&b.agreedAmount>0?"As parcelas j√° foram lan√ßadas no seu fluxo.":""]})]}):b.status==="negotiating"?e.jsxs("p",{className:"text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx(Xe,{className:"w-4 h-4"})," Voc√™ iniciou contatos. Mantenha a press√£o para conseguir o melhor desconto."]}):x?e.jsxs("p",{className:"text-slate-500 flex items-center gap-1",children:[e.jsx(Xt,{className:"w-4 h-4"})," D√≠vida antiga (+5 anos). N√£o afeta score, negocie apenas se tiver sobra de caixa."]}):e.jsxs("p",{className:"text-rose-600 dark:text-rose-400 flex items-center gap-1 font-medium",children:[e.jsx(ze,{className:"w-4 h-4"})," Prioridade Alta! Esta d√≠vida est√° ativa e impactando seu cr√©dito. Tente negociar."]})})]},b.id)})})]})},il=({currentView:t,onNavigate:r,data:n,actions:l,privacyMode:i,hasApiKey:j,quickActionSignal:m})=>{const T=[{id:z.TRANSACTIONS,label:"Transa√ß√µes",icon:wa,activeClass:"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-500/30",inactiveClass:"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 border-indigo-100 dark:border-indigo-900/30 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:border-indigo-200"},{id:z.CALENDAR,label:"Agenda",icon:je,activeClass:"bg-blue-500 border-blue-500 text-white shadow-lg shadow-blue-500/30",inactiveClass:"bg-white dark:bg-slate-800 text-blue-600 dark:text-blue-400 border-blue-100 dark:border-blue-900/30 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:border-blue-200"},{id:z.SUBSCRIPTIONS,label:"Assinaturas",icon:De,activeClass:"bg-purple-600 border-purple-600 text-white shadow-lg shadow-purple-500/30",inactiveClass:"bg-white dark:bg-slate-800 text-purple-600 dark:text-purple-400 border-purple-100 dark:border-purple-900/30 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:border-purple-200"},{id:z.DEBTS,label:"D√≠vidas",icon:ze,activeClass:"bg-rose-600 border-rose-600 text-white shadow-lg shadow-rose-500/30",inactiveClass:"bg-white dark:bg-slate-800 text-rose-600 dark:text-rose-400 border-rose-100 dark:border-rose-900/30 hover:bg-rose-50 dark:hover:bg-rose-900/20 hover:border-rose-200"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:T.map(w=>{const A=t===w.id;return e.jsxs("button",{onClick:()=>r(w.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${A?`${w.activeClass} scale-[1.02]`:`${w.inactiveClass}`}
                `,children:[e.jsx(w.icon,{className:`w-5 h-5 ${A?"text-white":"currentColor"}`}),e.jsx("span",{className:"text-sm",children:w.label})]},w.id)})})}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===z.TRANSACTIONS&&e.jsx(Zr,{transactions:n.transactions,categories:n.categories,budgets:n.budgets,onAdd:l.addTransaction,onUpdate:l.updateTransaction,onDelete:l.deleteTransaction,onToggleStatus:l.toggleTransactionStatus,onNavigate:r,privacyMode:i,hasApiKey:j,quickActionSignal:m}),t===z.CALENDAR&&e.jsx(rl,{transactions:n.transactions,budgets:n.budgets,onAddTransaction:l.addTransaction,privacyMode:i}),t===z.SUBSCRIPTIONS&&e.jsx(ll,{transactions:n.transactions,onUpdateTransaction:l.updateTransaction,onDeleteTransaction:l.deleteTransaction,privacyMode:i}),t===z.DEBTS&&e.jsx(ol,{debts:n.debts||[],onAdd:l.addDebt,onUpdate:l.updateDebt,onDelete:l.deleteDebt,onAddTransaction:l.addTransaction,privacyMode:i,quickActionSignal:m})]})]})},us=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6366f1"],dl=({investments:t,onAdd:r,onUpdate:n,onDelete:l,onNavigate:i,privacyMode:j,hasApiKey:m,quickActionSignal:T})=>{const[w,A]=c.useState(!1),[R,y]=c.useState(null),[I,k]=c.useState(!1),[p,E]=c.useState(!1),[O,_]=c.useState(!1),[$,h]=c.useState(null),[L,C]=c.useState(""),[V,q]=c.useState(null),[D,F]=c.useState(""),[H,K]=c.useState({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]});c.useEffect(()=>{T&&Date.now()-T<2e3&&(A(!0),K({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]}))},[T]);const Y=c.useMemo(()=>{const o=new Map;return t.forEach(g=>{o.set(g.type,(o.get(g.type)||0)+g.amount)}),Array.from(o.entries()).map(([g,P])=>({name:g,value:P})).sort((g,P)=>P.value-g.value)},[t]),W=o=>{o.preventDefault();const g=parseFloat(H.amount),P=H.investedAmount?parseFloat(H.investedAmount):g;r({name:H.name,amount:g,investedAmount:P,targetAmount:parseFloat(H.targetAmount)||0,type:H.type,date:H.date}),K({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]}),A(!1)},re=o=>{if(o.preventDefault(),!$)return;const g=t.find(P=>P.id===$);if(g){const P=parseFloat(L);if(!isNaN(P)&&P>0){const v=g.investedAmount||g.amount;n($,{amount:g.amount+P,investedAmount:v+P})}}h(null),C("")},Q=o=>{const g=parseFloat(D);!isNaN(g)&&g>=0&&n(o,{amount:g}),q(null)},b=async()=>{if(!m)return;E(!0),k(!0),y(null),_(!1);const o=await Or(t);y(o),k(!1)},x=()=>{if(!R)return{recommendations:"",technical:""};const o=R.text.split("---SECTION-BREAK---");return{recommendations:o[0].trim(),technical:o.length>1?o[1].trim():""}},{recommendations:s,technical:a}=x(),d=t.reduce((o,g)=>o+g.amount,0),S=t.reduce((o,g)=>o+(g.investedAmount||g.amount),0),M=d-S,f=S>0?M/S*100:0,u=o=>j?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`;return e.jsxs("div",{className:"space-y-6 relative",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Meus Investimentos"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Acompanhe rentabilidade e metas."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>i(z.BUDGETS),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-pink-50 text-pink-600 hover:bg-pink-100 dark:bg-pink-900/20 dark:text-pink-400 dark:hover:bg-pink-900/40 transition-all font-medium text-sm border border-pink-200 dark:border-pink-800",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Metas"]}),e.jsxs("button",{onClick:b,disabled:!m,title:m?"Consultor IA":"Configure a Chave API para usar",className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all shadow-sm text-sm font-medium
                   ${m?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-400 cursor-not-allowed opacity-60"}`,children:[e.jsx(Ae,{className:"w-4 h-4"}),"Consultor IA ",!m&&e.jsx("span",{className:"text-[10px] ml-1",children:"(Req. Chave)"})]}),e.jsxs("button",{onClick:()=>A(!w),className:"flex items-center gap-2 bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-900 dark:hover:bg-slate-600 transition-colors shadow-sm text-sm font-medium",children:[e.jsx(ie,{className:"w-4 h-4"}),"Novo Ativo"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-indigo-600 text-white p-6 rounded-xl shadow-lg flex flex-col justify-between relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-indigo-200 text-xs font-bold uppercase tracking-wider mb-1",children:"Patrim√¥nio Total"}),e.jsx("h3",{className:"text-3xl font-bold mb-1",children:u(d)}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded bg-white/20 flex items-center gap-1 ${M>=0?"text-emerald-300":"text-rose-300"}`,children:[M>=0?e.jsx(fe,{className:"w-3 h-3"}):e.jsx(st,{className:"w-3 h-3"}),f.toFixed(2),"%"]}),e.jsxs("span",{className:"text-[10px] text-indigo-200",children:["(",M>=0?"+":"",u(M),")"]})]})]}),e.jsx(lt,{className:"absolute right-4 bottom-4 w-24 h-24 text-indigo-500 opacity-20 pointer-events-none"})]}),Y.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 md:col-span-2 flex items-center",children:[e.jsx("div",{className:"flex-1 h-[140px]",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs(Ts,{children:[e.jsx(Es,{data:Y,cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,paddingAngle:5,dataKey:"value",children:Y.map((o,g)=>e.jsx(ut,{fill:us[g%us.length]},`cell-${g}`))}),e.jsx(ke,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"8px",border:"none",fontSize:"12px"},formatter:o=>j?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${o.toLocaleString("pt-BR")}`}),e.jsx(it,{layout:"vertical",verticalAlign:"middle",align:"right",wrapperStyle:{fontSize:"11px"}})]})})}),e.jsx("div",{className:"w-px h-20 bg-slate-100 dark:bg-slate-700 mx-4"}),e.jsxs("div",{className:"pr-4 min-w-[120px]",children:[e.jsxs("p",{className:"text-xs text-slate-500 uppercase font-bold mb-2 flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"})," Aloca√ß√£o"]}),Y.slice(0,3).map((o,g)=>e.jsxs("div",{className:"flex justify-between items-center text-xs mb-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300 truncate max-w-[80px]",children:o.name}),e.jsxs("span",{className:"font-bold text-slate-800 dark:text-white",children:[(o.value/d*100).toFixed(0),"%"]})]},g))]})]})]}),p&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-purple-200 dark:border-purple-900 overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-slate-800 dark:to-slate-800 p-4 border-b border-purple-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"font-bold text-purple-900 dark:text-purple-300",children:"Smart Advisor"})]}),e.jsx("button",{onClick:()=>E(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:I?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(ct,{className:"w-8 h-8 text-purple-600 animate-spin mb-3"}),e.jsx("p",{className:"text-slate-500 text-sm animate-pulse",children:"Buscando oportunidades em tempo real..."})]}):R?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"prose prose-sm prose-purple dark:prose-invert max-w-none text-slate-700 dark:text-slate-300",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.replace(/\n/g,"<br/>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/- /g,"‚Ä¢ ")}})}),a&&e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[e.jsxs("button",{onClick:()=>_(!O),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-slate-50 dark:bg-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-700 dark:text-slate-200 text-sm font-semibold transition-colors border border-slate-200 dark:border-slate-600",children:[e.jsx(ka,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),O?"Ocultar Detalhes T√©cnicos":"Ver An√°lise T√©cnica Detalhada",O?e.jsx(ya,{className:"w-4 h-4"}):e.jsx(Ca,{className:"w-4 h-4"})]}),O&&e.jsx("div",{className:"mt-4 p-5 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700 animate-fade-in",children:e.jsx("div",{className:"prose prose-sm prose-slate dark:prose-invert max-w-none text-slate-600 dark:text-slate-400",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a.replace(/\n/g,"<br/>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/- /g,"‚Ä¢ ")}})})})]}),R.sources.length>0&&e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Fontes Consultadas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.sources.map((o,g)=>e.jsxs("a",{href:o.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-2 py-1 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[e.jsx(ws,{className:"w-3 h-3"}),o.title.length>30?o.title.substring(0,30)+"...":o.title]},g))})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:b,className:"text-sm text-purple-600 hover:underline",children:"Atualizar Recomenda√ß√£o"})})]}):e.jsx("div",{className:"text-center text-slate-500",children:"Erro ao carregar recomenda√ß√£o."})})]}),w&&e.jsxs("form",{onSubmit:W,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Adicionar Novo Ativo"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Nome"}),e.jsx("input",{required:!0,type:"text",placeholder:"Ex: CDB Banco X, PETR4",value:H.name,onChange:o=>K({...H,name:o.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Atual (Mercado)"}),e.jsx("input",{required:!0,type:"number",placeholder:"R$",value:H.amount,onChange:o=>K({...H,amount:o.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Investido (Custo)"}),e.jsx("input",{type:"number",placeholder:"Igual ao atual se vazio",value:H.investedAmount,onChange:o=>K({...H,investedAmount:o.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Objetivo Final (Meta)"}),e.jsx("input",{type:"number",placeholder:"R$",value:H.targetAmount,onChange:o=>K({...H,targetAmount:o.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Tipo"}),e.jsxs("select",{value:H.type,onChange:o=>K({...H,type:o.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"Renda Fixa",children:"Renda Fixa"}),e.jsx("option",{value:"A√ß√µes",children:"A√ß√µes"}),e.jsx("option",{value:"FIIs",children:"FIIs"}),e.jsx("option",{value:"Cripto",children:"Criptomoedas"}),e.jsx("option",{value:"Reserva",children:"Reserva de Emerg√™ncia"}),e.jsx("option",{value:"Outros",children:"Outros"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Data da Compra"}),e.jsx("input",{required:!0,type:"date",value:H.date,onChange:o=>K({...H,date:o.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Salvar"})]})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-sm p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Novo Aporte"}),e.jsx("button",{onClick:()=>h(null),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Ao aportar, o valor ser√° somado ao Custo e ao Valor Atual."}),e.jsxs("form",{onSubmit:re,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"VALOR DO APORTE"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-slate-400",children:"R$"}),e.jsx("input",{autoFocus:!0,required:!0,type:"number",step:"0.01",className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg py-2 pl-8 pr-3 focus:ring-2 focus:ring-indigo-500 outline-none text-lg font-medium",value:L,onChange:o=>C(o.target.value)})]})]}),e.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Dt,{className:"w-5 h-5"}),"Confirmar Aporte"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:"Voc√™ ainda n√£o registrou investimentos."}):t.map(o=>{const g=o.investedAmount||o.amount,v=o.amount-g,X=g>0?v/g*100:0,U=o.targetAmount&&o.targetAmount>0?Math.min(100,o.amount/o.targetAmount*100):0;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-shadow relative group",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-3 rounded-full text-indigo-600 dark:text-indigo-400",children:e.jsx(lt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white text-lg",children:o.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs mt-1",children:[e.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-2 py-0.5 rounded",children:o.type}),X!==0&&e.jsxs("span",{className:`px-2 py-0.5 rounded font-bold flex items-center gap-1 ${X>0?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"}`,children:[X>0?e.jsx(fe,{className:"w-3 h-3"}):e.jsx(st,{className:"w-3 h-3"}),X.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:"flex items-start justify-between md:justify-end gap-3 md:gap-6 mt-2 md:mt-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-[10px] text-slate-400 uppercase font-bold tracking-wider",children:"Valor Atual"}),V===o.id?e.jsx("div",{className:"flex items-center justify-end gap-1 mt-1",children:e.jsx("input",{autoFocus:!0,type:"number",className:"w-24 p-1 text-sm border rounded bg-white dark:bg-slate-900 dark:text-white dark:border-slate-600 text-right",value:D,onChange:ae=>F(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&Q(o.id),onBlur:()=>Q(o.id)})}):e.jsxs("div",{className:"group/edit relative inline-block",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-xl cursor-pointer hover:text-indigo-500 border-b border-dashed border-transparent hover:border-indigo-400 transition-all",onClick:()=>{q(o.id),F(o.amount.toString())},title:"Clique para atualizar cota√ß√£o",children:u(o.amount)}),e.jsx(Ft,{className:"w-3 h-3 text-slate-300 absolute -right-4 top-1 opacity-0 group-hover/edit:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Investido: ",u(g)]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>h(o.id),className:"p-1.5 text-indigo-600 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-400 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg transition-colors",title:"Novo Aporte",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>l(o.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors",title:"Excluir",children:e.jsx(ve,{className:"w-4 h-4"})})]})]})]}),o.targetAmount>0?e.jsx("div",{className:"mt-3 bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg border border-slate-100 dark:border-slate-700 flex items-center gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"})," Meta: ",u(o.targetAmount)]}),e.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400",children:[U.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-1000",style:{width:`${U}%`}})})]})}):e.jsx("div",{className:"mt-2 flex justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{onClick:()=>A(!0),className:"text-[10px] text-slate-400 hover:text-indigo-500 flex items-center gap-1 uppercase font-bold tracking-wider",children:[e.jsx(Sa,{className:"w-3 h-3"})," Definir Meta"]})})]},o.id)})})]})},cl=({budgets:t,transactions:r,investments:n,onAdd:l,onUpdate:i,onDelete:j,onNavigate:m,privacyMode:T,quickActionSignal:w})=>{const[A,R]=c.useState(!1),[y,I]=c.useState(!1),k=c.useMemo(()=>{const a=new Set;return r.forEach(d=>a.add(d.category)),t.forEach(d=>a.add(d.category)),a.size===0?["Lazer","Casa","Alimentos"]:Array.from(a).sort()},[r,t]),[p,E]=c.useState(new Date),[O,_]=c.useState(null),[$,h]=c.useState(""),[L,C]=c.useState({category:k[0]||"Lazer",limit:"",isRecurring:!0,month:new Date().toISOString().slice(0,7)});c.useEffect(()=>{w&&Date.now()-w<2e3&&(R(!0),C({category:k[0]||"Lazer",limit:"",isRecurring:!0,month:new Date().toISOString().slice(0,7)}))},[w,k]);const V=()=>{E(a=>{const d=new Date(a);return d.setMonth(a.getMonth()-1),d})},q=()=>{E(a=>{const d=new Date(a);return d.setMonth(a.getMonth()+1),d})},D=a=>a.toLocaleDateString("pt-BR",{month:"long",year:"numeric"}),F=()=>{const a=p.getFullYear(),d=String(p.getMonth()+1).padStart(2,"0");return`${a}-${d}`},H=a=>{if(a.preventDefault(),L.isRecurring){if(t.some(S=>S.category===L.category&&S.isRecurring)){alert(`J√° existe um or√ßamento recorrente para ${L.category}. Exclua o anterior para criar um novo.`);return}}else if(t.some(S=>S.category===L.category&&S.month===L.month)){alert(`J√° existe um or√ßamento de ${L.category} para ${L.month}.`);return}const d={category:L.category,limit:parseFloat(L.limit),isRecurring:L.isRecurring};L.isRecurring||(d.month=L.month),l(d),C({category:k[0]||"Outros",limit:"",isRecurring:!0,month:F()}),R(!1)},K=a=>{const d=parseFloat($);!isNaN(d)&&d>0&&i(a,{limit:d}),_(null)},Y=a=>{_(a.id),h(a.limit.toString())},W=a=>T?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${a.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,re=a=>{const d=p.getFullYear(),S=p.getMonth();return r.filter(M=>{const f=new Date(M.date);return M.type==="expense"&&M.category===a&&f.getMonth()===S&&f.getFullYear()===d}).reduce((M,f)=>M+f.amount,0)},Q=c.useMemo(()=>{const a=F(),d=t.filter(f=>f.month===a),S=new Set(d.map(f=>f.category)),M=t.filter(f=>f.isRecurring&&!S.has(f.category));return[...d,...M].sort((f,u)=>f.category.localeCompare(u.category))},[t,p]),b=c.useMemo(()=>n.filter(a=>a.targetAmount>0).sort((a,d)=>{const S=a.amount/a.targetAmount;return d.amount/d.targetAmount-S}),[n]),x=a=>{const d=new Date;if(d.getMonth()!==p.getMonth()||d.getFullYear()!==p.getFullYear())return null;const S=d.getDate(),M=new Date(d.getFullYear(),d.getMonth()+1,0).getDate();return S===1?a:a/S*M},s=c.useMemo(()=>{const a=new Map,d=new Date;for(let M=0;M<6;M++){const f=new Date(d.getFullYear(),d.getMonth()-M,1),u=f.getFullYear(),o=f.getMonth(),g=`${u}-${String(o+1).padStart(2,"0")}`;new Set(r.filter(v=>{const X=new Date(v.date);return v.type==="expense"&&X.getFullYear()===u&&X.getMonth()===o}).map(v=>v.category)).forEach(v=>{let X=t.find(U=>U.category===v&&U.month===g);if(X||(X=t.find(U=>U.category===v&&U.isRecurring)),X){const U=r.filter(le=>{const de=new Date(le.date);return le.type==="expense"&&le.category===v&&de.getFullYear()===u&&de.getMonth()===o}).reduce((le,de)=>le+de.amount,0),ae=a.get(v)||{totalSpent:0,totalLimit:0,count:0};a.set(v,{totalSpent:ae.totalSpent+U,totalLimit:ae.totalLimit+X.limit,count:ae.count+1})}})}return Array.from(a.entries()).map(([M,f])=>{const u=f.totalSpent/f.totalLimit*100;return{name:M,adherence:u,spent:f.totalSpent/f.count,limit:f.totalLimit/f.count}}).sort((M,f)=>f.adherence-M.adherence)},[t,r]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Planejamento"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm capitalize",children:"Defina limites e acompanhe suas metas."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("button",{onClick:()=>I(!y),className:`p-2.5 rounded-lg transition-colors border ${y?"bg-indigo-50 border-indigo-200 text-indigo-600 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300"}`,title:"Ver An√°lise de Performance",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-1",children:[e.jsx("button",{onClick:V,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(Ot,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-4 font-semibold text-slate-700 dark:text-slate-200 capitalize min-w-[140px] text-center flex items-center justify-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-pink-500"}),D(p)]}),e.jsx("button",{onClick:q,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(mt,{className:"w-5 h-5"})})]}),e.jsxs("button",{onClick:()=>{C(a=>({...a,month:F()})),R(!A)},className:"flex items-center gap-2 bg-pink-600 text-white px-4 py-2.5 rounded-lg hover:bg-pink-700 transition-colors shadow-sm text-sm font-medium",children:[e.jsx(ie,{className:"w-4 h-4"}),"Definir Teto"]})]})]}),y&&s.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in-down mb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-indigo-500"}),"Performance Hist√≥rica (√öltimos 6 Meses)"]})}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs(zt,{data:s,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Ge,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(Ue,{type:"number",hide:!0}),e.jsx(qe,{dataKey:"name",type:"category",width:100,tick:{fill:"#64748b",fontSize:12,fontWeight:500},axisLine:!1,tickLine:!1}),e.jsx(ke,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:a=>[`${a.toFixed(0)}%`,"M√©dia de Uso"]}),e.jsx(Rs,{x:100,stroke:"#ef4444",strokeDasharray:"3 3"}),e.jsx(dt,{dataKey:"adherence",radius:[0,4,4,0],barSize:20,children:s.map((a,d)=>e.jsx(ut,{fill:a.adherence>100?"#ef4444":a.adherence>85?"#f59e0b":"#10b981"},`cell-${d}`))})]})})})]}),A&&e.jsxs("form",{onSubmit:H,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Novo Limite de Gastos"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:"Categoria"}),e.jsx("select",{value:L.category,onChange:a=>C({...L,category:a.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-pink-500",children:k.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:"Valor Teto (R$)"}),e.jsx("input",{required:!0,type:"number",placeholder:"Ex: 1000.00",value:L.limit,onChange:a=>C({...L,limit:a.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-pink-500"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",id:"isRecurringBudget",checked:L.isRecurring,onChange:a=>C({...L,isRecurring:a.target.checked}),className:"w-4 h-4 text-pink-600 rounded"}),e.jsxs("label",{htmlFor:"isRecurringBudget",className:"text-sm font-medium text-slate-700 dark:text-slate-200 flex items-center gap-1 cursor-pointer",children:[e.jsx(De,{className:"w-4 h-4"})," Or√ßamento Recorrente?"]})]}),L.isRecurring?e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(Aa,{className:"w-3 h-3"})," Este limite ser√° aplicado automaticamente em todos os meses futuros."]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 block mb-1",children:"M√™s de Refer√™ncia"}),e.jsx("input",{type:"month",required:!L.isRecurring,value:L.month,onChange:a=>C({...L,month:a.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 outline-none w-full max-w-[200px]"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 font-medium",children:"Salvar Teto"})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5 text-rose-500"})," Tetos de Gastos"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(Ie,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Nenhum teto definido."})]}):Q.map(a=>{const d=re(a.category),S=x(d),M=Math.min(100,d/a.limit*100),f=S?Math.min(100,S/a.limit*100):0,u=d>a.limit;let o="bg-emerald-500",g=e.jsx(St,{className:"w-5 h-5 text-emerald-600"});return M>100?(o="bg-rose-500",g=e.jsx(Nt,{className:"w-5 h-5 text-rose-600"})):M>85?(o="bg-rose-500",g=e.jsx(nt,{className:"w-5 h-5 text-rose-500"})):M>70&&(o="bg-amber-500",g=e.jsx(nt,{className:"w-5 h-5 text-amber-500"})),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all relative group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-slate-100 dark:bg-slate-700",children:g}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:a.category}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[a.isRecurring?e.jsx(De,{className:"w-3 h-3"}):e.jsx(Ve,{className:"w-3 h-3"}),a.isRecurring?"Mensal":"Espec√≠fico"]})]})]}),O===a.id?e.jsxs("div",{className:"flex items-center gap-1 animate-fade-in",children:[e.jsx("input",{autoFocus:!0,type:"number",className:"w-20 p-1 text-sm border rounded bg-white dark:bg-slate-900 dark:text-white dark:border-slate-600",value:$,onChange:P=>h(P.target.value),onKeyDown:P=>P.key==="Enter"&&K(a.id)}),e.jsx("button",{onClick:()=>K(a.id),className:"p-1 bg-emerald-100 text-emerald-600 rounded hover:bg-emerald-200",children:e.jsx(Da,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>_(null),className:"p-1 bg-slate-100 text-slate-600 rounded hover:bg-slate-200",children:e.jsx(ne,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"text-right group-hover:hidden",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Limite"}),e.jsx("p",{className:"font-bold text-slate-800 dark:text-white cursor-pointer hover:text-indigo-500",onClick:()=>Y(a),children:W(a.limit)})]}),e.jsxs("div",{className:"hidden group-hover:flex gap-1 absolute top-4 right-4 bg-white dark:bg-slate-800 pl-2",children:[e.jsx("button",{onClick:()=>Y(a),className:"p-1.5 text-slate-400 hover:text-indigo-500 hover:bg-indigo-50 rounded",children:e.jsx(Ft,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(a.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded",children:e.jsx(ve,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2 relative",children:[e.jsxs("div",{className:"flex justify-between items-end text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:["Gasto: ",e.jsx("span",{className:u?"text-rose-500 font-bold":"",children:W(d)})]}),e.jsxs("span",{className:"text-slate-400 text-xs",children:[M.toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full h-3 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden relative",children:[S&&S>d&&!u&&e.jsx("div",{className:"absolute top-0 left-0 h-full bg-slate-200 dark:bg-slate-600 opacity-50 border-r-2 border-slate-400 dark:border-slate-400 transition-all duration-1000",style:{width:`${f}%`},title:`Previs√£o de fechar o m√™s em ${W(S)}`}),e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${o} relative z-10`,style:{width:`${M}%`}})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[S&&S>a.limit&&!u&&e.jsxs("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 flex items-center gap-1 font-semibold animate-pulse",children:[e.jsx(Ia,{className:"w-3 h-3"})," Previs√£o de estouro: ",W(S)]}),e.jsx("div",{className:"flex-1"}),e.jsx("p",{className:"text-xs text-right font-medium",children:u?e.jsxs("span",{className:"text-rose-500",children:["Excedido: ",W(d-a.limit)]}):e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:["Restam: ",W(a.limit-d)]})})]})]})]},a.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5 text-yellow-500"})," Objetivos de Conquista"]}),e.jsxs("button",{onClick:()=>m(z.INVESTMENTS),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 flex items-center gap-1 transition-colors",children:["Gerenciar Carteira ",e.jsx(xt,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.length===0?e.jsxs("div",{className:"col-span-full py-8 text-center bg-yellow-50/50 dark:bg-yellow-900/10 rounded-xl border border-dashed border-yellow-200 dark:border-yellow-800",children:[e.jsx(Ie,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:'Defina uma "Meta Final" nos seus investimentos para v√™-los aqui.'}),e.jsx("button",{onClick:()=>m(z.INVESTMENTS),className:"mt-3 text-xs bg-yellow-100 hover:bg-yellow-200 text-yellow-700 px-3 py-1.5 rounded-lg font-bold transition-colors",children:"Ir para Investimentos"})]}):b.map(a=>{const d=Math.min(100,a.amount/a.targetAmount*100);return e.jsxs("div",{onClick:()=>m(z.INVESTMENTS),className:"bg-gradient-to-br from-white to-yellow-50 dark:from-slate-800 dark:to-slate-800/50 p-6 rounded-xl shadow-sm border border-yellow-200 dark:border-yellow-900/30 relative overflow-hidden cursor-pointer hover:shadow-md hover:scale-[1.02] transition-all group",children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Mt,{className:"w-4 h-4 text-slate-400"})}),e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",children:e.jsx(fe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:a.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Meta: ",W(a.targetAmount)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:[d.toFixed(0),"%"]})})]}),e.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden relative z-10",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-amber-500 rounded-full transition-all duration-1000 shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${d}%`},children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full animate-[shimmer_2s_infinite]"})})}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 text-right relative z-10",children:["Faltam ",W(a.targetAmount-a.amount)]}),e.jsx(Jt,{className:"absolute -bottom-4 -right-4 w-32 h-32 text-yellow-500/5 rotate-12 pointer-events-none"})]},a.id)})})]})]})},xl={age:30,retirementAge:60,riskProfile:"moderate"},hs={conservative:.03,moderate:.05,aggressive:.07},ml=({data:t,onSaveProfile:r,privacyMode:n,hasApiKey:l})=>{const[i,j]=c.useState(t.wealthProfile||xl),[m,T]=c.useState(!t.wealthProfile),[w,A]=c.useState(null),[R,y]=c.useState(!1),I=c.useMemo(()=>t.investments.reduce((C,V)=>C+V.amount,0),[t.investments]),k=c.useMemo(()=>t.debts.filter(C=>C.status!=="paid").reduce((C,V)=>C+V.currentAmount,0),[t.debts]),p=I-k,E=c.useMemo(()=>{const C=t.transactions.filter(D=>D.type==="income").reduce((D,F)=>D+F.amount,0),V=t.transactions.filter(D=>D.type==="expense").reduce((D,F)=>D+F.amount,0);if(C===0&&V===0)return{income:5e3,expense:4e3,savings:1e3};const q=C-V;return{income:C,expense:V>0?V:C*.8,savings:q}},[t.transactions]),O=i.monthlyContributionOverride!==void 0?i.monthlyContributionOverride:Math.max(0,E.savings),_=c.useMemo(()=>{const C=[],V=new Date().getFullYear(),q=i.retirementAge-i.age+10,D=hs[i.riskProfile],F=O*12,H=E.expense*12;let K=p,Y=null;for(let W=0;W<=q;W++){const re=V+W,Q=i.age+W,b=K*.04;!Y&&b>=H&&(Y=re),C.push({year:re,age:Q,patrimonio:Math.round(K),rendaPassiva:Math.round(b/12),custoVida:Math.round(E.expense)}),Q<i.retirementAge?K=K*(1+D)+F:K=K*(1+D)}return{chartData:C,freedomYear:Y}},[i,p,O,E.expense]),$=()=>{r(i),T(!1)},h=async()=>{y(!0);const C=await Br(t.investments,i.riskProfile,i.age);A(C),y(!1)},L=C=>n?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${C.toLocaleString("pt-BR",{maximumFractionDigits:0})}`;return e.jsxs("div",{className:"space-y-8 animate-fade-in pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border-b border-slate-200 dark:border-slate-700 pb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg shadow-lg shadow-yellow-500/20 text-white",children:e.jsx(Ta,{className:"w-6 h-6"})}),"NEXO Private"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Planejamento patrimonial e aloca√ß√£o estrat√©gica de ativos."})]}),!m&&e.jsx("button",{onClick:()=>T(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-semibold hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Ajustar Perfil"})]}),m&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border-l-4 border-yellow-500 animate-scale-in",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(at,{className:"w-5 h-5 text-yellow-500"})," Par√¢metros da Simula√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Idade Atual"}),e.jsx("input",{type:"number",value:i.age,onChange:C=>j({...i,age:Number(C.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Idade Aposentadoria"}),e.jsx("input",{type:"number",value:i.retirementAge,onChange:C=>j({...i,retirementAge:Number(C.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Perfil de Risco"}),e.jsxs("select",{value:i.riskProfile,onChange:C=>j({...i,riskProfile:C.target.value}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600",children:[e.jsx("option",{value:"conservative",children:"Conservador"}),e.jsx("option",{value:"moderate",children:"Moderado"}),e.jsx("option",{value:"aggressive",children:"Arrojado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Aporte Mensal (Simulado)"}),e.jsx("input",{type:"number",placeholder:`Atual: R$ ${E.savings.toFixed(0)}`,value:i.monthlyContributionOverride||"",onChange:C=>j({...i,monthlyContributionOverride:Number(C.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:$,className:"bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-6 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity",children:"Atualizar Proje√ß√£o"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 text-white p-6 rounded-xl shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-emerald-400"}),"Liberdade Financeira"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Cruzamento entre Renda Passiva e Custo de Vida."})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase font-bold",children:"Ano da Liberdade"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:_.freedomYear||"Em constru√ß√£o..."})]})]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs(Xa,{data:_.chartData,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorPassive",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(Ge,{strokeDasharray:"3 3",vertical:!1,stroke:"#334155"}),e.jsx(Ue,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),e.jsx(qe,{hide:!0,domain:["auto","auto"]}),e.jsx(ke,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:C=>[L(C),""]}),e.jsx(Rs,{y:E.expense,stroke:"#f43f5e",strokeDasharray:"3 3",label:{value:"Custo Vida",fill:"#f43f5e",fontSize:10}}),e.jsx(Ja,{type:"monotone",dataKey:"rendaPassiva",stroke:"#10b981",fillOpacity:1,fill:"url(#colorPassive)",name:"Renda Passiva"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 flex flex-col justify-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Patrim√¥nio L√≠quido Atual"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:L(p)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ativos Investidos"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:L(I)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"D√≠vidas Totais"}),e.jsx("span",{className:"font-semibold text-rose-600",children:L(k)})]}),e.jsx("div",{className:"w-full h-px bg-slate-200 dark:bg-slate-700 my-2"}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Aporte Mensal"}),e.jsx("span",{className:"font-semibold text-indigo-600",children:L(O)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Rentabilidade Real (Proj.)"}),e.jsxs("span",{className:"font-semibold text-slate-800 dark:text-white",children:[(hs[i.riskProfile]*100).toFixed(1),"% a.a."]})]})]}),k>I&&e.jsxs("div",{className:"mt-6 bg-rose-50 dark:bg-rose-900/20 p-3 rounded-lg flex items-start gap-2",children:[e.jsx(Ea,{className:"w-5 h-5 text-rose-600 shrink-0"}),e.jsx("p",{className:"text-xs text-rose-800 dark:text-rose-300",children:"Aten√ß√£o: Seu patrim√¥nio est√° negativo. A prioridade do planejamento deve ser a quita√ß√£o de d√≠vidas antes da acumula√ß√£o."})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(As,{className:"w-6 h-6 text-purple-600"}),"Aloca√ß√£o Inteligente (IA)"]}),e.jsxs("button",{onClick:h,disabled:!l||R,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold text-sm shadow-md",children:[R?e.jsx("span",{className:"animate-spin",children:"‚è≥"}):e.jsx(Ae,{className:"w-4 h-4"}),w?"Atualizar An√°lise":"Gerar Estrat√©gia Private"]})]}),!l&&e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-8 rounded-xl text-center border border-dashed border-slate-300 dark:border-slate-600",children:[e.jsx(at,{className:"w-10 h-10 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Configure sua Chave API para desbloquear a intelig√™ncia de aloca√ß√£o de ativos."})]}),l&&w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Diagn√≥stico do Portf√≥lio"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed mb-6",children:w.analysisText}),e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Plano de A√ß√£o T√°tico"}),e.jsx("div",{className:"space-y-3",children:w.actionItems.map((C,V)=>e.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:`
                                      w-10 h-10 rounded-full flex items-center justify-center shrink-0 font-bold text-xs
                                      ${C.type==="buy"?"bg-emerald-100 text-emerald-700":C.type==="sell"?"bg-rose-100 text-rose-700":"bg-blue-100 text-blue-700"}
                                  `,children:C.type==="buy"?"COMPRA":C.type==="sell"?"VENDA":"MANTER"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:C.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:C.description})]})]},V))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-2 self-start",children:"Atual vs. Ideal (Modelo)"}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs(Qa,{cx:"50%",cy:"50%",outerRadius:"80%",data:w.suggestedAllocation.map(C=>{const V=w.currentAllocation.find(q=>q.name===C.name);return{subject:C.name,A:V?V.value:0,B:C.value,fullMark:100}}),children:[e.jsx(Za,{stroke:"#94a3b8"}),e.jsx(er,{dataKey:"subject",tick:{fill:"#64748b",fontSize:10}}),e.jsx(tr,{angle:30,domain:[0,100],tick:!1}),e.jsx(Qt,{name:"Sua Carteira",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3}),e.jsx(Qt,{name:"Ideal (IA)",dataKey:"B",stroke:"#10b981",fill:"#10b981",fillOpacity:.3}),e.jsx(it,{}),e.jsx(ke,{})]})})}),e.jsx("p",{className:"text-xs text-center text-slate-400 mt-2",children:"Comparativo de % de aloca√ß√£o por classe de ativo."})]})]})]})]})},ul=({currentView:t,onNavigate:r,data:n,actions:l,privacyMode:i,hasApiKey:j,quickActionSignal:m})=>{const T=[{id:z.INVESTMENTS,label:"Investimentos",icon:Mt},{id:z.BUDGETS,label:"Metas & Tetos",icon:Ie},{id:z.WEALTH_PLANNER,label:"Planejamento",icon:ys}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Gest√£o de Patrim√¥nio"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:T.map(w=>{const A=t===w.id;return e.jsxs("button",{onClick:()=>r(w.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-2 md:px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${A?"bg-emerald-600 border-emerald-600 text-white shadow-lg shadow-emerald-500/30 scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:border-emerald-300 dark:hover:border-emerald-500 hover:bg-slate-50 dark:hover:bg-slate-700"}
                `,children:[e.jsx(w.icon,{className:`w-5 h-5 ${A?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"text-xs md:text-sm text-center md:text-left",children:w.label})]},w.id)})})]}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===z.INVESTMENTS&&e.jsx(dl,{investments:n.investments,onAdd:l.addInvestment,onUpdate:l.updateInvestment,onDelete:l.deleteInvestment,onNavigate:r,privacyMode:i,hasApiKey:j,quickActionSignal:m}),t===z.BUDGETS&&e.jsx(cl,{budgets:n.budgets||[],transactions:n.transactions,investments:n.investments||[],onAdd:l.addBudget,onUpdate:l.updateBudget,onDelete:l.deleteBudget,onNavigate:r,privacyMode:i,quickActionSignal:m}),t===z.WEALTH_PLANNER&&e.jsx(ml,{data:n,onSaveProfile:l.saveWealthProfile,privacyMode:i,hasApiKey:j})]})]})},vt=[{label:"Azul",value:"blue",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{label:"Verde",value:"green",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800",text:"text-emerald-700 dark:text-emerald-300"},{label:"Roxo",value:"purple",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{label:"Rosa",value:"rose",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800",text:"text-rose-700 dark:text-rose-300"},{label:"Amarelo",value:"yellow",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800",text:"text-amber-700 dark:text-amber-300"}],gs=[{wrapper:"bg-indigo-50/80 dark:bg-indigo-900/10 border-indigo-200 dark:border-indigo-800",header:"bg-indigo-100 dark:bg-indigo-900/30 border-indigo-200 dark:border-indigo-800",title:"text-indigo-900 dark:text-indigo-100",count:"bg-indigo-200 dark:bg-indigo-800 text-indigo-700 dark:text-indigo-200",button:"text-indigo-600 hover:bg-indigo-100 dark:text-indigo-300 dark:hover:bg-indigo-900/30",addButtonBg:"bg-indigo-600 hover:bg-indigo-700"},{wrapper:"bg-cyan-50/80 dark:bg-cyan-900/10 border-cyan-200 dark:border-cyan-800",header:"bg-cyan-100 dark:bg-cyan-900/30 border-cyan-200 dark:border-cyan-800",title:"text-cyan-900 dark:text-cyan-100",count:"bg-cyan-200 dark:bg-cyan-800 text-cyan-700 dark:text-cyan-200",button:"text-cyan-600 hover:bg-cyan-100 dark:text-cyan-300 dark:hover:bg-cyan-900/30",addButtonBg:"bg-cyan-600 hover:bg-cyan-700"},{wrapper:"bg-amber-50/80 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800",header:"bg-amber-100 dark:bg-amber-900/30 border-amber-200 dark:border-amber-800",title:"text-amber-900 dark:text-amber-100",count:"bg-amber-200 dark:bg-amber-800 text-amber-700 dark:text-amber-200",button:"text-amber-600 hover:bg-amber-100 dark:text-amber-300 dark:hover:bg-amber-900/30",addButtonBg:"bg-amber-600 hover:bg-amber-700"},{wrapper:"bg-emerald-50/80 dark:bg-emerald-900/10 border-emerald-200 dark:border-emerald-800",header:"bg-emerald-100 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800",title:"text-emerald-900 dark:text-emerald-100",count:"bg-emerald-200 dark:bg-emerald-800 text-emerald-700 dark:text-emerald-200",button:"text-emerald-600 hover:bg-emerald-100 dark:text-emerald-300 dark:hover:bg-emerald-900/30",addButtonBg:"bg-emerald-600 hover:bg-emerald-700"},{wrapper:"bg-purple-50/80 dark:bg-purple-900/10 border-purple-200 dark:border-purple-800",header:"bg-purple-100 dark:bg-purple-900/30 border-purple-200 dark:border-purple-800",title:"text-purple-900 dark:text-purple-100",count:"bg-purple-200 dark:bg-purple-800 text-purple-700 dark:text-purple-200",button:"text-purple-600 hover:bg-purple-100 dark:text-purple-300 dark:hover:bg-purple-900/30",addButtonBg:"bg-purple-600 hover:bg-purple-700"},{wrapper:"bg-rose-50/80 dark:bg-rose-900/10 border-rose-200 dark:border-rose-800",header:"bg-rose-100 dark:bg-rose-900/30 border-rose-200 dark:border-rose-800",title:"text-rose-900 dark:text-rose-100",count:"bg-rose-200 dark:bg-rose-800 text-rose-700 dark:text-rose-200",button:"text-rose-600 hover:bg-rose-100 dark:text-rose-300 dark:hover:bg-rose-900/30",addButtonBg:"bg-rose-600 hover:bg-rose-700"}],hl=({boards:t,onSaveBoard:r,onDeleteBoard:n,onAddTransaction:l,privacyMode:i})=>{const[j,m]=c.useState(null),[T,w]=c.useState(""),[A,R]=c.useState(!1),[y,I]=c.useState(""),[k,p]=c.useState(null),[E,O]=c.useState(""),[_,$]=c.useState(""),[h,L]=c.useState("blue"),[C,V]=c.useState(null),[q,D]=c.useState(null);c.useEffect(()=>{if(t.length>0&&!j)m(t[0].id);else if(t.length===0&&!j){const u={id:crypto.randomUUID(),title:"Meu Projeto",columns:[{id:"col-1",title:"Ideias / Sonhos",order:0,cards:[]},{id:"col-2",title:"Pesquisando Pre√ßo",order:1,cards:[]},{id:"col-3",title:"Prioridade / Pr√≥xima",order:2,cards:[]},{id:"col-4",title:"Conclu√≠do / Pago",order:3,isConclusion:!0,cards:[]}]};r(u),m(u.id)}},[t,j]);const F=t.find(u=>u.id===j),H=u=>{if(u.preventDefault(),!T.trim())return;const o={id:crypto.randomUUID(),title:T,columns:[{id:crypto.randomUUID(),title:"A Fazer",order:0,cards:[]},{id:crypto.randomUUID(),title:"Em Andamento",order:1,cards:[]},{id:crypto.randomUUID(),title:"Conclu√≠do",order:2,isConclusion:!0,cards:[]}]};r(o),m(o.id),w(""),R(!1)},K=()=>{j&&confirm("Tem certeza que deseja excluir este quadro?")&&(n(j),m(null))},Y=u=>{F&&r({...F,columns:u})},W=u=>{if(u.preventDefault(),!y.trim()||!F)return;const o={id:crypto.randomUUID(),title:y,order:F.columns.length,cards:[]};Y([...F.columns,o]),I("")},re=u=>{F&&Y(F.columns.filter(o=>o.id!==u))},Q=u=>{V({id:u.id,title:u.title})},b=()=>{if(!C||!F)return;const u=F.columns.map(o=>o.id===C.id?{...o,title:C.title}:o);Y(u),V(null)},x=u=>{if(!F||!F.columns.find(v=>v.id===u))return;const g={id:crypto.randomUUID(),title:E||"Novo Item",amount:parseFloat(_)||0,color:h},P=F.columns.map(v=>v.id===u?{...v,cards:[...v.cards,g]}:v);Y(P),p(null),O(""),$(""),L("blue")},s=(u,o)=>{if(!F)return;const g=F.columns.map(P=>P.id===u?{...P,cards:P.cards.filter(v=>v.id!==o)}:P);Y(g)},a=(u,o,g)=>{D({cardId:o,sourceColId:g}),u.dataTransfer.effectAllowed="move"},d=u=>{u.preventDefault(),u.dataTransfer.dropEffect="move"},S=(u,o)=>{if(u.preventDefault(),!q||!F)return;const{cardId:g,sourceColId:P}=q;if(P===o){D(null);return}const v=F.columns.find(U=>U.id===P),X=F.columns.find(U=>U.id===o);if(v&&X){const U=v.cards.find(ae=>ae.id===g);if(U){const ae=F.columns.map(le=>le.id===P?{...le,cards:le.cards.filter(de=>de.id!==g)}:le.id===o?{...le,cards:[...le.cards,U]}:le);Y(ae)}}D(null)},M=u=>i?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${u.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,f=F?[...F.columns].sort((u,o)=>u.order-o.order):[];return e.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Pt,{className:"w-7 h-7 text-indigo-600"}),"NEXO Flow"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Organize seus planos: Sonhe, Pesquise, Priorize e Compre."})]}),j&&e.jsx("button",{onClick:K,className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors",title:"Excluir Quadro Atual",children:e.jsx(ve,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2 kanban-scroll",children:[t.map(u=>e.jsxs("button",{onClick:()=>m(u.id),className:`px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap transition-all flex items-center gap-2 ${j===u.id?"bg-indigo-600 text-white shadow-md shadow-indigo-500/20 scale-105":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700"}`,children:[e.jsx(vs,{className:"w-4 h-4"}),u.title]},u.id)),A?e.jsxs("form",{onSubmit:H,className:"flex items-center gap-2 animate-fade-in bg-white dark:bg-slate-800 p-1 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("input",{autoFocus:!0,type:"text",placeholder:"Nome do Projeto...",value:T,onChange:u=>w(u.target.value),className:"w-40 px-3 py-1.5 rounded-lg bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white p-1.5 rounded-lg hover:bg-indigo-700 transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>R(!1),className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 p-1.5 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:e.jsx(ne,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>R(!0),className:"px-3 py-2 rounded-xl font-bold text-sm whitespace-nowrap bg-indigo-50 text-indigo-600 hover:bg-indigo-100 dark:bg-indigo-900/20 dark:text-indigo-400 dark:hover:bg-indigo-900/40 border border-indigo-200 dark:border-indigo-800 flex items-center gap-1 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"})," Novo Quadro"]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("form",{onSubmit:W,className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Nova Coluna...",value:y,onChange:u=>I(u.target.value),className:"px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 text-sm w-full md:w-64 shadow-sm"}),e.jsxs("button",{type:"submit",className:"bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-900 transition-colors flex items-center gap-2 text-sm font-bold shadow-sm",children:[e.jsx(ie,{className:"w-4 h-4"})," Adicionar Coluna"]})]})}),e.jsx("style",{children:`
        .kanban-scroll::-webkit-scrollbar {
            height: 12px;
        }
        .kanban-scroll::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
            margin: 0 10px;
        }
        .kanban-scroll::-webkit-scrollbar-thumb {
            background-color: #94a3b8;
            border-radius: 10px;
            border: 3px solid transparent;
            background-clip: content-box;
        }
        .kanban-scroll::-webkit-scrollbar-thumb:hover {
            background-color: #64748b;
        }
        .dark .kanban-scroll::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
        }
        .dark .kanban-scroll::-webkit-scrollbar-thumb {
            background-color: #475569;
        }
        .dark .kanban-scroll::-webkit-scrollbar-thumb:hover {
            background-color: #94a3b8;
        }
      `}),e.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden pb-4 kanban-scroll",children:e.jsx("div",{className:"flex h-full gap-4 min-w-max px-2",children:f.map((u,o)=>{let g=o%gs.length;u.isConclusion&&(g=3);const P=gs[g];return e.jsxs("div",{className:`w-72 flex flex-col rounded-xl border backdrop-blur-sm transition-colors ${P.wrapper} ${q&&q.sourceColId!==u.id?"opacity-50 border-dashed":"shadow-sm"}`,onDragOver:d,onDrop:v=>S(v,u.id),children:[e.jsxs("div",{className:`p-3 border-b flex justify-between items-center group/header rounded-t-xl ${P.header} ${P.wrapper.split(" ")[2]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.isConclusion&&e.jsx(Ne,{className:"w-4 h-4 text-emerald-600 flex-shrink-0"}),(C==null?void 0:C.id)===u.id?e.jsx("input",{autoFocus:!0,className:`w-full bg-white dark:bg-slate-900 border rounded px-1 py-0.5 text-sm font-bold outline-none ${P.title}`,value:C.title,onChange:v=>V({...C,title:v.target.value}),onBlur:b,onKeyDown:v=>v.key==="Enter"&&b()}):e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden w-full",children:[e.jsx("h3",{className:`font-bold text-sm uppercase tracking-wide truncate cursor-pointer transition-colors ${P.title}`,onDoubleClick:()=>Q(u),title:"Duplo clique para renomear",children:u.title}),e.jsx("button",{onClick:()=>Q(u),className:"opacity-0 group-hover/header:opacity-100 transition-opacity p-1 text-slate-400 hover:text-indigo-500",children:e.jsx(Ft,{className:"w-3 h-3"})})]}),(C==null?void 0:C.id)!==u.id&&e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold flex-shrink-0 ${P.count}`,children:u.cards.length})]}),!u.isConclusion&&e.jsx("button",{onClick:()=>{confirm("Excluir coluna?")&&re(u.id)},className:"text-slate-400 hover:text-rose-500 ml-2",title:"Excluir Coluna",children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:u.cards.map(v=>{const X=vt.find(U=>U.value===v.color)||vt[0];return e.jsxs("div",{draggable:!0,onDragStart:U=>a(U,v.id,u.id),className:`bg-white dark:bg-slate-700 p-3 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 cursor-grab active:cursor-grabbing hover:shadow-md transition-all group relative border-l-4 ${X.border.replace("border","border-l")}`,style:{borderLeftColor:`var(--${v.color}-500)`},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-white text-sm",children:v.title}),e.jsx("button",{onClick:()=>s(u.id,v.id),className:"text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ne,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase ${X.bg} ${X.text}`,children:v.amount>0?M(v.amount):"R$ -"}),e.jsx(Ra,{className:"w-3 h-3 text-slate-300"})]})]},v.id)})}),e.jsx("div",{className:`p-2 border-t rounded-b-xl bg-white/40 dark:bg-slate-900/20 ${P.wrapper.split(" ")[2]}`,children:k===u.id?e.jsxs("div",{className:"space-y-2 p-1 animate-scale-in",children:[e.jsx("input",{autoFocus:!0,className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"T√≠tulo...",value:E,onChange:v=>O(v.target.value)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",className:"w-20 p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"R$",value:_,onChange:v=>$(v.target.value)}),e.jsx("div",{className:"flex-1 flex justify-end gap-1",children:vt.map(v=>e.jsx("button",{onClick:()=>L(v.value),className:`w-6 h-6 rounded-full border-2 ${h===v.value?"border-slate-500 scale-110":"border-transparent"} ${v.bg.split(" ")[0]}`},v.value))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(null),className:"flex-1 py-1 text-xs text-slate-500 bg-slate-200 rounded",children:"Cancelar"}),e.jsx("button",{onClick:()=>x(u.id),className:`flex-1 py-1 text-xs text-white rounded font-bold ${P.addButtonBg}`,children:"Adicionar"})]})]}):e.jsxs("button",{onClick:()=>p(u.id),className:`w-full py-2 flex items-center justify-center gap-1 rounded-lg transition-colors text-sm font-medium ${P.button}`,children:[e.jsx(ie,{className:"w-4 h-4"})," Adicionar Card"]})})]},u.id)})})})]})},Fe=[{value:"yellow",bg:"bg-amber-100 dark:bg-amber-900/40",border:"border-amber-200 dark:border-amber-800"},{value:"slate",bg:"bg-white dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"},{value:"green",bg:"bg-emerald-100 dark:bg-emerald-900/40",border:"border-emerald-200 dark:border-emerald-800"},{value:"blue",bg:"bg-blue-100 dark:bg-blue-900/40",border:"border-blue-200 dark:border-blue-800"},{value:"rose",bg:"bg-rose-100 dark:bg-rose-900/40",border:"border-rose-200 dark:border-rose-800"},{value:"purple",bg:"bg-purple-100 dark:bg-purple-900/40",border:"border-purple-200 dark:border-purple-800"}],gl=({notes:t,onAdd:r,onUpdate:n,onDelete:l,privacyMode:i})=>{var _,$;const[j,m]=c.useState(""),[T,w]=c.useState(!1),[A,R]=c.useState(null),[y,I]=c.useState({title:"",content:"",color:"slate",isPinned:!1}),k=t.filter(h=>h.title.toLowerCase().includes(j.toLowerCase())||h.content.toLowerCase().includes(j.toLowerCase())).sort((h,L)=>h.isPinned!==L.isPinned?h.isPinned?-1:1:new Date(L.date).getTime()-new Date(h.date).getTime()),p=h=>{h?(R(h.id),I({title:h.title,content:h.content,color:h.color,isPinned:h.isPinned})):(R(null),I({title:"",content:"",color:"slate",isPinned:!1})),w(!0)},E=h=>{h.preventDefault(),!(!y.title.trim()&&!y.content.trim())&&(A?n(A,{title:y.title,content:y.content,color:y.color,isPinned:y.isPinned}):r({title:y.title,content:y.content,color:y.color,isPinned:y.isPinned,date:new Date().toISOString()}),w(!1))},O=(h,L)=>{h.stopPropagation(),n(L.id,{isPinned:!L.isPinned})};return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Te,{className:"w-7 h-7 text-indigo-600"}),"NEXO Notes"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Registre ideias, lembretes e tarefas rapidamente."})]}),e.jsxs("div",{className:"flex w-full md:w-auto gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative group md:w-64",children:[e.jsx(yt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar notas...",value:j,onChange:h=>m(h.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-sm transition-all shadow-sm"})]}),e.jsxs("button",{onClick:()=>p(),className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2.5 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/20 font-bold text-sm",children:[e.jsx(ie,{className:"w-4 h-4"})," Nova Nota"]})]})]}),e.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4 space-y-4",children:k.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400 flex flex-col items-center",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-4 rounded-full mb-3",children:e.jsx(Te,{className:"w-8 h-8 opacity-50"})}),e.jsx("p",{children:"Nenhuma nota encontrada."})]}):k.map(h=>{const L=Fe.find(C=>C.value===h.color)||Fe[1];return e.jsxs("div",{onClick:()=>p(h),className:`break-inside-avoid rounded-xl p-5 shadow-sm border transition-all hover:shadow-md cursor-pointer group relative ${L.bg} ${L.border}`,children:[e.jsx("button",{onClick:C=>O(C,h),className:`absolute top-3 right-3 p-1.5 rounded-full transition-colors z-10 ${h.isPinned?"bg-slate-900/10 dark:bg-white/10 text-indigo-600 dark:text-indigo-400":"opacity-0 group-hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/10 text-slate-400"}`,children:h.isPinned?e.jsx(bt,{className:"w-3 h-3 fill-current"}):e.jsx(bt,{className:"w-3 h-3"})}),h.title&&e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2 pr-6",children:h.title}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:h.content}),e.jsxs("div",{className:"mt-4 flex justify-between items-center pt-2 border-t border-black/5 dark:border-white/5 opacity-60 group-hover:opacity-100 transition-opacity",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),new Date(h.date).toLocaleDateString("pt-BR")]}),e.jsx("button",{onClick:C=>{C.stopPropagation(),l(h.id)},className:"p-1 hover:text-rose-500 transition-colors",children:e.jsx(ve,{className:"w-3.5 h-3.5"})})]})]},h.id)})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsx("div",{className:`rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-scale-in border transition-colors ${((_=Fe.find(h=>h.value===y.color))==null?void 0:_.bg)||"bg-white dark:bg-slate-800"} ${(($=Fe.find(h=>h.value===y.color))==null?void 0:$.border)||"border-slate-200"}`,children:e.jsxs("form",{onSubmit:E,className:"flex flex-col h-full max-h-[90vh]",children:[e.jsxs("div",{className:"p-2 flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-1",children:Fe.map(h=>e.jsx("button",{type:"button",onClick:()=>I({...y,color:h.value}),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 ${h.value===y.color?"border-indigo-500 scale-110":"border-transparent"} ${h.bg.split(" ")[0]==="bg-white"?"bg-slate-200":h.bg.split(" ")[0]}`},h.value))}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>I({...y,isPinned:!y.isPinned}),className:`p-2 rounded-full transition-colors ${y.isPinned?"text-indigo-600 bg-indigo-500/10":"text-slate-400 hover:bg-black/5"}`,title:"Fixar nota",children:y.isPinned?e.jsx(bt,{className:"w-5 h-5 fill-current"}):e.jsx($a,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>w(!1),className:"p-2 text-slate-500 hover:bg-black/5 rounded-full",children:e.jsx(ne,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"px-6 pb-2",children:e.jsx("input",{type:"text",placeholder:"T√≠tulo",value:y.title,onChange:h=>I({...y,title:h.target.value}),className:"w-full text-xl font-bold bg-transparent border-none outline-none placeholder:text-slate-400 dark:placeholder:text-slate-500 text-slate-800 dark:text-white"})}),e.jsx("div",{className:"px-6 pb-6 flex-1 overflow-y-auto",children:e.jsx("textarea",{placeholder:"Digite sua nota aqui...",value:y.content,onChange:h=>I({...y,content:h.target.value}),className:"w-full h-64 bg-transparent border-none outline-none resize-none text-slate-700 dark:text-slate-200 placeholder:text-slate-400 dark:placeholder:text-slate-500"})}),e.jsx("div",{className:"p-4 flex justify-end border-t border-black/5 dark:border-white/5",children:e.jsx("button",{type:"submit",className:"px-6 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-lg font-bold shadow-md hover:opacity-90 transition-opacity",children:"Salvar"})})]})})})]})},Je=["Hortifruti","Carnes","Latic√≠nios","Mercearia","Padaria","Bebidas","Limpeza","Higiene","Outros"],pl=({items:t,onAdd:r,onUpdate:n,onDelete:l,onClearList:i,onFinishShopping:j,shoppingBudget:m=0,onUpdateBudget:T,hasApiKey:w=!1,privacyMode:A,quickActionSignal:R})=>{const[y,I]=c.useState(""),[k,p]=c.useState("Outros"),[E,O]=c.useState(!1),[_,$]=c.useState(!1),[h,L]=c.useState(""),[C,V]=c.useState(!1),[q,D]=c.useState(!1),[F,H]=c.useState(m.toString()),[K,Y]=c.useState("Alimentos"),[W,re]=c.useState("debit_card"),Q=c.useMemo(()=>t.reduce((o,g)=>o+g.actualPrice*g.quantity,0),[t]),b=c.useMemo(()=>{const o={};return Je.forEach(g=>o[g]=[]),t.forEach(g=>{const P=g.category||"Outros";o[P]||(o[P]=[]),o[P].push(g)}),o},[t]);c.useEffect(()=>{if(R){const o=document.getElementById("new-item-input");o&&o.focus()}},[R]);const x=o=>{o.preventDefault(),y.trim()&&(r({name:y.trim(),quantity:1,actualPrice:0,isChecked:!1,category:k}),I(""),p("Outros"))},s=async o=>{if(o.preventDefault(),!h.trim())return;V(!0),(await Pr(h)).forEach(P=>{r({...P,actualPrice:0,isChecked:!1})}),V(!1),$(!1),L("")},a=(o,g,P)=>{const v=Math.max(1,g+P);n(o,{quantity:v})},d=()=>{if(Q===0){alert("O valor total est√° zerado. Adicione pre√ßos aos itens para lan√ßar a despesa.");return}j(Q,W,K),O(!1)},S=()=>{const o=parseFloat(F);isNaN(o)||T(o),D(!1)},M=o=>A?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,f=m>0?Q/m*100:0;let u="bg-emerald-500";return f>100?u="bg-rose-500":f>85&&(u="bg-amber-500"),e.jsxs("div",{className:"space-y-6 animate-fade-in relative pb-32 md:pb-0",children:[E&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 border border-emerald-500/30 animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(rt,{className:"w-6 h-6 text-emerald-500"})," Finalizar Compra"]}),e.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-xl mb-6 text-center border border-emerald-100 dark:border-emerald-800",children:[e.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 uppercase font-bold mb-1",children:"Valor Final a Lan√ßar"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-700 dark:text-emerald-300",children:M(Q)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Categoria da Despesa"}),e.jsxs("select",{value:K,onChange:o=>Y(o.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"Alimentos",children:"Alimentos"}),e.jsx("option",{value:"Casa",children:"Casa"}),e.jsx("option",{value:"Lazer",children:"Lazer"}),e.jsx("option",{value:"Pets",children:"Pets"}),e.jsx("option",{value:"Outros",children:"Outros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Forma de Pagamento"}),e.jsxs("select",{value:W,onChange:o=>re(o.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"credit_card",children:"Cart√£o de Cr√©dito"}),e.jsx("option",{value:"debit_card",children:"Cart√£o de D√©bito"}),e.jsx("option",{value:"cash",children:"Dinheiro"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"ticket",children:"Vale Alimenta√ß√£o/Refei√ß√£o"})]})]}),e.jsxs("button",{onClick:d,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2 mt-4",children:[e.jsx(At,{className:"w-5 h-5"})," Confirmar e Lan√ßar"]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-purple-200 dark:border-purple-800 animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-purple-600"})," Assistente de Compras"]}),e.jsx("button",{onClick:()=>$(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-4",children:'O que vamos comprar? Digite uma receita (ex: "Strogonoff para 4") ou um evento (ex: "Churrasco fim de semana") e eu gero a lista.'}),e.jsxs("form",{onSubmit:s,children:[e.jsx("input",{autoFocus:!0,type:"text",value:h,onChange:o=>L(o.target.value),placeholder:"Ex: Ingredientes para bolo de cenoura...",className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-purple-500 mb-4"}),e.jsxs("button",{type:"submit",disabled:C||!h,className:"w-full py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold shadow-md disabled:opacity-50 flex items-center justify-center gap-2",children:[C?e.jsx("span",{className:"animate-spin",children:"‚è≥"}):e.jsx(Pa,{className:"w-5 h-5"}),"Gerar Lista"]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ot,{className:"w-7 h-7 text-indigo-600"}),"Lista de Compras"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Organize sua ida ao mercado."})]}),e.jsxs("button",{onClick:()=>$(!0),disabled:!w,className:`hidden md:flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-xs uppercase tracking-wide transition-all shadow-sm ${w?"bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900/30 dark:text-purple-300":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[e.jsx(Ae,{className:"w-4 h-4"})," Gerar com IA"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-slate-400 tracking-wider mb-1",children:"Total Calculado"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:M(Q)})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[10px] font-bold uppercase text-slate-400 tracking-wider mb-1 flex items-center justify-end gap-1 cursor-pointer hover:text-indigo-500",onClick:()=>{D(!0),H(m.toString())},children:["Teto de Gastos (Viagem) ",e.jsx(Cs,{className:"w-3 h-3"})]}),q?e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500",children:"R$"}),e.jsx("input",{autoFocus:!0,type:"number",className:"w-24 p-1 text-right font-bold border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:F,onChange:o=>H(o.target.value),onKeyDown:o=>o.key==="Enter"&&S(),onBlur:S})]}):e.jsx("p",{className:"text-xl font-bold text-slate-600 dark:text-slate-400 cursor-pointer hover:text-indigo-500",onClick:()=>{D(!0),H(m.toString())},children:m>0?M(m):"Definir Teto"})]})]}),m>0&&e.jsxs("div",{className:"relative w-full h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:[e.jsx("div",{className:`h-full transition-all duration-500 ${u}`,style:{width:`${Math.min(100,f)}%`}}),f>100&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-[9px] font-bold text-white drop-shadow-md animate-pulse flex items-center gap-1",children:[e.jsx(nt,{className:"w-3 h-3"})," ACIMA DO OR√áAMENTO"]})})]})]})]}),e.jsxs("form",{onSubmit:x,className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 flex gap-2",children:[e.jsx("input",{id:"new-item-input",type:"text",value:y,onChange:o=>I(o.target.value),placeholder:"Adicionar item...",className:"flex-1 p-3 pl-4 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm",autoComplete:"off"}),e.jsx("select",{value:k,onChange:o=>p(o.target.value),className:"hidden md:block w-32 p-3 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm",children:Je.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsx("button",{type:"submit",disabled:!y.trim(),className:"px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(ie,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"md:hidden overflow-x-auto pb-2 -mt-4",children:e.jsx("div",{className:"flex gap-2 px-1",children:Je.map(o=>e.jsx("button",{type:"button",onClick:()=>p(o),className:`px-3 py-1.5 rounded-full text-xs font-bold border whitespace-nowrap ${k===o?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-800 text-slate-500 border-slate-200 dark:border-slate-700"}`,children:o},o))})}),e.jsx("div",{className:"space-y-6",children:t.length===0?e.jsxs("div",{className:"p-12 text-center text-slate-400 flex flex-col items-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx(ot,{className:"w-16 h-16 mb-4 opacity-20"}),e.jsx("p",{children:"Sua lista est√° vazia."}),w&&e.jsx("p",{className:"text-sm mt-2 text-purple-500 cursor-pointer hover:underline",onClick:()=>$(!0),children:"Experimente usar a IA para criar uma lista!"})]}):Je.map(o=>{const g=b[o];return!g||g.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 px-4 py-2 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Ma,{className:"w-3 h-3"})," ",o]}),e.jsx("span",{className:"text-[10px] font-bold bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-1.5 py-0.5 rounded-full",children:g.length})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:g.map(P=>e.jsxs("div",{className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-colors ${P.isChecked?"bg-slate-50/50 dark:bg-slate-700/30":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:()=>n(P.id,{isChecked:!P.isChecked}),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all flex-shrink-0 ${P.isChecked?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent hover:border-emerald-400"}`,children:e.jsx(At,{className:"w-4 h-4"})}),e.jsx("span",{className:`font-medium text-lg truncate ${P.isChecked?"text-slate-400 line-through":"text-slate-700 dark:text-slate-200"}`,children:P.name})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>a(P.id,P.quantity,-1),className:"p-1.5 text-slate-500 hover:text-indigo-600",children:e.jsx(Oa,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-bold text-slate-700 dark:text-white text-sm",children:P.quantity}),e.jsx("button",{onClick:()=>a(P.id,P.quantity,1),className:"p-1.5 text-slate-500 hover:text-indigo-600",children:e.jsx(ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0,00",value:P.actualPrice===0?"":P.actualPrice,onChange:v=>n(P.id,{actualPrice:parseFloat(v.target.value)||0}),className:`w-24 pl-8 pr-2 py-2 rounded-lg border outline-none font-bold text-right transition-colors ${P.actualPrice>0?"border-emerald-300 dark:border-emerald-700 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400":"border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:border-indigo-500"}`})]}),e.jsx("button",{onClick:()=>l(P.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]})]},P.id))})]},o)})}),e.jsxs("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 md:hidden z-30 flex gap-2 w-[90%] max-w-sm",children:[e.jsx("button",{onClick:()=>$(!0),disabled:!w,className:"bg-white dark:bg-slate-800 text-purple-600 p-4 rounded-full shadow-lg border border-purple-100 dark:border-purple-900 disabled:opacity-50",children:e.jsx(Ae,{className:"w-6 h-6"})}),e.jsxs("button",{onClick:()=>O(!0),disabled:t.length===0,className:"flex-1 bg-slate-900 text-white rounded-full shadow-xl font-bold flex items-center justify-between px-6 hover:scale-105 transition-transform disabled:opacity-70 disabled:scale-100",children:[e.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[e.jsx("span",{className:"text-[10px] text-emerald-400 uppercase font-bold",children:"Total"}),e.jsx("span",{className:"text-lg",children:M(Q)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm bg-white/10 px-3 py-1.5 rounded-lg",children:["Finalizar ",e.jsx(xt,{className:"w-4 h-4"})]})]})]})]})},bl=({currentView:t,onNavigate:r,data:n,actions:l,privacyMode:i,hasApiKey:j,quickActionSignal:m})=>{const T=async(A,R,y)=>{const I={description:`Compra de Mercado (${new Date().toLocaleDateString()})`,amount:A,type:"expense",category:y,date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:R,isRecurring:!1};await l.addTransaction(I),await l.clearShoppingList(),alert("Compra finalizada! Despesa registrada com sucesso."),r(z.TRANSACTIONS)},w=[{id:z.KANBAN,label:"NEXO Flow",icon:Pt},{id:z.NOTES,label:"NEXO Notes",icon:Te},{id:z.SHOPPING_LIST,label:"Lista de Compras",icon:ot}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Ferramentas de Organiza√ß√£o"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:w.map(A=>{const R=t===A.id;return e.jsxs("button",{onClick:()=>r(A.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-2 md:px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${R?"bg-purple-600 border-purple-600 text-white shadow-lg shadow-purple-500/30 scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:border-purple-300 dark:hover:border-purple-500 hover:bg-slate-50 dark:hover:bg-slate-700"}
                `,children:[e.jsx(A.icon,{className:`w-5 h-5 ${R?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"text-xs md:text-sm text-center md:text-left",children:A.label})]},A.id)})})]}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===z.KANBAN&&e.jsx(hl,{boards:n.kanbanBoards||[],onSaveBoard:l.saveKanbanBoard,onDeleteBoard:l.deleteKanbanBoard,onAddTransaction:A=>{l.addTransaction(A),alert("Transa√ß√£o criada a partir do card!"),r(z.TRANSACTIONS)},privacyMode:i}),t===z.NOTES&&e.jsx(gl,{notes:n.notes||[],onAdd:l.addNote,onUpdate:l.updateNote,onDelete:l.deleteNote,privacyMode:i}),t===z.SHOPPING_LIST&&e.jsx(pl,{items:n.shoppingList||[],onAdd:l.addShoppingItem,onUpdate:l.updateShoppingItem,onDelete:l.deleteShoppingItem,onClearList:l.clearShoppingList,onFinishShopping:T,shoppingBudget:n.shoppingBudget,onUpdateBudget:l.setShoppingBudget,hasApiKey:j,privacyMode:i,quickActionSignal:m})]})]})},ps="028.268.001-24",fl="Alexandre Magno dos Santos Linhares",jl=()=>{const[t,r]=c.useState(null),[n,l]=c.useState(!1),[i,j]=c.useState(!0),{data:m,setData:T,actions:w}=Wr(t,n),[A,R]=c.useState(z.DASHBOARD),[y,I]=c.useState(!1),[k,p]=c.useState(!1),[E,O]=c.useState(!1),[_,$]=c.useState(!1),[h,L]=c.useState(null),[C,V]=c.useState(0),[q,D]=c.useState(!1),[F,H]=c.useState(""),[K,Y]=c.useState(!1),[W,re]=c.useState(!1),[Q,b]=c.useState(!1);c.useRef(null),c.useEffect(()=>{const U=ae=>{ae.preventDefault(),L(ae)};return window.addEventListener("beforeinstallprompt",U),()=>window.removeEventListener("beforeinstallprompt",U)},[]);const x=async()=>{if(!h)return;h.prompt();const{outcome:U}=await h.userChoice;L(null)};c.useEffect(()=>{const U=Ka(ge,async ae=>{if(r(ae),j(!1),ae){l(!1);const le=es("guest_user");le.transactions.length>0&&confirm("Encontramos dados no modo convidado. Deseja migrar para sua conta na nuvem?")&&(await as(ae.uid,le),localStorage.removeItem("finansmart_data_v2_guest_user"))}});return()=>U()},[]),c.useEffect(()=>{!i&&n&&rr(m,"guest_user")},[m,n,i]);const s=()=>{l(!0);const U=es("guest_user");T(U)},a=async()=>{n?(l(!1),T({transactions:[],investments:[],budgets:[],debts:[],shoppingList:[],unlockedBadges:[],kanbanColumns:[],kanbanBoards:[],notes:[],categories:[]})):await Ya(ge)};c.useEffect(()=>{Y(ns()),ns()&&H(Pe()||""),!localStorage.getItem("nexo_welcome_seen")&&(t||n)&&b(!0)},[t,n]);const d=()=>{F.trim()&&(ls(F.trim()),Y(!0),D(!1),alert("Chave API salva no seu navegador com sucesso!"))},S=()=>{$r(),H(""),Y(!1),D(!1)},M=()=>{F.trim()&&(ls(F.trim()),Y(!0)),localStorage.setItem("nexo_welcome_seen","true"),b(!1)},f=()=>{navigator.clipboard.writeText(ps),alert("Chave Pix copiada!")};c.useEffect(()=>{k?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[k]);const u=()=>{document.fullscreenElement?(document.exitFullscreen&&document.exitFullscreen(),O(!1)):(document.documentElement.requestFullscreen().catch(U=>console.error(U)),O(!0))},o=()=>{confirm(`‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os dados, configura√ß√µes e chave API deste navegador.

Deseja realmente resetar o app para o estado de f√°brica?`)&&(localStorage.clear(),window.location.reload())},g=()=>{const U=JSON.stringify(m),ae="data:application/json;charset=utf-8,"+encodeURIComponent(U),le=document.createElement("a");le.setAttribute("href",ae),le.setAttribute("download","nexo_backup.json"),le.click()},P=U=>{var de;const ae=(de=U.target.files)==null?void 0:de[0];if(!ae)return;const le=new FileReader;le.onload=async Me=>{var Ce;try{const ue=JSON.parse((Ce=Me.target)==null?void 0:Ce.result);confirm("Isso substituir√° seus dados atuais. Tem certeza?")&&(t?await as(t.uid,ue):T(ue),alert("Backup restaurado com sucesso!"))}catch{alert("Erro ao ler arquivo de backup.")}},le.readAsText(ae)},v=U=>{R(U),$(!1),setTimeout(()=>V(Date.now()),50)},X=()=>A===z.DASHBOARD?e.jsx(is,{data:m,privacyMode:y,onUnlockBadge:w.unlockBadge,onNavigate:U=>R(U)}):A===z.AI_ASSISTANT?e.jsx(zr,{data:m,privacyMode:y}):A===z.SETTINGS?e.jsx(Jr,{data:m,actions:w,privacyMode:y,setPrivacyMode:I,darkMode:k,setDarkMode:p,hasApiKey:K,onOpenKeyModal:()=>D(!0),onExportBackup:g,onImportBackup:P,onFactoryReset:o}):[z.TRANSACTIONS,z.CALENDAR,z.SUBSCRIPTIONS,z.DEBTS].includes(A)?e.jsx(il,{currentView:A,onNavigate:R,data:m,actions:w,privacyMode:y,hasApiKey:K,quickActionSignal:C}):[z.INVESTMENTS,z.BUDGETS,z.WEALTH_PLANNER].includes(A)?e.jsx(ul,{currentView:A,onNavigate:R,data:m,actions:w,privacyMode:y,hasApiKey:K,quickActionSignal:C}):[z.KANBAN,z.NOTES,z.SHOPPING_LIST].includes(A)?e.jsx(bl,{currentView:A,onNavigate:R,data:m,actions:w,privacyMode:y,hasApiKey:K,quickActionSignal:C}):e.jsx(is,{data:m,privacyMode:y,onUnlockBadge:w.unlockBadge,onNavigate:U=>R(U)});return i?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsx(ct,{className:"w-12 h-12 text-indigo-500 animate-spin"})}):!t&&!n?e.jsx(Lr,{onGuestLogin:s}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row font-sans text-slate-900 dark:text-slate-100 transition-colors duration-300",children:[_&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden backdrop-blur-sm animate-fade-in",onClick:()=>$(!1)}),e.jsx(Vr,{user:t,isGuest:n,mobileMenuOpen:_,setMobileMenuOpen:$,currentView:A,onNavigate:U=>R(U),onLogout:a,privacyMode:y,setPrivacyMode:I,darkMode:k,setDarkMode:p,isFullscreen:E,toggleFullscreen:u,hasKey:K,onOpenKeyModal:()=>D(!0),onOpenDonateModal:()=>re(!0),onExportBackup:g,onImportBackup:P,onFactoryReset:o,canInstall:!!h,onInstall:x}),e.jsxs("main",{className:"flex-1 p-4 md:p-8 pt-20 md:pt-8 pb-8 overflow-y-auto h-screen scroll-smooth",children:[e.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-slate-900 p-4 border-b border-slate-800 z-30 flex items-center justify-between shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>$(!0),className:"text-slate-300 hover:text-white p-1",children:e.jsx(Ba,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-indigo-600 p-1.5 rounded-lg",children:e.jsx(Et,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-bold text-white tracking-tight",children:"NEXO"})]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[h&&e.jsx("button",{onClick:x,className:"text-emerald-400 hover:text-white animate-pulse",title:"Instalar Aplicativo",children:e.jsx(Ns,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>D(!0),className:`${K?"text-emerald-400":"text-rose-500"} hover:text-white relative`,children:[e.jsx(Ke,{className:"w-5 h-5"}),!K&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2.5 w-2.5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-rose-500"})]})]})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto animate-fade-in",children:[A===z.DASHBOARD&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>v(z.TRANSACTIONS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-blue-100 dark:border-blue-900/30 hover:border-blue-300 transition-all group",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/40 p-2.5 rounded-lg group-hover:bg-blue-600 group-hover:text-white transition-colors text-blue-600 dark:text-blue-400",children:e.jsx(Dt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Nova"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Transa√ß√£o"})]})]}),e.jsxs("button",{onClick:()=>v(z.SHOPPING_LIST),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-emerald-100 dark:border-emerald-900/30 hover:border-emerald-300 transition-all group",children:[e.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/40 p-2.5 rounded-lg group-hover:bg-emerald-600 group-hover:text-white transition-colors text-emerald-600 dark:text-emerald-400",children:e.jsx(ot,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Calculadora"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Mercado"})]})]}),e.jsxs("button",{onClick:()=>v(z.DEBTS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-rose-100 dark:border-rose-900/30 hover:border-rose-300 transition-all group",children:[e.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/40 p-2.5 rounded-lg group-hover:bg-rose-600 group-hover:text-white transition-colors text-rose-600 dark:text-rose-400",children:e.jsx(ze,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Registrar"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"D√≠vida"})]})]}),e.jsxs("button",{onClick:()=>v(z.BUDGETS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-pink-100 dark:border-pink-900/30 hover:border-pink-300 transition-all group",children:[e.jsx("div",{className:"bg-pink-100 dark:bg-pink-900/40 p-2.5 rounded-lg group-hover:bg-pink-600 group-hover:text-white transition-colors text-pink-600 dark:text-pink-400",children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Definir"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Meta/Limite"})]})]})]}),X()]})]}),e.jsx(Gr,{showWelcome:Q,isDonateModalOpen:W,isKeyModalOpen:q,userKeyInput:F,hasKey:K,PIX_KEY:ps,PIX_NAME:fl,setShowWelcome:b,setIsDonateModalOpen:re,setIsKeyModalOpen:D,setUserKeyInput:H,handleSaveKey:d,handleRemoveKey:S,handleFinishWelcome:M,copyPix:f})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});const Ms=document.getElementById("root");if(!Ms)throw new Error("Could not find root element to mount to");const vl=Fa.createRoot(Ms);vl.render(e.jsx(La.StrictMode,{children:e.jsx(jl,{})}));
