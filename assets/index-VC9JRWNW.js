import{r as d,j as e,S as Ot,K as et,U as Zt,H as Ft,b as Dt,L as ft,d as Ss,C as De,e as As,f as Ds,B as Ye,P as ot,h as Lt,D as _t,i as Ks,k as Ys,l as It,m as He,W as zt,n as We,o as it,T as Ie,p as Le,q as jt,s as ct,t as ye,u as Be,v as Tt,w as Hs,x as Ws,M as Xs,y as Is,X as ue,z as Js,E as Qs,F as Zs,G as Vt,I as Ts,J as ea,N as Es,O as ta,Q as sa,V as xt,Y as Ut,Z as Nt,_ as aa,$ as ra,a0 as la,a1 as na,a2 as oa,a3 as ia,a4 as da,a5 as ge,a6 as Te,a7 as ca,a8 as Et,a9 as $s,aa as Gt,ab as Oe,ac as xa,ad as ma,ae as ua,af as kt,ag as qt,ah as ha,ai as $t,aj as yt,ak as ga,al as es,am as Rt,an as Rs,ao as pa,ap as Ps,aq as ba,ar as fa,as as mt,at as Xe,au as ja,av as ut,aw as Kt,ax as Pt,ay as Na,az as ts,aA as ss,aB as Ms,aC as lt,aD as va,aE as as,aF as ht,aG as wa,aH as Fe,aI as ka,aJ as ya,aK as Bs,aL as Ca,aM as Sa,aN as Aa,aO as Mt,aP as Yt,aQ as Da,aR as Ia,aS as Ta,aT as Ea,aU as rs,aV as $a,aW as Ra,aX as ls,aY as ns,aZ as Ct,a_ as Pa,a$ as Ma,b0 as gt,b1 as Ba,b2 as Oa,b3 as Fa,b4 as La,R as _a}from"./vendor-react-DGc8Q3bp.js";import{i as za,g as Va,a as Ua,q as Ke,l as Ga,o as St,c as Ne,b as we,d as ee,e as Os,u as Ve,w as Ht,r as Wt,s as ve,f as Re,h as qa,j as Ka,G as Bt,k as Fs,m as Ya,n as Ha}from"./vendor-firebase-BCXYnKdj.js";import{G as tt}from"./vendor-genai-U-FmSb1B.js";import{R as Ee,P as Ls,a as _s,C as vt,T as $e,L as pt,b as Wa,c as Je,X as Qe,Y as Ze,d as Xa,B as Xt,e as bt,f as zs,A as Ja,g as Qa,h as Za,i as er,j as tr,k as sr,l as os}from"./vendor-recharts-BbrzLA2n.js";import"./vendor-utils-iyFZE6bj.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function n(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(o){if(o.ep)return;o.ep=!0;const f=n(o);fetch(o.href,f)}})();var U=(t=>(t.DASHBOARD="DASHBOARD",t.TRANSACTIONS="TRANSACTIONS",t.INVESTMENTS="INVESTMENTS",t.BUDGETS="BUDGETS",t.SUBSCRIPTIONS="SUBSCRIPTIONS",t.CALENDAR="CALENDAR",t.AI_ASSISTANT="AI_ASSISTANT",t.DEBTS="DEBTS",t.SHOPPING_LIST="SHOPPING_LIST",t.WEALTH_PLANNER="WEALTH_PLANNER",t.KANBAN="KANBAN",t.NOTES="NOTES",t.SETTINGS="SETTINGS",t))(U||{});const ar={apiKey:"AIzaSyAp9vMuLIhE-W8sEVpuzSWr7vvRHOu1pSc",authDomain:"nexo-bbbe5.firebaseapp.com",projectId:"nexo-bbbe5",storageBucket:"nexo-bbbe5.firebasestorage.app",messagingSenderId:"133978874707",appId:"1:133978874707:web:ba5e00d4c5e35b3c5df7a6"},Vs=za(ar),ke=Va(Vs),K=Ua(Vs,{ignoreUndefinedProperties:!0}),rr="finansmart_data_v2",st=[{id:"cat_salario",name:"Sal√°rio",type:"income",color:"emerald",isDefault:!0},{id:"cat_renda_extra",name:"Renda Extra",type:"income",color:"blue",isDefault:!0},{id:"cat_investimentos_in",name:"Investimentos",type:"income",color:"indigo",isDefault:!0},{id:"cat_casa",name:"Casa",type:"expense",color:"orange",isDefault:!0},{id:"cat_mobilidade",name:"Mobilidade",type:"expense",color:"blue",isDefault:!0},{id:"cat_alimentos",name:"Alimentos",type:"expense",color:"red",isDefault:!0},{id:"cat_lazer",name:"Lazer",type:"expense",color:"purple",isDefault:!0},{id:"cat_saude",name:"Sa√∫de",type:"expense",color:"teal",isDefault:!0},{id:"cat_educacao",name:"Educa√ß√£o",type:"expense",color:"yellow",isDefault:!0},{id:"cat_pets",name:"Pets",type:"expense",color:"amber",isDefault:!0},{id:"cat_outros",name:"Outros",type:"expense",color:"slate",isDefault:!0}],is={transactions:[],categories:st,investments:[],budgets:[],debts:[],shoppingList:[],shoppingBudget:0,kanbanColumns:[],kanbanBoards:[],notes:[],unlockedBadges:[],walletBalance:0},Us=t=>`${rr}_${t}`,ds=t=>{try{const r=Us(t),n=localStorage.getItem(r);if(!n)return is;const l=JSON.parse(n);return l.transactions||(l.transactions=[]),l.investments||(l.investments=[]),l.unlockedBadges||(l.unlockedBadges=[]),l.debts||(l.debts=[]),l.shoppingList||(l.shoppingList=[]),l.kanbanColumns||(l.kanbanColumns=[]),l.kanbanBoards||(l.kanbanBoards=[]),l.notes||(l.notes=[]),(!l.categories||l.categories.length===0)&&(l.categories=st),l.shoppingBudget===void 0&&(l.shoppingBudget=0),l.budgets?l.budgets=l.budgets.map(o=>({...o,isRecurring:o.isRecurring!==void 0?o.isRecurring:!0,month:o.month||void 0})):l.budgets=[],l.walletBalance===void 0&&(l.walletBalance=l.transactions.reduce((o,f)=>f.status==="paid"?o+(f.type==="income"?f.amount:-f.amount):o,0)),l}catch(r){return console.error("Failed to load data",r),is}},lr=(t,r)=>{try{const n=Us(r),l=t.transactions.reduce((f,m)=>m.status==="paid"?f+(m.type==="income"?m.amount:-m.amount):f,0),o={...t,walletBalance:l};localStorage.setItem(n,JSON.stringify(o))}catch(n){console.error("Failed to save data",n)}},_e=t=>t.status==="pending"?0:t.type==="income"?t.amount:-t.amount,nr=(t,r)=>{const n=Ke(Ne(K,"users",t,"transactions"),St("date","desc"),Ga(300)),l=we(n,v=>{const g=v.docs.map(E=>E.data());r({transactions:g})}),o=we(Ne(K,"users",t,"investments"),v=>{const g=v.docs.map(E=>E.data());r({investments:g})}),f=we(Ne(K,"users",t,"budgets"),v=>{const g=v.docs.map(E=>E.data());r({budgets:g})}),m=we(Ne(K,"users",t,"debts"),v=>{const g=v.docs.map(E=>E.data());r({debts:g})}),I=we(Ne(K,"users",t,"shopping_list"),v=>{const g=v.docs.map(E=>E.data());r({shoppingList:g})}),N=we(Ke(Ne(K,"users",t,"kanban_columns"),St("order")),v=>{const g=v.docs.map(E=>E.data());r({kanbanColumns:g})}),C=we(Ne(K,"users",t,"kanban_boards"),v=>{const g=v.docs.map(E=>E.data());r({kanbanBoards:g})}),P=we(Ke(Ne(K,"users",t,"notes"),St("date","desc")),v=>{const g=v.docs.map(E=>E.data());r({notes:g})}),w=we(Ne(K,"users",t,"categories"),v=>{const g=v.docs.map(E=>E.data());g.length>0?r({categories:g}):Er(t)}),S=we(ee(K,"users",t),v=>{if(v.exists()){const g=v.data(),E={};g.unlockedBadges&&(E.unlockedBadges=g.unlockedBadges),g.wealthProfile&&(E.wealthProfile=g.wealthProfile),g.shoppingBudget!==void 0&&(E.shoppingBudget=g.shoppingBudget),g.walletBalance!==void 0&&(E.walletBalance=g.walletBalance),Object.keys(E).length>0&&r(E)}});return()=>{l(),o(),f(),m(),I(),N(),C(),P(),w(),S()}},cs=async(t,r)=>{await Wt(K,async n=>{var N;const l=ee(K,"users",t),f=((N=(await n.get(l)).data())==null?void 0:N.walletBalance)||0,m=_e(r),I=ee(K,"users",t,"transactions",r.id);n.set(I,r),n.update(l,{walletBalance:f+m})})},dt=async(t,r,n)=>{await Wt(K,async l=>{var v;const o=ee(K,"users",t,"transactions",r),f=ee(K,"users",t),m=await l.get(o);if(!m.exists())throw new Error("Transaction not found");const I=m.data(),C=((v=(await l.get(f)).data())==null?void 0:v.walletBalance)||0,P=_e(I),w={...I,...n},S=_e(w);l.update(o,n),l.update(f,{walletBalance:C-P+S})})},or=async(t,r)=>{await Wt(K,async n=>{var P;const l=ee(K,"users",t,"transactions",r),o=ee(K,"users",t),f=await n.get(l);if(!f.exists())throw new Error("Transaction not found");const m=f.data(),N=((P=(await n.get(o)).data())==null?void 0:P.walletBalance)||0,C=_e(m);n.delete(l),n.update(o,{walletBalance:N-C})})},ir=async t=>{const r=Ke(Ne(K,"users",t,"transactions")),n=await Os(r);let l=0;return n.forEach(o=>{const f=o.data();l+=_e(f)}),await Ve(ee(K,"users",t),{walletBalance:l}),l},dr=async(t,r)=>{await ve(ee(K,"users",t,"investments",r.id),r)},cr=async(t,r,n)=>{await Ve(ee(K,"users",t,"investments",r),n)},xr=async(t,r)=>{await Re(ee(K,"users",t,"investments",r))},mr=async(t,r)=>{await ve(ee(K,"users",t,"budgets",r.id),r)},ur=async(t,r,n)=>{await Ve(ee(K,"users",t,"budgets",r),n)},hr=async(t,r)=>{await Re(ee(K,"users",t,"budgets",r))},gr=async(t,r)=>{await ve(ee(K,"users",t,"debts",r.id),r)},xs=async(t,r,n)=>{await Ve(ee(K,"users",t,"debts",r),n)},pr=async(t,r)=>{await Re(ee(K,"users",t,"debts",r))},br=async(t,r)=>{await ve(ee(K,"users",t,"shopping_list",r.id),r)},fr=async(t,r,n)=>{await Ve(ee(K,"users",t,"shopping_list",r),n)},jr=async(t,r)=>{await Re(ee(K,"users",t,"shopping_list",r))},Nr=async t=>{const r=Ke(Ne(K,"users",t,"shopping_list")),n=await Os(r),l=Ht(K);n.docs.forEach(o=>{l.delete(o.ref)}),await l.commit()},vr=async(t,r)=>{await ve(ee(K,"users",t),{shoppingBudget:r},{merge:!0})},wr=async(t,r)=>{await ve(ee(K,"users",t,"kanban_columns",r.id),r)},kr=async(t,r)=>{await Re(ee(K,"users",t,"kanban_columns",r))},yr=async(t,r)=>{await ve(ee(K,"users",t,"kanban_boards",r.id),r)},Cr=async(t,r)=>{await Re(ee(K,"users",t,"kanban_boards",r))},Sr=async(t,r)=>{await ve(ee(K,"users",t,"notes",r.id),r)},Ar=async(t,r,n)=>{await Ve(ee(K,"users",t,"notes",r),n)},Dr=async(t,r)=>{await Re(ee(K,"users",t,"notes",r))},Ir=async(t,r)=>{await ve(ee(K,"users",t,"categories",r.id),r)},Tr=async(t,r)=>{await Re(ee(K,"users",t,"categories",r))},Er=async t=>{const r=Ht(K);st.forEach(n=>{const l=ee(K,"users",t,"categories",n.id);r.set(l,n)}),await r.commit()},$r=async(t,r,n)=>{n.includes(r)||await ve(ee(K,"users",t),{unlockedBadges:[...n,r]},{merge:!0})},Rr=async(t,r)=>{await ve(ee(K,"users",t),{wealthProfile:r},{merge:!0})},ms=async(t,r)=>{const n=Ht(K);let l=0;r.transactions.forEach(I=>{const N=ee(K,"users",t,"transactions",I.id);n.set(N,I),l+=_e(I)}),r.investments.forEach(I=>{const N=ee(K,"users",t,"investments",I.id);n.set(N,I)}),r.budgets.forEach(I=>{const N=ee(K,"users",t,"budgets",I.id);n.set(N,I)}),r.debts.forEach(I=>{const N=ee(K,"users",t,"debts",I.id);n.set(N,I)}),r.shoppingList.forEach(I=>{const N=ee(K,"users",t,"shopping_list",I.id);n.set(N,I)}),r.kanbanColumns.forEach(I=>{const N=ee(K,"users",t,"kanban_columns",I.id);n.set(N,I)}),r.notes.forEach(I=>{const N=ee(K,"users",t,"notes",I.id);n.set(N,I)}),(r.categories&&r.categories.length>0?r.categories:st).forEach(I=>{const N=ee(K,"users",t,"categories",I.id);n.set(N,I)});const f=ee(K,"users",t),m={unlockedBadges:r.unlockedBadges,walletBalance:l,shoppingBudget:r.shoppingBudget||0};r.wealthProfile&&(m.wealthProfile=r.wealthProfile),n.set(f,m,{merge:!0}),await n.commit()},us=["Casa","Mobilidade","Alimentos","Lazer","Pets","Outros"],wt="nexo_user_api_key",Ue=()=>{const t=localStorage.getItem(wt);return t||null},hs=t=>{localStorage.setItem(wt,t)},Pr=()=>{localStorage.removeItem(wt)},gs=()=>!!localStorage.getItem(wt),Mr=async t=>{var o;const r=Ue();if(!r)return[];const n=new tt({apiKey:r}),l=`
    Voc√™ √© um assistente de compras inteligente.
    O usu√°rio vai pedir uma receita, evento ou lista gen√©rica.
    Gere uma lista de compras JSON com ingredientes/itens.
    
    CATEGORIAS PERMITIDAS: 'Hortifruti', 'Carnes', 'Latic√≠nios', 'Mercearia', 'Bebidas', 'Limpeza', 'Higiene', 'Padaria', 'Outros'.

    RESPONDA APENAS JSON V√ÅLIDO neste formato:
    [
      { "name": "Nome do item", "quantity": 1, "category": "Categoria" }
    ]
  `;try{const m=((o=(await n.models.generateContent({model:"gemini-3-flash-preview",contents:`Gere a lista para: ${t}`,config:{systemInstruction:l,responseMimeType:"application/json"}})).text)==null?void 0:o.trim())||"[]";return JSON.parse(m)}catch(f){return console.error("Erro ao gerar lista:",f),[]}},Br=async t=>{var o;const r=Ue();if(!r)return"Outros";const n=new tt({apiKey:r}),l=`Classifique "${t}" em: ${us.join(", ")}. Responda S√ì a categoria.`;try{const m=((o=(await n.models.generateContent({model:"gemini-3-flash-preview",contents:l})).text)==null?void 0:o.trim())||"Outros";return us.includes(m)?m:"Outros"}catch{return"Outros"}},Or=async t=>{var m,I,N;const r=Ue();if(!r)return{text:"Configure sua API Key nas prefer√™ncias para receber recomenda√ß√µes de investimentos.",sources:[]};const n=new tt({apiKey:r}),l=t.map(C=>`${C.name} (${C.type}): R$ ${C.amount}`).join(", "),f=`
    Voc√™ √© um consultor de investimentos s√™nior especialista no mercado brasileiro.
    Carteira Atual: R$ ${t.reduce((C,P)=>C+P.amount,0)} (${l||"Vazia"}).

    TAREFA:
    Encontre oportunidades REAIS e ATUAIS para diversifica√ß√£o.
    
    FORMATO OBRIGAT√ìRIO (Siga estritamente):
    
    ### üõ°Ô∏è Baixo Risco
    1. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]
    2. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]
    3. **[Nome]** - [Taxa/Pre√ßo] - [Motivo curto]

    ### ‚öñÔ∏è M√©dio Risco
    (3 op√ß√µes no mesmo formato)

    ### üöÄ Alto Risco
    (3 op√ß√µes no mesmo formato)

    ---SECTION-BREAK---

    ### üß† An√°lise T√©cnica
    (Sua an√°lise detalhada aqui sobre cen√°rio macro, infla√ß√£o e porqu√™s)
  `;try{const C=await n.models.generateContent({model:"gemini-3-flash-preview",contents:f,config:{tools:[{googleSearch:{}}]}}),P=[],w=(N=(I=(m=C.candidates)==null?void 0:m[0])==null?void 0:I.groundingMetadata)==null?void 0:N.groundingChunks;w&&w.forEach(v=>{v.web&&P.push({title:v.web.title||"Fonte Web",uri:v.web.uri||"#"})});const S=P.filter((v,g,E)=>E.findIndex(B=>B.uri===v.uri)===g);return{text:C.text||"N√£o foi poss√≠vel gerar recomenda√ß√µes no momento.",sources:S}}catch(C){console.warn("Google Search Grounding failed, retrying without search...",C);try{return{text:((await n.models.generateContent({model:"gemini-3-flash-preview",contents:f+`

(Nota: A pesquisa em tempo real falhou. Use seu conhecimento geral.)`})).text||"Sem resposta.")+`

‚ö†Ô∏è *Nota: O acesso √† pesquisa em tempo real falhou. As taxas mencionadas podem ser estimativas baseadas no conhecimento geral do modelo.*`,sources:[]}}catch(P){return console.error("Investment Advice Error (Fallback):",P),{text:`Erro ao consultar IA: ${P.message||"Erro desconhecido"}. Verifique sua chave API ou tente novamente mais tarde.`,sources:[]}}}},Fr=async(t,r,n)=>{var N;const l=Ue();if(!l)return null;const o=new tt({apiKey:l}),f=new Map;t.forEach(C=>{f.set(C.type,(f.get(C.type)||0)+C.amount)});const m=Array.from(f.entries()).map(([C,P])=>`${C}: R$ ${P.toFixed(2)}`).join(", "),I=`
      Atue como um Gestor de Private Banking. O cliente tem ${n} anos e perfil de risco: ${r.toUpperCase()}.
      
      Carteira Atual Agregada: ${m||"R$ 0,00 (Vazia)"}

      Sua tarefa √© analisar a aloca√ß√£o de ativos e sugerir o rebalanceamento ideal baseado nas melhores pr√°ticas de Wealth Management (como Bridgewater/Arta) adaptado ao Brasil.
      
      RETORNE APENAS JSON V√ÅLIDO. N√ÉO USE MARKDOWN. Siga este esquema:
      {
        "analysisText": "Par√°grafo curto (max 300 chars) com sua vis√£o macro sobre a carteira do cliente.",
        "currentAllocation": [ {"name": "Categoria", "value": %_atual (0-100)} ],
        "suggestedAllocation": [ {"name": "Categoria", "value": %_ideal (0-100)} ],
        "actionItems": [
           {"title": "A√ß√£o T√°tica", "type": "buy" | "sell" | "hold", "description": "Explica√ß√£o curta"}
        ]
      }
      
      Regras:
      1. 'suggestedAllocation' deve somar 100.
      2. Categorias sugeridas podem ser: 'Renda Fixa P√≥s', 'Renda Fixa Pr√©/IPCA', 'A√ß√µes Brasil', 'A√ß√µes Global', 'FIIs', 'Cripto/Alternativos', 'Reserva'.
      3. Se a carteira estiver vazia, sugira a aloca√ß√£o ideal do zero.
    `;try{const P=((N=(await o.models.generateContent({model:"gemini-3-flash-preview",contents:I,config:{responseMimeType:"application/json"}})).text)==null?void 0:N.trim())||"{}";return JSON.parse(P)}catch(C){return console.error("Wealth Analysis Error:",C),null}};async function*Lr(t,r,n){const l=Ue();if(!l){yield"Por favor, configure sua API Key nas prefer√™ncias do menu.";return}const o=new tt({apiKey:l}),f=n.transactions.filter(M=>M.type==="income").reduce((M,h)=>M+h.amount,0),m=n.transactions.filter(M=>M.type==="expense").reduce((M,h)=>M+h.amount,0),I=n.investments.reduce((M,h)=>M+h.amount,0),N=n.debts.reduce((M,h)=>M+h.currentAmount,0),C=n.transactions.sort((M,h)=>new Date(h.date).getTime()-new Date(M.date).getTime()).slice(0,30).map(M=>`- ${M.date}: ${M.description} (${M.type}) R$ ${M.amount} [${M.category}] Status: ${M.status}`).join(`
`),P=n.investments.map(M=>`- ${M.name} (${M.type}): R$ ${M.amount} (Meta: R$ ${M.targetAmount})`).join(`
`),w=n.debts.map(M=>`- ${M.creditor}: R$ ${M.currentAmount} (Status: ${M.status}, Vence: ${M.dueDate})`).join(`
`);let S="Neutro";N>I*2?S="Endividado (Foco em quita√ß√£o)":I>m*6?S="Investidor (Foco em otimiza√ß√£o)":f<m&&(S="D√©ficit (Foco em corte de gastos)");const v=`
    RELAT√ìRIO FINANCEIRO DO USU√ÅRIO (Contexto Interno):
    
    1. PERFIL IDENTIFICADO: ${S}
    2. RESUMO:
       - Renda Total: R$ ${f.toFixed(2)}
       - Despesas Totais: R$ ${m.toFixed(2)}
       - Saldo: R$ ${(f-m).toFixed(2)}
       - Total Investido: R$ ${I.toFixed(2)}
       - D√≠vidas Ativas: R$ ${N.toFixed(2)}
    3. √öLTIMAS TRANSA√á√ïES:
    ${C}
    4. INVESTIMENTOS:
    ${P}
    5. D√çVIDAS:
    ${w}
  `,g=`
    Voc√™ √© o NEXO AI, um assistente financeiro pessoal de elite.
    OBJETIVO: Ajudar o usu√°rio a gerenciar suas finan√ßas com base no perfil identificado: ${S}.
    CONTEXTO: ${v}
    DIRETRIZES:
    - Responda de forma concisa e amig√°vel.
    - Se o usu√°rio perguntar sobre o saldo, gastos espec√≠ficos ou investimentos, consulte o relat√≥rio acima.
    - Seja proativo: se vir uma d√≠vida vencendo ou gasto alto, pode alertar sutilmente.
    - Use Markdown para formatar valores e listas.
  `,E=o.chats.create({model:"gemini-3-flash-preview",config:{systemInstruction:g}}),z=`
    [Hist√≥rico Recente]:
    ${r.slice(-6).map(M=>`${M.role==="user"?"Usu√°rio":"Modelo"}: ${M.content}`).join(`
`)}
    
    [Nova Mensagem]: ${t}
  `;try{const M=await E.sendMessageStream({message:z});for await(const h of M)h.text&&(yield h.text)}catch(M){console.error(M),yield"Erro de conex√£o com o c√©rebro digital. Verifique sua Chave de API."}}const _r=({onGuestLogin:t})=>{const[r,n]=d.useState(!1),[l,o]=d.useState(""),[f,m]=d.useState(""),[I,N]=d.useState(""),[C,P]=d.useState(""),[w,S]=d.useState(!1),[v,g]=d.useState(!1),[E,B]=d.useState(!1),z="028.268.001-24",M="Alexandre Magno S. Linhares";d.useEffect(()=>{const D=ke.app.options.apiKey;(!D||D==="SUA_API_KEY_AQUI"||D.includes("SUA_API_KEY"))&&g(!0)},[]);const h=D=>{console.error(D);let G="Erro ao autenticar. Verifique suas credenciais.";D.code==="auth/email-already-in-use"&&(G="Este e-mail j√° est√° em uso."),D.code==="auth/invalid-email"&&(G="E-mail inv√°lido."),D.code==="auth/weak-password"&&(G="A senha deve ter pelo menos 6 caracteres."),(D.code==="auth/user-not-found"||D.code==="auth/wrong-password")&&(G="E-mail ou senha incorretos."),D.code==="auth/invalid-credential"&&(G="Credenciais inv√°lidas."),D.code==="auth/invalid-api-key"&&(G="Chave de API inv√°lida.",g(!0)),D.code==="auth/unauthorized-domain"?(G="Dom√≠nio n√£o autorizado pelo Firebase.",P(window.location.hostname)):P(""),N(G)},F=async D=>{D.preventDefault(),N(""),P(""),S(!0);try{r?await qa(ke,l,f):await Ka(ke,l,f)}catch(G){h(G)}finally{S(!1)}},k=async()=>{N(""),P(""),S(!0);const D=new Bt;D.addScope("https://www.googleapis.com/auth/calendar");try{await Fs(ke,D)}catch(G){h(G)}finally{S(!1)}},q=()=>{navigator.clipboard.writeText(C),alert("Dom√≠nio copiado!")},W=()=>{navigator.clipboard.writeText(z),B(!0),setTimeout(()=>B(!1),2e3)};return v?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden border border-slate-700 animate-scale-in flex flex-col md:flex-row",children:[e.jsxs("div",{className:"bg-indigo-600 p-8 text-white md:w-1/3 flex flex-col items-center justify-center text-center",children:[e.jsx(Ot,{className:"w-16 h-16 mb-4 opacity-80"}),e.jsx("h2",{className:"text-xl font-bold",children:"Configura√ß√£o Necess√°ria"}),e.jsx("p",{className:"text-indigo-100 text-sm mt-2",children:"Para usar o modo online, voc√™ precisa conectar seu Firebase."})]}),e.jsxs("div",{className:"p-8 md:w-2/3",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Siga estes passos:"}),e.jsxs("div",{className:"space-y-4 text-sm text-slate-600 dark:text-slate-300",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Crie o Banco de Dados"}),e.jsxs("p",{children:["No Console do Firebase, v√° em ",e.jsx("strong",{children:"Firestore Database"}),', clique em "Criar banco de dados", escolha a regi√£o (nam5) e clique em "Iniciar no modo de produ√ß√£o".']})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Ative o Login"}),e.jsxs("p",{children:["V√° em ",e.jsx("strong",{children:"Authentication"}),' > Sign-in method e ative "E-mail/senha".']})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded h-fit font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Copie as Chaves"}),e.jsxs("p",{children:['V√° nas Configura√ß√µes do Projeto (‚öôÔ∏è), role at√© "Seus aplicativos" e copie o objeto ',e.jsx("code",{children:"firebaseConfig"}),"."]})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-3 rounded-lg text-xs",children:[e.jsxs("p",{className:"font-bold text-amber-700 dark:text-amber-400 flex items-center gap-1",children:[e.jsx(et,{className:"w-3 h-3"})," A√ß√£o Necess√°ria no C√≥digo"]}),e.jsxs("p",{className:"mt-1",children:["Abra o arquivo ",e.jsx("code",{children:"services/firebase.ts"})," e substitua ",e.jsx("code",{children:'"SUA_API_KEY_AQUI"'})," pelos dados reais que voc√™ copiou."]})]})]}),e.jsxs("button",{onClick:t,className:"w-full mt-6 py-3 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4"}),"Pular e Usar Modo Offline (Convidado)"]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900 flex font-sans",children:[e.jsxs("div",{className:"w-full md:w-[45%] lg:w-[40%] flex flex-col justify-center p-8 md:p-12 lg:p-16 relative overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-10",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg shadow-lg shadow-indigo-500/30",children:e.jsx(Ft,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"NEXO"}),e.jsx("p",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-widest",children:"Financial Hub"})]})]}),e.jsxs("div",{className:"max-w-sm w-full mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:r?"Criar Conta":"Acesse sua Conta"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:r?"Comece a controlar suas finan√ßas hoje.":"Bem-vindo de volta! Por favor, insira seus dados."}),I&&e.jsxs("div",{className:"mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border-l-4 border-rose-500 rounded-r-lg flex flex-col gap-1 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 text-rose-700 dark:text-rose-400 font-semibold text-sm",children:[e.jsx(Dt,{className:"w-4 h-4"}),e.jsx("span",{children:I})]}),C&&e.jsxs("div",{className:"mt-2 pl-6",children:[e.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Dom√≠nio n√£o autorizado:"}),e.jsx("code",{className:"text-xs bg-white px-1 py-0.5 rounded border border-rose-200 block mb-2",children:C}),e.jsx("button",{onClick:q,className:"text-xs underline text-rose-600",children:"Copiar Dom√≠nio"})]})]}),e.jsxs("form",{onSubmit:F,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5",children:"E-mail"}),e.jsx("input",{type:"email",required:!0,value:l,onChange:D=>o(D.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-800 dark:text-white outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all placeholder:text-slate-400",placeholder:"nome@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5",children:"Senha"}),e.jsx("input",{type:"password",required:!0,minLength:6,value:f,onChange:D=>m(D.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-800 dark:text-white outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all placeholder:text-slate-400",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),!r&&e.jsx("div",{className:"flex justify-end mt-1",children:e.jsx("button",{type:"button",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"Esqueceu a senha?"})})]}),e.jsx("button",{type:"submit",disabled:w,className:"w-full py-3.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-2",children:w?e.jsx(ft,{className:"w-5 h-5 animate-spin"}):r?"Cadastrar":"Entrar"})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white dark:bg-slate-900 text-slate-400 font-medium",children:"ou continue com"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:k,disabled:w,className:"flex items-center justify-center gap-2 px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors font-medium text-slate-700 dark:text-slate-300 text-sm",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",color:"#4285F4"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",color:"#34A853"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",color:"#FBBC05"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",color:"#EA4335"})]}),"Google"]}),e.jsxs("button",{type:"button",onClick:t,className:"flex items-center justify-center gap-2 px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors font-medium text-slate-700 dark:text-slate-300 text-sm",children:[e.jsx(Zt,{className:"w-5 h-5 text-slate-500"}),"Convidado"]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:[r?"J√° √© cliente?":"Ainda n√£o tem conta?",e.jsx("button",{onClick:()=>n(!r),className:"ml-1 text-indigo-600 dark:text-indigo-400 font-bold hover:underline",children:r?"Fazer Login":"Cadastre-se gr√°tis"})]})}),e.jsx("div",{className:"mt-10 mb-4",children:e.jsxs("div",{onClick:W,className:"group relative overflow-hidden bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800 dark:to-indigo-900/20 border-2 border-dashed border-indigo-200 dark:border-indigo-700/50 hover:border-indigo-400 dark:hover:border-indigo-500 rounded-xl p-4 cursor-pointer hover:shadow-xl hover:shadow-indigo-500/10 transition-all transform hover:-translate-y-1",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-indigo-600 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl shadow-sm z-10",children:"Apoie o Dev ‚òï"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-0",children:[e.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-full group-hover:scale-110 transition-transform shadow-inner",children:e.jsx(Ss,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400 fill-indigo-200 dark:fill-indigo-900"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-indigo-800 dark:text-indigo-300 uppercase tracking-wide mb-1",children:"Gostou? Mande um Pix!"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/50 dark:bg-black/20 p-1.5 rounded-lg border border-indigo-100 dark:border-indigo-800/50",children:[e.jsx("p",{className:"text-sm font-mono font-bold text-slate-700 dark:text-slate-200 truncate select-all",children:z}),e.jsx("span",{className:"text-[9px] bg-indigo-200 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-200 px-1.5 rounded font-sans font-bold",children:"Chave CPF"})]})]}),e.jsx("div",{className:"text-indigo-300 group-hover:text-indigo-600 transition-colors",children:E?e.jsx(De,{className:"w-6 h-6 text-emerald-500"}):e.jsx(As,{className:"w-6 h-6"})})]}),E&&e.jsx("div",{className:"absolute inset-0 bg-indigo-900/90 backdrop-blur-sm flex items-center justify-center text-white font-bold rounded-xl animate-fade-in z-20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-emerald-400"}),"Chave Pix Copiada!"]})}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-2 text-center opacity-60 group-hover:opacity-100 transition-opacity",children:M})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("a",{href:"https://www.linkedin.com/in/alemagnobr/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-slate-400 hover:text-indigo-500 transition-colors inline-flex items-center gap-1",children:[e.jsx(Ds,{className:"w-3 h-3"})," Alexandre Magno"]})})]})]}),e.jsxs("div",{className:"hidden md:flex flex-1 relative bg-[#4c35de] overflow-hidden items-center justify-center p-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-white opacity-5 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/3"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-purple-400 opacity-10 rounded-full blur-[80px] translate-y-1/3 -translate-x-1/4"}),e.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsxs("div",{className:"relative z-10 w-full max-w-lg",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 shadow-2xl mb-12 transform hover:scale-[1.02] transition-transform duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/10 pb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs font-semibold uppercase",children:"Performance Visualisation"}),e.jsx("p",{className:"text-white text-lg font-bold mt-1",children:"Crescimento Patrimonial"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-300 rounded text-xs font-bold",children:"+6.9%"}),e.jsx("div",{className:"p-1 bg-white/10 rounded text-white/70",children:e.jsx(Ye,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"h-48 flex items-end justify-between gap-3 px-2",children:[35,55,45,70,60,85,75].map((D,G)=>e.jsxs("div",{className:"w-full bg-white/10 rounded-t-lg relative group overflow-hidden",style:{height:"100%"},children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-indigo-400 to-purple-300 rounded-t-lg transition-all duration-1000 group-hover:opacity-90",style:{height:`${D}%`}}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-white/30",style:{bottom:`${D}%`}})]},G))}),e.jsxs("div",{className:"flex justify-between mt-3 text-xs text-white/40 font-medium px-2",children:[e.jsx("span",{children:"Jan"}),e.jsx("span",{children:"Fev"}),e.jsx("span",{children:"Mar"}),e.jsx("span",{children:"Abr"}),e.jsx("span",{children:"Mai"}),e.jsx("span",{children:"Jun"}),e.jsx("span",{children:"Jul"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Bem-vindo de volta"}),e.jsxs("p",{className:"text-indigo-200 text-lg leading-relaxed",children:["Gerencie suas finan√ßas com intelig√™ncia, ",e.jsx("br",{}),"seguran√ßa e clareza total."]})]})]}),e.jsx("div",{className:"absolute top-8 right-8",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 backdrop-blur flex items-center justify-center border border-white/20 text-xl shadow-lg cursor-default",children:"üáßüá∑"})})]})]})},ps=[{id:"first_invest",name:"Investidor Iniciante",description:"Realizou o primeiro investimento.",icon:"üå±",condition:t=>t.investments.length>0,getProgress:t=>t.investments.length>0?100:0},{id:"controlled",name:"No Controle",description:"Tem mais receitas que despesas no m√™s.",icon:"‚öñÔ∏è",condition:t=>{const r=t.transactions.filter(l=>l.type==="income").reduce((l,o)=>l+o.amount,0),n=t.transactions.filter(l=>l.type==="expense").reduce((l,o)=>l+o.amount,0);return r>n&&r>0},getProgress:t=>{const r=t.transactions.filter(l=>l.type==="income").reduce((l,o)=>l+o.amount,0),n=t.transactions.filter(l=>l.type==="expense").reduce((l,o)=>l+o.amount,0);return r===0?0:r>n?100:Math.min(99,r/n*100)}},{id:"saver",name:"Poupador",description:"Acumulou mais de R$ 5.000 em investimentos.",icon:"üí∞",condition:t=>t.investments.reduce((r,n)=>r+n.amount,0)>=5e3,getProgress:t=>Math.min(100,t.investments.reduce((r,n)=>r+n.amount,0)/5e3*100)},{id:"diversified",name:"Mente Diversificada",description:"Investiu em 3 ou mais categorias diferentes.",icon:"üé®",condition:t=>new Set(t.investments.map(n=>n.type)).size>=3,getProgress:t=>{const r=new Set(t.investments.map(n=>n.type));return Math.min(100,r.size/3*100)}},{id:"debt_free",name:"Zero Pend√™ncias",description:"N√£o possui nenhuma conta pendente.",icon:"‚úÖ",condition:t=>{const r=t.transactions.some(l=>l.type==="expense"),n=t.transactions.filter(l=>l.type==="expense"&&l.status==="pending");return r&&n.length===0},getProgress:t=>{const r=t.transactions.filter(l=>l.type==="expense");if(r.length===0)return 0;const n=r.filter(l=>l.status==="paid").length;return Math.min(100,n/r.length*100)}},{id:"goal_hitter",name:"Na Mosca",description:"Atingiu 100% da meta de um investimento.",icon:"üéØ",condition:t=>t.investments.some(r=>r.targetAmount>0&&r.amount>=r.targetAmount),getProgress:t=>{const r=t.investments.map(n=>n.targetAmount>0?n.amount/n.targetAmount*100:0);return Math.min(100,Math.max(0,...r))}},{id:"club_10k",name:"Clube dos 10k",description:"Patrim√¥nio total superou R$ 10.000.",icon:"üíé",condition:t=>{const r=t.investments.reduce((l,o)=>l+o.amount,0),n=t.transactions.filter(l=>l.type==="income").reduce((l,o)=>l+o.amount,0)-t.transactions.filter(l=>l.type==="expense"&&l.status==="paid").reduce((l,o)=>l+o.amount,0);return r+n>=1e4},getProgress:t=>{const r=t.investments.reduce((l,o)=>l+o.amount,0),n=t.transactions.filter(l=>l.type==="income").reduce((l,o)=>l+o.amount,0)-t.transactions.filter(l=>l.type==="expense"&&l.status==="paid").reduce((l,o)=>l+o.amount,0);return Math.min(100,(r+n)/1e4*100)}}],zr=(t,r,n)=>{const l=n.toISOString().slice(0,7),o=t.find(f=>f.category===r&&f.month===l);return o||t.find(f=>f.category===r&&f.isRecurring)},bs=({data:t,privacyMode:r,onUnlockBadge:n,onNavigate:l})=>{const[o,f]=d.useState(()=>{const s=new Date;s.setMonth(s.getMonth()-5);const a=String(s.getMonth()+1).padStart(2,"0");return`${s.getFullYear()}-${a}`}),[m,I]=d.useState("flow"),N=d.useMemo(()=>{const s=new Date().getHours();return s<12?"Bom dia":s<18?"Boa tarde":"Boa noite"},[]);d.useEffect(()=>{ps.forEach(s=>{!t.unlockedBadges.includes(s.id)&&s.condition(t)&&n(s.id)})},[t,n]);const C=d.useMemo(()=>{const s=[],a=new Date,i=a.getMonth(),y=a.getFullYear(),T=Array.from(new Set(t.budgets.map(b=>b.category)));return a.getDate()<=25&&T.forEach(b=>{const _=zr(t.budgets,b,a);if(!_)return;const c=t.transactions.filter(j=>j.type==="expense"&&j.category===b&&new Date(j.date).getMonth()===i&&new Date(j.date).getFullYear()===y).reduce((j,V)=>j+V.amount,0);c>=_.limit*.8&&c<_.limit?s.push({title:`Aten√ß√£o: ${b}`,message:`Voc√™ j√° usou ${(c/_.limit*100).toFixed(0)}% do or√ßamento e ainda √© dia ${a.getDate()}. Cuidado!`,type:"warning"}):c>=_.limit&&s.push({title:`Limite Excedido: ${b}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),s},[t.budgets,t.transactions]),P=d.useMemo(()=>t.notes.sort((s,a)=>s.isPinned!==a.isPinned?s.isPinned?-1:1:new Date(a.date).getTime()-new Date(s.date).getTime()).slice(0,3),[t.notes]),w=s=>r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,S=t.transactions.filter(s=>s.type==="income").reduce((s,a)=>s+a.amount,0),v=t.transactions.filter(s=>s.type==="expense").reduce((s,a)=>s+a.amount,0),g=t.transactions.filter(s=>s.type==="expense"&&s.status==="pending").reduce((s,a)=>s+a.amount,0),E=t.transactions.filter(s=>s.status==="paid").reduce((s,a)=>s+(a.type==="income"?a.amount:-a.amount),0),B=t.transactions.length===0?0:t.transactions.length<300?E:t.walletBalance!==void 0?t.walletBalance:E,z=t.transactions.filter(s=>s.status==="pending"&&s.type==="income").reduce((s,a)=>s+a.amount,0),M=v-g,h=t.investments.reduce((s,a)=>s+a.amount,0),F=d.useMemo(()=>t.transactions.filter(a=>a.type==="expense"&&a.status==="pending").sort((a,i)=>new Date(a.date).getTime()-new Date(i.date).getTime()).slice(0,3),[t.transactions]),k=d.useMemo(()=>[...t.investments].sort((s,a)=>a.amount-s.amount).slice(0,3),[t.investments]),q=d.useMemo(()=>{const s=v>0?v:S*.5||1e3;return B/s},[B,v,S]),{healthScore:W,scoreLabel:D,scoreColor:G,factors:X}=d.useMemo(()=>{let s=0;const a=[],i=ae=>{const Q=new Date(ae);return(new Date().getTime()-Q.getTime())/(1e3*60*60*24*365.25)>=5},y=t.debts.filter(ae=>(ae.status==="open"||ae.status==="negotiating")&&!i(ae.dueDate)),T=y.length>0;T?(s+=200,a.push({text:`Negativado: ${y.length} d√≠vidas`,type:"bad"})):(s+=350,a.push({text:"Nome Limpo",type:"good"}));const b=v>0?v:1e3,_=h/b;_>=6?(s+=200,a.push({text:"Reserva Robusta",type:"good"})):_>=1?(s+=100,a.push({text:"Reserva Iniciada",type:"neutral"})):a.push({text:"Sem Reserva",type:"bad"});const c=S-v,j=S>0?c/S:0;j>=.2?(s+=150,a.push({text:"Poupador (20%+)",type:"good"})):j<0&&(s-=50,a.push({text:"D√©ficit Mensal",type:"bad"})),B>=g?s+=150:(s-=100,a.push({text:"Risco de Calote",type:"bad"})),T&&(s=Math.min(s,550)),s=Math.max(0,Math.min(1e3,Math.round(s)));let V="",R="";return s>=850?(V="Elite",R="text-emerald-500"):s>=700?(V="Excelente",R="text-emerald-600"):s>=500?(V="Regular",R="text-amber-500"):s>=300?(V="Ruim",R="text-orange-500"):(V="Cr√≠tico",R="text-rose-600"),{healthScore:s,scoreLabel:V,scoreColor:R,factors:a}},[t.debts,S,v,g,B,h]),H=d.useMemo(()=>{const s=new Map,[a,i]=o.split("-").map(Number),y=new Date(a,i-1,1),T=new Date;for(;y<=T||y.getMonth()===T.getMonth()&&y.getFullYear()===T.getFullYear();){const b=y.getFullYear(),_=String(y.getMonth()+1).padStart(2,"0");s.set(`${b}-${_}`,0),y.setMonth(y.getMonth()+1)}return t.transactions.forEach(b=>{if(b.type==="expense"){const _=b.date.slice(0,7);s.has(_)&&s.set(_,(s.get(_)||0)+b.amount)}}),Array.from(s.entries()).map(([b,_])=>{const[c,j]=b.split("-").map(Number);return{name:new Date(c,j-1,1).toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}),amount:_,fullDate:b}})},[t.transactions,o]),Z=d.useMemo(()=>{const s=new Map;for(let a=5;a>=0;a--){const i=new Date;i.setMonth(i.getMonth()-a),s.set(i.toISOString().slice(0,7),{income:0,expense:0})}return t.transactions.forEach(a=>{const i=a.date.slice(0,7);if(s.has(i)){const y=s.get(i);a.type==="income"?y.income+=a.amount:y.expense+=a.amount}}),Array.from(s.entries()).map(([a,i])=>{const[y,T]=a.split("-");return{name:new Date(parseInt(y),parseInt(T)-1,2).toLocaleDateString("pt-BR",{month:"short"}),Receitas:i.income,Despesas:i.expense}})},[t.transactions]),J=[{name:"Saldo Livre",value:Math.max(0,B),color:"#10b981"},{name:"Contas Pendentes",value:g,color:"#ef4444"},{name:"Investido",value:h,color:"#3b82f6"}].filter(s=>s.value>0),de=()=>{const s=`data:text/csv;charset=utf-8,Data,Descricao,Categoria,Tipo,Valor,Status
`+t.transactions.map(y=>`${y.date},${y.description},${y.category},${y.type},${y.amount},${y.status}`).join(`
`),a=encodeURI(s),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download","finansmart_relatorio.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},se=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Ye,{className:"w-5 h-5 text-indigo-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Fluxo de Caixa (6 Meses)"})]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ee,{width:"100%",height:"100%",children:e.jsxs(Xt,{data:Z,margin:{top:10,right:10,bottom:20,left:0},children:[e.jsx(Je,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(Qe,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},dy:10}),e.jsx(Ze,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:s=>`R$${s>=1e3?(s/1e3).toFixed(0)+"k":s}`,width:60}),e.jsx($e,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:s=>[r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR")}`,""]}),e.jsx(pt,{iconType:"circle"}),e.jsx(bt,{dataKey:"Receitas",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(bt,{dataKey:"Despesas",fill:"#f43f5e",radius:[4,4,0,0]})]})})})]}),p=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5 text-indigo-500"}),"Distribui√ß√£o de Patrim√¥nio"]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Ee,{width:"100%",height:"100%",children:e.jsxs(Ls,{children:[e.jsx(_s,{data:J,cx:"50%",cy:"50%",innerRadius:80,outerRadius:110,paddingAngle:5,dataKey:"value",children:J.map((s,a)=>e.jsx(vt,{fill:s.color},`cell-${a}`))}),e.jsx($e,{formatter:s=>r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR")}`}),e.jsx(pt,{verticalAlign:"bottom",height:36})]})})})]}),x=e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ct,{className:"w-5 h-5 text-rose-500"}),"Tend√™ncia de Despesas"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx(ye,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"In√≠cio:"}),e.jsx("input",{type:"month",value:o,onChange:s=>f(s.target.value),className:"bg-transparent text-sm text-slate-700 dark:text-slate-200 focus:outline-none font-medium"})]})]}),e.jsx("div",{className:"h-[200px] w-full",children:e.jsx(Ee,{width:"100%",height:"100%",children:e.jsxs(Wa,{data:H,margin:{top:10,right:10,bottom:25,left:10},children:[e.jsx(Je,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(Qe,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},dy:10,padding:{left:10,right:10}}),e.jsx(Ze,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},tickFormatter:s=>`R$${s>=1e3?(s/1e3).toFixed(0)+"k":s}`,width:60}),e.jsx($e,{cursor:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"5 5"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:s=>[r?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,"Despesas"],labelStyle:{color:"#64748b",marginBottom:"0.25rem"}}),e.jsx(Xa,{type:"monotone",dataKey:"amount",stroke:"#f43f5e",strokeWidth:3,dot:{r:4,fill:"#f43f5e",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,stroke:"#f43f5e",strokeWidth:2,fill:"#fff"},isAnimationActive:!1})]})})})]});return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[C.length>0&&e.jsx("div",{className:"space-y-2",children:C.map((s,a)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Lt,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:s.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:s.message})]})]},a))}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 w-full md:flex-1 min-w-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white whitespace-nowrap",children:[N,"!"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Vis√£o geral das suas finan√ßas."})]}),e.jsx("div",{className:"flex-1 flex items-center gap-2 px-4 py-2 sm:border-l sm:border-slate-300 dark:sm:border-slate-600 overflow-x-auto no-scrollbar mask-gradient w-full",children:ps.map(s=>{const a=t.unlockedBadges.includes(s.id),i=s.getProgress(t);return e.jsxs("div",{className:"group relative flex-shrink-0 cursor-help",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:`text-xl md:text-2xl transition-all duration-300 block ${a?"filter-none opacity-100 scale-100":"grayscale opacity-30 scale-90"}`,children:s.icon}),!a&&i>0&&e.jsx("div",{className:"absolute -bottom-1 left-0 w-full h-1 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${i}%`}})})]}),e.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-3 w-max max-w-[180px] hidden group-hover:block z-50 pointer-events-none animate-fade-in",children:[e.jsxs("div",{className:"bg-slate-800 text-white text-xs px-3 py-2 rounded-lg shadow-xl text-center border border-slate-700",children:[e.jsx("p",{className:"font-bold mb-0.5",children:s.name}),e.jsx("p",{className:"opacity-80 mb-2",children:s.description}),e.jsx("div",{className:"flex items-center justify-between text-[10px] uppercase font-semibold",children:e.jsx("span",{className:a?"text-emerald-400":"text-slate-400",children:a?"Desbloqueado":`${i.toFixed(0)}% Conclu√≠do`})}),!a&&e.jsx("div",{className:"w-full h-1.5 bg-slate-700 rounded-full mt-1 overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500",style:{width:`${i}%`}})})]}),e.jsx("div",{className:"w-2 h-2 bg-slate-800 rotate-45 absolute -top-1 left-1/2 -translate-x-1/2 border-t border-l border-slate-700"})]})]},s.id)})})]}),e.jsxs("button",{onClick:de,className:"flex items-center gap-2 text-sm font-medium text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors self-end md:self-auto flex-shrink-0",children:[e.jsx(_t,{className:"w-4 h-4"})," Exportar CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 relative overflow-hidden group flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(Ks,{className:"w-20 h-20 text-slate-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Score Financeiro"}),e.jsx(Ys,{className:`w-4 h-4 ${G}`})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:`text-3xl font-black ${G} tracking-tighter`,children:W}),e.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"/ 1000"})]}),e.jsx("p",{className:`text-xs font-bold uppercase tracking-wide ${G}`,children:D})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100 dark:border-slate-700/50 space-y-1",children:X.slice(0,2).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.type==="good"&&e.jsx(It,{className:"w-3 h-3 text-emerald-500"}),s.type==="bad"&&e.jsx(He,{className:"w-3 h-3 text-rose-500"}),s.type==="neutral"&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:s.text})]},a))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Saldo em Caixa"}),e.jsx(zt,{className:"w-4 h-4 text-emerald-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white truncate",children:w(B)}),z>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded w-fit border border-emerald-100 dark:border-emerald-800/30",children:[e.jsx(We,{className:"w-3 h-3 text-emerald-500"}),e.jsxs("span",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400",children:["+",w(z)]}),e.jsx("span",{className:"text-[10px] text-emerald-600/70 dark:text-emerald-400/70 uppercase font-medium",children:"A Receber"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium uppercase",children:"Sobreviv√™ncia"}),e.jsx("span",{className:`text-xs font-bold ${q<1?"text-rose-500":q<3?"text-amber-500":"text-emerald-500"}`,children:q<.1?"Cr√≠tico":`${q.toFixed(1)} Meses`})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full mt-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${q<1?"bg-rose-500":q<3?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(100,q/6*100)}%`}})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Sa√≠das (M√™s)"}),e.jsx(it,{className:"w-4 h-4 text-rose-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400 truncate",children:["-",w(M)]}),g>0?e.jsxs("div",{className:"flex items-center gap-1 mt-1 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded w-fit border border-amber-100 dark:border-amber-800/30",children:[e.jsx(We,{className:"w-3 h-3 text-amber-500"}),e.jsxs("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:["-",w(g)]}),e.jsx("span",{className:"text-[10px] text-amber-600/70 dark:text-amber-400/70 uppercase font-medium",children:"A Pagar"})]}):e.jsxs("div",{className:"flex items-center gap-1 mt-1 px-2 py-1",children:[e.jsx(It,{className:"w-3 h-3 text-emerald-500"}),e.jsx("span",{className:"text-[10px] text-emerald-500 font-bold uppercase",children:"Tudo Pago"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50 flex-1 flex flex-col justify-end space-y-2",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-semibold uppercase pb-1",children:"Pr√≥ximos Vencimentos"}),F.length===0?e.jsx("div",{className:"text-xs text-slate-400 italic",children:"Nada pendente."}):F.map(s=>{const a=new Date(s.date)<new Date(new Date().setHours(0,0,0,0));return e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${a?"bg-rose-500":"bg-amber-400"}`}),e.jsx("span",{className:"truncate text-slate-600 dark:text-slate-300 max-w-[80px]",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-slate-400 text-[10px]",children:new Date(s.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx("span",{className:`font-semibold ${a?"text-rose-500":"text-slate-700 dark:text-slate-200"}`,children:w(s.amount).replace("R$","")})]})]},s.id)})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Total Investido"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400 mt-1",children:w(h)})]}),e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded-lg",children:e.jsx(Ie,{className:"w-5 h-5 text-indigo-500"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-2",children:[e.jsxs("p",{className:"text-[10px] text-slate-400 font-semibold uppercase border-b border-slate-100 dark:border-slate-700/50 pb-1 flex justify-between",children:[e.jsx("span",{children:"Maiores Posi√ß√µes"}),e.jsx(ot,{className:"w-3 h-3"})]}),k.length===0?e.jsx("div",{className:"text-xs text-slate-400 italic",children:"Carteira vazia."}):k.map((s,a)=>e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[e.jsxs("span",{className:"text-slate-400 font-mono text-[10px]",children:[a+1,"."]}),e.jsx("span",{className:"truncate text-slate-600 dark:text-slate-300 max-w-[90px]",title:s.name,children:s.name})]}),e.jsx("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400 flex-shrink-0",children:w(s.amount).replace("R$","")})]},s.id))]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col hover:shadow-md transition-shadow h-full min-h-[180px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"})," Notas Fixadas"]}),e.jsx("button",{onClick:()=>l(U.NOTES),className:"text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 p-1 rounded transition-colors",title:"Ver todas",children:e.jsx(jt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 space-y-2 overflow-y-auto max-h-[140px] no-scrollbar",children:P.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 gap-1 opacity-70",children:[e.jsx(Le,{className:"w-6 h-6 opacity-30"}),e.jsx("p",{className:"text-xs italic text-center",children:"Nenhuma nota fixada."})]}):P.map(s=>{const a=s.color==="slate"?"border-slate-200 dark:border-slate-600":`border-${s.color}-200 dark:border-${s.color}-800`,i=s.color==="slate"?"bg-slate-50 dark:bg-slate-700/50":`bg-${s.color}-50 dark:bg-${s.color}-900/20`;return e.jsxs("div",{onClick:()=>l(U.NOTES),className:`text-xs p-2.5 rounded-lg border cursor-pointer hover:opacity-80 transition-opacity ${a} ${i}`,children:[e.jsx("span",{className:"font-bold mr-1 block truncate mb-0.5 text-slate-800 dark:text-slate-200",children:s.title||"Sem t√≠tulo"}),e.jsx("span",{className:"text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed",children:s.content})]},s.id)})})]})]}),e.jsxs("div",{className:"hidden lg:block space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 h-full",children:[se,p]}),x]}),e.jsxs("div",{className:"lg:hidden space-y-4",children:[e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>I("flow"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${m==="flow"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(Ye,{className:"w-3.5 h-3.5"}),"Fluxo"]}),e.jsxs("button",{onClick:()=>I("allocation"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${m==="allocation"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(ot,{className:"w-3.5 h-3.5"}),"Carteira"]}),e.jsxs("button",{onClick:()=>I("history"),className:`flex-1 py-2 text-xs font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-1.5
                    ${m==="history"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(ct,{className:"w-3.5 h-3.5"}),"Hist√≥rico"]})]}),e.jsxs("div",{className:"min-h-[350px]",children:[m==="flow"&&se,m==="allocation"&&p,m==="history"&&x]})]})]})},Vr=({data:t,privacyMode:r})=>{const[n,l]=d.useState([]),[o,f]=d.useState(""),[m,I]=d.useState(!1),[N,C]=d.useState(!1),P=d.useRef(null),w=d.useRef(null);d.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const B=window.SpeechRecognition||window.webkitSpeechRecognition;w.current=new B,w.current.continuous=!1,w.current.lang="pt-BR",w.current.interimResults=!1,w.current.onresult=z=>{const M=z.results[0][0].transcript;f(M),C(!1)},w.current.onerror=z=>{console.error("Speech error",z),C(!1)},w.current.onend=()=>{C(!1)}}},[]);const S=()=>{var B;(B=P.current)==null||B.scrollIntoView({behavior:"smooth"})};d.useEffect(()=>{S()},[n,m]);const v=()=>{var B;if(N)(B=w.current)==null||B.stop(),C(!1);else if(w.current)try{w.current.start(),C(!0)}catch(z){console.error(z)}else alert("Seu navegador n√£o suporta reconhecimento de voz.")},g=async B=>{const z=o;if(!z.trim())return;const M={id:crypto.randomUUID(),role:"user",content:z,timestamp:new Date};l(k=>[...k,M]),f(""),I(!0);const h=crypto.randomUUID(),F={id:h,role:"assistant",content:"",timestamp:new Date};l(k=>[...k,F]);try{const k=Lr(z,n,t);let q="";for await(const W of k)q+=W,l(D=>D.map(G=>G.id===h?{...G,content:q}:G))}catch{l(q=>q.map(W=>W.id===h?{...W,content:"Desculpe, tive um erro ao processar sua resposta."}:W))}finally{I(!1)}},E=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),g())};return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-140px)] animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-600 p-3 rounded-xl shadow-lg shadow-indigo-500/20",children:e.jsx(Be,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Assistente Inteligente"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Pergunte sobre seus gastos, investimentos ou pe√ßa conselhos."})]})]}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50 dark:bg-slate-900/50",children:[n.length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 space-y-4 opacity-60",children:[e.jsx(Tt,{className:"w-16 h-16"}),e.jsxs("p",{className:"text-sm",children:["Estou analisando seus dados em tempo real.",e.jsx("br",{}),"Como posso ajudar hoje?"]})]}),n.map(B=>e.jsx("div",{className:`flex w-full ${B.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex max-w-[85%] md:max-w-[75%] gap-3 ${B.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${B.role==="user"?"bg-slate-200 dark:bg-slate-700":"bg-indigo-600"}`,children:B.role==="user"?e.jsx(Hs,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"}):e.jsx(Tt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:`p-4 rounded-2xl shadow-sm text-sm whitespace-pre-line leading-relaxed
                      ${B.role==="user"?"bg-white dark:bg-slate-700 text-slate-800 dark:text-white rounded-tr-none":"bg-indigo-600 text-white rounded-tl-none prose prose-invert max-w-none"}`,children:[B.content,m&&B.content===""&&e.jsxs("span",{className:"inline-flex gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce"}),e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"100ms"}}),e.jsx("span",{className:"w-1.5 h-1.5 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"200ms"}})]})]})]})},B.id)),e.jsx("div",{ref:P})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx("button",{onClick:v,className:`p-3 rounded-xl transition-all ${N?"bg-rose-500 text-white animate-pulse shadow-lg shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,title:"Falar comando",children:N?e.jsx(Ws,{className:"w-5 h-5"}):e.jsx(Xs,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:o,onChange:B=>f(B.target.value),onKeyDown:E,placeholder:N?"Ouvindo...":"Digite uma mensagem...",className:"flex-1 bg-slate-100 dark:bg-slate-700 dark:text-white border-0 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none",disabled:m}),e.jsx("button",{onClick:()=>g(),disabled:!o.trim()||m,className:"p-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-indigo-500/20",children:e.jsx(Is,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-center text-[10px] text-slate-400 mt-2",children:"A IA pode cometer erros. Verifique informa√ß√µes importantes."})]})]})]})},Ur=({user:t,isGuest:r,mobileMenuOpen:n,setMobileMenuOpen:l,currentView:o,onNavigate:f,onLogout:m,privacyMode:I,setPrivacyMode:N,darkMode:C,setDarkMode:P,isFullscreen:w,toggleFullscreen:S,hasKey:v,onOpenKeyModal:g,onOpenDonateModal:E,onExportBackup:B,onImportBackup:z,onFactoryReset:M,canInstall:h,onInstall:F})=>{var X,H;const k=Z=>{f(Z),l(!1)},q=({active:Z,onClick:J,icon:de,label:se,customClass:p=""})=>e.jsxs("button",{onClick:J,className:`flex w-full items-center gap-3 px-3 py-2.5 rounded-lg transition-all text-sm font-medium ${p} ${Z?"bg-indigo-600 text-white shadow-md shadow-indigo-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(de,{className:`w-5 h-5 ${!Z&&p?"text-purple-400 group-hover:text-white":""}`}),e.jsx("div",{className:"flex-1 flex justify-between items-center",children:e.jsx("span",{children:se})})]}),W=[U.TRANSACTIONS,U.CALENDAR,U.SUBSCRIPTIONS,U.DEBTS].includes(o),D=[U.INVESTMENTS,U.BUDGETS,U.WEALTH_PLANNER].includes(o),G=[U.KANBAN,U.NOTES,U.SHOPPING_LIST].includes(o);return e.jsxs("nav",{className:`
         fixed md:sticky top-0 left-0 h-screen z-50 w-72 md:w-64 bg-slate-900 border-r border-slate-800 
         transform transition-transform duration-300 ease-in-out shadow-2xl flex flex-col
         ${n?"translate-x-0":"-translate-x-full md:translate-x-0"}
       `,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-4 border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-xl shadow-lg shadow-indigo-900/50",children:e.jsx(Ft,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white tracking-tight leading-none",children:"NEXO"}),e.jsx("span",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wider",children:"Financial Hub"})]})]}),e.jsx("button",{onClick:()=>l(!1),className:"md:hidden text-slate-400 hover:text-white",children:e.jsx(ue,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-4 shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-slate-800/50 rounded-lg border border-slate-700/50 backdrop-blur-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center border border-slate-600 overflow-hidden text-xs text-white",children:t!=null&&t.photoURL?e.jsx("img",{src:t.photoURL,alt:"User"}):((X=t==null?void 0:t.email)==null?void 0:X.substring(0,2).toUpperCase())||"CV"}),e.jsxs("div",{className:"overflow-hidden flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-white truncate",title:(t==null?void 0:t.email)||"Convidado",children:((H=t==null?void 0:t.email)==null?void 0:H.split("@")[0])||"Convidado"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("p",{className:"text-[10px] text-slate-400",children:t?"Online (Cloud)":"Offline (Local)"})]})]}),e.jsx("button",{onClick:m,className:"text-slate-400 hover:text-rose-500",title:"Sair",children:e.jsx(Js,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-2 flex flex-col no-scrollbar space-y-1",children:[e.jsx("p",{className:"px-2 text-xs font-bold text-indigo-400 uppercase tracking-wider mb-2 mt-2",children:"Menu Principal"}),e.jsx(q,{active:o===U.DASHBOARD,onClick:()=>k(U.DASHBOARD),icon:Qs,label:"Vis√£o Geral"}),e.jsx(q,{active:W,onClick:()=>k(U.TRANSACTIONS),icon:Zs,label:"Movimenta√ß√µes"}),e.jsx(q,{active:D,onClick:()=>k(U.INVESTMENTS),icon:Vt,label:"Patrim√¥nio"}),e.jsx(q,{active:G,onClick:()=>k(U.KANBAN),icon:Ts,label:"Organiza√ß√£o"}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-800",children:e.jsx("button",{onClick:()=>v?k(U.AI_ASSISTANT):g(),className:`w-full relative group overflow-hidden rounded-xl p-[1px] transition-all duration-300 ${o===U.AI_ASSISTANT?"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 shadow-lg shadow-purple-500/20":"bg-slate-700/50 hover:bg-gradient-to-r hover:from-indigo-500 hover:via-purple-500 hover:to-pink-500"}`,children:e.jsxs("div",{className:"relative flex items-center gap-3 px-3 py-3 rounded-[11px] bg-slate-900 transition-colors h-full",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${o===U.AI_ASSISTANT?"bg-indigo-500/20":"bg-slate-800 group-hover:bg-slate-800"}`,children:e.jsx(ea,{className:`w-5 h-5 ${o===U.AI_ASSISTANT?"text-indigo-400":"text-slate-400 group-hover:text-white"}`})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:`text-sm font-bold ${o===U.AI_ASSISTANT?"text-white":"text-slate-300 group-hover:text-white"}`,children:"NEXO AI"}),e.jsx("p",{className:"text-[10px] text-slate-500 group-hover:text-slate-400",children:"Assistente Virtual"})]}),!v&&e.jsx(et,{className:"w-3 h-3 text-rose-500 animate-pulse"})]})})})]}),e.jsxs("div",{className:"mt-auto p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[h&&e.jsxs("button",{onClick:F,className:"w-full mb-4 flex items-center justify-center gap-2 p-2 rounded-lg bg-emerald-600 text-white text-xs font-bold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-500/20",children:[e.jsx(Es,{className:"w-3 h-3"})," Instalar App (PWA)"]}),e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsx("button",{onClick:()=>k(U.SETTINGS),className:`flex-1 flex items-center justify-center p-2 rounded-lg transition-all border border-slate-800 hover:border-slate-700 ${o===U.SETTINGS?"bg-indigo-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,title:"Configura√ß√µes e Dados",children:e.jsx(Ot,{className:"w-5 h-5"})}),e.jsx("button",{onClick:S,className:"flex-1 flex items-center justify-center p-2 rounded-lg text-slate-400 hover:bg-slate-800 hover:text-white transition-all border border-slate-800 hover:border-slate-700",title:w?"Sair da Tela Cheia":"Tela Cheia",children:w?e.jsx(ta,{className:"w-5 h-5"}):e.jsx(sa,{className:"w-5 h-5"})}),e.jsx("button",{onClick:E,className:"flex-1 flex items-center justify-center p-2 rounded-lg text-slate-400 hover:bg-slate-800 hover:text-pink-500 transition-all border border-slate-800 hover:border-slate-700",title:"Apoiar Projeto",children:e.jsx(Ss,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"pt-4 mt-3 border-t border-slate-800 text-center",children:[e.jsx("p",{className:"text-[10px] text-slate-500 font-mono",children:"v2.6.0 Config"}),e.jsxs("a",{href:"https://www.linkedin.com/in/alemagnobr/",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-slate-400 hover:text-indigo-400 transition-colors flex items-center justify-center gap-1.5 mt-1",children:[e.jsx(Ds,{className:"w-3 h-3"})," Alexandre Magno S. Linhares"]})]})]})]})},Gr=({showWelcome:t,isDonateModalOpen:r,isKeyModalOpen:n,userKeyInput:l,hasKey:o,PIX_KEY:f,PIX_NAME:m,setShowWelcome:I,setIsDonateModalOpen:N,setIsKeyModalOpen:C,setUserKeyInput:P,handleSaveKey:w,handleRemoveKey:S,handleFinishWelcome:v,copyPix:g})=>e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/90 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-4xl border border-slate-200 dark:border-slate-700 animate-scale-in my-8",children:[e.jsx("div",{className:"bg-slate-900 p-8 text-white relative overflow-hidden rounded-t-2xl",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Bem-vindo ao NEXO"}),e.jsx("p",{className:"text-slate-300 text-lg",children:"Seu novo comando central financeiro."})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-indigo-500"})," Privacidade Total"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:"Seus dados financeiros n√£o s√£o vendidos. No modo Offline, tudo fica no seu navegador."})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5 text-purple-500"})," Intelig√™ncia Artificial"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:"Conecte sua chave do Gemini para ter um consultor financeiro pessoal."})]})]}),e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-100 dark:border-indigo-800 p-4 rounded-xl mb-8",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-200 mb-2",children:"J√° possui uma chave de API do Gemini? (Opcional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:l,onChange:E=>P(E.target.value),placeholder:"Cole sua chave AIza...",className:"flex-1 p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 outline-none"}),e.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-medium flex items-center gap-1 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:["Obter Chave ",e.jsx(Ut,{className:"w-3 h-3"})]})]})]}),e.jsxs("button",{onClick:v,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-xl shadow-indigo-500/30 transition-all flex items-center justify-center gap-2",children:["Come√ßar Agora ",e.jsx(Nt,{className:"w-5 h-5"})]})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 border border-slate-200 dark:border-slate-700 animate-scale-in text-center relative overflow-hidden",children:[e.jsx("button",{onClick:()=>N(!1),className:"absolute top-2 right-2 p-2 text-slate-400 hover:text-slate-600",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(aa,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Apoie o Projeto"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"O NEXO √© desenvolvido de forma independente. Considere apoiar! ‚òï"}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6 relative group cursor-pointer",onClick:g,children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Chave Pix (CPF)"}),e.jsx("p",{className:"text-sm font-mono font-bold text-slate-700 dark:text-slate-200 break-all select-all",children:f}),e.jsx("div",{className:"absolute inset-0 bg-black/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl",children:e.jsxs("span",{className:"bg-white dark:bg-slate-800 text-xs font-bold px-2 py-1 rounded shadow flex items-center gap-1",children:[e.jsx(As,{className:"w-3 h-3"})," Copiar"]})})]}),e.jsxs("p",{className:"text-xs text-slate-400 mb-6",children:["Nome: ",m]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-slate-200 dark:border-slate-700 animate-scale-in flex flex-col max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(et,{className:"w-6 h-6 text-indigo-500"})," Configurar Chave API"]}),e.jsx("button",{onClick:()=>C(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx(ue,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg text-sm text-indigo-800 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800",children:[e.jsxs("p",{className:"font-bold flex items-center gap-1 mb-1",children:[e.jsx(Be,{className:"w-3 h-3"})," Por que preciso disso?"]}),e.jsx("p",{children:"O Google Gemini √© o c√©rebro por tr√°s da IA do NEXO. Para us√°-lo gratuitamente, voc√™ precisa gerar sua pr√≥pria chave de acesso."})]}),e.jsxs("ol",{className:"list-decimal list-inside text-sm text-slate-600 dark:text-slate-400 space-y-2 ml-1",children:[e.jsxs("li",{children:["Acesse o ",e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-indigo-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),e.jsx("li",{children:"Fa√ßa login com sua conta Google."}),e.jsxs("li",{children:["Clique em ",e.jsx("strong",{children:"Create API Key"}),"."]}),e.jsx("li",{children:'Copie o c√≥digo gerado (come√ßa com "AIza...") e cole abaixo.'})]}),e.jsx("input",{type:"password",value:l,onChange:E=>P(E.target.value),placeholder:"Cole sua chave aqui (AIza...)",className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:w,disabled:!l,className:"flex-1 px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg text-sm font-bold shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Salvar e Conectar"}),e.jsx("button",{onClick:S,disabled:!o,className:"px-4 py-2 bg-rose-100 text-rose-600 hover:bg-rose-200 dark:bg-rose-900/30 dark:text-rose-400 dark:hover:bg-rose-900/50 rounded-lg text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Remover"})]})]})]})})]}),fs="NEXO Finan√ßas",Jt=async()=>{const t=new Bt;t.addScope("https://www.googleapis.com/auth/calendar");try{if(!ke.currentUser)return null;const r=await Fs(ke,t),n=Bt.credentialFromResult(r);return(n==null?void 0:n.accessToken)||null}catch(r){return console.error("Error getting access token:",r),null}},ze=async(t,r,n,l)=>{var f;const o=await fetch(t,{method:r,headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:l?JSON.stringify(l):void 0});if(!o.ok){if(o.status===404||o.status===410)return null;const m=await o.json();throw new Error(((f=m.error)==null?void 0:f.message)||"Google API Error")}return o.status===204?null:o.json()},Qt=async t=>{const n=(await ze("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",t)).items.find(o=>o.summary===fs);return n?n.id:(await ze("https://www.googleapis.com/calendar/v3/calendars","POST",t,{summary:fs,description:"Calend√°rio financeiro gerado pelo app NEXO."})).id},qr=async(t,r,n)=>{const l={summary:`üí∏ Pagar: ${t.description}`,description:`Valor: R$ ${t.amount.toFixed(2)}
Categoria: ${t.category}
Obs: ${t.observation||"-"}`,start:{date:t.date},end:{date:t.date},colorId:"11",reminders:{useDefault:!1,overrides:[{method:"popup",minutes:1440},{method:"popup",minutes:540}]}};return(await ze(`https://www.googleapis.com/calendar/v3/calendars/${n}/events`,"POST",r,l)).id},Kr=async(t,r)=>{const n=await Jt();if(!n)return;const l=await Qt(n),o={summary:`üí∏ Pagar: ${t.description}`,description:`Valor: R$ ${t.amount.toFixed(2)}
Categoria: ${t.category}
Obs: ${t.observation||"-"}`,start:{date:t.date},end:{date:t.date}};await ze(`https://www.googleapis.com/calendar/v3/calendars/${l}/events/${r}`,"PATCH",n,o)},Yr=async t=>{const r=await Jt();if(!r)return;const n=await Qt(r);await ze(`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${t}`,"DELETE",r)},Hr=async(t,r)=>{const n=await Jt();if(!n)throw new Error("Acesso ao Google Agenda negado.");const l=await Qt(n),o=t.filter(m=>m.type==="expense"&&m.status==="pending"&&new Date(m.date)>=new Date);let f=0;for(const m of o)try{if(m.googleEventId){const I={summary:`üí∏ Pagar: ${m.description}`,description:`Valor: R$ ${m.amount.toFixed(2)}
Categoria: ${m.category}
Obs: ${m.observation||"-"}`,start:{date:m.date},end:{date:m.date}};await ze(`https://www.googleapis.com/calendar/v3/calendars/${l}/events/${m.googleEventId}`,"PATCH",n,I)}else{const I=await qr(m,n,l);r(m.id,{googleEventId:I}),f++}}catch(I){console.error(`Failed to sync transaction ${m.description}`,I)}return f},Wr={transactions:[],investments:[],budgets:[],debts:[],shoppingList:[],shoppingBudget:0,kanbanColumns:[],kanbanBoards:[],notes:[],unlockedBadges:[],walletBalance:0,categories:st},Xr=(t,r)=>{const[n,l]=d.useState(Wr);return d.useEffect(()=>{if(t&&!r){const x=nr(t.uid,s=>{l(a=>({...a,...s}))});return()=>x()}},[t,r]),d.useEffect(()=>{t&&!r&&n.transactions.length>0&&n.walletBalance===void 0&&(console.log("Migrando para sistema de Saldo Otimizado..."),ir(t.uid))},[t,r,n.transactions.length,n.walletBalance]),d.useEffect(()=>{if(t||r){const s=setTimeout(async()=>{const a=new Date,i=a.getFullYear(),y=String(a.getMonth()+1).padStart(2,"0"),T=String(a.getDate()).padStart(2,"0"),b=`${i}-${y}-${T}`,_=n.transactions.filter(c=>c.status==="pending"&&c.autoPay&&c.date<=b);if(_.length>0)if(t)for(const c of _)await dt(t.uid,c.id,{status:"paid"});else l(c=>({...c,transactions:c.transactions.map(j=>j.status==="pending"&&j.autoPay&&j.date<=b?{...j,status:"paid"}:j)}))},2e3);return()=>clearTimeout(s)}},[t,r,n.transactions]),d.useEffect(()=>{(t||r)&&(async()=>{const s=new Date,a=s.getMonth(),i=s.getFullYear(),y=new Map;n.transactions.forEach(b=>{if(b.isRecurring){const _=y.get(b.description);(!_||new Date(b.date)>new Date(_.date))&&y.set(b.description,b)}});const T=[];if(y.forEach((b,_)=>{const[c,j]=b.date.split("-").map(Number),V=new Date(i,a,1),R=new Date(c,j-1,1);if(V<R)return;if(!n.transactions.some(Q=>{const ie=new Date(Q.date);return Q.description===_&&Q.amount===b.amount&&ie.getMonth()===a&&ie.getFullYear()===i})){const ie=new Date(b.date+"T00:00:00").getDate(),xe=new Date(i,a+1,0).getDate(),be=Math.min(ie,xe),Pe=String(a+1).padStart(2,"0"),Ce=String(be).padStart(2,"0"),je=`${i}-${Pe}-${Ce}`;T.push({...b,id:crypto.randomUUID(),date:je,status:"pending",isRecurring:!0})}}),T.length>0)if(t)for(const b of T)await cs(t.uid,b);else l(b=>({...b,transactions:[...b.transactions,...T]}))})()},[t,r,n.transactions]),{data:n,setData:l,actions:{addTransaction:async x=>{const s={...x,id:crypto.randomUUID()};t?await cs(t.uid,s):l(a=>({...a,transactions:[...a.transactions,s]}))},updateTransaction:async(x,s)=>{const a=n.transactions.find(i=>i.id===x);if(a&&a.googleEventId&&t&&(s.date||s.amount||s.description||s.category)){const i={...a,...s};Kr(i,a.googleEventId).catch(y=>console.warn("Falha ao atualizar Google Agenda:",y))}t?await dt(t.uid,x,s):l(i=>({...i,transactions:i.transactions.map(y=>y.id===x?{...y,...s}:y)}))},deleteTransaction:async x=>{const s=n.transactions.find(a=>a.id===x);s&&s.googleEventId&&t&&Yr(s.googleEventId).catch(a=>console.warn("Falha ao remover do Google Agenda:",a)),t?await or(t.uid,x):l(a=>({...a,transactions:a.transactions.filter(i=>i.id!==x)}))},toggleTransactionStatus:async x=>{const s=n.transactions.find(i=>i.id===x);if(!s)return;const a=s.status==="paid"?"pending":"paid";if(t){if(await dt(t.uid,x,{status:a}),s.debtId){const i=n.debts.find(y=>y.id===s.debtId);if(i){const b=n.transactions.filter(_=>_.debtId===s.debtId).every(_=>_.id===x?a==="paid":_.status==="paid")?"paid":"agreement";i.status!==b&&await xs(t.uid,i.id,{status:b})}}}else l(i=>{const y=i.transactions.map(b=>b.id===x?{...b,status:a}:b);let T=i.debts;if(s.debtId){const c=y.filter(j=>j.debtId===s.debtId).every(j=>j.status==="paid")?"paid":"agreement";T=i.debts.map(j=>j.id===s.debtId?{...j,status:c}:j)}return{...i,transactions:y,debts:T}})},addInvestment:async x=>{const s={...x,id:crypto.randomUUID()};t?await dr(t.uid,s):l(a=>({...a,investments:[...a.investments,s]}))},updateInvestment:async(x,s)=>{t?await cr(t.uid,x,s):l(a=>({...a,investments:a.investments.map(i=>i.id===x?{...i,...s}:i)}))},deleteInvestment:async x=>{t?await xr(t.uid,x):l(s=>({...s,investments:s.investments.filter(a=>a.id!==x)}))},addBudget:async x=>{const s={...x,id:crypto.randomUUID()};t?await mr(t.uid,s):l(a=>({...a,budgets:[...a.budgets||[],s]}))},updateBudget:async(x,s)=>{t?await ur(t.uid,x,s):l(a=>({...a,budgets:a.budgets.map(i=>i.id===x?{...i,...s}:i)}))},deleteBudget:async x=>{t?await hr(t.uid,x):l(s=>({...s,budgets:s.budgets.filter(a=>a.id!==x)}))},addDebt:async x=>{const s={...x,id:crypto.randomUUID()};t?await gr(t.uid,s):l(a=>({...a,debts:[...a.debts||[],s]}))},updateDebt:async(x,s)=>{t?await xs(t.uid,x,s):l(a=>({...a,debts:a.debts.map(i=>i.id===x?{...i,...s}:i)}))},deleteDebt:async x=>{t?await pr(t.uid,x):l(s=>({...s,debts:s.debts.filter(a=>a.id!==x)}))},addShoppingItem:async x=>{const s={...x,id:crypto.randomUUID()};t?await br(t.uid,s):l(a=>({...a,shoppingList:[...a.shoppingList||[],s]}))},updateShoppingItem:async(x,s)=>{t?await fr(t.uid,x,s):l(a=>({...a,shoppingList:a.shoppingList.map(i=>i.id===x?{...i,...s}:i)}))},deleteShoppingItem:async x=>{t?await jr(t.uid,x):l(s=>({...s,shoppingList:s.shoppingList.filter(a=>a.id!==x)}))},clearShoppingList:async()=>{t?await Nr(t.uid):l(x=>({...x,shoppingList:[]}))},setShoppingBudget:async x=>{t?await vr(t.uid,x):l(s=>({...s,shoppingBudget:x}))},saveKanbanColumn:async x=>{t?await wr(t.uid,x):l(s=>s.kanbanColumns.some(i=>i.id===x.id)?{...s,kanbanColumns:s.kanbanColumns.map(i=>i.id===x.id?x:i)}:{...s,kanbanColumns:[...s.kanbanColumns,x]})},deleteKanbanColumn:async x=>{t?await kr(t.uid,x):l(s=>({...s,kanbanColumns:s.kanbanColumns.filter(a=>a.id!==x)}))},saveKanbanBoard:async x=>{t?await yr(t.uid,x):l(s=>s.kanbanBoards.some(i=>i.id===x.id)?{...s,kanbanBoards:s.kanbanBoards.map(i=>i.id===x.id?x:i)}:{...s,kanbanBoards:[...s.kanbanBoards,x]})},deleteKanbanBoard:async x=>{t?await Cr(t.uid,x):l(s=>({...s,kanbanBoards:s.kanbanBoards.filter(a=>a.id!==x)}))},addNote:async x=>{const s={...x,id:crypto.randomUUID()};t?await Sr(t.uid,s):l(a=>({...a,notes:[s,...a.notes]}))},updateNote:async(x,s)=>{t?await Ar(t.uid,x,s):l(a=>({...a,notes:a.notes.map(i=>i.id===x?{...i,...s}:i)}))},deleteNote:async x=>{t?await Dr(t.uid,x):l(s=>({...s,notes:s.notes.filter(a=>a.id!==x)}))},addCategory:async x=>{t?await Ir(t.uid,x):l(s=>({...s,categories:[...s.categories||[],x]}))},deleteCategory:async x=>{t?await Tr(t.uid,x):l(s=>({...s,categories:s.categories.filter(a=>a.id!==x)}))},unlockBadge:x=>{n.unlockedBadges.includes(x)||(t?$r(t.uid,x,n.unlockedBadges):l(s=>({...s,unlockedBadges:[...s.unlockedBadges,x]})))},saveWealthProfile:async x=>{t?await Rr(t.uid,x):l(s=>({...s,wealthProfile:x}))}}}},Jr=[{name:"emerald",bg:"bg-emerald-500"},{name:"blue",bg:"bg-blue-500"},{name:"rose",bg:"bg-rose-500"},{name:"amber",bg:"bg-amber-500"},{name:"purple",bg:"bg-purple-500"},{name:"indigo",bg:"bg-indigo-500"},{name:"pink",bg:"bg-pink-500"},{name:"orange",bg:"bg-orange-500"},{name:"teal",bg:"bg-teal-500"},{name:"cyan",bg:"bg-cyan-500"},{name:"slate",bg:"bg-slate-500"}],Qr=({data:t,actions:r,privacyMode:n,setPrivacyMode:l,darkMode:o,setDarkMode:f,hasApiKey:m,onOpenKeyModal:I,onExportBackup:N,onImportBackup:C,onFactoryReset:P})=>{const[w,S]=d.useState("general"),[v,g]=d.useState(""),[E,B]=d.useState("expense"),[z,M]=d.useState("slate"),h=d.useRef(null),F=d.useRef(null),k=D=>{if(D.preventDefault(),!v.trim())return;const G={id:`cat_${Date.now()}`,name:v.trim(),type:E,color:z,isDefault:!1};r.addCategory(G),g("")},q=D=>{var H;const G=(H=D.target.files)==null?void 0:H[0];if(!G)return;const X=new FileReader;X.onload=Z=>{var p;const J=(p=Z.target)==null?void 0:p.result;if(!J)return;const de=J.split(`
`);let se=0;for(let x=1;x<de.length;x++){const s=de[x].trim();if(!s)continue;const a=s.split(",");if(a.length>=3){const i=a[0].trim(),y=a[1].trim(),T=a[2].trim(),b=parseFloat(T);if(!isNaN(b)){const _=Math.abs(b),c=b<0?"expense":"income";r.addTransaction({description:y||"Importado",amount:_,type:c,category:"Outros",date:i.includes("/")?i.split("/").reverse().join("-"):i,status:"paid",paymentMethod:"credit_card",isRecurring:!1}),se++}}}alert(`${se} transa√ß√µes importadas com sucesso! Verifique as datas e categorias.`)},X.readAsText(G)},W=t.categories||[];return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 p-2.5 rounded-xl",children:e.jsx(Ot,{className:"w-6 h-6 text-slate-700 dark:text-slate-200"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Configura√ß√µes"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Personalize sua experi√™ncia no NEXO."})]})]}),e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>S("general"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${w==="general"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(ra,{className:"w-4 h-4"})," Geral & API"]}),e.jsxs("button",{onClick:()=>S("categories"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${w==="categories"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(la,{className:"w-4 h-4"})," Categorias"]}),e.jsxs("button",{onClick:()=>S("data"),className:`flex-1 py-2 px-4 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap
               ${w==="data"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white"}`,children:[e.jsx(na,{className:"w-4 h-4"})," Dados & Backup"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 min-h-[400px]",children:[w==="general"&&e.jsx("div",{className:"space-y-8 animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Prefer√™ncias Visuais"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400",children:o?e.jsx(oa,{className:"w-5 h-5"}):e.jsx(ia,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Modo Escuro"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Alternar tema claro/escuro"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:D=>f(D.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 rounded-full peer dark:bg-slate-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg text-emerald-600 dark:text-emerald-400",children:n?e.jsx(da,{className:"w-5 h-5"}):e.jsx(xt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Modo Privacidade"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Ocultar valores monet√°rios"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:D=>l(D.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 dark:peer-focus:ring-emerald-800 rounded-full peer dark:bg-slate-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-emerald-600"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Integra√ß√µes"}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl text-white shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5"})," Google Gemini API"]}),e.jsx("p",{className:"text-indigo-100 text-xs mt-1",children:"Intelig√™ncia Artificial para an√°lises e categoriza√ß√£o."})]}),e.jsx("div",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase border ${m?"bg-emerald-500 border-emerald-400 text-white":"bg-rose-500 border-rose-400 text-white"}`,children:m?"Conectado":"Desconectado"})]}),e.jsx("button",{onClick:I,className:"w-full py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg text-sm font-bold transition-colors",children:m?"Gerenciar Chave":"Configurar Chave"})]})]})]})}),w==="categories"&&e.jsxs("div",{className:"animate-fade-in h-full flex flex-col",children:[e.jsxs("form",{onSubmit:k,className:"flex flex-col md:flex-row gap-3 bg-slate-50 dark:bg-slate-700/30 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Nome da nova categoria...",value:v,onChange:D=>g(D.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:E,onChange:D=>B(D.target.value),className:"p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"expense",children:"Despesa"}),e.jsx("option",{value:"income",children:"Receita"})]}),e.jsx("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-slate-300 dark:border-slate-600",children:Jr.map(D=>e.jsx("button",{type:"button",onClick:()=>M(D.name),className:`w-6 h-6 rounded-full transition-transform hover:scale-110 ${D.bg} ${z===D.name?"ring-2 ring-offset-2 ring-indigo-500 scale-110":""}`},D.name))}),e.jsx("button",{type:"submit",disabled:!v.trim(),className:"px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors disabled:opacity-50",children:e.jsx(ge,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 uppercase mb-3 flex items-center gap-2 border-b border-emerald-200 dark:border-emerald-800 pb-2",children:"Entradas"}),e.jsx("div",{className:"space-y-2",children:W.filter(D=>D.type==="income").map(D=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700 group hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${D.color}-500`}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:D.name})]}),!D.isDefault&&e.jsx("button",{onClick:()=>{confirm(`Excluir categoria "${D.name}"?`)&&r.deleteCategory(D.id)},className:"text-slate-400 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Te,{className:"w-4 h-4"})})]},D.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-rose-600 dark:text-rose-400 uppercase mb-3 flex items-center gap-2 border-b border-rose-200 dark:border-rose-800 pb-2",children:"Sa√≠das"}),e.jsx("div",{className:"space-y-2",children:W.filter(D=>D.type==="expense").map(D=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700 group hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${D.color}-500`}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:D.name})]}),!D.isDefault&&e.jsx("button",{onClick:()=>{confirm(`Excluir categoria "${D.name}"?`)&&r.deleteCategory(D.id)},className:"text-slate-400 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Te,{className:"w-4 h-4"})})]},D.id))})]})]})]}),w==="data"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-200 dark:border-slate-700 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5 text-indigo-500"})," Exportar Backup"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Baixe todos os seus dados em um arquivo JSON seguro. Ideal para migrar entre dispositivos."})]}),e.jsx("button",{onClick:N,className:"mt-6 w-full py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg font-bold text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Baixar JSON"})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-200 dark:border-slate-700 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ca,{className:"w-5 h-5 text-emerald-500"})," Restaurar Backup"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Recupere seus dados a partir de um arquivo JSON exportado anteriormente."})]}),e.jsxs("label",{className:"mt-6 w-full py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg font-bold text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-center block",children:["Selecionar Arquivo",e.jsx("input",{type:"file",ref:h,className:"hidden",accept:".json",onChange:C})]})]})]}),e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Importar Transa√ß√µes (CSV Simples)"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-4",children:["Importe extratos simples. Formato esperado: ",e.jsx("code",{children:"Data,Descri√ß√£o,Valor"})," (sem cabe√ßalho).",e.jsx("br",{}),e.jsx("span",{className:"text-xs opacity-70",children:"Ex: 2024-03-20,Mercado,-150.00"})]}),e.jsx("input",{type:"file",ref:F,accept:".csv",onChange:q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"})]}),e.jsx("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"p-4 border border-rose-200 dark:border-rose-900/50 bg-rose-50 dark:bg-rose-900/10 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-rose-700 dark:text-rose-400",children:"Zona de Perigo"}),e.jsx("p",{className:"text-xs text-rose-600/80 dark:text-rose-400/70",children:"Isso apagar√° todos os dados locais deste navegador."})]}),e.jsx("button",{onClick:P,className:"px-4 py-2 bg-rose-600 text-white rounded-lg font-bold text-sm hover:bg-rose-700",children:"Resetar App"})]})})]})]})]})},At={credit_card:"Cr√©dito",debit_card:"D√©bito",cash:"Dinheiro",pix:"PIX",direct_debit:"D√©b. Auto",bank_transfer:"TED/DOC",deposit:"Dep√≥sito"},js=(t,r,n)=>{let l=new Date(t,r,1),o=0,f=0;for(;o<n&&f<31;){const m=l.getDay();if(m!==0&&m!==6&&o++,o===n)break;l.setDate(l.getDate()+1),f++}return l.toISOString().split("T")[0]},Zr=({method:t,className:r})=>{switch(t){case"credit_card":return e.jsx(mt,{className:r});case"debit_card":return e.jsx(mt,{className:r});case"cash":return e.jsx(fa,{className:r});case"pix":return e.jsx(ba,{className:r});default:return e.jsx(Ps,{className:r})}},Ns=["credit_card","debit_card","direct_debit","pix","cash"],vs=["pix","bank_transfer","cash","deposit"],el=({transactions:t,budgets:r,categories:n=[],onAdd:l,onUpdate:o,onDelete:f,onToggleStatus:m,onNavigate:I,privacyMode:N,hasApiKey:C,quickActionSignal:P})=>{const[w,S]=d.useState(!1),[v,g]=d.useState(!1),[E,B]=d.useState(!1),[z,M]=d.useState(new Date),[h,F]=d.useState("all"),[k,q]=d.useState(""),[W,D]=d.useState("all"),[G,X]=d.useState("all"),[H,Z]=d.useState(!1),[J,de]=d.useState(null),[se,p]=d.useState("monthly"),[x,s]=d.useState([]),[a,i]=d.useState(!1),[y,T]=d.useState(""),[b,_]=d.useState(!1),[c,j]=d.useState("5"),V=d.useRef(null),[R,ae]=d.useState({description:"",amount:"",type:"expense",category:"Outros",date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:"credit_card",isRecurring:!1,autoPay:!1,installments:"",observation:""}),Q=d.useMemo(()=>n.length===0?["Outros"]:n.filter(u=>u.type===R.type).map(u=>u.name),[n,R.type]),ie=u=>{const $=n.find(L=>L.name===u),Y=($==null?void 0:$.color)||"slate";return`bg-${Y}-100 text-${Y}-700 border-${Y}-200 dark:bg-${Y}-900/30 dark:text-${Y}-300 dark:border-${Y}-800`};d.useEffect(()=>{P&&Date.now()-P<2e3&&(S(!0),ne())},[P]),d.useEffect(()=>{w&&V.current&&setTimeout(()=>{var u;(u=V.current)==null||u.scrollIntoView({behavior:"smooth",block:"center"})},100)},[w,J]),d.useEffect(()=>{if(b&&R.category==="Sal√°rio"){const[u,$]=R.date.split("-").map(Number),Y=parseInt(c)||5,L=js(u,$-1,Y);L!==R.date&&ae(re=>({...re,date:L}))}},[b,c,R.category]);const xe=d.useMemo(()=>R.type==="income"?vs:Ns,[R.type]),be=()=>M(u=>new Date(u.getFullYear(),u.getMonth()-1,1)),Pe=()=>M(u=>new Date(u.getFullYear(),u.getMonth()+1,1)),Ce=d.useMemo(()=>{const u=[],$=new Date,Y=$.getMonth(),L=$.getFullYear(),re=$.toISOString().slice(0,7);return r.forEach(te=>{if(!(te.isRecurring&&!r.some(pe=>pe.category===te.category&&pe.month===re&&!pe.isRecurring)||te.month===re))return;t.filter(pe=>pe.type==="expense"&&pe.category===te.category&&new Date(pe.date).getMonth()===Y&&new Date(pe.date).getFullYear()===L).reduce((pe,Ae)=>pe+Ae.amount,0)>=te.limit&&u.push({title:`Limite Excedido: ${te.category}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),u},[r,t]),je=d.useMemo(()=>{const u=t.filter(L=>{const[re,te]=L.date.split("-");return parseInt(re)===z.getFullYear()&&parseInt(te)===z.getMonth()+1}),$=u.filter(L=>L.type==="income").reduce((L,re)=>L+re.amount,0),Y=u.filter(L=>L.type==="expense").reduce((L,re)=>L+re.amount,0);return{income:$,expense:Y,balance:$-Y}},[t,z]),at=d.useMemo(()=>t.filter(u=>{const[$,Y]=u.date.split("-");return!(!(parseInt($)===z.getFullYear()&&parseInt(Y)===z.getMonth()+1)||h!=="all"&&u.type!==h||k&&!u.description.toLowerCase().includes(k.toLowerCase())||W!=="all"&&u.category!==W||G!=="all"&&u.paymentMethod!==G)}).sort((u,$)=>new Date($.date).getTime()-new Date(u.date).getTime()),[t,z,h,k,W,G]),rt=d.useMemo(()=>{const u={};at.forEach(te=>{u[te.date]||(u[te.date]={transactions:[],total:0}),u[te.date].transactions.push(te);const he=te.type==="income"?te.amount:-te.amount;u[te.date].total+=he});const Y=[...Object.entries(u).map(([te,he])=>({date:te,...he})).sort((te,he)=>new Date(he.date).getTime()-new Date(te.date).getTime())].reverse();let L=0;return Y.map(te=>(L+=te.total,{...te,runningBalance:L})).reverse()},[at]),Se=u=>N?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${u.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,O=u=>{const $=new Date(u+"T12:00:00"),Y=new Date,L=new Date;if(L.setDate(L.getDate()-1),$.toDateString()===Y.toDateString())return"Hoje";if($.toDateString()===L.toDateString())return"Ontem";const re=$.toLocaleDateString("pt-BR",{weekday:"long"}),te=$.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"});return`${re.split("-")[0]}, ${te}`},le=async()=>{if(!R.description)return;g(!0);const u=await Br(R.description),$=Q.includes(u);ae(Y=>({...Y,category:$?u:"Outros"})),g(!1)},ce=u=>{const $=u.target.value,Y=n.filter(re=>re.type===$).map(re=>re.name),L=$==="income"?"pix":"credit_card";ae(re=>({...re,type:$,category:Y[0]||"Outros",paymentMethod:L}))},ne=()=>{ae({description:"",amount:"",type:"expense",category:"Outros",date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:"credit_card",isRecurring:!1,autoPay:!1,installments:"",observation:""}),de(null),p("monthly"),s([]),i(!1),T(""),_(!1),j("5")},A=u=>{ae({description:u.description||"",amount:(u.amount||0).toString(),type:u.type||"expense",category:u.category||"Outros",date:u.date||new Date().toISOString().split("T")[0],status:u.status||"paid",paymentMethod:u.paymentMethod||(u.type==="income"?"pix":"credit_card"),isRecurring:u.isRecurring||!1,autoPay:u.autoPay||!1,installments:"",observation:u.observation||""}),de(u.id),S(!0)},oe=u=>{s($=>$.includes(u)?$.filter(Y=>Y!==u):[...$,u])},me=u=>{u.preventDefault();let $=parseFloat(R.amount),Y=R.observation;if(R.type==="income"&&R.category==="Sal√°rio"&&a){const re=parseFloat(y);if(!isNaN(re)&&re>0&&re<100){const te=$*(re/100),he=$;$=$-te;const fe=`(Sal√°rio Bruto: R$ ${he.toFixed(2)} | Desc. Pens√£o: ${re}%)`;Y=Y?`${Y} ${fe}`:fe}}const L={description:R.description,amount:$,type:R.type,category:R.category,date:R.date,status:R.status,paymentMethod:R.paymentMethod,isRecurring:R.isRecurring,autoPay:R.status==="pending"?R.autoPay:!1,observation:Y};if(R.isRecurring)if(se==="days"&&x.length>0){const[re,te]=R.date.split("-").map(Number),he=new Date(re,te,0).getDate();x.forEach(fe=>{if(fe<=he){const pe=String(fe).padStart(2,"0"),Ae=String(te).padStart(2,"0"),Ge=`${re}-${Ae}-${pe}`;l({...L,description:`${R.description} (Dia ${fe})`,date:Ge,isRecurring:!1})}})}else{const re=parseInt(R.installments);if(!isNaN(re)&&re>1){const[te,he,fe]=R.date.split("-").map(Number),pe=parseInt(c)||5;for(let Ae=0;Ae<re;Ae++){let Ge;b&&R.category==="Sal√°rio"&&R.type==="income"?Ge=js(te,he-1+Ae,pe):Ge=new Date(te,he-1+Ae,fe).toISOString().split("T")[0];const qs=`${R.description} (${Ae+1}/${re})`;l({...L,description:qs,date:Ge,isRecurring:!1})}}else J?o(J,L):l(L)}else J?o(J,L):l(L);ne(),S(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden md:block",children:"Transa√ß√µes"}),e.jsxs("div",{className:"flex flex-1 w-full md:w-auto gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx(Et,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar...",value:k,onChange:u=>q(u.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-sm transition-all shadow-sm"}),k&&e.jsx("button",{onClick:()=>q(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(ue,{className:"w-3 h-3"})})]}),e.jsx("button",{onClick:()=>Z(!H),className:`p-2.5 rounded-xl border transition-all ${H?"bg-indigo-50 border-indigo-200 text-indigo-600 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500"}`,children:e.jsx($s,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-1 shrink-0",children:[e.jsx("button",{onClick:be,className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-600 dark:text-slate-300",children:e.jsx(Gt,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-2 text-xs font-bold text-slate-700 dark:text-slate-200 capitalize min-w-[80px] text-center",children:z.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"})}),e.jsx("button",{onClick:Pe,className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-600 dark:text-slate-300",children:e.jsx(Nt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsxs("button",{onClick:()=>I(U.SUBSCRIPTIONS),className:"flex items-center gap-2 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 px-4 py-2.5 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium text-sm shadow-sm",children:[e.jsx(Oe,{className:"w-4 h-4 text-indigo-500"}),"Assinaturas"]}),e.jsxs("button",{onClick:()=>{ne(),S(!w)},className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2.5 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/20 font-bold text-sm",children:[e.jsx(ge,{className:"w-4 h-4"})," Nova"]})]})]}),H&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700 animate-fade-in-down",children:[e.jsxs("select",{value:W,onChange:u=>D(u.target.value),className:"p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white text-xs outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Todas Categorias"}),n.map(u=>e.jsx("option",{value:u.name,children:u.name},u.id))]}),e.jsxs("select",{value:G,onChange:u=>X(u.target.value),className:"p-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white text-xs outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Todos M√©todos"}),[...Ns,...vs].map(u=>e.jsx("option",{value:u,children:At[u]},u))]})]})]}),Ce.length>0&&e.jsx("div",{className:"space-y-2",children:Ce.map((u,$)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down shadow-sm",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Lt,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:u.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:u.message})]})]},$))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Entradas"}),e.jsx("p",{className:"text-sm md:text-lg font-bold text-emerald-600 dark:text-emerald-400 truncate",children:Se(je.income)})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Sa√≠das"}),e.jsx("p",{className:"text-sm md:text-lg font-bold text-rose-600 dark:text-rose-400 truncate",children:Se(je.expense)})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 md:p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[10px] md:text-xs font-bold uppercase tracking-wider",children:"Resultado (M√™s)"}),e.jsx("p",{className:`text-sm md:text-lg font-bold truncate ${je.balance>=0?"text-indigo-600 dark:text-indigo-400":"text-rose-600"}`,children:Se(je.balance)})]})]}),e.jsx("div",{ref:V,className:"scroll-mt-24",children:w&&e.jsxs("form",{onSubmit:me,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:J?"Editar Transa√ß√£o":"Adicionar Transa√ß√£o"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,type:"text",placeholder:"Descri√ß√£o",value:R.description,onChange:u=>ae({...R,description:u.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none w-full pr-10"}),e.jsx("button",{type:"button",onClick:le,disabled:v||!R.description||!C,className:`absolute right-2 top-2 ${C?"text-indigo-500 hover:text-indigo-700":"text-slate-400 opacity-50 cursor-not-allowed"} disabled:opacity-30`,children:v?e.jsx(ft,{className:"w-5 h-5 animate-spin"}):e.jsx(xa,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("input",{required:!0,type:"number",placeholder:"Valor (R$)",value:R.amount,onChange:u=>ae({...R,amount:u.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 outline-none"}),R.type==="income"&&R.category==="Sal√°rio"&&!J&&e.jsxs("div",{className:"flex items-center gap-2 mt-1 px-1 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group select-none",onClick:()=>i(!a),children:[e.jsx("div",{className:`w-3.5 h-3.5 rounded border flex items-center justify-center transition-colors ${a?"bg-indigo-600 border-indigo-600":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800"}`,children:a&&e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),e.jsxs("span",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400 group-hover:text-indigo-500 transition-colors flex items-center gap-1",children:[e.jsx(ma,{className:"w-3 h-3"})," Descontar Pens√£o?"]})]}),a&&e.jsxs("div",{className:"flex items-center gap-1 animate-scale-in ml-auto",children:[e.jsx("input",{autoFocus:!0,type:"number",placeholder:"%",className:"w-12 py-0.5 px-1 text-xs border border-slate-300 rounded text-center outline-none focus:border-indigo-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white font-bold",value:y,onChange:u=>T(u.target.value)}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"%"})]})]})]}),e.jsxs("select",{value:R.type,onChange:ce,className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"expense",children:"Despesa"}),e.jsx("option",{value:"income",children:"Receita"})]}),e.jsx("select",{value:R.category,onChange:u=>ae({...R,category:u.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:Q.map(u=>e.jsx("option",{value:u,children:u},u))}),e.jsxs("div",{children:[e.jsx("input",{required:!0,type:"date",value:R.date,onChange:u=>ae({...R,date:u.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 w-full"}),R.category==="Sal√°rio"&&R.type==="income"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-100 dark:border-emerald-800/30 animate-fade-in mt-2",children:[e.jsx("input",{type:"checkbox",id:"useBusinessDay",checked:b,onChange:u=>_(u.target.checked),className:"w-3.5 h-3.5 text-emerald-600 rounded"}),e.jsxs("label",{htmlFor:"useBusinessDay",className:"text-xs font-bold text-emerald-700 dark:text-emerald-400 flex items-center gap-1 cursor-pointer flex-1",children:[e.jsx(ua,{className:"w-3 h-3"})," Considerar dia √∫til?"]}),b&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",min:"1",max:"20",value:c,onChange:u=>j(u.target.value),className:"w-10 py-0.5 px-1 text-xs border border-emerald-300 rounded text-center outline-none focus:border-emerald-500 font-bold dark:bg-slate-700 dark:text-white"}),e.jsx("span",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 font-bold",children:"¬∫ dia"})]})]})]}),e.jsxs("select",{value:R.status,onChange:u=>ae({...R,status:u.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"paid",children:"Pago/Recebido"}),e.jsx("option",{value:"pending",children:"Pendente"})]}),R.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-100 dark:border-indigo-800/30 animate-fade-in mt-1 md:col-span-2 md:mt-0",children:[e.jsx("input",{type:"checkbox",id:"autoPay",checked:R.autoPay||!1,onChange:u=>ae({...R,autoPay:u.target.checked}),className:"w-4 h-4 text-indigo-600 rounded"}),e.jsxs("label",{htmlFor:"autoPay",className:"text-xs font-bold text-indigo-700 dark:text-indigo-400 flex items-center gap-1 cursor-pointer flex-1",children:[e.jsx(kt,{className:"w-3 h-3"})," Lan√ßamento Autom√°tico na Data?"]})]}),e.jsx("select",{value:R.paymentMethod,onChange:u=>ae({...R,paymentMethod:u.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:xe.map(u=>e.jsx("option",{value:u,children:At[u]},u))}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("textarea",{placeholder:"Observa√ß√µes (opcional)",value:R.observation,onChange:u=>ae({...R,observation:u.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 w-full outline-none resize-none h-20 text-sm"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-dashed border-slate-300 dark:border-slate-600 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"recurring",checked:R.isRecurring,onChange:u=>ae({...R,isRecurring:u.target.checked}),className:"w-4 h-4 text-indigo-600 rounded"}),e.jsxs("label",{htmlFor:"recurring",className:"text-sm text-slate-700 dark:text-slate-200 font-medium flex items-center gap-1 cursor-pointer",children:[e.jsx(Oe,{className:"w-4 h-4 text-indigo-500"})," Assinatura / Recorrente / Parcelado"]})]}),R.isRecurring&&e.jsxs("div",{className:"mt-2 pl-2 md:pl-6 animate-fade-in space-y-3",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>p("monthly"),className:`flex-1 py-1.5 px-3 rounded-lg text-xs font-bold border transition-colors ${se==="monthly"?"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800":"bg-slate-50 text-slate-500 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}`,children:"Mensal / Parcelado"}),e.jsx("button",{type:"button",onClick:()=>p("days"),className:`flex-1 py-1.5 px-3 rounded-lg text-xs font-bold border transition-colors ${se==="days"?"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800":"bg-slate-50 text-slate-500 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}`,children:"Dias Espec√≠ficos"})]}),se==="monthly"?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Repetir por quantas vezes? (Opcional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-4 h-4 text-slate-400"}),e.jsx("input",{type:"number",placeholder:"Ex: 12 (Deixe vazio para assinatura infinita)",value:R.installments,onChange:u=>ae({...R,installments:u.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 text-sm w-full outline-none focus:ring-2 focus:ring-indigo-500"})]})]})}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase flex items-center gap-1",children:[e.jsx(ha,{className:"w-3 h-3"})," Selecione os dias do m√™s"]}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:[...Array(31)].map((u,$)=>{const Y=$+1,L=x.includes(Y);return e.jsx("button",{type:"button",onClick:()=>oe(Y),className:`h-8 rounded-md text-xs font-bold transition-all ${L?"bg-indigo-600 text-white shadow-md shadow-indigo-500/30 transform scale-105":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Y},Y)})}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Uma transa√ß√£o ser√° criada para cada dia selecionado neste m√™s."})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:J?"Atualizar":"Salvar"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-1 flex",children:[e.jsxs("button",{onClick:()=>F("all"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="all"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx($t,{className:"w-4 h-4"})," Todas"]}),e.jsxs("button",{onClick:()=>F("income"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="income"?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(yt,{className:"w-4 h-4"})," Entradas"]}),e.jsxs("button",{onClick:()=>F("expense"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${h==="expense"?"bg-rose-50 text-rose-600 dark:bg-rose-900/30 dark:text-rose-300":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(it,{className:"w-4 h-4"})," Sa√≠das"]})]}),e.jsx("div",{className:"space-y-4 pb-20 md:pb-0",children:rt.length===0?e.jsxs("div",{className:"text-center py-16 text-slate-400",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Et,{className:"w-8 h-8 opacity-50"})}),e.jsx("p",{children:"Nenhuma transa√ß√£o encontrada."}),e.jsx("p",{className:"text-xs mt-1",children:"Tente mudar os filtros ou adicione uma nova."})]}):rt.map(u=>e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 mb-1 sticky top-0 z-10 bg-slate-50/95 dark:bg-slate-900/95 backdrop-blur-sm rounded-lg border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(ye,{className:"w-3 h-3"}),O(u.date)]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-bold ${u.total>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-500"}`,children:u.total!==0&&(u.total>0?"+":"")+Se(u.total)}),e.jsx("div",{className:"h-4 w-px bg-slate-300 dark:bg-slate-700"}),e.jsxs("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 flex items-center gap-1",title:"Saldo acumulado at√© este dia",children:[e.jsx(ga,{className:"w-3 h-3"}),Se(u.runningBalance)]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden divide-y divide-slate-100 dark:divide-slate-700",children:u.transactions.map($=>e.jsxs("div",{className:"group hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{className:"md:hidden p-4 flex items-center gap-3 relative",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${$.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-rose-100 text-rose-600 dark:bg-rose-900/30"}`,children:$.type==="income"?e.jsx(yt,{className:"w-5 h-5"}):e.jsx(it,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>A($),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white truncate pr-2 text-sm",children:$.description}),e.jsxs("span",{className:`font-bold text-sm whitespace-nowrap ${$.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-800 dark:text-slate-200"}`,children:[$.type==="expense"&&"- ",Se($.amount)]})]}),e.jsx("div",{className:"flex justify-between items-center mt-1",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium border ${ie($.category)}`,children:$.category}),$.isRecurring&&e.jsxs("span",{className:"flex items-center gap-0.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded",title:"Recorrente Infinito",children:[e.jsx(es,{className:"w-3 h-3"}),"Fixo"]}),$.status==="pending"&&$.autoPay&&e.jsxs("span",{className:"flex items-center gap-0.5 text-amber-600 bg-amber-50 dark:bg-amber-900/30 px-1.5 py-0.5 rounded",title:"Lan√ßamento Autom√°tico",children:[e.jsx(kt,{className:"w-3 h-3"})," Auto"]})]})}),$.observation&&e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1 italic truncate flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"})," ",$.observation]})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[e.jsx("button",{onClick:()=>m($.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${$.status==="paid"?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent hover:border-emerald-400"}`,children:e.jsx(Rt,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>A($),className:"p-1 text-slate-400",children:e.jsx(Rs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4 p-3 text-sm",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${$.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-rose-100 text-rose-600 dark:bg-rose-900/30"}`,children:$.type==="income"?e.jsx(yt,{className:"w-4 h-4"}):e.jsx(it,{className:"w-4 h-4"})}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 text-center font-bold text-slate-400 text-xs",children:parseInt($.date.split("-")[2])}),e.jsx("div",{className:"w-24 shrink-0",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium border block text-center truncate ${ie($.category)}`,children:$.category})}),e.jsxs("div",{className:"flex-1 font-medium text-slate-700 dark:text-slate-200 truncate cursor-pointer hover:text-indigo-500 flex flex-col justify-center",onClick:()=>A($),title:"Clique para editar",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[$.description,$.isRecurring&&e.jsxs("span",{className:"text-[10px] text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1.5 py-0.5 rounded flex items-center gap-0.5",title:"Recorr√™ncia Infinita",children:[e.jsx(es,{className:"w-3 h-3"})," Recorrente"]}),$.status==="pending"&&$.autoPay&&e.jsxs("span",{className:"text-[10px] text-amber-600 bg-amber-50 dark:bg-amber-900/30 px-1.5 py-0.5 rounded flex items-center gap-0.5",title:"Lan√ßamento Autom√°tico",children:[e.jsx(kt,{className:"w-3 h-3"})," Auto"]})]}),$.observation&&e.jsx("span",{className:"text-[10px] text-slate-400 font-normal truncate max-w-[300px]",children:$.observation})]}),e.jsxs("div",{className:"w-24 text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(Zr,{method:$.paymentMethod||"",className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:At[$.paymentMethod||""]||"-"})]}),e.jsx("div",{className:`w-28 text-right font-bold cursor-pointer hover:text-indigo-500 ${$.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-200"}`,onClick:()=>A($),children:Se($.amount)}),e.jsx("div",{className:"w-8 flex justify-center",children:e.jsx("button",{onClick:()=>m($.id),className:`transition-all hover:scale-110 ${$.status==="paid"?"text-emerald-500":"text-slate-300 hover:text-emerald-400"}`,title:$.status==="paid"?"Marcar como pendente":"Marcar como pago",children:e.jsx(Rt,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"w-16 flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>A($),className:"p-1.5 text-slate-400 hover:text-indigo-500 rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(pa,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f($.id),className:"p-1.5 text-slate-400 hover:text-rose-500 rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(Te,{className:"w-4 h-4"})})]})]})]})]},$.id))})]},u.date))}),e.jsx("button",{onClick:()=>{ne(),S(!0)},className:"md:hidden fixed bottom-20 right-4 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center z-40 hover:scale-105 transition-transform",children:e.jsx(ge,{className:"w-7 h-7"})})]})},tl=["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"],sl=["Casa","Mobilidade","Alimentos","Lazer","Sa√∫de","Educa√ß√£o","Pets","Sal√°rio","Renda Extra","Investimentos","Outros"],al=[{value:"credit_card",label:"Cr√©dito"},{value:"debit_card",label:"D√©bito"},{value:"pix",label:"PIX"},{value:"cash",label:"Dinheiro"},{value:"direct_debit",label:"D√©bito Auto."}],rl=t=>{let r=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//NEXO Finance//PT-BR
`;t.forEach(o=>{const f=o.date.replace(/-/g,"");r+=`BEGIN:VEVENT
`,r+=`DTSTART;VALUE=DATE:${f}
`,r+=`DTEND;VALUE=DATE:${f}
`,r+=`SUMMARY:${o.description} (${o.type==="income"?"+":"-"} R$ ${o.amount})
`,r+=`DESCRIPTION:Categoria: ${o.category} | Status: ${o.status} ${o.observation?"| Obs: "+o.observation:""}
`,r+=`END:VEVENT
`}),r+="END:VCALENDAR";const n=new Blob([r],{type:"text/calendar;charset=utf-8"}),l=document.createElement("a");l.href=window.URL.createObjectURL(n),l.setAttribute("download","nexo_agenda.ics"),document.body.appendChild(l),l.click(),document.body.removeChild(l)},ll=({transactions:t,budgets:r,onAddTransaction:n,privacyMode:l})=>{const[o,f]=d.useState(new Date),[m,I]=d.useState(new Date().getDate()),[N,C]=d.useState("all"),[P,w]=d.useState(!1),[S,v]=d.useState(!1),[g,E]=d.useState({description:"",amount:"",type:"expense",category:"Outros",paymentMethod:"credit_card",status:"pending",observation:""}),B=o.getFullYear(),z=o.getMonth(),M=(s,a)=>new Date(s,a+1,0).getDate(),h=(s,a)=>new Date(s,a,1).getDay(),F=M(B,z),k=h(B,z),q=d.useMemo(()=>{const s=[],a=new Date,i=a.getMonth(),y=a.getFullYear(),T=a.toISOString().slice(0,7);return r.forEach(b=>{if(!(b.isRecurring&&!r.some(j=>j.category===b.category&&j.month===T&&!j.isRecurring)||b.month===T))return;t.filter(j=>j.type==="expense"&&j.category===b.category&&new Date(j.date).getMonth()===i&&new Date(j.date).getFullYear()===y).reduce((j,V)=>j+V.amount,0)>=b.limit&&s.push({title:`Limite Excedido: ${b.category}`,message:"Voc√™ estourou o teto definido para esta categoria.",type:"warning"})}),s},[r,t]),W=d.useMemo(()=>{const s=t.filter(b=>{const[_,c]=b.date.split("-").map(Number);return _===B&&c===z+1}),a=new Map;t.forEach(b=>{if(b.isRecurring){const _=a.get(b.description);(!_||new Date(b.date)>new Date(_.date))&&a.set(b.description,b)}});const i=[],y=new Date;return new Date(B,z,1)>=new Date(y.getFullYear(),y.getMonth(),1)&&a.forEach(b=>{if(!s.some(c=>c.description===b.description&&c.amount===b.amount)){const c=new Date(b.date),j=c.getDate(),V=Math.min(j,F);c<new Date(B,z+1,0)&&i.push({...b,id:`ghost-${b.id}-${B}-${z}`,date:`${B}-${String(z+1).padStart(2,"0")}-${String(V).padStart(2,"0")}`,status:"pending",isGhost:!0})}}),[...s,...i].filter(b=>N==="all"?!0:N==="pending"?b.status==="pending":b.type===N)},[t,B,z,F,N]),D=d.useMemo(()=>m===null?[]:W.filter(s=>parseInt(s.date.split("-")[2])===m),[W,m]),G=d.useMemo(()=>{let s=0;for(let a=1;a<=F;a++){const i=W.filter(y=>parseInt(y.date.split("-")[2])===a&&y.type==="expense").reduce((y,T)=>y+T.amount,0);i>s&&(s=i)}return s||1},[W,F]),X=()=>{f(new Date(B,z-1,1)),I(null)},H=()=>{f(new Date(B,z+1,1)),I(null)},Z=()=>{m&&(E({description:"",amount:"",type:"expense",category:"Outros",paymentMethod:"credit_card",status:"pending",observation:""}),v(!0))},J=s=>{if(s.preventDefault(),!m)return;const a=`${B}-${String(z+1).padStart(2,"0")}-${String(m).padStart(2,"0")}`;n({description:g.description,amount:parseFloat(g.amount),type:g.type,category:g.category,date:a,status:g.status,paymentMethod:g.paymentMethod,isRecurring:!1,observation:g.observation}),v(!1)},de=async()=>{if(!ke.currentUser){alert("Voc√™ precisa estar logado para sincronizar.");return}w(!0);try{const s=await Hr(t,(a,i)=>{dt(ke.currentUser.uid,a,i)});s>0?alert(`${s} eventos criados na sua Google Agenda!`):alert("Tudo sincronizado! Nenhuma nova conta pendente encontrada.")}catch(s){console.error(s),alert("Erro ao sincronizar: "+s.message)}finally{w(!1)}},se=s=>l?"‚Ä¢‚Ä¢‚Ä¢":s>=1e3?(s/1e3).toFixed(1)+"k":s.toFixed(0),p=s=>l?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,x=[];for(let s=0;s<k;s++)x.push(e.jsx("div",{className:"h-28 bg-slate-50/30 dark:bg-slate-800/30 border border-slate-100 dark:border-slate-700/50"},`empty-${s}`));for(let s=1;s<=F;s++){const a=W.filter(j=>parseInt(j.date.split("-")[2])===s),i=a.filter(j=>j.type==="income").reduce((j,V)=>j+V.amount,0),y=a.filter(j=>j.type==="expense").reduce((j,V)=>j+V.amount,0),T=Math.min(1,y/G);let b="bg-white dark:bg-slate-800";y>0&&(T>.7?b="bg-rose-100 dark:bg-rose-900/40":T>.4?b="bg-rose-50 dark:bg-rose-900/20":b="bg-slate-50 dark:bg-slate-800");const _=new Date().getDate()===s&&new Date().getMonth()===z&&new Date().getFullYear()===B,c=m===s;x.push(e.jsxs("div",{onClick:()=>I(s),className:`h-28 p-1.5 border border-slate-100 dark:border-slate-700 relative cursor-pointer transition-all hover:brightness-95
          ${c?"ring-2 ring-inset ring-indigo-500 z-10":""}
          ${b}
        `,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:`text-xs font-bold inline-flex w-6 h-6 items-center justify-center rounded-full ${_?"bg-indigo-600 text-white shadow-lg":"text-slate-500 dark:text-slate-400"}`,children:s}),a.some(j=>j.status==="pending")&&e.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse",title:"Pagamentos Pendentes"})]}),e.jsxs("div",{className:"mt-2 flex flex-col gap-0.5",children:[i>0&&e.jsxs("div",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 bg-emerald-100/50 dark:bg-emerald-900/30 px-1 rounded truncate",children:["+",se(i)]}),y>0&&e.jsxs("div",{className:"text-[10px] font-bold text-rose-600 dark:text-rose-400 px-1 rounded truncate",children:["-",se(y)]}),a.some(j=>j.isGhost)&&e.jsx("div",{className:"absolute bottom-1 right-1 opacity-50",children:e.jsx(qt,{className:"w-3 h-3 text-slate-400"})})]})]},s))}return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20 md:pb-0 relative",children:[q.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:q.map((s,a)=>e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-xl flex items-start gap-3 animate-fade-in-down shadow-sm",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-2 rounded-full flex-shrink-0",children:e.jsx(Lt,{className:"w-5 h-5 text-amber-600 dark:text-amber-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm",children:s.title}),e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-xs mt-0.5",children:s.message})]})]},a))}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Nova Transa√ß√£o"}),e.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-semibold flex items-center gap-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),m," de ",o.toLocaleDateString("pt-BR",{month:"long"})]})]}),e.jsx("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:J,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"O que √©?"}),e.jsxs("div",{className:"relative",children:[e.jsx(ja,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("input",{autoFocus:!0,required:!0,type:"text",placeholder:"Ex: Mercado, Conta de Luz...",value:g.description,onChange:s=>E({...g,description:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Valor (R$)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0,00",value:g.amount,onChange:s=>E({...g,amount:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Tipo"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 rounded-xl p-1",children:[e.jsx("button",{type:"button",onClick:()=>E({...g,type:"expense"}),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition-colors ${g.type==="expense"?"bg-white dark:bg-slate-600 text-rose-600 shadow-sm":"text-slate-500"}`,children:"Sa√≠da"}),e.jsx("button",{type:"button",onClick:()=>E({...g,type:"income"}),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition-colors ${g.type==="income"?"bg-white dark:bg-slate-600 text-emerald-600 shadow-sm":"text-slate-500"}`,children:"Entrada"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Categoria"}),e.jsxs("div",{className:"relative",children:[e.jsx(Kt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("select",{value:g.category,onChange:s=>E({...g,category:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 appearance-none",children:sl.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Pagamento"}),e.jsxs("div",{className:"relative",children:[e.jsx(mt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("select",{value:g.paymentMethod,onChange:s=>E({...g,paymentMethod:s.target.value}),className:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 appearance-none",children:al.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"Status"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:`flex-1 cursor-pointer border rounded-xl p-3 flex items-center justify-center gap-2 transition-all ${g.status==="paid"?"bg-emerald-50 border-emerald-500 text-emerald-700 dark:bg-emerald-900/20":"border-slate-200 dark:border-slate-700"}`,children:[e.jsx("input",{type:"radio",name:"status",className:"hidden",checked:g.status==="paid",onChange:()=>E({...g,status:"paid"})}),e.jsx(Pt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Pago / Recebido"})]}),e.jsxs("label",{className:`flex-1 cursor-pointer border rounded-xl p-3 flex items-center justify-center gap-2 transition-all ${g.status==="pending"?"bg-amber-50 border-amber-500 text-amber-700 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700"}`,children:[e.jsx("input",{type:"radio",name:"status",className:"hidden",checked:g.status==="pending",onChange:()=>E({...g,status:"pending"})}),e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Pendente"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Observa√ß√µes (Opcional)"}),e.jsx("input",{type:"text",placeholder:"Detalhes adicionais...",value:g.observation,onChange:s=>E({...g,observation:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all flex items-center justify-center gap-2 mt-4",children:[e.jsx(ge,{className:"w-5 h-5"})," Adicionar Transa√ß√£o"]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ye,{className:"w-7 h-7 text-indigo-600"}),"Agenda Financeira"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Previs√£o de gastos e controle de vencimentos."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("button",{onClick:de,disabled:P,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-bold transition-all shadow-sm border ${P?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-white hover:bg-slate-50 text-indigo-600 border-indigo-100 hover:border-indigo-300 dark:bg-slate-800 dark:text-indigo-400 dark:border-slate-700"}`,title:"Sincronizar contas pendentes com Google Agenda",children:[e.jsx(Na,{className:`w-4 h-4 ${P?"animate-spin":""}`}),P?"Sincronizando...":"Sincronizar Agenda"]}),e.jsx("button",{onClick:()=>rl(W),className:"p-2 text-slate-500 hover:text-indigo-600 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800",title:"Exportar para Arquivo (.ics)",children:e.jsx(_t,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-1 flex-1 md:flex-none justify-center",children:[e.jsx("button",{onClick:X,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(Gt,{className:"w-5 h-5"})}),e.jsx("div",{className:"px-4 font-semibold text-slate-700 dark:text-slate-200 capitalize min-w-[140px] text-center",children:o.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:H,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(Nt,{className:"w-5 h-5"})})]})]})]}),e.jsx("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 overflow-x-auto",children:[{id:"all",label:"Tudo",icon:$s},{id:"expense",label:"Sa√≠das",icon:ts},{id:"income",label:"Entradas",icon:ss},{id:"pending",label:"Pendentes",icon:We}].map(s=>e.jsxs("button",{onClick:()=>C(s.id),className:`flex-1 min-w-[80px] py-2 text-xs font-semibold rounded-lg transition-all flex items-center justify-center gap-2
                    ${N===s.id?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(s.icon,{className:"w-3 h-3"})," ",s.label]},s.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:tl.map(s=>e.jsx("div",{className:"py-3 text-center text-xs font-bold uppercase text-slate-500 dark:text-slate-400",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7",children:x})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-0 overflow-hidden flex flex-col h-full min-h-[400px]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:m?`${m} de ${o.toLocaleDateString("pt-BR",{month:"long"})}`:"Resumo do M√™s"}),m&&e.jsxs("button",{onClick:Z,className:"mt-3 w-full py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[e.jsx(ge,{className:"w-4 h-4"})," Adicionar neste dia"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[m&&D.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx(Xe,{className:"w-12 h-12 text-slate-200 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma movimenta√ß√£o."})]}),!m&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-100 dark:bg-slate-700 mb-4",children:e.jsx(ye,{className:"w-8 h-8 text-indigo-500"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Selecione um dia"}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Clique no calend√°rio para ver detalhes ou adicionar contas."})]}),D.map((s,a)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${s.isGhost?"bg-slate-50 dark:bg-slate-800 border-dashed border-indigo-300 dark:border-indigo-700":"bg-white dark:bg-slate-700/50 border-slate-100 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.type==="income"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400"}`,children:s.type==="income"?e.jsx(ss,{className:"w-4 h-4"}):e.jsx(ts,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-white text-sm line-clamp-1",children:s.description}),s.isGhost&&e.jsx("span",{className:"text-[9px] bg-indigo-100 text-indigo-600 px-1.5 rounded uppercase font-bold",children:"Previsto"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.category}),s.observation&&e.jsx("p",{className:"text-[10px] text-slate-400 italic mt-0.5",children:s.observation})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`font-bold text-sm ${s.type==="income"?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-300"}`,children:p(s.amount)}),s.type==="expense"&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${s.status==="pending"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:s.status==="pending"?"Pendente":"Pago"})]})]},s.id||a))]})]})]})]})},nl=({transactions:t,onUpdateTransaction:r,onDeleteTransaction:n,privacyMode:l})=>{const o=d.useMemo(()=>{const S=new Map;return t.filter(g=>g.type==="expense"&&g.isRecurring).forEach(g=>{const E=S.get(g.description);(!E||new Date(g.date)>new Date(E.date))&&S.set(g.description,g)}),Array.from(S.values()).sort((g,E)=>E.amount-g.amount)},[t]),f=o.reduce((S,v)=>S+v.amount,0),m=f*12,I=d.useMemo(()=>o.slice(0,10).map(S=>({name:S.description,amount:S.amount,annual:S.amount*12,color:S.amount>200?"#ef4444":S.amount>50?"#f59e0b":"#3b82f6"})),[o]),N=S=>l?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${S.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,C=S=>{confirm("Deseja parar de considerar este item como recorrente? Ele continuar√° como uma transa√ß√£o comum.")&&r(S,{isRecurring:!1})},P=S=>{const g=new Date(S).getDate(),E=new Date;let B=new Date(E.getFullYear(),E.getMonth(),g);B.setHours(0,0,0,0)<E.setHours(0,0,0,0)&&B.setMonth(B.getMonth()+1);const z=B.getTime()-E.getTime(),M=Math.ceil(z/(1e3*60*60*24));return M===0?{label:"Hoje",color:"text-rose-500 font-bold bg-rose-100 dark:bg-rose-900/30"}:M===1?{label:"Amanh√£",color:"text-amber-500 font-bold bg-amber-100 dark:bg-amber-900/30"}:{label:`em ${M} dias`,color:"text-slate-500 bg-slate-100 dark:bg-slate-700"}},w=({active:S,payload:v,label:g})=>{if(S&&v&&v.length){const E=v[0].payload;return e.jsxs("div",{className:"bg-white/95 dark:bg-slate-800/95 p-3 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 backdrop-blur-sm",children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white mb-2 border-b border-slate-100 dark:border-slate-700 pb-1",children:E.name}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between gap-6 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:"Mensalidade:"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:l?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${E.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})}`})]}),e.jsxs("div",{className:"flex justify-between gap-6 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:"Custo Anual:"}),e.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:l?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${E.annual.toLocaleString("pt-BR",{minimumFractionDigits:2})}`})]})]})]})}return null};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Oe,{className:"w-7 h-7 text-indigo-600"}),"Gest√£o de Assinaturas"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Gerencie seus gastos recorrentes e descubra o impacto anual das pequenas mensalidades."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-indigo-600 text-white p-6 rounded-xl shadow-lg relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-indigo-200 text-sm font-medium mb-1 uppercase tracking-wider",children:"Custo Mensal Real"}),e.jsx("h3",{className:"text-3xl font-bold",children:N(f)}),e.jsxs("p",{className:"text-indigo-200 text-xs mt-2 opacity-80",children:[o.length," assinaturas ativas"]})]}),e.jsx(Xe,{className:"absolute right-4 bottom-4 w-24 h-24 text-indigo-500 opacity-20"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-6 rounded-xl shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1 uppercase tracking-wider",children:"Impacto Anual"}),e.jsx("h3",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:N(m)}),e.jsxs("p",{className:"text-emerald-500 text-xs mt-2 font-medium flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),"Proje√ß√£o de 12 meses"]})]}),e.jsx(ut,{className:"absolute right-4 bottom-4 w-24 h-24 text-slate-100 dark:text-slate-700"})]})]}),I.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2 mb-4",children:[e.jsx(Ye,{className:"w-5 h-5 text-indigo-500"}),"Ranking de Custos (Top 10)"]}),e.jsx("div",{className:"h-[250px] w-full",children:e.jsx(Ee,{width:"100%",height:"100%",children:e.jsxs(Xt,{data:I,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Je,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(Qe,{type:"number",hide:!0}),e.jsx(Ze,{dataKey:"name",type:"category",width:120,tick:{fill:"#64748b",fontSize:11,fontWeight:500},axisLine:!1,tickLine:!1}),e.jsx($e,{content:e.jsx(w,{}),cursor:{fill:"transparent"}}),e.jsx(bt,{dataKey:"amount",radius:[0,4,4,0],barSize:20,children:I.map((S,v)=>e.jsx(vt,{fill:S.color},`cell-${v}`))})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(Oe,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Nenhuma assinatura encontrada."}),e.jsx("p",{className:"text-slate-400 text-sm",children:'Marque a op√ß√£o "Recorrente" ao adicionar uma despesa.'})]}):o.map(S=>{const v=P(S.date);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"overflow-hidden mr-2",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-lg truncate mb-1",children:S.description}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400",children:S.category})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>C(S.id),className:"p-1.5 text-slate-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",title:"Remover recorr√™ncia",children:e.jsx(Ms,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n(S.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors",title:"Excluir assinatura",children:e.jsx(ue,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex items-center justify-between mt-2 mb-4",children:e.jsxs("div",{className:`flex items-center gap-1.5 text-[10px] uppercase font-bold px-2 py-1 rounded-md ${v.color}`,children:[e.jsx(ye,{className:"w-3 h-3"}),"Renova ",v.label]})}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-400 block",children:"Mensal"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:N(S.amount)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-slate-400 block",children:"Anual"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:N(S.amount*12)})]})]})]},S.id)})})]})},ol=["Serasa Limpa Nome","Acordo Certo","Desenrola Brasil","SPC Brasil","Boa Vista (Consumidor Positivo)","Direto com Banco/Credor","QueroQuitar","Pessoal/Fam√≠lia","Outros"],il=({debts:t,onAdd:r,onUpdate:n,onDelete:l,onAddTransaction:o,privacyMode:f,quickActionSignal:m})=>{const[I,N]=d.useState(!1),[C,P]=d.useState("all"),[w,S]=d.useState({isOpen:!1,debtId:""}),[v,g]=d.useState({date:new Date().toISOString().split("T")[0],amount:"",installments:1}),[E,B]=d.useState({isOpen:!1,debtId:"",currentValue:0}),[z,M]=d.useState("1"),[h,F]=d.useState({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""});d.useEffect(()=>{m&&Date.now()-m<2e3&&(N(!0),F({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""}))},[m]);const k=p=>{const x=new Date(p);return(new Date().getTime()-x.getTime())/(1e3*60*60*24*365.25)>=5},q=d.useMemo(()=>{let p=[...t];return C==="active"?p=p.filter(x=>!k(x.dueDate)):C==="prescribed"&&(p=p.filter(x=>k(x.dueDate))),p.sort((x,s)=>{const a=T=>T.status==="paid"?500:T.status==="agreement"?1:T.status==="negotiating"?2:k(T.dueDate)?4:3,i=a(x),y=a(s);return i!==y?i-y:s.currentAmount-x.currentAmount})},[t,C]),W=p=>{p.preventDefault();const x=h.targetAmount?parseFloat(h.targetAmount):0,s=h.platform==="Outros"?h.customPlatform:h.platform;r({creditor:h.creditor,originalAmount:parseFloat(h.originalAmount),currentAmount:parseFloat(h.currentAmount),targetAmount:x,dueDate:h.dueDate,status:h.status,platform:s,notes:h.notes}),F({creditor:"",originalAmount:"",currentAmount:"",targetAmount:"",dueDate:"",status:"open",platform:"Serasa Limpa Nome",customPlatform:"",notes:""}),N(!1)},D=(p,x)=>{if(x==="agreement"&&p.status!=="agreement"){S({isOpen:!0,debtId:p.id});const s=p.targetAmount>0?p.targetAmount:p.currentAmount;g({date:new Date().toISOString().split("T")[0],amount:s.toString(),installments:1})}else n(p.id,{status:x})},G=p=>{p.preventDefault();const x=t.find(T=>T.id===w.debtId);if(!x)return;const s=parseFloat(v.amount),a=Math.max(1,Math.floor(v.installments)),i=s/a;n(x.id,{status:"agreement",agreedAmount:s});const y=new Date(v.date);for(let T=0;T<a;T++){const b=new Date(y);b.setMonth(y.getMonth()+T);const _=a>1?`Acordo: ${x.creditor} (${T+1}/${a})`:`Acordo: ${x.creditor}`;o({description:_,amount:parseFloat(i.toFixed(2)),type:"expense",category:"Outros",date:b.toISOString().split("T")[0],status:"pending",paymentMethod:"pix",debtId:x.id})}alert(`Acordo registrado! ${a>1?`${a} parcelas agendadas`:"Pagamento agendado"}. A d√≠vida ser√° quitada automaticamente quando todas as parcelas forem pagas.`),S({isOpen:!1,debtId:""})},X=p=>{B({isOpen:!0,debtId:p.id,currentValue:p.currentAmount}),M("1")},H=()=>{const p=t.find(x=>x.id===E.debtId);if(p){const x=parseFloat(z),s=p.currentAmount*(1+x/100);n(p.id,{currentAmount:s})}B({isOpen:!1,debtId:"",currentValue:0})},Z=p=>f?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${p.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,J=t.filter(p=>p.status!=="paid").reduce((p,x)=>p+x.currentAmount,0),de=t.filter(p=>p.status!=="paid").reduce((p,x)=>p+x.targetAmount,0),se=t.filter(p=>p.status!=="paid"&&p.targetAmount>0).reduce((p,x)=>p+(x.currentAmount-x.targetAmount),0);return e.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[E.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 animate-scale-in",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-rose-500"})," Atualizar Juros"]})}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"O efeito bola de neve √© real. Atualize o valor para manter o controle."}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg mb-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:"Valor Atual"}),e.jsx("span",{className:"font-mono font-bold text-slate-700 dark:text-white",children:Z(E.currentValue)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("button",{onClick:()=>M("1"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${z==="1"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+1%"}),e.jsx("button",{onClick:()=>M("2"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${z==="2"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+2%"}),e.jsx("button",{onClick:()=>M("5"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-colors ${z==="5"?"bg-rose-100 text-rose-600 border border-rose-200":"bg-slate-50 dark:bg-slate-700 text-slate-500"}`,children:"+5%"}),e.jsxs("div",{className:"relative w-20",children:[e.jsx("input",{type:"number",value:z,onChange:p=>M(p.target.value),className:"w-full py-2 pl-2 pr-4 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 text-xs font-bold text-center outline-none focus:border-rose-500"}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-slate-400",children:"%"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>B({isOpen:!1,debtId:"",currentValue:0}),className:"flex-1 py-2.5 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-bold",children:"Cancelar"}),e.jsx("button",{onClick:H,className:"flex-1 py-2.5 bg-rose-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-rose-500/20",children:"Aplicar"})]})]})}),w.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-emerald-500/30 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-emerald-600 dark:text-emerald-400",children:[e.jsx(lt,{className:"w-8 h-8"}),e.jsx("h3",{className:"text-xl font-bold",children:"Oficializar Acordo"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm mb-6",children:"Qual foi o valor final negociado? Vamos atualizar o card e agendar o(s) pagamento(s)."}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Total Fechado (R$)"}),e.jsx("input",{type:"number",required:!0,step:"0.01",placeholder:"Valor total a pagar",value:v.amount,onChange:p=>g({...v,amount:p.target.value}),className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white font-bold text-lg outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"1¬™ Parcela"}),e.jsx("input",{type:"date",required:!0,value:v.date,onChange:p=>g({...v,date:p.target.value}),className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"N¬∫ Parcelas"}),e.jsxs("div",{className:"relative",children:[e.jsx(qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"60",value:v.installments,onChange:p=>g({...v,installments:parseInt(p.target.value)}),className:"w-full p-3 pl-9 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>S({isOpen:!1,debtId:""}),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 rounded-lg font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold shadow-lg shadow-emerald-500/30",children:"Gerar Parcelas"})]})]})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(He,{className:"w-7 h-7 text-rose-600"}),"Gest√£o de D√≠vidas (Limpa Nome)"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Controle suas pend√™ncias e foque no que realmente importa."})]}),e.jsxs("button",{onClick:()=>N(!I),className:"flex items-center gap-2 bg-rose-600 text-white px-4 py-2 rounded-lg hover:bg-rose-700 transition-colors shadow-sm",children:[e.jsx(ge,{className:"w-4 h-4"}),"Registrar D√≠vida"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-rose-100 dark:border-rose-900/30 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-semibold uppercase",children:"Total da D√≠vida (Banco)"}),e.jsx("h3",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400",children:Z(J)}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Valor cheio com juros"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-emerald-100 dark:border-emerald-900/30 shadow-sm",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-semibold uppercase",children:"Valor para Quita√ß√£o (Alvo)"}),e.jsx("h3",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:Z(de)}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Soma das metas definidas"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:[e.jsx("p",{className:"text-indigo-100 text-xs font-semibold uppercase",children:"Economia Potencial"}),e.jsx("h3",{className:"text-2xl font-bold",children:Z(se)}),e.jsx("p",{className:"text-indigo-100 text-xs mt-1",children:"Baseado nas suas metas"})]})]}),I&&e.jsxs("form",{onSubmit:W,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-rose-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Registrar Nova Pend√™ncia"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Institui√ß√£o / Credor"}),e.jsx("input",{required:!0,type:"text",placeholder:"Ex: Banco X, Loja Y",value:h.creditor,onChange:p=>F({...h,creditor:p.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-rose-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Valor Original (R$)"}),e.jsx("input",{required:!0,type:"number",value:h.originalAmount,onChange:p=>F({...h,originalAmount:p.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Valor Atual c/ Juros (R$)"}),e.jsx("input",{required:!0,type:"number",value:h.currentAmount,onChange:p=>F({...h,currentAmount:p.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Data Vencimento Original"}),e.jsx("input",{required:!0,type:"date",value:h.dueDate,onChange:p=>F({...h,dueDate:p.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none"}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Importante para calcular a prescri√ß√£o."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Meta de Acordo (Opcional)"}),e.jsx("input",{type:"number",placeholder:"Deixe em branco se n√£o houver meta",value:h.targetAmount,onChange:p=>F({...h,targetAmount:p.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1 block",children:"Plataforma de Negocia√ß√£o"}),e.jsx("select",{value:h.platform,onChange:p=>F({...h,platform:p.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none mb-2",children:ol.map(p=>e.jsx("option",{value:p,children:p},p))}),h.platform==="Outros"&&e.jsx("div",{className:"animate-fade-in",children:e.jsx("input",{type:"text",placeholder:"Digite o nome da plataforma ou pessoa...",value:h.customPlatform,onChange:p=>F({...h,customPlatform:p.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-rose-500",autoFocus:!0})})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 font-medium",children:"Salvar D√≠vida"})]})]}),e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl gap-1 border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>P("all"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${C==="all"?"bg-white dark:bg-slate-700 text-rose-600 dark:text-rose-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx($t,{className:"w-4 h-4"}),"Todas"]}),e.jsxs("button",{onClick:()=>P("active"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${C==="active"?"bg-white dark:bg-slate-700 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(Ms,{className:"w-4 h-4"}),"Ativas"]}),e.jsxs("button",{onClick:()=>P("prescribed"),className:`flex-1 py-2 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center gap-2
               ${C==="prescribed"?"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(va,{className:"w-4 h-4"}),"Prescritas"]})]}),e.jsx("div",{className:"flex flex-col gap-4",children:t.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(De,{className:"w-12 h-12 text-emerald-500 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-800 dark:text-white font-medium",children:"Nome Limpo!"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma d√≠vida registrada."})]}):q.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx($t,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Nenhuma d√≠vida encontrada neste filtro."})]}):q.map(p=>{const x=k(p.dueDate),s=p.status==="paid",a=p.status==="agreement",i=p.targetAmount&&p.targetAmount>0,y=p.agreedAmount&&p.agreedAmount>0,T=y?p.agreedAmount:p.targetAmount,b=i||y?(p.currentAmount-T)/p.currentAmount*100:0;return e.jsxs("div",{className:`p-6 rounded-xl border transition-all relative overflow-hidden group ${s?"bg-slate-50 border-slate-200 opacity-75 grayscale-[0.8] dark:bg-slate-900 dark:border-slate-700":a?"bg-gradient-to-r from-emerald-50 to-white border-emerald-300 dark:from-emerald-900/10 dark:to-slate-800 dark:border-emerald-800 shadow-md ring-1 ring-emerald-500/20":x?"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700":"bg-white border-rose-100 dark:bg-slate-800 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-rose-300"}`,children:[s&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 pointer-events-none opacity-80 rotate-[-15deg]",children:e.jsxs("div",{className:"border-4 border-slate-400 text-slate-400 text-6xl font-black px-4 py-1 rounded-lg uppercase tracking-widest flex items-center gap-2",children:[e.jsx(It,{className:"w-12 h-12"})," RESOLVIDO"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4 relative z-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[a?e.jsxs("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"})," ACORDO FECHADO"]}):p.status==="negotiating"?e.jsxs("span",{className:"bg-amber-100 text-amber-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"})," EM NEGOCIA√á√ÉO"]}):x?e.jsxs("span",{className:"bg-slate-200 text-slate-600 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(as,{className:"w-3 h-3"})," PRESCRITA"]}):s?e.jsxs("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"})," QUITADA"]}):e.jsxs("span",{className:"bg-rose-100 text-rose-700 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(ht,{className:"w-3 h-3"})," ATIVA"]}),p.platform&&e.jsxs("span",{className:"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400 text-[10px] font-bold px-2 py-0.5 rounded flex items-center gap-1 border border-indigo-100 dark:border-indigo-800",children:[e.jsx(wa,{className:"w-3 h-3"})," ",p.platform]}),e.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1 ml-auto md:ml-0",children:[e.jsx(Xe,{className:"w-3 h-3"}),new Date(p.dueDate).toLocaleDateString("pt-BR")]})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:p.creditor}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Valor Original"}),e.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-300",children:Z(p.originalAmount)})]}),e.jsx("div",{className:"flex items-center text-slate-400",children:e.jsx(jt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"group/value cursor-pointer",onClick:()=>!s&&!a&&X(p),title:"Clique para atualizar juros",children:[e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:["Valor Atual",!s&&!a&&e.jsx(Ie,{className:"w-3 h-3 text-rose-500 opacity-50 group-hover/value:opacity-100"})]}),e.jsx("p",{className:`font-bold transition-colors ${s?"text-slate-500":x?"text-slate-600 dark:text-slate-400":"text-rose-600 group-hover/value:text-rose-700"}`,children:Z(p.currentAmount)})]})]})]}),e.jsx("div",{className:`p-3 rounded-lg border min-w-[200px] flex flex-col justify-center ${a?"bg-white border-emerald-200 shadow-sm":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-700"}`,children:a&&y?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-emerald-500 font-bold mb-1 flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"})," Valor Acordado"]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:Z(p.agreedAmount)}),e.jsxs("p",{className:"text-[10px] text-emerald-600/70 mt-1",children:["Economia de ",b.toFixed(0),"%"]})]}):i?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium mb-1 flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3 h-3 text-slate-400"})," Meta de Acordo"]}),e.jsx("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:Z(p.targetAmount)}),e.jsxs("p",{className:"text-[10px] text-emerald-600/70 mt-1",children:["Desconto Alvo: ",b.toFixed(0),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-400 font-medium mb-1 flex items-center gap-1",children:[e.jsx(ka,{className:"w-3 h-3"})," Meta"]}),e.jsx("p",{className:"text-sm font-semibold text-slate-400 dark:text-slate-500 italic",children:"Sem meta definida"})]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("select",{value:p.status,onChange:_=>D(p,_.target.value),className:`text-xs border rounded-lg p-1.5 outline-none font-medium cursor-pointer ${a?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200"}`,children:[e.jsx("option",{value:"open",children:"Em Aberto"}),e.jsx("option",{value:"negotiating",children:"Em Negocia√ß√£o"}),e.jsx("option",{value:"agreement",children:"Acordo Fechado"}),e.jsx("option",{value:"paid",children:"Quitado"})]}),e.jsx("button",{onClick:()=>l(p.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors self-end",title:"Excluir Registro",children:e.jsx(Te,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-slate-100 dark:border-slate-700/50 text-xs flex items-start gap-2",children:s?e.jsxs("p",{className:"text-emerald-600 dark:text-emerald-400 flex items-center gap-1 font-medium",children:[e.jsx(De,{className:"w-4 h-4"})," D√≠vida liquidada com sucesso. Parab√©ns pela organiza√ß√£o!"]}):a?e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-2 rounded w-full",children:[e.jsxs("p",{className:"text-emerald-700 dark:text-emerald-300 flex items-center gap-1 font-semibold",children:[e.jsx(ye,{className:"w-4 h-4"})," Acordo Firmado: ",Z(p.agreedAmount||0)]}),e.jsxs("p",{className:"text-emerald-600/80 dark:text-emerald-400/80 mt-1 pl-5",children:["N√£o esque√ßa de pagar na data combinada. ",p.agreedAmount&&p.agreedAmount>0?"As parcelas j√° foram lan√ßadas no seu fluxo.":""]})]}):p.status==="negotiating"?e.jsxs("p",{className:"text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx(lt,{className:"w-4 h-4"})," Voc√™ iniciou contatos. Mantenha a press√£o para conseguir o melhor desconto."]}):x?e.jsxs("p",{className:"text-slate-500 flex items-center gap-1",children:[e.jsx(as,{className:"w-4 h-4"})," D√≠vida antiga (+5 anos). N√£o afeta score, negocie apenas se tiver sobra de caixa."]}):e.jsxs("p",{className:"text-rose-600 dark:text-rose-400 flex items-center gap-1 font-medium",children:[e.jsx(He,{className:"w-4 h-4"})," Prioridade Alta! Esta d√≠vida est√° ativa e impactando seu cr√©dito. Tente negociar."]})})]},p.id)})})]})},dl=({currentView:t,onNavigate:r,data:n,actions:l,privacyMode:o,hasApiKey:f,quickActionSignal:m})=>{const I=[{id:U.TRANSACTIONS,label:"Transa√ß√µes",icon:ya,activeClass:"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-500/30",inactiveClass:"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 border-indigo-100 dark:border-indigo-900/30 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:border-indigo-200"},{id:U.CALENDAR,label:"Agenda",icon:ye,activeClass:"bg-blue-500 border-blue-500 text-white shadow-lg shadow-blue-500/30",inactiveClass:"bg-white dark:bg-slate-800 text-blue-600 dark:text-blue-400 border-blue-100 dark:border-blue-900/30 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:border-blue-200"},{id:U.SUBSCRIPTIONS,label:"Assinaturas",icon:Oe,activeClass:"bg-purple-600 border-purple-600 text-white shadow-lg shadow-purple-500/30",inactiveClass:"bg-white dark:bg-slate-800 text-purple-600 dark:text-purple-400 border-purple-100 dark:border-purple-900/30 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:border-purple-200"},{id:U.DEBTS,label:"D√≠vidas",icon:He,activeClass:"bg-rose-600 border-rose-600 text-white shadow-lg shadow-rose-500/30",inactiveClass:"bg-white dark:bg-slate-800 text-rose-600 dark:text-rose-400 border-rose-100 dark:border-rose-900/30 hover:bg-rose-50 dark:hover:bg-rose-900/20 hover:border-rose-200"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:I.map(N=>{const C=t===N.id;return e.jsxs("button",{onClick:()=>r(N.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${C?`${N.activeClass} scale-[1.02]`:`${N.inactiveClass}`}
                `,children:[e.jsx(N.icon,{className:`w-5 h-5 ${C?"text-white":"currentColor"}`}),e.jsx("span",{className:"text-sm",children:N.label})]},N.id)})})}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===U.TRANSACTIONS&&e.jsx(el,{transactions:n.transactions,categories:n.categories,budgets:n.budgets,onAdd:l.addTransaction,onUpdate:l.updateTransaction,onDelete:l.deleteTransaction,onToggleStatus:l.toggleTransactionStatus,onNavigate:r,privacyMode:o,hasApiKey:f,quickActionSignal:m}),t===U.CALENDAR&&e.jsx(ll,{transactions:n.transactions,budgets:n.budgets,onAddTransaction:l.addTransaction,privacyMode:o}),t===U.SUBSCRIPTIONS&&e.jsx(nl,{transactions:n.transactions,onUpdateTransaction:l.updateTransaction,onDeleteTransaction:l.deleteTransaction,privacyMode:o}),t===U.DEBTS&&e.jsx(il,{debts:n.debts||[],onAdd:l.addDebt,onUpdate:l.updateDebt,onDelete:l.deleteDebt,onAddTransaction:l.addTransaction,privacyMode:o,quickActionSignal:m})]})]})},ws=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6366f1"],cl=({investments:t,onAdd:r,onUpdate:n,onDelete:l,onNavigate:o,privacyMode:f,hasApiKey:m,quickActionSignal:I})=>{const[N,C]=d.useState(!1),[P,w]=d.useState(null),[S,v]=d.useState(!1),[g,E]=d.useState(!1),[B,z]=d.useState(!1),[M,h]=d.useState(null),[F,k]=d.useState(""),[q,W]=d.useState(null),[D,G]=d.useState(""),[X,H]=d.useState({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]});d.useEffect(()=>{I&&Date.now()-I<2e3&&(C(!0),H({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]}))},[I]);const Z=d.useMemo(()=>{const c=new Map;return t.forEach(j=>{c.set(j.type,(c.get(j.type)||0)+j.amount)}),Array.from(c.entries()).map(([j,V])=>({name:j,value:V})).sort((j,V)=>V.value-j.value)},[t]),J=c=>{c.preventDefault();const j=parseFloat(X.amount),V=X.investedAmount?parseFloat(X.investedAmount):j;r({name:X.name,amount:j,investedAmount:V,targetAmount:parseFloat(X.targetAmount)||0,type:X.type,date:X.date}),H({name:"",amount:"",investedAmount:"",targetAmount:"",type:"Renda Fixa",date:new Date().toISOString().split("T")[0]}),C(!1)},de=c=>{if(c.preventDefault(),!M)return;const j=t.find(V=>V.id===M);if(j){const V=parseFloat(F);if(!isNaN(V)&&V>0){const R=j.investedAmount||j.amount;n(M,{amount:j.amount+V,investedAmount:R+V})}}h(null),k("")},se=c=>{const j=parseFloat(D);!isNaN(j)&&j>=0&&n(c,{amount:j}),W(null)},p=async()=>{if(!m)return;E(!0),v(!0),w(null),z(!1);const c=await Or(t);w(c),v(!1)},x=()=>{if(!P)return{recommendations:"",technical:""};const c=P.text.split("---SECTION-BREAK---");return{recommendations:c[0].trim(),technical:c.length>1?c[1].trim():""}},{recommendations:s,technical:a}=x(),i=t.reduce((c,j)=>c+j.amount,0),y=t.reduce((c,j)=>c+(j.investedAmount||j.amount),0),T=i-y,b=y>0?T/y*100:0,_=c=>f?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2})}`;return e.jsxs("div",{className:"space-y-6 relative",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Meus Investimentos"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Acompanhe rentabilidade e metas."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>o(U.BUDGETS),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-pink-50 text-pink-600 hover:bg-pink-100 dark:bg-pink-900/20 dark:text-pink-400 dark:hover:bg-pink-900/40 transition-all font-medium text-sm border border-pink-200 dark:border-pink-800",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Metas"]}),e.jsxs("button",{onClick:p,disabled:!m,title:m?"Consultor IA":"Configure a Chave API para usar",className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all shadow-sm text-sm font-medium
                   ${m?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-400 cursor-not-allowed opacity-60"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),"Consultor IA ",!m&&e.jsx("span",{className:"text-[10px] ml-1",children:"(Req. Chave)"})]}),e.jsxs("button",{onClick:()=>C(!N),className:"flex items-center gap-2 bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-900 dark:hover:bg-slate-600 transition-colors shadow-sm text-sm font-medium",children:[e.jsx(ge,{className:"w-4 h-4"}),"Novo Ativo"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-indigo-600 text-white p-6 rounded-xl shadow-lg flex flex-col justify-between relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-indigo-200 text-xs font-bold uppercase tracking-wider mb-1",children:"Patrim√¥nio Total"}),e.jsx("h3",{className:"text-3xl font-bold mb-1",children:_(i)}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded bg-white/20 flex items-center gap-1 ${T>=0?"text-emerald-300":"text-rose-300"}`,children:[T>=0?e.jsx(Ie,{className:"w-3 h-3"}):e.jsx(ct,{className:"w-3 h-3"}),b.toFixed(2),"%"]}),e.jsxs("span",{className:"text-[10px] text-indigo-200",children:["(",T>=0?"+":"",_(T),")"]})]})]}),e.jsx(ut,{className:"absolute right-4 bottom-4 w-24 h-24 text-indigo-500 opacity-20 pointer-events-none"})]}),Z.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 md:col-span-2 flex items-center",children:[e.jsx("div",{className:"flex-1 h-[140px]",children:e.jsx(Ee,{width:"100%",height:"100%",children:e.jsxs(Ls,{children:[e.jsx(_s,{data:Z,cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,paddingAngle:5,dataKey:"value",children:Z.map((c,j)=>e.jsx(vt,{fill:ws[j%ws.length]},`cell-${j}`))}),e.jsx($e,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"8px",border:"none",fontSize:"12px"},formatter:c=>f?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${c.toLocaleString("pt-BR")}`}),e.jsx(pt,{layout:"vertical",verticalAlign:"middle",align:"right",wrapperStyle:{fontSize:"11px"}})]})})}),e.jsx("div",{className:"w-px h-20 bg-slate-100 dark:bg-slate-700 mx-4"}),e.jsxs("div",{className:"pr-4 min-w-[120px]",children:[e.jsxs("p",{className:"text-xs text-slate-500 uppercase font-bold mb-2 flex items-center gap-1",children:[e.jsx(ot,{className:"w-3 h-3"})," Aloca√ß√£o"]}),Z.slice(0,3).map((c,j)=>e.jsxs("div",{className:"flex justify-between items-center text-xs mb-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300 truncate max-w-[80px]",children:c.name}),e.jsxs("span",{className:"font-bold text-slate-800 dark:text-white",children:[(c.value/i*100).toFixed(0),"%"]})]},j))]})]})]}),g&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-purple-200 dark:border-purple-900 overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-slate-800 dark:to-slate-800 p-4 border-b border-purple-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"font-bold text-purple-900 dark:text-purple-300",children:"Smart Advisor"})]}),e.jsx("button",{onClick:()=>E(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:S?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(ft,{className:"w-8 h-8 text-purple-600 animate-spin mb-3"}),e.jsx("p",{className:"text-slate-500 text-sm animate-pulse",children:"Buscando oportunidades em tempo real..."})]}):P?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"prose prose-sm prose-purple dark:prose-invert max-w-none text-slate-700 dark:text-slate-300",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.replace(/\n/g,"<br/>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/- /g,"‚Ä¢ ")}})}),a&&e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[e.jsxs("button",{onClick:()=>z(!B),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-slate-50 dark:bg-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-700 dark:text-slate-200 text-sm font-semibold transition-colors border border-slate-200 dark:border-slate-600",children:[e.jsx(Ca,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),B?"Ocultar Detalhes T√©cnicos":"Ver An√°lise T√©cnica Detalhada",B?e.jsx(Sa,{className:"w-4 h-4"}):e.jsx(Aa,{className:"w-4 h-4"})]}),B&&e.jsx("div",{className:"mt-4 p-5 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700 animate-fade-in",children:e.jsx("div",{className:"prose prose-sm prose-slate dark:prose-invert max-w-none text-slate-600 dark:text-slate-400",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a.replace(/\n/g,"<br/>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/- /g,"‚Ä¢ ")}})})})]}),P.sources.length>0&&e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Fontes Consultadas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P.sources.map((c,j)=>e.jsxs("a",{href:c.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-2 py-1 rounded hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[e.jsx(Ut,{className:"w-3 h-3"}),c.title.length>30?c.title.substring(0,30)+"...":c.title]},j))})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:p,className:"text-sm text-purple-600 hover:underline",children:"Atualizar Recomenda√ß√£o"})})]}):e.jsx("div",{className:"text-center text-slate-500",children:"Erro ao carregar recomenda√ß√£o."})})]}),N&&e.jsxs("form",{onSubmit:J,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Adicionar Novo Ativo"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Nome"}),e.jsx("input",{required:!0,type:"text",placeholder:"Ex: CDB Banco X, PETR4",value:X.name,onChange:c=>H({...X,name:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Atual (Mercado)"}),e.jsx("input",{required:!0,type:"number",placeholder:"R$",value:X.amount,onChange:c=>H({...X,amount:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Valor Investido (Custo)"}),e.jsx("input",{type:"number",placeholder:"Igual ao atual se vazio",value:X.investedAmount,onChange:c=>H({...X,investedAmount:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Objetivo Final (Meta)"}),e.jsx("input",{type:"number",placeholder:"R$",value:X.targetAmount,onChange:c=>H({...X,targetAmount:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Tipo"}),e.jsxs("select",{value:X.type,onChange:c=>H({...X,type:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2",children:[e.jsx("option",{value:"Renda Fixa",children:"Renda Fixa"}),e.jsx("option",{value:"A√ß√µes",children:"A√ß√µes"}),e.jsx("option",{value:"FIIs",children:"FIIs"}),e.jsx("option",{value:"Cripto",children:"Criptomoedas"}),e.jsx("option",{value:"Reserva",children:"Reserva de Emerg√™ncia"}),e.jsx("option",{value:"Outros",children:"Outros"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Data da Compra"}),e.jsx("input",{required:!0,type:"date",value:X.date,onChange:c=>H({...X,date:c.target.value}),className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Salvar"})]})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-sm p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Novo Aporte"}),e.jsx("button",{onClick:()=>h(null),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Ao aportar, o valor ser√° somado ao Custo e ao Valor Atual."}),e.jsxs("form",{onSubmit:de,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"VALOR DO APORTE"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-slate-400",children:"R$"}),e.jsx("input",{autoFocus:!0,required:!0,type:"number",step:"0.01",className:"w-full border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg py-2 pl-8 pr-3 focus:ring-2 focus:ring-indigo-500 outline-none text-lg font-medium",value:F,onChange:c=>k(c.target.value)})]})]}),e.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Mt,{className:"w-5 h-5"}),"Confirmar Aporte"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:"Voc√™ ainda n√£o registrou investimentos."}):t.map(c=>{const j=c.investedAmount||c.amount,R=c.amount-j,ae=j>0?R/j*100:0,Q=c.targetAmount&&c.targetAmount>0?Math.min(100,c.amount/c.targetAmount*100):0;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-shadow relative group",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-3 rounded-full text-indigo-600 dark:text-indigo-400",children:e.jsx(ut,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white text-lg",children:c.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs mt-1",children:[e.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-2 py-0.5 rounded",children:c.type}),ae!==0&&e.jsxs("span",{className:`px-2 py-0.5 rounded font-bold flex items-center gap-1 ${ae>0?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"}`,children:[ae>0?e.jsx(Ie,{className:"w-3 h-3"}):e.jsx(ct,{className:"w-3 h-3"}),ae.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:"flex items-start justify-between md:justify-end gap-3 md:gap-6 mt-2 md:mt-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-[10px] text-slate-400 uppercase font-bold tracking-wider",children:"Valor Atual"}),q===c.id?e.jsx("div",{className:"flex items-center justify-end gap-1 mt-1",children:e.jsx("input",{autoFocus:!0,type:"number",className:"w-24 p-1 text-sm border rounded bg-white dark:bg-slate-900 dark:text-white dark:border-slate-600 text-right",value:D,onChange:ie=>G(ie.target.value),onKeyDown:ie=>ie.key==="Enter"&&se(c.id),onBlur:()=>se(c.id)})}):e.jsxs("div",{className:"group/edit relative inline-block",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-xl cursor-pointer hover:text-indigo-500 border-b border-dashed border-transparent hover:border-indigo-400 transition-all",onClick:()=>{W(c.id),G(c.amount.toString())},title:"Clique para atualizar cota√ß√£o",children:_(c.amount)}),e.jsx(Yt,{className:"w-3 h-3 text-slate-300 absolute -right-4 top-1 opacity-0 group-hover/edit:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Investido: ",_(j)]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>h(c.id),className:"p-1.5 text-indigo-600 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-400 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg transition-colors",title:"Novo Aporte",children:e.jsx(Mt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>l(c.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-lg transition-colors",title:"Excluir",children:e.jsx(Te,{className:"w-4 h-4"})})]})]})]}),c.targetAmount>0?e.jsx("div",{className:"mt-3 bg-slate-50 dark:bg-slate-700/50 p-2 rounded-lg border border-slate-100 dark:border-slate-700 flex items-center gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3 h-3"})," Meta: ",_(c.targetAmount)]}),e.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400",children:[Q.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-1000",style:{width:`${Q}%`}})})]})}):e.jsx("div",{className:"mt-2 flex justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{onClick:()=>C(!0),className:"text-[10px] text-slate-400 hover:text-indigo-500 flex items-center gap-1 uppercase font-bold tracking-wider",children:[e.jsx(Da,{className:"w-3 h-3"})," Definir Meta"]})})]},c.id)})})]})},xl=({budgets:t,transactions:r,investments:n,onAdd:l,onUpdate:o,onDelete:f,onNavigate:m,privacyMode:I,quickActionSignal:N})=>{const[C,P]=d.useState(!1),[w,S]=d.useState(!1),v=d.useMemo(()=>{const a=new Set;return r.forEach(i=>a.add(i.category)),t.forEach(i=>a.add(i.category)),a.size===0?["Lazer","Casa","Alimentos"]:Array.from(a).sort()},[r,t]),[g,E]=d.useState(new Date),[B,z]=d.useState(null),[M,h]=d.useState(""),[F,k]=d.useState({category:v[0]||"Lazer",limit:"",isRecurring:!0,month:new Date().toISOString().slice(0,7)});d.useEffect(()=>{N&&Date.now()-N<2e3&&(P(!0),k({category:v[0]||"Lazer",limit:"",isRecurring:!0,month:new Date().toISOString().slice(0,7)}))},[N,v]);const q=()=>{E(a=>{const i=new Date(a);return i.setMonth(a.getMonth()-1),i})},W=()=>{E(a=>{const i=new Date(a);return i.setMonth(a.getMonth()+1),i})},D=a=>a.toLocaleDateString("pt-BR",{month:"long",year:"numeric"}),G=()=>{const a=g.getFullYear(),i=String(g.getMonth()+1).padStart(2,"0");return`${a}-${i}`},X=a=>{if(a.preventDefault(),F.isRecurring){if(t.some(y=>y.category===F.category&&y.isRecurring)){alert(`J√° existe um or√ßamento recorrente para ${F.category}. Exclua o anterior para criar um novo.`);return}}else if(t.some(y=>y.category===F.category&&y.month===F.month)){alert(`J√° existe um or√ßamento de ${F.category} para ${F.month}.`);return}const i={category:F.category,limit:parseFloat(F.limit),isRecurring:F.isRecurring};F.isRecurring||(i.month=F.month),l(i),k({category:v[0]||"Outros",limit:"",isRecurring:!0,month:G()}),P(!1)},H=a=>{const i=parseFloat(M);!isNaN(i)&&i>0&&o(a,{limit:i}),z(null)},Z=a=>{z(a.id),h(a.limit.toString())},J=a=>I?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${a.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,de=a=>{const i=g.getFullYear(),y=g.getMonth();return r.filter(T=>{const b=new Date(T.date);return T.type==="expense"&&T.category===a&&b.getMonth()===y&&b.getFullYear()===i}).reduce((T,b)=>T+b.amount,0)},se=d.useMemo(()=>{const a=G(),i=t.filter(b=>b.month===a),y=new Set(i.map(b=>b.category)),T=t.filter(b=>b.isRecurring&&!y.has(b.category));return[...i,...T].sort((b,_)=>b.category.localeCompare(_.category))},[t,g]),p=d.useMemo(()=>n.filter(a=>a.targetAmount>0).sort((a,i)=>{const y=a.amount/a.targetAmount;return i.amount/i.targetAmount-y}),[n]),x=a=>{const i=new Date;if(i.getMonth()!==g.getMonth()||i.getFullYear()!==g.getFullYear())return null;const y=i.getDate(),T=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();return y===1?a:a/y*T},s=d.useMemo(()=>{const a=new Map,i=new Date;for(let T=0;T<6;T++){const b=new Date(i.getFullYear(),i.getMonth()-T,1),_=b.getFullYear(),c=b.getMonth(),j=`${_}-${String(c+1).padStart(2,"0")}`;new Set(r.filter(R=>{const ae=new Date(R.date);return R.type==="expense"&&ae.getFullYear()===_&&ae.getMonth()===c}).map(R=>R.category)).forEach(R=>{let ae=t.find(Q=>Q.category===R&&Q.month===j);if(ae||(ae=t.find(Q=>Q.category===R&&Q.isRecurring)),ae){const Q=r.filter(xe=>{const be=new Date(xe.date);return xe.type==="expense"&&xe.category===R&&be.getFullYear()===_&&be.getMonth()===c}).reduce((xe,be)=>xe+be.amount,0),ie=a.get(R)||{totalSpent:0,totalLimit:0,count:0};a.set(R,{totalSpent:ie.totalSpent+Q,totalLimit:ie.totalLimit+ae.limit,count:ie.count+1})}})}return Array.from(a.entries()).map(([T,b])=>{const _=b.totalSpent/b.totalLimit*100;return{name:T,adherence:_,spent:b.totalSpent/b.count,limit:b.totalLimit/b.count}}).sort((T,b)=>b.adherence-T.adherence)},[t,r]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Planejamento"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm capitalize",children:"Defina limites e acompanhe suas metas."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("button",{onClick:()=>S(!w),className:`p-2.5 rounded-lg transition-colors border ${w?"bg-indigo-50 border-indigo-200 text-indigo-600 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300"}`,title:"Ver An√°lise de Performance",children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-1",children:[e.jsx("button",{onClick:q,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(Gt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-4 font-semibold text-slate-700 dark:text-slate-200 capitalize min-w-[140px] text-center flex items-center justify-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-pink-500"}),D(g)]}),e.jsx("button",{onClick:W,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-md transition-colors text-slate-600 dark:text-slate-300",children:e.jsx(Nt,{className:"w-5 h-5"})})]}),e.jsxs("button",{onClick:()=>{k(a=>({...a,month:G()})),P(!C)},className:"flex items-center gap-2 bg-pink-600 text-white px-4 py-2.5 rounded-lg hover:bg-pink-700 transition-colors shadow-sm text-sm font-medium",children:[e.jsx(ge,{className:"w-4 h-4"}),"Definir Teto"]})]})]}),w&&s.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 animate-fade-in-down mb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-indigo-500"}),"Performance Hist√≥rica (√öltimos 6 Meses)"]})}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ee,{width:"100%",height:"100%",children:e.jsxs(Xt,{data:s,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Je,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0",opacity:.5}),e.jsx(Qe,{type:"number",hide:!0}),e.jsx(Ze,{dataKey:"name",type:"category",width:100,tick:{fill:"#64748b",fontSize:12,fontWeight:500},axisLine:!1,tickLine:!1}),e.jsx($e,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:a=>[`${a.toFixed(0)}%`,"M√©dia de Uso"]}),e.jsx(zs,{x:100,stroke:"#ef4444",strokeDasharray:"3 3"}),e.jsx(bt,{dataKey:"adherence",radius:[0,4,4,0],barSize:20,children:s.map((a,i)=>e.jsx(vt,{fill:a.adherence>100?"#ef4444":a.adherence>85?"#f59e0b":"#10b981"},`cell-${i}`))})]})})})]}),C&&e.jsxs("form",{onSubmit:X,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in-down",children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Novo Limite de Gastos"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:"Categoria"}),e.jsx("select",{value:F.category,onChange:a=>k({...F,category:a.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-pink-500",children:v.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:"Valor Teto (R$)"}),e.jsx("input",{required:!0,type:"number",placeholder:"Ex: 1000.00",value:F.limit,onChange:a=>k({...F,limit:a.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2.5 outline-none focus:ring-2 focus:ring-pink-500"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",id:"isRecurringBudget",checked:F.isRecurring,onChange:a=>k({...F,isRecurring:a.target.checked}),className:"w-4 h-4 text-pink-600 rounded"}),e.jsxs("label",{htmlFor:"isRecurringBudget",className:"text-sm font-medium text-slate-700 dark:text-slate-200 flex items-center gap-1 cursor-pointer",children:[e.jsx(Oe,{className:"w-4 h-4"})," Or√ßamento Recorrente?"]})]}),F.isRecurring?e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(Ia,{className:"w-3 h-3"})," Este limite ser√° aplicado automaticamente em todos os meses futuros."]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 block mb-1",children:"M√™s de Refer√™ncia"}),e.jsx("input",{type:"month",required:!F.isRecurring,value:F.month,onChange:a=>k({...F,month:a.target.value}),className:"border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg p-2 outline-none w-full max-w-[200px]"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 font-medium",children:"Salvar Teto"})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx(Dt,{className:"w-5 h-5 text-rose-500"})," Tetos de Gastos"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:se.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[e.jsx(Fe,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Nenhum teto definido."})]}):se.map(a=>{const i=de(a.category),y=x(i),T=Math.min(100,i/a.limit*100),b=y?Math.min(100,y/a.limit*100):0,_=i>a.limit;let c="bg-emerald-500",j=e.jsx(Rt,{className:"w-5 h-5 text-emerald-600"});return T>100?(c="bg-rose-500",j=e.jsx(Dt,{className:"w-5 h-5 text-rose-600"})):T>85?(c="bg-rose-500",j=e.jsx(ht,{className:"w-5 h-5 text-rose-500"})):T>70&&(c="bg-amber-500",j=e.jsx(ht,{className:"w-5 h-5 text-amber-500"})),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all relative group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-slate-100 dark:bg-slate-700",children:j}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:a.category}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[a.isRecurring?e.jsx(Oe,{className:"w-3 h-3"}):e.jsx(Xe,{className:"w-3 h-3"}),a.isRecurring?"Mensal":"Espec√≠fico"]})]})]}),B===a.id?e.jsxs("div",{className:"flex items-center gap-1 animate-fade-in",children:[e.jsx("input",{autoFocus:!0,type:"number",className:"w-20 p-1 text-sm border rounded bg-white dark:bg-slate-900 dark:text-white dark:border-slate-600",value:M,onChange:V=>h(V.target.value),onKeyDown:V=>V.key==="Enter"&&H(a.id)}),e.jsx("button",{onClick:()=>H(a.id),className:"p-1 bg-emerald-100 text-emerald-600 rounded hover:bg-emerald-200",children:e.jsx(Ta,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>z(null),className:"p-1 bg-slate-100 text-slate-600 rounded hover:bg-slate-200",children:e.jsx(ue,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"text-right group-hover:hidden",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Limite"}),e.jsx("p",{className:"font-bold text-slate-800 dark:text-white cursor-pointer hover:text-indigo-500",onClick:()=>Z(a),children:J(a.limit)})]}),e.jsxs("div",{className:"hidden group-hover:flex gap-1 absolute top-4 right-4 bg-white dark:bg-slate-800 pl-2",children:[e.jsx("button",{onClick:()=>Z(a),className:"p-1.5 text-slate-400 hover:text-indigo-500 hover:bg-indigo-50 rounded",children:e.jsx(Yt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(a.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded",children:e.jsx(Te,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2 relative",children:[e.jsxs("div",{className:"flex justify-between items-end text-sm",children:[e.jsxs("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:["Gasto: ",e.jsx("span",{className:_?"text-rose-500 font-bold":"",children:J(i)})]}),e.jsxs("span",{className:"text-slate-400 text-xs",children:[T.toFixed(0),"%"]})]}),e.jsxs("div",{className:"w-full h-3 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden relative",children:[y&&y>i&&!_&&e.jsx("div",{className:"absolute top-0 left-0 h-full bg-slate-200 dark:bg-slate-600 opacity-50 border-r-2 border-slate-400 dark:border-slate-400 transition-all duration-1000",style:{width:`${b}%`},title:`Previs√£o de fechar o m√™s em ${J(y)}`}),e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${c} relative z-10`,style:{width:`${T}%`}})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[y&&y>a.limit&&!_&&e.jsxs("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 flex items-center gap-1 font-semibold animate-pulse",children:[e.jsx(Ea,{className:"w-3 h-3"})," Previs√£o de estouro: ",J(y)]}),e.jsx("div",{className:"flex-1"}),e.jsx("p",{className:"text-xs text-right font-medium",children:_?e.jsxs("span",{className:"text-rose-500",children:["Excedido: ",J(i-a.limit)]}):e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:["Restam: ",J(a.limit-i)]})})]})]})]},a.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5 text-yellow-500"})," Objetivos de Conquista"]}),e.jsxs("button",{onClick:()=>m(U.INVESTMENTS),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 flex items-center gap-1 transition-colors",children:["Gerenciar Carteira ",e.jsx(jt,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.length===0?e.jsxs("div",{className:"col-span-full py-8 text-center bg-yellow-50/50 dark:bg-yellow-900/10 rounded-xl border border-dashed border-yellow-200 dark:border-yellow-800",children:[e.jsx(Fe,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:'Defina uma "Meta Final" nos seus investimentos para v√™-los aqui.'}),e.jsx("button",{onClick:()=>m(U.INVESTMENTS),className:"mt-3 text-xs bg-yellow-100 hover:bg-yellow-200 text-yellow-700 px-3 py-1.5 rounded-lg font-bold transition-colors",children:"Ir para Investimentos"})]}):p.map(a=>{const i=Math.min(100,a.amount/a.targetAmount*100);return e.jsxs("div",{onClick:()=>m(U.INVESTMENTS),className:"bg-gradient-to-br from-white to-yellow-50 dark:from-slate-800 dark:to-slate-800/50 p-6 rounded-xl shadow-sm border border-yellow-200 dark:border-yellow-900/30 relative overflow-hidden cursor-pointer hover:shadow-md hover:scale-[1.02] transition-all group",children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Vt,{className:"w-4 h-4 text-slate-400"})}),e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:a.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Meta: ",J(a.targetAmount)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:[i.toFixed(0),"%"]})})]}),e.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden relative z-10",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-amber-500 rounded-full transition-all duration-1000 shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${i}%`},children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full animate-[shimmer_2s_infinite]"})})}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 text-right relative z-10",children:["Faltam ",J(a.targetAmount-a.amount)]}),e.jsx(rs,{className:"absolute -bottom-4 -right-4 w-32 h-32 text-yellow-500/5 rotate-12 pointer-events-none"})]},a.id)})})]})]})},ml={age:30,retirementAge:60,riskProfile:"moderate"},ks={conservative:.03,moderate:.05,aggressive:.07},ul=({data:t,onSaveProfile:r,privacyMode:n,hasApiKey:l})=>{const[o,f]=d.useState(t.wealthProfile||ml),[m,I]=d.useState(!t.wealthProfile),[N,C]=d.useState(null),[P,w]=d.useState(!1),S=d.useMemo(()=>t.investments.reduce((k,q)=>k+q.amount,0),[t.investments]),v=d.useMemo(()=>t.debts.filter(k=>k.status!=="paid").reduce((k,q)=>k+q.currentAmount,0),[t.debts]),g=S-v,E=d.useMemo(()=>{const k=t.transactions.filter(D=>D.type==="income").reduce((D,G)=>D+G.amount,0),q=t.transactions.filter(D=>D.type==="expense").reduce((D,G)=>D+G.amount,0);if(k===0&&q===0)return{income:5e3,expense:4e3,savings:1e3};const W=k-q;return{income:k,expense:q>0?q:k*.8,savings:W}},[t.transactions]),B=o.monthlyContributionOverride!==void 0?o.monthlyContributionOverride:Math.max(0,E.savings),z=d.useMemo(()=>{const k=[],q=new Date().getFullYear(),W=o.retirementAge-o.age+10,D=ks[o.riskProfile],G=B*12,X=E.expense*12;let H=g,Z=null;for(let J=0;J<=W;J++){const de=q+J,se=o.age+J,p=H*.04;!Z&&p>=X&&(Z=de),k.push({year:de,age:se,patrimonio:Math.round(H),rendaPassiva:Math.round(p/12),custoVida:Math.round(E.expense)}),se<o.retirementAge?H=H*(1+D)+G:H=H*(1+D)}return{chartData:k,freedomYear:Z}},[o,g,B,E.expense]),M=()=>{r(o),I(!1)},h=async()=>{w(!0);const k=await Fr(t.investments,o.riskProfile,o.age);C(k),w(!1)},F=k=>n?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${k.toLocaleString("pt-BR",{maximumFractionDigits:0})}`;return e.jsxs("div",{className:"space-y-8 animate-fade-in pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border-b border-slate-200 dark:border-slate-700 pb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg shadow-lg shadow-yellow-500/20 text-white",children:e.jsx($a,{className:"w-6 h-6"})}),"NEXO Private"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Planejamento patrimonial e aloca√ß√£o estrat√©gica de ativos."})]}),!m&&e.jsx("button",{onClick:()=>I(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-semibold hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Ajustar Perfil"})]}),m&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border-l-4 border-yellow-500 animate-scale-in",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-yellow-500"})," Par√¢metros da Simula√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Idade Atual"}),e.jsx("input",{type:"number",value:o.age,onChange:k=>f({...o,age:Number(k.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Idade Aposentadoria"}),e.jsx("input",{type:"number",value:o.retirementAge,onChange:k=>f({...o,retirementAge:Number(k.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Perfil de Risco"}),e.jsxs("select",{value:o.riskProfile,onChange:k=>f({...o,riskProfile:k.target.value}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600",children:[e.jsx("option",{value:"conservative",children:"Conservador"}),e.jsx("option",{value:"moderate",children:"Moderado"}),e.jsx("option",{value:"aggressive",children:"Arrojado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Aporte Mensal (Simulado)"}),e.jsx("input",{type:"number",placeholder:`Atual: R$ ${E.savings.toFixed(0)}`,value:o.monthlyContributionOverride||"",onChange:k=>f({...o,monthlyContributionOverride:Number(k.target.value)}),className:"w-full mt-1 p-3 border rounded-lg dark:bg-slate-700 dark:border-slate-600"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:M,className:"bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-6 py-2 rounded-lg font-bold hover:opacity-90 transition-opacity",children:"Atualizar Proje√ß√£o"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 text-white p-6 rounded-xl shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-emerald-400"}),"Liberdade Financeira"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Cruzamento entre Renda Passiva e Custo de Vida."})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase font-bold",children:"Ano da Liberdade"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:z.freedomYear||"Em constru√ß√£o..."})]})]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ee,{width:"100%",height:"100%",children:e.jsxs(Ja,{data:z.chartData,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorPassive",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(Je,{strokeDasharray:"3 3",vertical:!1,stroke:"#334155"}),e.jsx(Qe,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8"}}),e.jsx(Ze,{hide:!0,domain:["auto","auto"]}),e.jsx($e,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:k=>[F(k),""]}),e.jsx(zs,{y:E.expense,stroke:"#f43f5e",strokeDasharray:"3 3",label:{value:"Custo Vida",fill:"#f43f5e",fontSize:10}}),e.jsx(Qa,{type:"monotone",dataKey:"rendaPassiva",stroke:"#10b981",fillOpacity:1,fill:"url(#colorPassive)",name:"Renda Passiva"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 flex flex-col justify-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Patrim√¥nio L√≠quido Atual"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:F(g)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ativos Investidos"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:F(S)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"D√≠vidas Totais"}),e.jsx("span",{className:"font-semibold text-rose-600",children:F(v)})]}),e.jsx("div",{className:"w-full h-px bg-slate-200 dark:bg-slate-700 my-2"}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Aporte Mensal"}),e.jsx("span",{className:"font-semibold text-indigo-600",children:F(B)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Rentabilidade Real (Proj.)"}),e.jsxs("span",{className:"font-semibold text-slate-800 dark:text-white",children:[(ks[o.riskProfile]*100).toFixed(1),"% a.a."]})]})]}),v>S&&e.jsxs("div",{className:"mt-6 bg-rose-50 dark:bg-rose-900/20 p-3 rounded-lg flex items-start gap-2",children:[e.jsx(Ra,{className:"w-5 h-5 text-rose-600 shrink-0"}),e.jsx("p",{className:"text-xs text-rose-800 dark:text-rose-300",children:"Aten√ß√£o: Seu patrim√¥nio est√° negativo. A prioridade do planejamento deve ser a quita√ß√£o de d√≠vidas antes da acumula√ß√£o."})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Bs,{className:"w-6 h-6 text-purple-600"}),"Aloca√ß√£o Inteligente (IA)"]}),e.jsxs("button",{onClick:h,disabled:!l||P,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold text-sm shadow-md",children:[P?e.jsx("span",{className:"animate-spin",children:"‚è≥"}):e.jsx(Be,{className:"w-4 h-4"}),N?"Atualizar An√°lise":"Gerar Estrat√©gia Private"]})]}),!l&&e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-8 rounded-xl text-center border border-dashed border-slate-300 dark:border-slate-600",children:[e.jsx(xt,{className:"w-10 h-10 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Configure sua Chave API para desbloquear a intelig√™ncia de aloca√ß√£o de ativos."})]}),l&&N&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Diagn√≥stico do Portf√≥lio"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed mb-6",children:N.analysisText}),e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Plano de A√ß√£o T√°tico"}),e.jsx("div",{className:"space-y-3",children:N.actionItems.map((k,q)=>e.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:`
                                      w-10 h-10 rounded-full flex items-center justify-center shrink-0 font-bold text-xs
                                      ${k.type==="buy"?"bg-emerald-100 text-emerald-700":k.type==="sell"?"bg-rose-100 text-rose-700":"bg-blue-100 text-blue-700"}
                                  `,children:k.type==="buy"?"COMPRA":k.type==="sell"?"VENDA":"MANTER"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:k.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:k.description})]})]},q))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-2 self-start",children:"Atual vs. Ideal (Modelo)"}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Ee,{width:"100%",height:"100%",children:e.jsxs(Za,{cx:"50%",cy:"50%",outerRadius:"80%",data:N.suggestedAllocation.map(k=>{const q=N.currentAllocation.find(W=>W.name===k.name);return{subject:k.name,A:q?q.value:0,B:k.value,fullMark:100}}),children:[e.jsx(er,{stroke:"#94a3b8"}),e.jsx(tr,{dataKey:"subject",tick:{fill:"#64748b",fontSize:10}}),e.jsx(sr,{angle:30,domain:[0,100],tick:!1}),e.jsx(os,{name:"Sua Carteira",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3}),e.jsx(os,{name:"Ideal (IA)",dataKey:"B",stroke:"#10b981",fill:"#10b981",fillOpacity:.3}),e.jsx(pt,{}),e.jsx($e,{})]})})}),e.jsx("p",{className:"text-xs text-center text-slate-400 mt-2",children:"Comparativo de % de aloca√ß√£o por classe de ativo."})]})]})]})]})},hl=({currentView:t,onNavigate:r,data:n,actions:l,privacyMode:o,hasApiKey:f,quickActionSignal:m})=>{const I=[{id:U.INVESTMENTS,label:"Investimentos",icon:Vt},{id:U.BUDGETS,label:"Metas & Tetos",icon:Fe},{id:U.WEALTH_PLANNER,label:"Planejamento",icon:Ps}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Gest√£o de Patrim√¥nio"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:I.map(N=>{const C=t===N.id;return e.jsxs("button",{onClick:()=>r(N.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-2 md:px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${C?"bg-emerald-600 border-emerald-600 text-white shadow-lg shadow-emerald-500/30 scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:border-emerald-300 dark:hover:border-emerald-500 hover:bg-slate-50 dark:hover:bg-slate-700"}
                `,children:[e.jsx(N.icon,{className:`w-5 h-5 ${C?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"text-xs md:text-sm text-center md:text-left",children:N.label})]},N.id)})})]}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===U.INVESTMENTS&&e.jsx(cl,{investments:n.investments,onAdd:l.addInvestment,onUpdate:l.updateInvestment,onDelete:l.deleteInvestment,onNavigate:r,privacyMode:o,hasApiKey:f,quickActionSignal:m}),t===U.BUDGETS&&e.jsx(xl,{budgets:n.budgets||[],transactions:n.transactions,investments:n.investments||[],onAdd:l.addBudget,onUpdate:l.updateBudget,onDelete:l.deleteBudget,onNavigate:r,privacyMode:o,quickActionSignal:m}),t===U.WEALTH_PLANNER&&e.jsx(ul,{data:n,onSaveProfile:l.saveWealthProfile,privacyMode:o,hasApiKey:f})]})]})},Me=[{label:"Azul",value:"blue",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{label:"Verde",value:"green",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800",text:"text-emerald-700 dark:text-emerald-300"},{label:"Roxo",value:"purple",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{label:"Rosa",value:"rose",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800",text:"text-rose-700 dark:text-rose-300"},{label:"Amarelo",value:"yellow",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800",text:"text-amber-700 dark:text-amber-300"},{label:"Cinza",value:"slate",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700",text:"text-slate-700 dark:text-slate-300"}],gl=[{id:"tag-progress",name:"Em andamento",color:"blue"},{id:"tag-done",name:"Conclu√≠do",color:"green"},{id:"tag-pending",name:"Pendente",color:"slate"},{id:"tag-urgent",name:"Urgente",color:"rose"}],ys=[{wrapper:"bg-indigo-50/80 dark:bg-indigo-900/10 border-indigo-200 dark:border-indigo-800",header:"bg-indigo-100 dark:bg-indigo-900/30 border-indigo-200 dark:border-indigo-800",title:"text-indigo-900 dark:text-indigo-100",count:"bg-indigo-200 dark:bg-indigo-800 text-indigo-700 dark:text-indigo-200",button:"text-indigo-600 hover:bg-indigo-100 dark:text-indigo-300 dark:hover:bg-indigo-900/30",addButtonBg:"bg-indigo-600 hover:bg-indigo-700"},{wrapper:"bg-cyan-50/80 dark:bg-cyan-900/10 border-cyan-200 dark:border-cyan-800",header:"bg-cyan-100 dark:bg-cyan-900/30 border-cyan-200 dark:border-cyan-800",title:"text-cyan-900 dark:text-cyan-100",count:"bg-cyan-200 dark:bg-cyan-800 text-cyan-700 dark:text-cyan-200",button:"text-cyan-600 hover:bg-cyan-100 dark:text-cyan-300 dark:hover:bg-cyan-900/30",addButtonBg:"bg-cyan-600 hover:bg-cyan-700"},{wrapper:"bg-amber-50/80 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800",header:"bg-amber-100 dark:bg-amber-900/30 border-amber-200 dark:border-amber-800",title:"text-amber-900 dark:text-amber-100",count:"bg-amber-200 dark:bg-amber-800 text-amber-700 dark:text-amber-200",button:"text-amber-600 hover:bg-amber-100 dark:text-amber-300 dark:hover:bg-amber-900/30",addButtonBg:"bg-amber-600 hover:bg-amber-700"},{wrapper:"bg-emerald-50/80 dark:bg-emerald-900/10 border-emerald-200 dark:border-emerald-800",header:"bg-emerald-100 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800",title:"text-emerald-900 dark:text-emerald-100",count:"bg-emerald-200 dark:bg-emerald-800 text-emerald-700 dark:text-emerald-200",button:"text-emerald-600 hover:bg-emerald-100 dark:text-emerald-300 dark:hover:bg-emerald-900/30",addButtonBg:"bg-emerald-600 hover:bg-emerald-700"},{wrapper:"bg-purple-50/80 dark:bg-purple-900/10 border-purple-200 dark:border-purple-800",header:"bg-purple-100 dark:bg-purple-900/30 border-purple-200 dark:border-purple-800",title:"text-purple-900 dark:text-purple-100",count:"bg-purple-200 dark:bg-purple-800 text-purple-700 dark:text-purple-200",button:"text-purple-600 hover:bg-purple-100 dark:text-purple-300 dark:hover:bg-purple-900/30",addButtonBg:"bg-purple-600 hover:bg-purple-700"},{wrapper:"bg-rose-50/80 dark:bg-rose-900/10 border-rose-200 dark:border-rose-800",header:"bg-rose-100 dark:bg-rose-900/30 border-rose-200 dark:border-rose-800",title:"text-rose-900 dark:text-rose-100",count:"bg-rose-200 dark:bg-rose-800 text-rose-700 dark:text-rose-200",button:"text-rose-600 hover:bg-rose-100 dark:text-rose-300 dark:hover:bg-rose-900/30",addButtonBg:"bg-rose-600 hover:bg-rose-700"}],pl=({boards:t,onSaveBoard:r,onDeleteBoard:n,onAddTransaction:l,privacyMode:o})=>{const[f,m]=d.useState(null),[I,N]=d.useState(""),[C,P]=d.useState(!1),[w,S]=d.useState(""),[v,g]=d.useState(null),[E,B]=d.useState(""),[z,M]=d.useState(""),[h,F]=d.useState("blue"),[k,q]=d.useState(null),[W,D]=d.useState(null),[G,X]=d.useState(null),[H,Z]=d.useState(""),[J,de]=d.useState(""),[se,p]=d.useState(""),[x,s]=d.useState(null);d.useEffect(()=>{if(t.length>0&&!f)m(t[0].id);else if(t.length===0&&!f){const O={id:crypto.randomUUID(),title:"Meu Projeto",columns:[{id:"col-1",title:"Backlog",order:0,cards:[]},{id:"col-2",title:"Em andamento",order:1,cards:[]},{id:"col-3",title:"Em revis√£o",order:2,cards:[]},{id:"col-4",title:"Conclu√≠do",order:3,isConclusion:!0,cards:[]}]};r(O),m(O.id)}},[t,f]);const a=t.find(O=>O.id===f),i=O=>{if(O.preventDefault(),!I.trim())return;const le={id:crypto.randomUUID(),title:I,columns:[{id:crypto.randomUUID(),title:"Backlog",order:0,cards:[]},{id:crypto.randomUUID(),title:"Em andamento",order:1,cards:[]},{id:crypto.randomUUID(),title:"Em revis√£o",order:2,cards:[]},{id:crypto.randomUUID(),title:"Conclu√≠do",order:3,isConclusion:!0,cards:[]}]};r(le),m(le.id),N(""),P(!1)},y=()=>{f&&confirm("Tem certeza que deseja excluir este quadro?")&&(n(f),m(null))},T=O=>{a&&r({...a,columns:O})},b=O=>{if(O.preventDefault(),!w.trim()||!a)return;const le={id:crypto.randomUUID(),title:w,order:a.columns.length,cards:[]};T([...a.columns,le]),S("")},_=O=>{a&&T(a.columns.filter(le=>le.id!==O))},c=O=>{q({id:O.id,title:O.title})},j=()=>{if(!k||!a)return;const O=a.columns.map(le=>le.id===k.id?{...le,title:k.title}:le);T(O),q(null)},V=O=>{if(!a||!a.columns.find(A=>A.id===O))return;const ce={id:crypto.randomUUID(),title:E||"Novo Item",amount:parseFloat(z)||0,color:h},ne=a.columns.map(A=>A.id===O?{...A,cards:[...A.cards,ce]}:A);T(ne),g(null),B(""),M(""),F("blue")},R=(O,le,ce)=>{if(!a)return;const ne=a.columns.find(Y=>Y.id===O);if(!ne)return;const A=ne.cards.find(Y=>Y.id===le);if(!A)return;const oe=A.tags||[],me=oe.some(Y=>Y.id===ce.id);let u;me?u=oe.filter(Y=>Y.id!==ce.id):u=[...oe,ce];const $=a.columns.map(Y=>Y.id===O?{...Y,cards:Y.cards.map(L=>L.id===le?{...L,tags:u}:L)}:Y);T($)},ae=(O,le,ce)=>{if(!a)return;const ne=a.columns.map(A=>A.id===O?{...A,cards:A.cards.map(oe=>oe.id===le?{...oe,dueDate:ce}:oe)}:A);T(ne)},Q=(O,le)=>{if(!a||!H.trim())return;const ce={id:crypto.randomUUID(),text:H,createdAt:new Date().toISOString()},ne=a.columns.map(A=>A.id===O?{...A,cards:A.cards.map(oe=>oe.id===le?{...oe,comments:[...oe.comments||[],ce]}:oe)}:A);T(ne),Z("")},ie=(O,le,ce)=>{if(!a)return;const ne=a.columns.map(A=>A.id===O?{...A,cards:A.cards.map(oe=>oe.id===le?{...oe,comments:(oe.comments||[]).filter(me=>me.id!==ce)}:oe)}:A);T(ne)},xe=(O,le)=>{if(!a||!J.trim())return;const ce={id:crypto.randomUUID(),url:J,name:se||J},ne=a.columns.map(A=>A.id===O?{...A,cards:A.cards.map(oe=>oe.id===le?{...oe,attachments:[...oe.attachments||[],ce]}:oe)}:A);T(ne),de(""),p("")},be=(O,le,ce)=>{if(!a)return;const ne=a.columns.map(A=>A.id===O?{...A,cards:A.cards.map(oe=>oe.id===le?{...oe,attachments:(oe.attachments||[]).filter(me=>me.id!==ce)}:oe)}:A);T(ne)},Pe=(O,le)=>{if(!a)return;const ce=a.columns.map(ne=>ne.id===O?{...ne,cards:ne.cards.filter(A=>A.id!==le)}:ne);T(ce)},Ce=(O,le,ce)=>{s({cardId:le,sourceColId:ce}),O.dataTransfer.effectAllowed="move"},je=O=>{O.preventDefault(),O.dataTransfer.dropEffect="move"},at=(O,le)=>{if(O.preventDefault(),!x||!a)return;const{cardId:ce,sourceColId:ne}=x;if(ne===le){s(null);return}const A=a.columns.find(me=>me.id===ne),oe=a.columns.find(me=>me.id===le);if(A&&oe){const me=A.cards.find(u=>u.id===ce);if(me){const u=a.columns.map($=>$.id===ne?{...$,cards:$.cards.filter(Y=>Y.id!==ce)}:$.id===le?{...$,cards:[...$.cards,me]}:$);T(u)}}s(null)},rt=O=>o?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${O.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,Se=a?[...a.columns].sort((O,le)=>O.order-le.order):[];return e.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(zt,{className:"w-7 h-7 text-indigo-600"}),"NEXO Flow"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Organize seus planos: Sonhe, Pesquise, Priorize e Compre."})]}),f&&e.jsx("button",{onClick:y,className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors",title:"Excluir Quadro Atual",children:e.jsx(Te,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2 kanban-scroll",children:[t.map(O=>e.jsxs("button",{onClick:()=>m(O.id),className:`px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap transition-all flex items-center gap-2 ${f===O.id?"bg-indigo-600 text-white shadow-md shadow-indigo-500/20 scale-105":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700"}`,children:[e.jsx(Ts,{className:"w-4 h-4"}),O.title]},O.id)),C?e.jsxs("form",{onSubmit:i,className:"flex items-center gap-2 animate-fade-in bg-white dark:bg-slate-800 p-1 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("input",{autoFocus:!0,type:"text",placeholder:"Nome do Projeto...",value:I,onChange:O=>N(O.target.value),className:"w-40 px-3 py-1.5 rounded-lg bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white p-1.5 rounded-lg hover:bg-indigo-700 transition-colors",children:e.jsx(De,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>P(!1),className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 p-1.5 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:e.jsx(ue,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>P(!0),className:"px-3 py-2 rounded-xl font-bold text-sm whitespace-nowrap bg-indigo-50 text-indigo-600 hover:bg-indigo-100 dark:bg-indigo-900/20 dark:text-indigo-400 dark:hover:bg-indigo-900/40 border border-indigo-200 dark:border-indigo-800 flex items-center gap-1 transition-colors",children:[e.jsx(ge,{className:"w-4 h-4"})," Novo Quadro"]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Nova Coluna...",value:w,onChange:O=>S(O.target.value),className:"px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 text-sm w-full md:w-64 shadow-sm"}),e.jsxs("button",{type:"submit",className:"bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-900 transition-colors flex items-center gap-2 text-sm font-bold shadow-sm",children:[e.jsx(ge,{className:"w-4 h-4"})," Adicionar Coluna"]})]})}),e.jsx("style",{children:`
        .kanban-scroll::-webkit-scrollbar {
            height: 12px;
        }
        .kanban-scroll::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
            margin: 0 10px;
        }
        .kanban-scroll::-webkit-scrollbar-thumb {
            background-color: #94a3b8;
            border-radius: 10px;
            border: 3px solid transparent;
            background-clip: content-box;
        }
        .kanban-scroll::-webkit-scrollbar-thumb:hover {
            background-color: #64748b;
        }
        .dark .kanban-scroll::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
        }
        .dark .kanban-scroll::-webkit-scrollbar-thumb {
            background-color: #475569;
        }
        .dark .kanban-scroll::-webkit-scrollbar-thumb:hover {
            background-color: #94a3b8;
        }
      `}),e.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden pb-4 kanban-scroll",children:e.jsx("div",{className:"flex h-full gap-4 min-w-max px-2",children:Se.map((O,le)=>{let ce=le%ys.length;O.isConclusion&&(ce=3);const ne=ys[ce];return e.jsxs("div",{className:`w-72 flex flex-col rounded-xl border backdrop-blur-sm transition-colors ${ne.wrapper} ${x&&x.sourceColId!==O.id?"opacity-50 border-dashed":"shadow-sm"}`,onDragOver:je,onDrop:A=>at(A,O.id),children:[e.jsxs("div",{className:`p-3 border-b flex justify-between items-center group/header rounded-t-xl ${ne.header} ${ne.wrapper.split(" ")[2]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[O.isConclusion&&e.jsx(De,{className:"w-4 h-4 text-emerald-600 flex-shrink-0"}),(k==null?void 0:k.id)===O.id?e.jsx("input",{autoFocus:!0,className:`w-full bg-white dark:bg-slate-900 border rounded px-1 py-0.5 text-sm font-bold outline-none ${ne.title}`,value:k.title,onChange:A=>q({...k,title:A.target.value}),onBlur:j,onKeyDown:A=>A.key==="Enter"&&j()}):e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden w-full",children:[e.jsx("h3",{className:`font-bold text-sm uppercase tracking-wide truncate cursor-pointer transition-colors ${ne.title}`,onDoubleClick:()=>c(O),title:"Duplo clique para renomear",children:O.title}),e.jsx("button",{onClick:()=>c(O),className:"opacity-0 group-hover/header:opacity-100 transition-opacity p-1 text-slate-400 hover:text-indigo-500",children:e.jsx(Yt,{className:"w-3 h-3"})})]}),(k==null?void 0:k.id)!==O.id&&e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold flex-shrink-0 ${ne.count}`,children:O.cards.length})]}),!O.isConclusion&&e.jsx("button",{onClick:()=>{confirm("Excluir coluna?")&&_(O.id)},className:"text-slate-400 hover:text-rose-500 ml-2",title:"Excluir Coluna",children:e.jsx(ue,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:O.cards.map(A=>{var me,u,$,Y;const oe=Me.find(L=>L.value===A.color)||Me[0];return e.jsxs("div",{draggable:!0,onDragStart:L=>Ce(L,A.id,O.id),className:`bg-white dark:bg-slate-700 p-3 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 cursor-grab active:cursor-grabbing hover:shadow-md transition-all group relative border-l-4 ${oe.border.replace("border","border-l")}`,style:{borderLeftColor:`var(--${A.color}-500)`},children:[A.tags&&A.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:A.tags.map(L=>{const re=Me.find(te=>te.value===L.color)||Me[0];return e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase tracking-wider ${re.bg} ${re.text}`,children:L.name},L.id)})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-white text-sm",children:A.title}),e.jsx("button",{onClick:()=>Pe(O.id,A.id),className:"text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ue,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase ${oe.bg} ${oe.text}`,children:A.amount>0?rt(A.amount):"R$ -"}),e.jsx("button",{onClick:L=>{L.stopPropagation(),D(W===A.id?null:A.id)},className:`p-1 rounded transition-colors ${W===A.id?"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"text-slate-300 hover:text-indigo-500 hover:bg-slate-100 dark:hover:bg-slate-600"}`,title:"Adicionar Etiqueta",children:e.jsx(Kt,{className:"w-3 h-3"})}),e.jsx("button",{onClick:L=>{L.stopPropagation(),X(G===A.id?null:A.id)},className:`p-1 rounded transition-colors ${G===A.id?"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"text-slate-300 hover:text-indigo-500 hover:bg-slate-100 dark:hover:bg-slate-600"}`,title:"Detalhes (Data e Coment√°rios)",children:e.jsx(Rs,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[A.dueDate&&e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-medium ${new Date(A.dueDate)<new Date?"text-rose-500":"text-slate-400"}`,title:"Data de Vencimento",children:[e.jsx(We,{className:"w-3 h-3"}),new Date(A.dueDate).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})]}),A.comments&&A.comments.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-medium text-slate-400",title:"Coment√°rios",children:[e.jsx(ls,{className:"w-3 h-3"}),A.comments.length]}),A.attachments&&A.attachments.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-medium text-slate-400",title:"Anexos",children:[e.jsx(ns,{className:"w-3 h-3"}),A.attachments.length]})]})]}),W===A.id&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-100 dark:border-slate-600 animate-fade-in",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Adicionar Etiqueta:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:gl.map(L=>{var he;const re=(he=A.tags)==null?void 0:he.some(fe=>fe.id===L.id),te=Me.find(fe=>fe.value===L.color)||Me[0];return e.jsxs("button",{onClick:()=>R(O.id,A.id,L),className:`text-[10px] px-2 py-1 rounded border transition-all flex items-center gap-1 ${re?`${te.bg} ${te.text} ${te.border}`:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-600 text-slate-500 hover:border-slate-300"}`,children:[L.name,re&&e.jsx(De,{className:"w-2.5 h-2.5"})]},L.id)})})]}),G===A.id&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-100 dark:border-slate-600 animate-fade-in space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1 flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"})," Data de Vencimento"]}),e.jsx("input",{type:"date",value:A.dueDate||"",onChange:L=>ae(O.id,A.id,L.target.value),className:"w-full text-xs p-1.5 rounded border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 dark:text-white outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1 flex items-center gap-1",children:[e.jsx(ns,{className:"w-3 h-3"})," Anexos (",((me=A.attachments)==null?void 0:me.length)||0,")"]}),e.jsx("div",{className:"space-y-1 mb-2",children:(u=A.attachments)==null?void 0:u.map(L=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-800 p-1.5 rounded text-xs group/att",children:[e.jsxs("a",{href:L.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-indigo-600 dark:text-indigo-400 hover:underline truncate flex-1",children:[e.jsx(Ut,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:L.name})]}),e.jsx("button",{onClick:()=>be(O.id,A.id,L.id),className:"text-slate-300 hover:text-rose-500 opacity-0 group-hover/att:opacity-100 transition-opacity p-0.5",children:e.jsx(ue,{className:"w-3 h-3"})})]},L.id))}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("input",{type:"text",placeholder:"Nome do arquivo (opcional)",value:se,onChange:L=>p(L.target.value),className:"w-full text-xs p-1.5 rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 dark:text-white outline-none focus:border-indigo-500"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",placeholder:"https://...",value:J,onChange:L=>de(L.target.value),className:"flex-1 text-xs p-1.5 rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 dark:text-white outline-none focus:border-indigo-500"}),e.jsx("button",{onClick:()=>xe(O.id,A.id),disabled:!J.trim(),className:"bg-indigo-600 text-white p-1.5 rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(ge,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1 flex items-center gap-1",children:[e.jsx(ls,{className:"w-3 h-3"})," Coment√°rios (",(($=A.comments)==null?void 0:$.length)||0,")"]}),e.jsxs("div",{className:"space-y-2 mb-2 max-h-32 overflow-y-auto",children:[(Y=A.comments)==null?void 0:Y.map(L=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-2 rounded text-xs relative group/comment",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300 pr-4 break-words",children:L.text}),e.jsx("span",{className:"text-[9px] text-slate-400 mt-1 block",children:new Date(L.createdAt).toLocaleString("pt-BR")}),e.jsx("button",{onClick:()=>ie(O.id,A.id,L.id),className:"absolute top-1 right-1 text-slate-300 hover:text-rose-500 opacity-0 group-hover/comment:opacity-100 transition-opacity",children:e.jsx(ue,{className:"w-3 h-3"})})]},L.id)),(!A.comments||A.comments.length===0)&&e.jsx("p",{className:"text-xs text-slate-400 italic",children:"Nenhum coment√°rio ainda."})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",placeholder:"Escreva um coment√°rio...",value:H,onChange:L=>Z(L.target.value),onKeyDown:L=>L.key==="Enter"&&Q(O.id,A.id),className:"flex-1 text-xs p-1.5 rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 dark:text-white outline-none focus:border-indigo-500"}),e.jsx("button",{onClick:()=>Q(O.id,A.id),disabled:!H.trim(),className:"bg-indigo-600 text-white p-1.5 rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Is,{className:"w-3 h-3"})})]})]})]})]},A.id)})}),e.jsx("div",{className:`p-2 border-t rounded-b-xl bg-white/40 dark:bg-slate-900/20 ${ne.wrapper.split(" ")[2]}`,children:v===O.id?e.jsxs("div",{className:"space-y-2 p-1 animate-scale-in",children:[e.jsx("input",{autoFocus:!0,className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"T√≠tulo...",value:E,onChange:A=>B(A.target.value)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",className:"w-20 p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"R$",value:z,onChange:A=>M(A.target.value)}),e.jsx("div",{className:"flex-1 flex justify-end gap-1",children:Me.map(A=>e.jsx("button",{onClick:()=>F(A.value),className:`w-6 h-6 rounded-full border-2 ${h===A.value?"border-slate-500 scale-110":"border-transparent"} ${A.bg.split(" ")[0]}`},A.value))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(null),className:"flex-1 py-1 text-xs text-slate-500 bg-slate-200 rounded",children:"Cancelar"}),e.jsx("button",{onClick:()=>V(O.id),className:`flex-1 py-1 text-xs text-white rounded font-bold ${ne.addButtonBg}`,children:"Adicionar"})]})]}):e.jsxs("button",{onClick:()=>g(O.id),className:`w-full py-2 flex items-center justify-center gap-1 rounded-lg transition-colors text-sm font-medium ${ne.button}`,children:[e.jsx(ge,{className:"w-4 h-4"})," Adicionar Card"]})})]},O.id)})})})]})},qe=[{value:"yellow",bg:"bg-amber-100 dark:bg-amber-900/40",border:"border-amber-200 dark:border-amber-800"},{value:"slate",bg:"bg-white dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"},{value:"green",bg:"bg-emerald-100 dark:bg-emerald-900/40",border:"border-emerald-200 dark:border-emerald-800"},{value:"blue",bg:"bg-blue-100 dark:bg-blue-900/40",border:"border-blue-200 dark:border-blue-800"},{value:"rose",bg:"bg-rose-100 dark:bg-rose-900/40",border:"border-rose-200 dark:border-rose-800"},{value:"purple",bg:"bg-purple-100 dark:bg-purple-900/40",border:"border-purple-200 dark:border-purple-800"}],bl=({notes:t,onAdd:r,onUpdate:n,onDelete:l,privacyMode:o})=>{var z,M;const[f,m]=d.useState(""),[I,N]=d.useState(!1),[C,P]=d.useState(null),[w,S]=d.useState({title:"",content:"",color:"slate",isPinned:!1}),v=t.filter(h=>h.title.toLowerCase().includes(f.toLowerCase())||h.content.toLowerCase().includes(f.toLowerCase())).sort((h,F)=>h.isPinned!==F.isPinned?h.isPinned?-1:1:new Date(F.date).getTime()-new Date(h.date).getTime()),g=h=>{h?(P(h.id),S({title:h.title,content:h.content,color:h.color,isPinned:h.isPinned})):(P(null),S({title:"",content:"",color:"slate",isPinned:!1})),N(!0)},E=h=>{h.preventDefault(),!(!w.title.trim()&&!w.content.trim())&&(C?n(C,{title:w.title,content:w.content,color:w.color,isPinned:w.isPinned}):r({title:w.title,content:w.content,color:w.color,isPinned:w.isPinned,date:new Date().toISOString()}),N(!1))},B=(h,F)=>{h.stopPropagation(),n(F.id,{isPinned:!F.isPinned})};return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Le,{className:"w-7 h-7 text-indigo-600"}),"NEXO Notes"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Registre ideias, lembretes e tarefas rapidamente."})]}),e.jsxs("div",{className:"flex w-full md:w-auto gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative group md:w-64",children:[e.jsx(Et,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar notas...",value:f,onChange:h=>m(h.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-sm transition-all shadow-sm"})]}),e.jsxs("button",{onClick:()=>g(),className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2.5 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/20 font-bold text-sm",children:[e.jsx(ge,{className:"w-4 h-4"})," Nova Nota"]})]})]}),e.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4 space-y-4",children:v.length===0?e.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400 flex flex-col items-center",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-4 rounded-full mb-3",children:e.jsx(Le,{className:"w-8 h-8 opacity-50"})}),e.jsx("p",{children:"Nenhuma nota encontrada."})]}):v.map(h=>{const F=qe.find(k=>k.value===h.color)||qe[1];return e.jsxs("div",{onClick:()=>g(h),className:`break-inside-avoid rounded-xl p-5 shadow-sm border transition-all hover:shadow-md cursor-pointer group relative ${F.bg} ${F.border}`,children:[e.jsx("button",{onClick:k=>B(k,h),className:`absolute top-3 right-3 p-1.5 rounded-full transition-colors z-10 ${h.isPinned?"bg-slate-900/10 dark:bg-white/10 text-indigo-600 dark:text-indigo-400":"opacity-0 group-hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/10 text-slate-400"}`,children:h.isPinned?e.jsx(Ct,{className:"w-3 h-3 fill-current"}):e.jsx(Ct,{className:"w-3 h-3"})}),h.title&&e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2 pr-6",children:h.title}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:h.content}),e.jsxs("div",{className:"mt-4 flex justify-between items-center pt-2 border-t border-black/5 dark:border-white/5 opacity-60 group-hover:opacity-100 transition-opacity",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"}),new Date(h.date).toLocaleDateString("pt-BR")]}),e.jsx("button",{onClick:k=>{k.stopPropagation(),l(h.id)},className:"p-1 hover:text-rose-500 transition-colors",children:e.jsx(Te,{className:"w-3.5 h-3.5"})})]})]},h.id)})}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsx("div",{className:`rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-scale-in border transition-colors ${((z=qe.find(h=>h.value===w.color))==null?void 0:z.bg)||"bg-white dark:bg-slate-800"} ${((M=qe.find(h=>h.value===w.color))==null?void 0:M.border)||"border-slate-200"}`,children:e.jsxs("form",{onSubmit:E,className:"flex flex-col h-full max-h-[90vh]",children:[e.jsxs("div",{className:"p-2 flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-1",children:qe.map(h=>e.jsx("button",{type:"button",onClick:()=>S({...w,color:h.value}),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 ${h.value===w.color?"border-indigo-500 scale-110":"border-transparent"} ${h.bg.split(" ")[0]==="bg-white"?"bg-slate-200":h.bg.split(" ")[0]}`},h.value))}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>S({...w,isPinned:!w.isPinned}),className:`p-2 rounded-full transition-colors ${w.isPinned?"text-indigo-600 bg-indigo-500/10":"text-slate-400 hover:bg-black/5"}`,title:"Fixar nota",children:w.isPinned?e.jsx(Ct,{className:"w-5 h-5 fill-current"}):e.jsx(Pa,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>N(!1),className:"p-2 text-slate-500 hover:bg-black/5 rounded-full",children:e.jsx(ue,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"px-6 pb-2",children:e.jsx("input",{type:"text",placeholder:"T√≠tulo",value:w.title,onChange:h=>S({...w,title:h.target.value}),className:"w-full text-xl font-bold bg-transparent border-none outline-none placeholder:text-slate-400 dark:placeholder:text-slate-500 text-slate-800 dark:text-white"})}),e.jsx("div",{className:"px-6 pb-6 flex-1 overflow-y-auto",children:e.jsx("textarea",{placeholder:"Digite sua nota aqui...",value:w.content,onChange:h=>S({...w,content:h.target.value}),className:"w-full h-64 bg-transparent border-none outline-none resize-none text-slate-700 dark:text-slate-200 placeholder:text-slate-400 dark:placeholder:text-slate-500"})}),e.jsx("div",{className:"p-4 flex justify-end border-t border-black/5 dark:border-white/5",children:e.jsx("button",{type:"submit",className:"px-6 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-lg font-bold shadow-md hover:opacity-90 transition-opacity",children:"Salvar"})})]})})})]})},nt=["Hortifruti","Carnes","Latic√≠nios","Mercearia","Padaria","Bebidas","Limpeza","Higiene","Outros"],fl=({items:t,onAdd:r,onUpdate:n,onDelete:l,onClearList:o,onFinishShopping:f,shoppingBudget:m=0,onUpdateBudget:I,hasApiKey:N=!1,privacyMode:C,quickActionSignal:P})=>{const[w,S]=d.useState(""),[v,g]=d.useState("Outros"),[E,B]=d.useState(!1),[z,M]=d.useState(!1),[h,F]=d.useState(""),[k,q]=d.useState(!1),[W,D]=d.useState(!1),[G,X]=d.useState(m.toString()),[H,Z]=d.useState("Alimentos"),[J,de]=d.useState("debit_card"),se=d.useMemo(()=>t.reduce((c,j)=>c+j.actualPrice*j.quantity,0),[t]),p=d.useMemo(()=>{const c={};return nt.forEach(j=>c[j]=[]),t.forEach(j=>{const V=j.category||"Outros";c[V]||(c[V]=[]),c[V].push(j)}),c},[t]);d.useEffect(()=>{if(P){const c=document.getElementById("new-item-input");c&&c.focus()}},[P]);const x=c=>{c.preventDefault(),w.trim()&&(r({name:w.trim(),quantity:1,actualPrice:0,isChecked:!1,category:v}),S(""),g("Outros"))},s=async c=>{if(c.preventDefault(),!h.trim())return;q(!0),(await Mr(h)).forEach(V=>{r({...V,actualPrice:0,isChecked:!1})}),q(!1),M(!1),F("")},a=(c,j,V)=>{const R=Math.max(1,j+V);n(c,{quantity:R})},i=()=>{if(se===0){alert("O valor total est√° zerado. Adicione pre√ßos aos itens para lan√ßar a despesa.");return}f(se,J,H),B(!1)},y=()=>{const c=parseFloat(G);isNaN(c)||I(c),D(!1)},T=c=>C?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢":`R$ ${c.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,b=m>0?se/m*100:0;let _="bg-emerald-500";return b>100?_="bg-rose-500":b>85&&(_="bg-amber-500"),e.jsxs("div",{className:"space-y-6 animate-fade-in relative pb-32 md:pb-0",children:[E&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm p-6 border border-emerald-500/30 animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(mt,{className:"w-6 h-6 text-emerald-500"})," Finalizar Compra"]}),e.jsx("button",{onClick:()=>B(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-xl mb-6 text-center border border-emerald-100 dark:border-emerald-800",children:[e.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 uppercase font-bold mb-1",children:"Valor Final a Lan√ßar"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-700 dark:text-emerald-300",children:T(se)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Categoria da Despesa"}),e.jsxs("select",{value:H,onChange:c=>Z(c.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"Alimentos",children:"Alimentos"}),e.jsx("option",{value:"Casa",children:"Casa"}),e.jsx("option",{value:"Lazer",children:"Lazer"}),e.jsx("option",{value:"Pets",children:"Pets"}),e.jsx("option",{value:"Outros",children:"Outros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Forma de Pagamento"}),e.jsxs("select",{value:J,onChange:c=>de(c.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none",children:[e.jsx("option",{value:"credit_card",children:"Cart√£o de Cr√©dito"}),e.jsx("option",{value:"debit_card",children:"Cart√£o de D√©bito"}),e.jsx("option",{value:"cash",children:"Dinheiro"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"ticket",children:"Vale Alimenta√ß√£o/Refei√ß√£o"})]})]}),e.jsxs("button",{onClick:i,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2 mt-4",children:[e.jsx(Pt,{className:"w-5 h-5"})," Confirmar e Lan√ßar"]})]})]})}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 border border-purple-200 dark:border-purple-800 animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-purple-600"})," Assistente de Compras"]}),e.jsx("button",{onClick:()=>M(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-4",children:'O que vamos comprar? Digite uma receita (ex: "Strogonoff para 4") ou um evento (ex: "Churrasco fim de semana") e eu gero a lista.'}),e.jsxs("form",{onSubmit:s,children:[e.jsx("input",{autoFocus:!0,type:"text",value:h,onChange:c=>F(c.target.value),placeholder:"Ex: Ingredientes para bolo de cenoura...",className:"w-full p-3 rounded-lg border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-purple-500 mb-4"}),e.jsxs("button",{type:"submit",disabled:k||!h,className:"w-full py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold shadow-md disabled:opacity-50 flex items-center justify-center gap-2",children:[k?e.jsx("span",{className:"animate-spin",children:"‚è≥"}):e.jsx(Ma,{className:"w-5 h-5"}),"Gerar Lista"]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(gt,{className:"w-7 h-7 text-indigo-600"}),"Lista de Compras"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Organize sua ida ao mercado."})]}),e.jsxs("button",{onClick:()=>M(!0),disabled:!N,className:`hidden md:flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-xs uppercase tracking-wide transition-all shadow-sm ${N?"bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900/30 dark:text-purple-300":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[e.jsx(Be,{className:"w-4 h-4"})," Gerar com IA"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-slate-400 tracking-wider mb-1",children:"Total Calculado"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:T(se)})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[10px] font-bold uppercase text-slate-400 tracking-wider mb-1 flex items-center justify-end gap-1 cursor-pointer hover:text-indigo-500",onClick:()=>{D(!0),X(m.toString())},children:["Teto de Gastos (Viagem) ",e.jsx(Kt,{className:"w-3 h-3"})]}),W?e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500",children:"R$"}),e.jsx("input",{autoFocus:!0,type:"number",className:"w-24 p-1 text-right font-bold border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:G,onChange:c=>X(c.target.value),onKeyDown:c=>c.key==="Enter"&&y(),onBlur:y})]}):e.jsx("p",{className:"text-xl font-bold text-slate-600 dark:text-slate-400 cursor-pointer hover:text-indigo-500",onClick:()=>{D(!0),X(m.toString())},children:m>0?T(m):"Definir Teto"})]})]}),m>0&&e.jsxs("div",{className:"relative w-full h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:[e.jsx("div",{className:`h-full transition-all duration-500 ${_}`,style:{width:`${Math.min(100,b)}%`}}),b>100&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-[9px] font-bold text-white drop-shadow-md animate-pulse flex items-center gap-1",children:[e.jsx(ht,{className:"w-3 h-3"})," ACIMA DO OR√áAMENTO"]})})]})]})]}),e.jsxs("form",{onSubmit:x,className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 flex gap-2",children:[e.jsx("input",{id:"new-item-input",type:"text",value:w,onChange:c=>S(c.target.value),placeholder:"Adicionar item...",className:"flex-1 p-3 pl-4 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm",autoComplete:"off"}),e.jsx("select",{value:v,onChange:c=>g(c.target.value),className:"hidden md:block w-32 p-3 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm text-sm",children:nt.map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsx("button",{type:"submit",disabled:!w.trim(),className:"px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(ge,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"md:hidden overflow-x-auto pb-2 -mt-4",children:e.jsx("div",{className:"flex gap-2 px-1",children:nt.map(c=>e.jsx("button",{type:"button",onClick:()=>g(c),className:`px-3 py-1.5 rounded-full text-xs font-bold border whitespace-nowrap ${v===c?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-800 text-slate-500 border-slate-200 dark:border-slate-700"}`,children:c},c))})}),e.jsx("div",{className:"space-y-6",children:t.length===0?e.jsxs("div",{className:"p-12 text-center text-slate-400 flex flex-col items-center bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx(gt,{className:"w-16 h-16 mb-4 opacity-20"}),e.jsx("p",{children:"Sua lista est√° vazia."}),N&&e.jsx("p",{className:"text-sm mt-2 text-purple-500 cursor-pointer hover:underline",onClick:()=>M(!0),children:"Experimente usar a IA para criar uma lista!"})]}):nt.map(c=>{const j=p[c];return!j||j.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 px-4 py-2 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Ba,{className:"w-3 h-3"})," ",c]}),e.jsx("span",{className:"text-[10px] font-bold bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-1.5 py-0.5 rounded-full",children:j.length})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:j.map(V=>e.jsxs("div",{className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-colors ${V.isChecked?"bg-slate-50/50 dark:bg-slate-700/30":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:()=>n(V.id,{isChecked:!V.isChecked}),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all flex-shrink-0 ${V.isChecked?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent hover:border-emerald-400"}`,children:e.jsx(Pt,{className:"w-4 h-4"})}),e.jsx("span",{className:`font-medium text-lg truncate ${V.isChecked?"text-slate-400 line-through":"text-slate-700 dark:text-slate-200"}`,children:V.name})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>a(V.id,V.quantity,-1),className:"p-1.5 text-slate-500 hover:text-indigo-600",children:e.jsx(Oa,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-bold text-slate-700 dark:text-white text-sm",children:V.quantity}),e.jsx("button",{onClick:()=>a(V.id,V.quantity,1),className:"p-1.5 text-slate-500 hover:text-indigo-600",children:e.jsx(ge,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0,00",value:V.actualPrice===0?"":V.actualPrice,onChange:R=>n(V.id,{actualPrice:parseFloat(R.target.value)||0}),className:`w-24 pl-8 pr-2 py-2 rounded-lg border outline-none font-bold text-right transition-colors ${V.actualPrice>0?"border-emerald-300 dark:border-emerald-700 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400":"border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:border-indigo-500"}`})]}),e.jsx("button",{onClick:()=>l(V.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:e.jsx(Te,{className:"w-5 h-5"})})]})]},V.id))})]},c)})}),e.jsxs("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 md:hidden z-30 flex gap-2 w-[90%] max-w-sm",children:[e.jsx("button",{onClick:()=>M(!0),disabled:!N,className:"bg-white dark:bg-slate-800 text-purple-600 p-4 rounded-full shadow-lg border border-purple-100 dark:border-purple-900 disabled:opacity-50",children:e.jsx(Be,{className:"w-6 h-6"})}),e.jsxs("button",{onClick:()=>B(!0),disabled:t.length===0,className:"flex-1 bg-slate-900 text-white rounded-full shadow-xl font-bold flex items-center justify-between px-6 hover:scale-105 transition-transform disabled:opacity-70 disabled:scale-100",children:[e.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[e.jsx("span",{className:"text-[10px] text-emerald-400 uppercase font-bold",children:"Total"}),e.jsx("span",{className:"text-lg",children:T(se)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm bg-white/10 px-3 py-1.5 rounded-lg",children:["Finalizar ",e.jsx(jt,{className:"w-4 h-4"})]})]})]})]})},jl=({currentView:t,onNavigate:r,data:n,actions:l,privacyMode:o,hasApiKey:f,quickActionSignal:m})=>{const I=async(C,P,w)=>{const S={description:`Compra de Mercado (${new Date().toLocaleDateString()})`,amount:C,type:"expense",category:w,date:new Date().toISOString().split("T")[0],status:"paid",paymentMethod:P,isRecurring:!1};await l.addTransaction(S),await l.clearShoppingList(),alert("Compra finalizada! Despesa registrada com sucesso."),r(U.TRANSACTIONS)},N=[{id:U.KANBAN,label:"NEXO Flow",icon:zt},{id:U.NOTES,label:"NEXO Notes",icon:Le},{id:U.SHOPPING_LIST,label:"Lista de Compras",icon:gt}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Ferramentas de Organiza√ß√£o"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:N.map(C=>{const P=t===C.id;return e.jsxs("button",{onClick:()=>r(C.id),className:`
                  relative flex flex-col md:flex-row items-center justify-center gap-2 py-3 px-2 md:px-4 rounded-xl font-bold transition-all duration-200 border-2
                  ${P?"bg-purple-600 border-purple-600 text-white shadow-lg shadow-purple-500/30 scale-[1.02]":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:border-purple-300 dark:hover:border-purple-500 hover:bg-slate-50 dark:hover:bg-slate-700"}
                `,children:[e.jsx(C.icon,{className:`w-5 h-5 ${P?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"text-xs md:text-sm text-center md:text-left",children:C.label})]},C.id)})})]}),e.jsxs("div",{className:"animate-fade-in bg-slate-50/50 dark:bg-slate-900/50 rounded-2xl",children:[t===U.KANBAN&&e.jsx(pl,{boards:n.kanbanBoards||[],onSaveBoard:l.saveKanbanBoard,onDeleteBoard:l.deleteKanbanBoard,onAddTransaction:C=>{l.addTransaction(C),alert("Transa√ß√£o criada a partir do card!"),r(U.TRANSACTIONS)},privacyMode:o}),t===U.NOTES&&e.jsx(bl,{notes:n.notes||[],onAdd:l.addNote,onUpdate:l.updateNote,onDelete:l.deleteNote,privacyMode:o}),t===U.SHOPPING_LIST&&e.jsx(fl,{items:n.shoppingList||[],onAdd:l.addShoppingItem,onUpdate:l.updateShoppingItem,onDelete:l.deleteShoppingItem,onClearList:l.clearShoppingList,onFinishShopping:I,shoppingBudget:n.shoppingBudget,onUpdateBudget:l.setShoppingBudget,hasApiKey:f,privacyMode:o,quickActionSignal:m})]})]})},Cs="028.268.001-24",Nl="Alexandre Magno dos Santos Linhares",vl=()=>{const[t,r]=d.useState(null),[n,l]=d.useState(!1),[o,f]=d.useState(!0),{data:m,setData:I,actions:N}=Xr(t,n),[C,P]=d.useState(U.DASHBOARD),[w,S]=d.useState(!1),[v,g]=d.useState(!1),[E,B]=d.useState(!1),[z,M]=d.useState(!1),[h,F]=d.useState(null),[k,q]=d.useState(0),[W,D]=d.useState(!1),[G,X]=d.useState(""),[H,Z]=d.useState(!1),[J,de]=d.useState(!1),[se,p]=d.useState(!1);d.useRef(null),d.useEffect(()=>{const Q=ie=>{ie.preventDefault(),F(ie)};return window.addEventListener("beforeinstallprompt",Q),()=>window.removeEventListener("beforeinstallprompt",Q)},[]);const x=async()=>{if(!h)return;h.prompt();const{outcome:Q}=await h.userChoice;F(null)};d.useEffect(()=>{const Q=Ya(ke,async ie=>{if(r(ie),f(!1),ie){l(!1);const xe=ds("guest_user");xe.transactions.length>0&&confirm("Encontramos dados no modo convidado. Deseja migrar para sua conta na nuvem?")&&(await ms(ie.uid,xe),localStorage.removeItem("finansmart_data_v2_guest_user"))}});return()=>Q()},[]),d.useEffect(()=>{!o&&n&&lr(m,"guest_user")},[m,n,o]);const s=()=>{l(!0);const Q=ds("guest_user");I(Q)},a=async()=>{n?(l(!1),I({transactions:[],investments:[],budgets:[],debts:[],shoppingList:[],unlockedBadges:[],kanbanColumns:[],kanbanBoards:[],notes:[],categories:[]})):await Ha(ke)};d.useEffect(()=>{Z(gs()),gs()&&X(Ue()||""),!localStorage.getItem("nexo_welcome_seen")&&(t||n)&&p(!0)},[t,n]);const i=()=>{G.trim()&&(hs(G.trim()),Z(!0),D(!1),alert("Chave API salva no seu navegador com sucesso!"))},y=()=>{Pr(),X(""),Z(!1),D(!1)},T=()=>{G.trim()&&(hs(G.trim()),Z(!0)),localStorage.setItem("nexo_welcome_seen","true"),p(!1)},b=()=>{navigator.clipboard.writeText(Cs),alert("Chave Pix copiada!")};d.useEffect(()=>{v?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[v]);const _=()=>{document.fullscreenElement?(document.exitFullscreen&&document.exitFullscreen(),B(!1)):(document.documentElement.requestFullscreen().catch(Q=>console.error(Q)),B(!0))},c=()=>{confirm(`‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os dados, configura√ß√µes e chave API deste navegador.

Deseja realmente resetar o app para o estado de f√°brica?`)&&(localStorage.clear(),window.location.reload())},j=()=>{const Q=JSON.stringify(m),ie="data:application/json;charset=utf-8,"+encodeURIComponent(Q),xe=document.createElement("a");xe.setAttribute("href",ie),xe.setAttribute("download","nexo_backup.json"),xe.click()},V=Q=>{var be;const ie=(be=Q.target.files)==null?void 0:be[0];if(!ie)return;const xe=new FileReader;xe.onload=async Pe=>{var Ce;try{const je=JSON.parse((Ce=Pe.target)==null?void 0:Ce.result);confirm("Isso substituir√° seus dados atuais. Tem certeza?")&&(t?await ms(t.uid,je):I(je),alert("Backup restaurado com sucesso!"))}catch{alert("Erro ao ler arquivo de backup.")}},xe.readAsText(ie)},R=Q=>{P(Q),M(!1),setTimeout(()=>q(Date.now()),50)},ae=()=>C===U.DASHBOARD?e.jsx(bs,{data:m,privacyMode:w,onUnlockBadge:N.unlockBadge,onNavigate:Q=>P(Q)}):C===U.AI_ASSISTANT?e.jsx(Vr,{data:m,privacyMode:w}):C===U.SETTINGS?e.jsx(Qr,{data:m,actions:N,privacyMode:w,setPrivacyMode:S,darkMode:v,setDarkMode:g,hasApiKey:H,onOpenKeyModal:()=>D(!0),onExportBackup:j,onImportBackup:V,onFactoryReset:c}):[U.TRANSACTIONS,U.CALENDAR,U.SUBSCRIPTIONS,U.DEBTS].includes(C)?e.jsx(dl,{currentView:C,onNavigate:P,data:m,actions:N,privacyMode:w,hasApiKey:H,quickActionSignal:k}):[U.INVESTMENTS,U.BUDGETS,U.WEALTH_PLANNER].includes(C)?e.jsx(hl,{currentView:C,onNavigate:P,data:m,actions:N,privacyMode:w,hasApiKey:H,quickActionSignal:k}):[U.KANBAN,U.NOTES,U.SHOPPING_LIST].includes(C)?e.jsx(jl,{currentView:C,onNavigate:P,data:m,actions:N,privacyMode:w,hasApiKey:H,quickActionSignal:k}):e.jsx(bs,{data:m,privacyMode:w,onUnlockBadge:N.unlockBadge,onNavigate:Q=>P(Q)});return o?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsx(ft,{className:"w-12 h-12 text-indigo-500 animate-spin"})}):!t&&!n?e.jsx(_r,{onGuestLogin:s}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row font-sans text-slate-900 dark:text-slate-100 transition-colors duration-300",children:[z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden backdrop-blur-sm animate-fade-in",onClick:()=>M(!1)}),e.jsx(Ur,{user:t,isGuest:n,mobileMenuOpen:z,setMobileMenuOpen:M,currentView:C,onNavigate:Q=>P(Q),onLogout:a,privacyMode:w,setPrivacyMode:S,darkMode:v,setDarkMode:g,isFullscreen:E,toggleFullscreen:_,hasKey:H,onOpenKeyModal:()=>D(!0),onOpenDonateModal:()=>de(!0),onExportBackup:j,onImportBackup:V,onFactoryReset:c,canInstall:!!h,onInstall:x}),e.jsxs("main",{className:"flex-1 p-4 md:p-8 pt-20 md:pt-8 pb-8 overflow-y-auto h-screen scroll-smooth",children:[e.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-slate-900 p-4 border-b border-slate-800 z-30 flex items-center justify-between shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>M(!0),className:"text-slate-300 hover:text-white p-1",children:e.jsx(Fa,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-indigo-600 p-1.5 rounded-lg",children:e.jsx(Ft,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-bold text-white tracking-tight",children:"NEXO"})]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[h&&e.jsx("button",{onClick:x,className:"text-emerald-400 hover:text-white animate-pulse",title:"Instalar Aplicativo",children:e.jsx(Es,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>D(!0),className:`${H?"text-emerald-400":"text-rose-500"} hover:text-white relative`,children:[e.jsx(et,{className:"w-5 h-5"}),!H&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2.5 w-2.5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-rose-500"})]})]})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto animate-fade-in",children:[C===U.DASHBOARD&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>R(U.TRANSACTIONS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-blue-100 dark:border-blue-900/30 hover:border-blue-300 transition-all group",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/40 p-2.5 rounded-lg group-hover:bg-blue-600 group-hover:text-white transition-colors text-blue-600 dark:text-blue-400",children:e.jsx(Mt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Nova"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Transa√ß√£o"})]})]}),e.jsxs("button",{onClick:()=>R(U.SHOPPING_LIST),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-emerald-100 dark:border-emerald-900/30 hover:border-emerald-300 transition-all group",children:[e.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/40 p-2.5 rounded-lg group-hover:bg-emerald-600 group-hover:text-white transition-colors text-emerald-600 dark:text-emerald-400",children:e.jsx(gt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Calculadora"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Mercado"})]})]}),e.jsxs("button",{onClick:()=>R(U.DEBTS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-rose-100 dark:border-rose-900/30 hover:border-rose-300 transition-all group",children:[e.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/40 p-2.5 rounded-lg group-hover:bg-rose-600 group-hover:text-white transition-colors text-rose-600 dark:text-rose-400",children:e.jsx(He,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Registrar"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"D√≠vida"})]})]}),e.jsxs("button",{onClick:()=>R(U.BUDGETS),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-pink-100 dark:border-pink-900/30 hover:border-pink-300 transition-all group",children:[e.jsx("div",{className:"bg-pink-100 dark:bg-pink-900/40 p-2.5 rounded-lg group-hover:bg-pink-600 group-hover:text-white transition-colors text-pink-600 dark:text-pink-400",children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Definir"}),e.jsx("p",{className:"font-bold text-slate-700 dark:text-white",children:"Meta/Limite"})]})]})]}),ae()]})]}),e.jsx(Gr,{showWelcome:se,isDonateModalOpen:J,isKeyModalOpen:W,userKeyInput:G,hasKey:H,PIX_KEY:Cs,PIX_NAME:Nl,setShowWelcome:p,setIsDonateModalOpen:de,setIsKeyModalOpen:D,setUserKeyInput:X,handleSaveKey:i,handleRemoveKey:y,handleFinishWelcome:T,copyPix:b})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});const Gs=document.getElementById("root");if(!Gs)throw new Error("Could not find root element to mount to");const wl=La.createRoot(Gs);wl.render(e.jsx(_a.StrictMode,{children:e.jsx(vl,{})}));
